"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const w=require("react"),Jc=require("react-dom");function I0(r){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(r){for(const t in r)if(t!=="default"){const n=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>r[t]})}}return e.default=r,Object.freeze(e)}const be=I0(w);function Yt(r){const e=document.createElement("canvas").getContext("2d");e.fillStyle=r;let t=e.fillStyle;var n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(n,function(s,o,a,l){return"#"+o+o+a+a+l+l});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return{hexString:t,rgb:{red:parseInt(i[1],16),green:parseInt(i[2],16),blue:parseInt(i[3],16)}}}function Hr(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,function(e){return(parseInt(e)^window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>parseInt(e)/4).toString(16)})}function T0(r){const[e,t]=w.useState(r),n=w.useRef(void 0),i=w.useCallback((s,o)=>{n.current=o,t(s)},[]);return w.useEffect(()=>{n.current&&(n.current(e),n.current=void 0)},[e]),[e,i]}function Ul(r,e){return r.reduce((t,n)=>{const i=e(n),s=t.get(i)?t.get(i):[];return t.set(i,[...s,n]),t},new Map)}function R0(){return window.location.search.substring(1).split("&").map(r=>r.split("=")).reduce((r,[e,t])=>r.set(e,decodeURIComponent(t)),new Map)}function Ln(r,e){const t=new Error(e);return t.name=r+" Parse Error",t}function ea(r,e){return Array.from({length:e-r+1},(t,n)=>r+n)}function Jr(r){return{list:r,serialize:e=>{var t;return(t=r.find(n=>n===e))==null?void 0:t.key},deserialize:e=>r.find(t=>t.key===e)}}const P0="resi_",B0="q",M0="c",O0="resi_line",N0="dark-residues",D0="light-residues",L0="letters-only-residues",F0="alignment-aa",k0="alignment-nt",G0="alignment-positions-tostyle-all",H0="alignment-positions-tostyle-query",V0="alignment-positions-tostyle-query-diff",U0="alignment-positions-tostyle-consensus",W0="alignment-positions-tostyle-consensus-diff",z0="aa-alignment-style-default",X0="Default",j0="#cccccc",$0="0.25",Y0="A, R, N, D, C, Q, E, G, H, I, L, K, M, F, P, S, T, W, Y, V",Z0="#33cc00, #cc0000, #6600cc, #0033ff, #ffff00, #6600cc, #0033ff, #33cc00, #009900, #33cc00, #33cc00, #cc0000, #33cc00, #009900, #33cc00, #0099ff, #0099ff, #009900, #009900, #33cc00",q0="#ccf2bf, #f2bfbf, #d9bff2, #bfccff, #ffffbf, #d9bff2, #bfccff, #ccf2bf, #bfe6bf, #ccf2bf, #ccf2bf, #f2bfbf, #ccf2bf, #bfe6bf, #ccf2bf, #bfe6ff, #bfe6ff, #bfe6bf, #bfe6bf, #ccf2bf",J0="black, white, white, white, black, white, white, black, white, black, black, white, black, white, black, white, white, white, white, black",Q0="aa-alignment-style-buried",K0="Buried Index",ev="#cccccc",tv="0.25",rv="A, R, N, D, C, Q, E, G, H, I, L, K, M, F, P, S, T, W, Y, V, B, Z",nv="#00a35c, #00fc03, #00eb14, #00eb14, #0000ff, #00f10e, #00f10e, #009d62, #00d52a, #0054ab, #007b84, #00ff00, #009768, #008778, #00e01f, #00d52a, #00db24, #00a857, #00e619, #005fa0, #00eb14, #00f10e",iv="#bfe8d6, #bffec0, #bffac4, #bffac4, #bfbfff, #bffcc3, #bffcc3, #bfe7d8, #bff5ca, #bfd4ea, #bfdee0, #bfffbf, #bfe5d9, #bfe1dd, #bff7c7, #bff5ca, #bff6c8, #bfe9d5, #bff9c6, #bfd7e7, #bffac4, #bffcc3",sv="white, black, black, black, white, black, black, white, black, white, white, black, white, white, black, black, black, white, black, white, black, black",ov="aa-alignment-style-cinema",av="Cinema",lv="#cccccc",cv="0.25",uv="A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W, Y, Z",hv="#bbbbbb, #808080, #ffff00, #ff0000, #ff0000, #ff00ff, #a52a2a, #00ffff, #bbbbbb, #ffffff, #00ffff, #bbbbbb, #bbbbbb, #008000, #ffffff, #a52a2a, #008000, #00ffff, #008000, #008000, #ffffff, #bbbbbb, #ff00ff, #ff00ff, #808080",dv="#eeeeee, #dfdfdf, #ffffbf, #ffbfbf, #ffbfbf, #ffbfff, #e9caca, #bfffff, #eeeeee, white, #bfffff, #eeeeee, #eeeeee, #bfdfbf, white, #e9caca, #bfdfbf, #bfffff, #bfdfbf, #bfdfbf, white, #eeeeee, #ffbfff, #ffbfff, #dfdfdf",fv="black, black, black, white, white, white, white, black, black, black, black, black, black, white, black, white, white, black, white, white, black, black, white, white, black",pv="aa-alignment-style-clustal",gv="Clustal",mv="#cccccc",vv="0.25",yv="A, R, N, D, C, Q, E, G, H, I, L, K, M, F, P, S, T, W, Y, V, B, Z",bv="#80a0f0, #f01505, #00ff00, #c048c0, #f08080, #00ff00, #c048c0, #f09048, #15a4a4, #80a0f0, #80a0f0, #f01505, #80a0f0, #80a0f0, #ffff00, #00ff00, #00ff00, #80a0f0, #15a4a4, #80a0f0, #ffffff, #ffffff",xv="#dfe7fb, #fbc5c1, #bfffbf, #efd1ef, #fbdfdf, #bfffbf, #efd1ef, #fbe3d1, #c5e8e8, #dfe7fb, #dfe7fb, #fbc5c1, #dfe7fb, #dfe7fb, #ffffbf, #bfffbf, #bfffbf, #dfe7fb, #c5e8e8, #dfe7fb, white, white",Cv="black, white, black, white, black, black, white, black, white, black, black, white, black, black, black, black, black, black, white, black, black, black",_v="aa-alignment-style-helix",Sv="Helix Propensity",Av="#cccccc",wv="0.25",Ev="A, R, N, D, C, Q, E, G, H, I, L, K, M, F, P, S, T, W, Y, V, B, Z",Iv="#e718e7, #6f906f, #1be41b, #778877, #23dc23, #926d92, #ff00ff, #00ff00, #758a75, #8a758a, #ae51ae, #a05fa0, #ef10ef, #986798, #00ff00, #36c936, #47b847, #8a758a, #21de21, #857a85, #49b649, #c936c9",Tv="#f9c5f9, #dbe3db, #c6f8c6, #dde1dd, #c8f6c8, #e4dbe4, #ffbfff, #bfffbf, #dde2dd, #e2dde2, #ebd4eb, #e7d7e7, #fbc3fb, #e5d9e5, #bfffbf, #cdf2cd, #d1edd1, #e2dde2, #c8f7c8, #e1dee1, #d2edd2, #f2cdf2",Rv="white, black, black, black, black, white, white, black, black, black, white, white, white, white, black, black, black, black, black, black, black, white",Pv="aa-alignment-style-hydrophobicity",Bv="Hydrophobicity",Mv="#cccccc",Ov="0.25",Nv="F, I, W, L, V, M, Y, C, A, T, H, G, S, Q, R, K, N, E, P, D",Dv="#ff0000, #ff0000, #ff0606, #ff0606, #ff4c4c, #ff5252, #ff7777, #ffa5a5, #ffc0c0, #e1e1ff, #d0d0ff, #b6b6ff, #a5a5ff, #9595ff, #8787ff, #6969ff, #5959ff, #4f4fff, #1d1dff, #0000ff",Lv="#ffbfbf, #ffbfbf, #ffc1c1, #ffc1c1, #ffd2d2, #ffd4d4, #ffdddd, #ffe9e9, #ffefef, ghostwhite, #f3f3ff, #ededff, #e9e9ff, #e5e5ff, #e1e1ff, #dadaff, #d6d6ff, #d3d3ff, #c7c7ff, #bfbfff",Fv="white, white, white, white, black, black, black, black, black, black, black, black, black, black, black, white, white, white, white, white",kv="aa-alignment-style-lesk",Gv="Lesk",Hv="#cccccc",Vv="0.25",Uv="A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W, Y, Z",Wv="#ffa500, #ffffff, #008000, #ff0000, #ff0000, #008000, #ffa500, #ff00ff, #008000, #ffffff, #ff0000, #008000, #008000, #ff00ff, #ffffff, #008000, #ff00ff, #ff0000, #ffa500, #ffa500, #ffffff, #008000, #008000, #008000, #ffffff",zv="#ffe9bf, white, #bfdfbf, #ffbfbf, #ffbfbf, #bfdfbf, #ffe9bf, #ffbfff, #bfdfbf, white, #ffbfbf, #bfdfbf, #bfdfbf, #ffbfff, white, #bfdfbf, #ffbfff, #ffbfbf, #ffe9bf, #ffe9bf, white, #bfdfbf, #bfdfbf, #bfdfbf, white",Xv="black, black, white, white, white, white, black, white, white, black, white, white, white, white, black, white, white, white, black, black, black, white, white, white, black",jv="aa-alignment-style-mae",$v="MAE",Yv="#cccccc",Zv="0.25",qv="A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W, Y, Z",Jv="#77dd88, #ffffff, #99ee66, #55bb33, #55bb33, #9999ff, #77dd88, #5555ff, #66bbff, #ffffff, #ffcc77, #66bbff, #66bbff, #55bb33, #ffffff, #eeaaaa, #55bb33, #ffcc77, #ff4455, #ff4455, #ffffff, #66bbff, #9999ff, #9999ff, #ffffff",Qv="#ddf7e1, white, #e6fbd9, #d5eecc, #d5eecc, #e6e6ff, #ddf7e1, #d5d5ff, #d9eeff, white, #fff2dd, #d9eeff, #d9eeff, #d5eecc, white, #fbeaea, #d5eecc, #fff2dd, #ffd0d5, #ffd0d5, white, #d9eeff, #e6e6ff, #e6e6ff, white",Kv="black, black, black, black, black, black, black, white, black, black, black, black, black, black, black, black, black, black, black, black, black, black, black, black, black",ey="aa-alignment-style-strand",ty="Strand Propensity",ry="#cccccc",ny="0.25",iy="A, R, N, D, C, Q, E, G, H, I, L, K, M, F, P, S, T, W, Y, V, B, Z",sy="#5858a7, #6b6b94, #64649b, #2121de, #9d9d62, #8c8c73, #0000ff, #4949b6, #60609f, #ecec13, #b2b24d, #4747b8, #82827d, #c2c23d, #2323dc, #4949b6, #9d9d62, #c0c03f, #d3d32c, #ffff00, #4343bc, #4747b8",oy="#d5d5e9, #dadae4, #d8d8e6, #c8c8f7, #e7e7d8, #e2e2dc, #bfbfff, #d2d2ed, #d7d7e7, #fafac4, #ececd3, #d1d1ed, #e0e0df, #f0f0cf, #c8c8f6, #d2d2ed, #e7e7d8, #efefcf, #f4f4ca, #ffffbf, #d0d0ee, #d1d1ed",ay="white, white, white, white, black, black, white, white, white, black, black, white, black, black, white, white, black, black, black, black, white, white",ly="aa-alignment-style-taylor",cy="Taylor",uy="#cccccc",hy="0.25",dy="A, R, N, D, C, Q, E, G, H, I, L, K, M, F, P, S, T, W, Y, V, B, Z",fy="#ccff00, #0000ff, #cc00ff, #ff0000, #ffff00, #ff00cc, #ff0066, #ff9900, #0066ff, #66ff00, #33ff00, #6600ff, #00ff00, #00ff66, #ffcc00, #ff3300, #ff6600, #00ccff, #00ffcc, #99ff00, #ffffff, #ffffff",py="#f2ffbf, #bfbfff, #f2bfff, #ffbfbf, #ffffbf, #ffbff2, #ffbfd9, #ffe6bf, #bfd9ff, #d9ffbf, #ccffbf, #d9bfff, #bfffbf, #bfffd9, #fff2bf, #ffccbf, #ffd9bf, #bff2ff, #bffff2, #e6ffbf, white, white",gy="black, white, white, white, black, white, white, black, white, black, black, white, black, black, black, white, black, black, black, black, black, black",my="aa-alignment-style-turn",vy="Turn Propensity",yy="#cccccc",by="0.25",xy="A, R, N, D, C, Q, E, G, H, I, L, K, M, F, P, S, T, W, Y, V, B, Z",Cy="#2cd3d3, #708f8f, #ff0000, #e81717, #a85757, #3fc0c0, #778888, #ff0000, #708f8f, #00ffff, #1ce3e3, #7e8181, #1ee1e1, #1ee1e1, #f60909, #e11e1e, #738c8c, #738c8c, #9d6262, #07f8f8, #f30c0c, #5ba4a4",_y="#caf4f4, #dbe3e3, #ffbfbf, #f9c5c5, #e9d5d5, #cfefef, #dde1e1, #ffbfbf, #dbe3e3, #bfffff, #c6f8f8, #dfe0e0, #c7f8f8, #c7f8f8, #fdc2c2, #f8c7c7, #dce2e2, #dce2e2, #e7d8d8, #c1fdfd, #fcc2c2, #d6e8e8",Sy="black, black, white, white, white, black, black, white, black, black, black, black, black, black, white, white, black, black, white, black, white, black",Ay="aa-alignment-style-zappo",wy="Zappo",Ey="#cccccc",Iy="0.25",Ty="A, R, N, D, C, Q, E, G, H, I, L, K, M, F, P, S, T, W, Y, V, B, Z",Ry="#ffafaf, #6464ff, #00ff00, #ff0000, #ffff00, #00ff00, #ff0000, #ff00ff, #6464ff, #ffafaf, #ffafaf, #6464ff, #ffafaf, #ffc800, #ff00ff, #00ff00, #00ff00, #ffc800, #ffc800, #ffafaf, #ffffff, #ffffff",Py="#ffebeb, #d8d8ff, #bfffbf, #ffbfbf, #ffffbf, #bfffbf, #ffbfbf, #ffbfff, #d8d8ff, #ffebeb, #ffebeb, #d8d8ff, #ffebeb, #fff1bf, #ffbfff, #bfffbf, #bfffbf, #fff1bf, #fff1bf, #ffebeb, white, white",By="black, white, black, white, black, black, white, white, white, black, black, white, black, black, white, black, black, black, black, black, black, black",My="nt-alignment-style-default",Oy="Default",Ny="#cccccc",Dy="0.25",Ly="A, C, G, T, U, R, Y",Fy="#5050ff, #e00000, #00c000, #e6e600, #cc9900, #2e8b57, #ff8c00",ky="#d3d3ff, #f7bfbf, #bfefbf, #f9f9bf, #f2e6bf, #cbe2d5, #ffe2bf",Gy="white, white, white, black, black, white, black",Hy="nt-alignment-style-nucleotide",Vy="Nucleotide",Uy="#cccccc",Wy="0.25",zy="A, C, G, T, U",Xy="#64f73f, #ffb340, #eb413c, #3c88ee, #3c88ee",jy="#d8fdcf, #ffeccf, #fad0ce, #cee1fb, #cee1fb",$y="black, black, white, white, white",Yy="nt-alignment-style-purine",Zy="Purine/Pyrimidine",qy="#cccccc",Jy="0.25",Qy="A, C, G, R, T, U, Y",Ky="#ff83fa, #40e0d0, #ff83fa, #ff83fa, #40e0d0, #40e0d0, #40e0d0",eb="#ffe0fe, #cff7f3, #ffe0fe, #ffe0fe, #cff7f3, #cff7f3, #cff7f3",tb="black, black, black, black, black, black, black",Je={resiPrefix:P0,queryClass:B0,consensusClass:M0,residueParentClass:O0,darkHueClass:N0,lightHueClass:D0,lettersOnlyHueClass:L0,aaAlignTypeClass:F0,ntAlignTypeClass:k0,styPosAllClass:G0,styPosQueryClass:H0,styPosQueryDiffClass:V0,styPosConsensusClass:U0,styPosConsensusDiffClass:W0,aaStyClass_Default:z0,aaStyDesc_Default:X0,aaStyDefaultLetterColor_Default:j0,aaStyBackgroundAlpha_Default:$0,aaStyColorOrder_Default:Y0,aaStyColors_Default:Z0,aaStyBackgroundColorsLightTheme_Default:q0,aaStyLetterColorsDarkTheme_Default:J0,aaStyClass_Buried:Q0,aaStyDesc_Buried:K0,aaStyDefaultLetterColor_Buried:ev,aaStyBackgroundAlpha_Buried:tv,aaStyColorOrder_Buried:rv,aaStyColors_Buried:nv,aaStyBackgroundColorsLightTheme_Buried:iv,aaStyLetterColorsDarkTheme_Buried:sv,aaStyClass_Cinema:ov,aaStyDesc_Cinema:av,aaStyDefaultLetterColor_Cinema:lv,aaStyBackgroundAlpha_Cinema:cv,aaStyColorOrder_Cinema:uv,aaStyColors_Cinema:hv,aaStyBackgroundColorsLightTheme_Cinema:dv,aaStyLetterColorsDarkTheme_Cinema:fv,aaStyClass_Clustal:pv,aaStyDesc_Clustal:gv,aaStyDefaultLetterColor_Clustal:mv,aaStyBackgroundAlpha_Clustal:vv,aaStyColorOrder_Clustal:yv,aaStyColors_Clustal:bv,aaStyBackgroundColorsLightTheme_Clustal:xv,aaStyLetterColorsDarkTheme_Clustal:Cv,aaStyClass_Helix:_v,aaStyDesc_Helix:Sv,aaStyDefaultLetterColor_Helix:Av,aaStyBackgroundAlpha_Helix:wv,aaStyColorOrder_Helix:Ev,aaStyColors_Helix:Iv,aaStyBackgroundColorsLightTheme_Helix:Tv,aaStyLetterColorsDarkTheme_Helix:Rv,aaStyClass_Hydrophobicity:Pv,aaStyDesc_Hydrophobicity:Bv,aaStyDefaultLetterColor_Hydrophobicity:Mv,aaStyBackgroundAlpha_Hydrophobicity:Ov,aaStyColorOrder_Hydrophobicity:Nv,aaStyColors_Hydrophobicity:Dv,aaStyBackgroundColorsLightTheme_Hydrophobicity:Lv,aaStyLetterColorsDarkTheme_Hydrophobicity:Fv,aaStyClass_Lesk:kv,aaStyDesc_Lesk:Gv,aaStyDefaultLetterColor_Lesk:Hv,aaStyBackgroundAlpha_Lesk:Vv,aaStyColorOrder_Lesk:Uv,aaStyColors_Lesk:Wv,aaStyBackgroundColorsLightTheme_Lesk:zv,aaStyLetterColorsDarkTheme_Lesk:Xv,aaStyClass_MAE:jv,aaStyDesc_MAE:$v,aaStyDefaultLetterColor_MAE:Yv,aaStyBackgroundAlpha_MAE:Zv,aaStyColorOrder_MAE:qv,aaStyColors_MAE:Jv,aaStyBackgroundColorsLightTheme_MAE:Qv,aaStyLetterColorsDarkTheme_MAE:Kv,aaStyClass_Strand:ey,aaStyDesc_Strand:ty,aaStyDefaultLetterColor_Strand:ry,aaStyBackgroundAlpha_Strand:ny,aaStyColorOrder_Strand:iy,aaStyColors_Strand:sy,aaStyBackgroundColorsLightTheme_Strand:oy,aaStyLetterColorsDarkTheme_Strand:ay,aaStyClass_Taylor:ly,aaStyDesc_Taylor:cy,aaStyDefaultLetterColor_Taylor:uy,aaStyBackgroundAlpha_Taylor:hy,aaStyColorOrder_Taylor:dy,aaStyColors_Taylor:fy,aaStyBackgroundColorsLightTheme_Taylor:py,aaStyLetterColorsDarkTheme_Taylor:gy,aaStyClass_Turn:my,aaStyDesc_Turn:vy,aaStyDefaultLetterColor_Turn:yy,aaStyBackgroundAlpha_Turn:by,aaStyColorOrder_Turn:xy,aaStyColors_Turn:Cy,aaStyBackgroundColorsLightTheme_Turn:_y,aaStyLetterColorsDarkTheme_Turn:Sy,aaStyClass_Zappo:Ay,aaStyDesc_Zappo:wy,aaStyDefaultLetterColor_Zappo:Ey,aaStyBackgroundAlpha_Zappo:Iy,aaStyColorOrder_Zappo:Ty,aaStyColors_Zappo:Ry,aaStyBackgroundColorsLightTheme_Zappo:Py,aaStyLetterColorsDarkTheme_Zappo:By,ntStyClass_Default:My,ntStyDesc_Default:Oy,ntStyDefaultLetterColor_Default:Ny,ntStyBackgroundAlpha_Default:Dy,ntStyColorOrder_Default:Ly,ntStyColors_Default:Fy,ntStyBackgroundColorsLightTheme_Default:ky,ntStyLetterColorsDarkTheme_Default:Gy,ntStyClass_Nucleotide:Hy,ntStyDesc_Nucleotide:Vy,ntStyDefaultLetterColor_Nucleotide:Uy,ntStyBackgroundAlpha_Nucleotide:Wy,ntStyColorOrder_Nucleotide:zy,ntStyColors_Nucleotide:Xy,ntStyBackgroundColorsLightTheme_Nucleotide:jy,ntStyLetterColorsDarkTheme_Nucleotide:$y,ntStyClass_Purine:Yy,ntStyDesc_Purine:Zy,ntStyDefaultLetterColor_Purine:qy,ntStyBackgroundAlpha_Purine:Jy,ntStyColorOrder_Purine:Qy,ntStyColors_Purine:Ky,ntStyBackgroundColorsLightTheme_Purine:eb,ntStyLetterColorsDarkTheme_Purine:tb};function Qf(r){const e=Object.keys(Je).reduce((t,n)=>{if(n.indexOf(r+"StyClass_")!==-1){const i=n.split(r+"StyClass_")[1],s=Je[r+"StyColorOrder_"+i].replace(/ /g,"").split(","),o=Je[r+"StyColors_"+i].replace(/ /g,"").split(","),a=Je[r+"StyBackgroundColorsLightTheme_"+i].replace(/ /g,"").split(","),l=Je[r+"StyLetterColorsDarkTheme_"+i].replace(/ /g,"").split(","),c=Je[r+"StyDesc_"+i];t[i]={key:i,description:c,commonName:i,forAlignmentType:r==="aa"?"aminoacid":"nucleotide",className:Je[n],backgroundAlpha:parseFloat(Je[r+"StyBackgroundAlpha_"+i]),defaultLetterColor:Je[r+"StyDefaultLetterColor_"+i],colors:Object.fromEntries(s.map((u,h)=>[s[h],o[h]])),backgroundColorsLightTheme:Object.fromEntries(s.map((u,h)=>[s[h],a[h]])),letterColorsDarkTheme:Object.fromEntries(s.map((u,h)=>[s[h],l[h]]))}}return t},{});return{...e,...Jr(Object.values(e))}}const dr=Qf("aa"),fr=Qf("nt"),Ot=(()=>{const r={AMINOACID:{key:"aminoacid-alignment",description:"Amino Acid Sequences",className:Je.aaAlignTypeClass},NUCLEOTIDE:{key:"nucleotide-alignment",description:"Nucleotide Sequences",className:Je.ntAlignTypeClass}};return{...r,...Jr(Object.values(r))}})(),dt=(()=>{const r={ALL:{key:"all",description:"All",className:Je.styPosAllClass},QUERY:{key:"query",description:"Same as Query",className:Je.styPosQueryClass,shortClassname:Je.queryClass},QUERY_DIFF:{key:"query-diff",description:"Different from Query",className:Je.styPosQueryDiffClass},CONSENSUS:{key:"consensus",description:"Same as Consensus",className:Je.styPosConsensusClass,shortClassname:Je.consensusClass},CONSENSUS_DIFF:{key:"consensus-diff",description:"Different from Consensus",className:Je.styPosConsensusDiffClass}};return{...r,SEARCH_RESULTS_ONLY:{key:"search-results",description:"Search Results",className:Je.styPosAllClass},...Jr(Object.values(r))}})(),Jt=(()=>{const r={LIGHT:{key:"light",description:"Light",className:Je.lightHueClass},DARK:{key:"dark",description:"Dark",className:Je.darkHueClass},NO_BACKGROUND:{key:"lettersonly",description:"Letters Only",className:Je.lettersOnlyHueClass}};return{...r,...Jr(Object.values(r))}})(),qi=Je.resiPrefix,rb=Je.darkHueClass,nb=Je.lightHueClass,ib=Je.residueParentClass;function sb(){let r="";for(var e=32;e<=126;e++)r+=String.fromCharCode(e);return r.split("").reduce((t,n)=>{const s=qi+(n==="."?"dot":n);return t.set(n,new Map([[!0,new Map([[!0,s+" "+Je.consensusClass+" "+Je.queryClass],[!1,s+" "+Je.consensusClass]])],[!1,new Map([[!0,s+" "+Je.queryClass],[!1,s]])]])),t},new Map)}const ob=sb();function Kf(r,e,t){return ob.get(r).get(e).get(t)}const We=class We{constructor(e,t,n){this.singleLetterCode=e,this.threeLetterCode=t,this.fullName=n,this.singleLetterCode=e,this.threeLetterCode=t,this.fullName=n,this.colors=dr.list.reduce((i,s)=>{const o=new Map;return o.set(Jt.LIGHT,{letterColor:Yt(s.colors[e]?s.colors[e]:s.defaultLetterColor),backgroundColor:Yt(s.backgroundColorsLightTheme[e]?s.backgroundColorsLightTheme[e]:"#ffffff")}),o.set(Jt.DARK,{letterColor:Yt(s.letterColorsDarkTheme[e]?s.letterColorsDarkTheme[e]:s.defaultLetterColor),backgroundColor:Yt(s.colors[e]?s.colors[e]:"#ffffff")}),o.set(Jt.NO_BACKGROUND,{letterColor:Yt(s.colors[e]?s.colors[e]:s.defaultLetterColor),backgroundColor:Yt("#ffffff")}),i.set(s,o),i},new Map)}static list(){return We.canonicalAminoAcids}static fromSingleLetterCode(e){return e in this.bySingleLetterCode?this.bySingleLetterCode[e]:We.UNKNOWN}static fromThreeLetterCode(e){return e in this.byThreeLetterCode?We.byThreeLetterCode[e]:We.UNKNOWN}};We.canonicalAminoAcids=[new We("A","ALA","Alanine"),new We("R","ARG","Arginine"),new We("N","ASN","Asparagine"),new We("D","ASP","Aspartic Acid"),new We("C","CYS","Cysteine"),new We("Q","GLU","Glutamine"),new We("E","GLN","Glutamic Acid"),new We("G","GLY","Glycine"),new We("H","HIS","Histidine"),new We("I","ILE","Isoleucine"),new We("L","LEU","Leucine"),new We("K","LYS","Lysine"),new We("M","MET","Methionine"),new We("F","PHE","Phenylalanine"),new We("P","PRO","Proline"),new We("S","SER","Serine"),new We("T","THR","Threonine"),new We("W","TRP","Tryptophan"),new We("Y","TYR","Tyrosine"),new We("V","VAL","Valine"),new We("X","UKN","Unknown")],We.bySingleLetterCode=We.canonicalAminoAcids.reduce((e,t)=>(e[t.singleLetterCode]=t,e),{}),We.byThreeLetterCode=We.canonicalAminoAcids.reduce((e,t)=>(e[t.threeLetterCode]=t,e),{}),We.UNKNOWN=We.bySingleLetterCode.X;let pn=We;const wt=class wt{constructor(e,t){this.singleLetterCode=e,this.fullName=t,this.singleLetterCode=e,this.fullName=t,this.colors=fr.list.reduce((n,i)=>{const s=new Map;return s.set(Jt.LIGHT,{letterColor:Yt(i.colors[e]?i.colors[e]:i.defaultLetterColor),backgroundColor:Yt(i.backgroundColorsLightTheme[e]?i.backgroundColorsLightTheme[e]:"#ffffff")}),s.set(Jt.DARK,{letterColor:Yt(i.letterColorsDarkTheme[e]?i.letterColorsDarkTheme[e]:i.defaultLetterColor),backgroundColor:Yt(i.colors[e]?i.colors[e]:"#ffffff")}),s.set(Jt.NO_BACKGROUND,{letterColor:Yt(i.colors[e]?i.colors[e]:i.defaultLetterColor),backgroundColor:Yt("#ffffff")}),n.set(i,s),n},new Map)}static list(){return wt.allNucleotides}static fromSingleLetterCode(e){return e in this.bySingleLetterCode?this.bySingleLetterCode[e]:wt.UNKNOWN}};wt.allNucleotides=[new wt("A","Adenine"),new wt("C","Cytosine"),new wt("G","Guanine"),new wt("T","Thymidine"),new wt("U","Uracil"),new wt("R","Purine"),new wt("Y","Pyrimidine"),new wt("X","Unknown")],wt.bySingleLetterCode=wt.allNucleotides.reduce((e,t)=>(e[t.singleLetterCode]=t,e),{}),wt.UNKNOWN=wt.bySingleLetterCode.X;let Nr=wt;const ab=r=>r.reduce((e,t)=>(e.has(t.letterA)||e.set(t.letterA,new Map),e.has(t.letterB)||e.set(t.letterB,new Map),e.get(t.letterA).set(t.letterB,t.score),e.get(t.letterB).set(t.letterA,t.score),e),new Map),lo=ab([{letterA:"W",letterB:"F",score:1},{letterA:"L",letterB:"R",score:-2},{letterA:"S",letterB:"P",score:-1},{letterA:"V",letterB:"T",score:0},{letterA:"Q",letterB:"Q",score:5},{letterA:"N",letterB:"A",score:-2},{letterA:"Z",letterB:"Y",score:-2},{letterA:"W",letterB:"R",score:-3},{letterA:"Q",letterB:"A",score:-1},{letterA:"S",letterB:"D",score:0},{letterA:"H",letterB:"H",score:8},{letterA:"S",letterB:"H",score:-1},{letterA:"H",letterB:"D",score:-1},{letterA:"L",letterB:"N",score:-3},{letterA:"W",letterB:"A",score:-3},{letterA:"Y",letterB:"M",score:-1},{letterA:"G",letterB:"R",score:-2},{letterA:"Y",letterB:"I",score:-1},{letterA:"Y",letterB:"E",score:-2},{letterA:"B",letterB:"Y",score:-3},{letterA:"Y",letterB:"A",score:-2},{letterA:"V",letterB:"D",score:-3},{letterA:"B",letterB:"S",score:0},{letterA:"Y",letterB:"Y",score:7},{letterA:"G",letterB:"N",score:0},{letterA:"E",letterB:"C",score:-4},{letterA:"Y",letterB:"Q",score:-1},{letterA:"Z",letterB:"Z",score:4},{letterA:"V",letterB:"A",score:0},{letterA:"C",letterB:"C",score:9},{letterA:"M",letterB:"R",score:-1},{letterA:"V",letterB:"E",score:-2},{letterA:"T",letterB:"N",score:0},{letterA:"P",letterB:"P",score:7},{letterA:"V",letterB:"I",score:3},{letterA:"V",letterB:"S",score:-2},{letterA:"Z",letterB:"P",score:-1},{letterA:"V",letterB:"M",score:1},{letterA:"T",letterB:"F",score:-2},{letterA:"V",letterB:"Q",score:-2},{letterA:"K",letterB:"K",score:5},{letterA:"P",letterB:"D",score:-1},{letterA:"I",letterB:"H",score:-3},{letterA:"I",letterB:"D",score:-3},{letterA:"T",letterB:"R",score:-1},{letterA:"P",letterB:"L",score:-3},{letterA:"K",letterB:"G",score:-2},{letterA:"M",letterB:"N",score:-2},{letterA:"P",letterB:"H",score:-2},{letterA:"F",letterB:"Q",score:-3},{letterA:"Z",letterB:"G",score:-2},{letterA:"X",letterB:"L",score:-1},{letterA:"T",letterB:"M",score:-1},{letterA:"Z",letterB:"C",score:-3},{letterA:"X",letterB:"H",score:-1},{letterA:"D",letterB:"R",score:-2},{letterA:"B",letterB:"W",score:-4},{letterA:"X",letterB:"D",score:-1},{letterA:"Z",letterB:"K",score:1},{letterA:"F",letterB:"A",score:-2},{letterA:"Z",letterB:"W",score:-3},{letterA:"F",letterB:"E",score:-3},{letterA:"D",letterB:"N",score:1},{letterA:"B",letterB:"K",score:0},{letterA:"X",letterB:"X",score:-1},{letterA:"F",letterB:"I",score:0},{letterA:"B",letterB:"G",score:-1},{letterA:"X",letterB:"T",score:0},{letterA:"F",letterB:"M",score:0},{letterA:"B",letterB:"C",score:-3},{letterA:"Z",letterB:"I",score:-3},{letterA:"Z",letterB:"V",score:-2},{letterA:"S",letterB:"S",score:4},{letterA:"L",letterB:"Q",score:-2},{letterA:"W",letterB:"E",score:-3},{letterA:"Q",letterB:"R",score:1},{letterA:"N",letterB:"N",score:6},{letterA:"W",letterB:"M",score:-1},{letterA:"Q",letterB:"C",score:-3},{letterA:"W",letterB:"I",score:-3},{letterA:"S",letterB:"C",score:-1},{letterA:"L",letterB:"A",score:-1},{letterA:"S",letterB:"G",score:0},{letterA:"L",letterB:"E",score:-3},{letterA:"W",letterB:"Q",score:-2},{letterA:"H",letterB:"G",score:-2},{letterA:"S",letterB:"K",score:0},{letterA:"Q",letterB:"N",score:0},{letterA:"N",letterB:"R",score:0},{letterA:"H",letterB:"C",score:-3},{letterA:"Y",letterB:"N",score:-2},{letterA:"G",letterB:"Q",score:-2},{letterA:"Y",letterB:"F",score:3},{letterA:"C",letterB:"A",score:0},{letterA:"V",letterB:"L",score:1},{letterA:"G",letterB:"E",score:-2},{letterA:"G",letterB:"A",score:0},{letterA:"K",letterB:"R",score:2},{letterA:"E",letterB:"D",score:2},{letterA:"Y",letterB:"R",score:-2},{letterA:"M",letterB:"Q",score:0},{letterA:"T",letterB:"I",score:-1},{letterA:"C",letterB:"D",score:-3},{letterA:"V",letterB:"F",score:-1},{letterA:"T",letterB:"A",score:0},{letterA:"T",letterB:"P",score:-1},{letterA:"B",letterB:"P",score:-2},{letterA:"T",letterB:"E",score:-1},{letterA:"V",letterB:"N",score:-3},{letterA:"P",letterB:"G",score:-2},{letterA:"M",letterB:"A",score:-1},{letterA:"K",letterB:"H",score:-1},{letterA:"V",letterB:"R",score:-3},{letterA:"P",letterB:"C",score:-3},{letterA:"M",letterB:"E",score:-2},{letterA:"K",letterB:"L",score:-2},{letterA:"V",letterB:"V",score:4},{letterA:"M",letterB:"I",score:1},{letterA:"T",letterB:"Q",score:-1},{letterA:"I",letterB:"G",score:-4},{letterA:"P",letterB:"K",score:-1},{letterA:"M",letterB:"M",score:5},{letterA:"K",letterB:"D",score:-1},{letterA:"I",letterB:"C",score:-1},{letterA:"Z",letterB:"D",score:1},{letterA:"F",letterB:"R",score:-3},{letterA:"X",letterB:"K",score:-1},{letterA:"Q",letterB:"D",score:0},{letterA:"X",letterB:"G",score:-1},{letterA:"Z",letterB:"L",score:-3},{letterA:"X",letterB:"C",score:-2},{letterA:"Z",letterB:"H",score:0},{letterA:"B",letterB:"L",score:-4},{letterA:"B",letterB:"H",score:0},{letterA:"F",letterB:"F",score:6},{letterA:"X",letterB:"W",score:-2},{letterA:"B",letterB:"D",score:4},{letterA:"D",letterB:"A",score:-2},{letterA:"S",letterB:"L",score:-2},{letterA:"X",letterB:"S",score:0},{letterA:"F",letterB:"N",score:-3},{letterA:"S",letterB:"R",score:-1},{letterA:"W",letterB:"D",score:-4},{letterA:"V",letterB:"Y",score:-1},{letterA:"W",letterB:"L",score:-2},{letterA:"H",letterB:"R",score:0},{letterA:"W",letterB:"H",score:-2},{letterA:"H",letterB:"N",score:1},{letterA:"W",letterB:"T",score:-2},{letterA:"T",letterB:"T",score:5},{letterA:"S",letterB:"F",score:-2},{letterA:"W",letterB:"P",score:-4},{letterA:"L",letterB:"D",score:-4},{letterA:"B",letterB:"I",score:-3},{letterA:"L",letterB:"H",score:-3},{letterA:"S",letterB:"N",score:1},{letterA:"B",letterB:"T",score:-1},{letterA:"L",letterB:"L",score:4},{letterA:"Y",letterB:"K",score:-2},{letterA:"E",letterB:"Q",score:2},{letterA:"Y",letterB:"G",score:-3},{letterA:"Z",letterB:"S",score:0},{letterA:"Y",letterB:"C",score:-2},{letterA:"G",letterB:"D",score:-1},{letterA:"B",letterB:"V",score:-3},{letterA:"E",letterB:"A",score:-1},{letterA:"Y",letterB:"W",score:2},{letterA:"E",letterB:"E",score:5},{letterA:"Y",letterB:"S",score:-2},{letterA:"C",letterB:"N",score:-3},{letterA:"V",letterB:"C",score:-1},{letterA:"T",letterB:"H",score:-2},{letterA:"P",letterB:"R",score:-2},{letterA:"V",letterB:"G",score:-3},{letterA:"T",letterB:"L",score:-1},{letterA:"V",letterB:"K",score:-2},{letterA:"K",letterB:"Q",score:1},{letterA:"R",letterB:"A",score:-1},{letterA:"I",letterB:"R",score:-3},{letterA:"T",letterB:"D",score:-1},{letterA:"P",letterB:"F",score:-4},{letterA:"I",letterB:"N",score:-3},{letterA:"K",letterB:"I",score:-3},{letterA:"M",letterB:"D",score:-3},{letterA:"V",letterB:"W",score:-3},{letterA:"W",letterB:"W",score:11},{letterA:"M",letterB:"H",score:-2},{letterA:"P",letterB:"N",score:-2},{letterA:"K",letterB:"A",score:-1},{letterA:"M",letterB:"L",score:2},{letterA:"K",letterB:"E",score:1},{letterA:"Z",letterB:"E",score:4},{letterA:"X",letterB:"N",score:-1},{letterA:"Z",letterB:"A",score:-1},{letterA:"Z",letterB:"M",score:-1},{letterA:"X",letterB:"F",score:-1},{letterA:"K",letterB:"C",score:-3},{letterA:"B",letterB:"Q",score:0},{letterA:"X",letterB:"B",score:-1},{letterA:"B",letterB:"M",score:-3},{letterA:"F",letterB:"C",score:-2},{letterA:"Z",letterB:"Q",score:3},{letterA:"X",letterB:"Z",score:-1},{letterA:"F",letterB:"G",score:-3},{letterA:"B",letterB:"E",score:1},{letterA:"X",letterB:"V",score:-1},{letterA:"F",letterB:"K",score:-3},{letterA:"B",letterB:"A",score:-2},{letterA:"X",letterB:"R",score:-1},{letterA:"D",letterB:"D",score:6},{letterA:"W",letterB:"G",score:-2},{letterA:"Z",letterB:"F",score:-3},{letterA:"S",letterB:"Q",score:0},{letterA:"W",letterB:"C",score:-2},{letterA:"W",letterB:"K",score:-3},{letterA:"H",letterB:"Q",score:0},{letterA:"L",letterB:"C",score:-1},{letterA:"W",letterB:"N",score:-4},{letterA:"S",letterB:"A",score:1},{letterA:"L",letterB:"G",score:-4},{letterA:"W",letterB:"S",score:-3},{letterA:"S",letterB:"E",score:0},{letterA:"H",letterB:"E",score:0},{letterA:"S",letterB:"I",score:-2},{letterA:"H",letterB:"A",score:-2},{letterA:"S",letterB:"M",score:-1},{letterA:"Y",letterB:"L",score:-1},{letterA:"Y",letterB:"H",score:2},{letterA:"Y",letterB:"D",score:-3},{letterA:"E",letterB:"R",score:0},{letterA:"X",letterB:"P",score:-2},{letterA:"G",letterB:"G",score:6},{letterA:"G",letterB:"C",score:-3},{letterA:"E",letterB:"N",score:0},{letterA:"Y",letterB:"T",score:-2},{letterA:"Y",letterB:"P",score:-3},{letterA:"T",letterB:"K",score:-1},{letterA:"A",letterB:"A",score:4},{letterA:"P",letterB:"Q",score:-1},{letterA:"T",letterB:"C",score:-1},{letterA:"V",letterB:"H",score:-3},{letterA:"T",letterB:"G",score:-2},{letterA:"I",letterB:"Q",score:-3},{letterA:"Z",letterB:"T",score:-1},{letterA:"C",letterB:"R",score:-3},{letterA:"V",letterB:"P",score:-2},{letterA:"P",letterB:"E",score:-1},{letterA:"M",letterB:"C",score:-1},{letterA:"K",letterB:"N",score:0},{letterA:"I",letterB:"I",score:4},{letterA:"P",letterB:"A",score:-1},{letterA:"M",letterB:"G",score:-3},{letterA:"T",letterB:"S",score:1},{letterA:"I",letterB:"E",score:-3},{letterA:"P",letterB:"M",score:-2},{letterA:"M",letterB:"K",score:-1},{letterA:"I",letterB:"A",score:-1},{letterA:"P",letterB:"I",score:-3},{letterA:"R",letterB:"R",score:5},{letterA:"X",letterB:"M",score:-1},{letterA:"L",letterB:"I",score:2},{letterA:"X",letterB:"I",score:-1},{letterA:"Z",letterB:"B",score:1},{letterA:"X",letterB:"E",score:-1},{letterA:"Z",letterB:"N",score:0},{letterA:"X",letterB:"A",score:0},{letterA:"B",letterB:"R",score:-1},{letterA:"B",letterB:"N",score:3},{letterA:"F",letterB:"D",score:-3},{letterA:"X",letterB:"Y",score:-1},{letterA:"Z",letterB:"R",score:0},{letterA:"F",letterB:"H",score:-1},{letterA:"B",letterB:"F",score:-3},{letterA:"F",letterB:"L",score:0},{letterA:"X",letterB:"Q",score:-1},{letterA:"B",letterB:"B",score:4}]),ar=(()=>{function r(o,a){const l=o.sequence.length<a.sequence.length?o.sequence.length:a.sequence.length;let c=Math.abs(o.sequence.length-a.sequence.length);for(var u=0;u<l;u++)o.sequence[u]!==a.sequence[u]&&(c+=1);return c}function e(o,a){const l=o.sequence.length<a.sequence.length?o.sequence.length:a.sequence.length;let c=0;for(var u=0;u<l;u++)lo.has(o.sequence[u])&&lo.get(o.sequence[u]).has(a.sequence[u])&&(c+=lo.get(o.sequence[u]).get(a.sequence[u]));return c}const t={INPUT:{key:"as-input",description:"As input",targetAlignmentType:"both",sortFn:(o,a)=>o},HAMMING_DIST_QUERY:{key:"hamming-dist-to-query",description:"Hamming distance to query sequence",targetAlignmentType:"both",sortFn:(o,a)=>{const l=a.getQuery();return o.map(c=>c).sort((c,u)=>{const h=r(l,c),d=r(l,u);return h-d})}},HAMMING_DIST_CONSENSUS:{key:"hamming-dist-to-consensus",description:"Hamming distance to consensus sequence",targetAlignmentType:"both",sortFn:(o,a)=>{const l=a.getConsensus();return o.map(c=>c).sort((c,u)=>{const h=r(l,c),d=r(l,u);return h-d})}},BLOSUM62_SCORE_QUERY:{key:"blosum-score-to-query",description:"BLOSUM62 score to query sequence",targetAlignmentType:"aminoacid",sortFn:(o,a)=>{const l=a.getQuery();return o.map(c=>c).sort((c,u)=>{const h=e(l,c);return e(l,u)-h})}},BLOSUM62_SCORE_CONSENSUS:{key:"blosum-score-to-consensus",description:"BLOSUM62 score to consensus sequence",targetAlignmentType:"aminoacid",sortFn:(o,a)=>{const l=a.getConsensus();return o.map(c=>c).sort((c,u)=>{const h=e(l,c);return e(l,u)-h})}}},n=Jr(Object.values(t)),i=n.list.reduce((o,a)=>((a.targetAlignmentType==="aminoacid"||a.targetAlignmentType==="both")&&o.push(a),o),[]),s=n.list.reduce((o,a)=>((a.targetAlignmentType==="nucleotide"||a.targetAlignmentType==="both")&&o.push(a),o),[]);return{ALL_AMINO_ACID_SORTERS:i,ALL_NUCLEOTIDE_SORTERS:s,...t,...Jr(Object.values(t))}})();var lr=(r=>(r.ID="@@id",r.ACTUAL_ID="@@actualId",r.DESCRIPTION="@@description",r.BEGIN="@@begin",r.END="@@end",r.LINK="@@link",r.REAL_LENGTH="@@realLength",r.ALIGNED_LENGTH="@@alignedLength",r.LEFT_GAP_COUNT="@@leftGapCount",r.INTERNAL_GAP_COUNT="@@internalGapCount",r.RIGHT_GAP_COUNT="@@rightGapCount",r))(lr||{});const lb=[{name:"UniProt",pattern:/^sp\|([OPQ][0-9][A-Z0-9]{3}[0-9]|[A-NR-Z][0-9](?:[A-Z][A-Z0-9]{2}[0-9]){1,2})\|([A-Z0-9]{1,5}_[A-Z0-9]{1,5})$/,toUrl:(r,e)=>`https://www.uniprot.org/uniprotkb?query=${e[1]}`,parseAnnotations:Ri},{name:"UniProt",pattern:/^tr\|([OPQ][0-9][A-Z0-9]{3}[0-9]|[A-NR-Z][0-9](?:[A-Z][A-Z0-9]{2}[0-9]){1,2})\|\1_[A-Z0-9]{1,5}$/,toUrl:(r,e)=>`https://www.uniprot.org/uniprotkb?query=${e[1]}`,parseAnnotations:Ri},{name:"UniProt",pattern:/^([OPQ][0-9][A-Z0-9]{3}[0-9]|[A-NR-Z][0-9](?:[A-Z][A-Z0-9]{2}[0-9]){1,2})(?:\.(\d+))?$/,toUrl:(r,e)=>`https://www.uniprot.org/uniprotkb?query=${e[1]}`,parseAnnotations:Ri},{name:"UniRef",pattern:/^(UniRef(?:100|90|50)_(?:[OPQ][0-9][A-Z0-9]{3}[0-9]|[A-NR-Z][0-9](?:[A-Z][A-Z0-9]{2}[0-9]){1,2}|UPI[A-Z0-9]+))(?:\.(\d+))?$/,toUrl:(r,e)=>`https://www.uniprot.org/uniref?query=${e[1]}`,parseAnnotations:Ri},{name:"UniProt",pattern:/^([A-Z0-9]{1,5}_[A-Z0-9]{1,5})(?:\.(\d+))?$/,toUrl:(r,e)=>`https://www.uniprot.org/uniprotkb?query=${e[1]}`,parseAnnotations:Ri},{name:"UniParc",pattern:/^(UPI[A-Z0-9]+)(?:\.(\d+))?$/,toUrl:(r,e)=>`https://www.uniprot.org/uniparc?query=${e[1]}`,parseAnnotations:ku},{name:"MGnify",pattern:/^(MGYS\d+)(?:\.(\d+))?$/,toUrl:(r,e)=>`https://www.ebi.ac.uk/metagenomics/studies/${e[1]}`,parseAnnotations:ku}];function cb(r){let e=r.replace(/@/g,"").trim();return e=e.charAt(0).toUpperCase()+e.slice(1),e=e.replace(/([a-z])([A-Z])/g,"$1 $2"),e=e.replace(/([A-Z])([A-Z][a-z])/g,"$1 $2"),e}function ku(r,e){const t={};return e&&(t["@@description"]=e),t}function ep(r,e){const t={},n=Array.from(e.matchAll(/(\S+)=(.+?)(?=\s+\S+=|$)/g));let i=e;n.length>0&&(i=e.substring(0,n[0].index)),i&&(t["@@description"]=i);for(const s of n)t[s[1]]=s[2];return t}const Gu={OS:"Organism",OX:"Organism ID",GN:"Gene",PE:"Evidence",SV:"Ver",n:"Members",Tax:"Taxon",TaxID:"Taxon ID",RepID:"Representative",status:"Status"},Hu={1:"Protein",2:"Transcript",3:"Homology",4:"Predicted",5:"Uncertain"};function Ri(r,e){const t=ep(r,e);for(const n of Object.keys(t))n==="PE"&&t.PE!==void 0&&t.PE in Hu&&(t.PE=Hu[t.PE]),n in Gu&&(t[Gu[n]]=t[n],delete t[n]);return t}function ub(r){return r==="-"||r==="."}function hb(r){let e=0,t=0,n=0,i=0,s=0,o=!1;for(let l=0;l<r.length;++l)ub(r[l])?++t:(++e,o?t>0&&(i+=t,t=0):(o=!0,n=t,t=0));s=t;const a=r.length-n-s;return{realLength:e,alignedLength:a,leftGapCount:n,internalGapCount:i,rightGapCount:s}}function tp(r,e,t){const{realLength:n,alignedLength:i,leftGapCount:s,internalGapCount:o,rightGapCount:a}=hb(e);let l=r,c=1,u=n;const h=r.match(/^([^/]*)\/(\d+)-(\d+)$/);h&&(l=h[1],c=Number(h[2]),u=Number(h[3]));const d={"@@id":r,"@@actualId":l,"@@begin":c,"@@end":u,"@@link":void 0,"@@realLength":n,"@@alignedLength":i,"@@leftGapCount":s,"@@internalGapCount":o,"@@rightGapCount":a};let f=!1;for(const g of lb){const m=l.match(g.pattern);if(m&&(f=!0,d["@@link"]=g.toUrl(l,m),t)){const p=g.parseAnnotations(l,t);Object.assign(d,p)}}if(!f&&t){const g=ep(l,t);Object.assign(d,g)}return d}const db=(r,e)=>{let t={};for(let o=0,a=r.length;o<a;o++){const l=r[o];for(let c=0,u=l.length;c<u;c++){const h=l.charCodeAt(c);t[h]=!0}}const n=Object.keys(t).map(o=>String.fromCharCode(parseInt(o))),i=new Map;for(let o=0;o<e;o++)i.set(o,Object.keys(t).reduce((a,l)=>(a[l]=0,a),{}));const s={};Object.keys(t).forEach(o=>{s[o]=0});for(let o=0,a=r.length;o<a;o++){const l=r[o];for(let c=0,u=l.length;c<u;c++){const h=l.charCodeAt(c);s[h]+=1,i.get(c)[h]+=1}}return{allUniqueChars:n,globalCharCodeCounts:s,positionalCharCodeCounts:i}},Ki=class Ki{static normalizeLetterCounts(e,t){const n=Object.keys(e).reduce((i,s)=>((!t||t.includes(s))&&(i+=e[s]),i),0);return Object.keys(e).reduce((i,s)=>((!t||t.includes(s))&&(i[s]=e[s]/n),i),{})}constructor(e){const{name:t,sequencesAsInput:n,removeDuplicateSequences:i=!1,supressParseTime:s,overrideQuery:o}=e;this.uuid=Hr(),this.name=t,this.sortedSequencesCache=new Map;let a=new Date,l=0;const c=Array.from(n.reduce((m,p,v)=>(m.has(p.sequence)?l+=1:m.set(p.sequence,p),m),new Map).values());i?(this.numberDuplicateSequencesInAlignment=0,this.numberRemovedDuplicateSequences=l,this.sortedSequencesCache.set(ar.INPUT,c)):(this.numberDuplicateSequencesInAlignment=l,this.numberRemovedDuplicateSequences=0,this.sortedSequencesCache.set(ar.INPUT,n));const u=this.sortedSequencesCache.get(ar.INPUT);this.querySequence=o||(u[0]?{...u[0]}:{sequence:"",annotations:{[lr.ID]:"query",[lr.ACTUAL_ID]:"query"}}),this.predictedNT=!0,a=new Date;let h={};for(let m=0,p=u.length;m<p;m++){const v=u[m].sequence;h[v.length]=!0}if(Object.keys(h).length>1)throw Error("Alignment sequences must all be the same length, but multiple sequence lengths were observed: "+Object.keys(h).join(", "));this.maxSequenceLength=parseInt(Object.keys(h)[0]),this.maxSequenceLength=this.maxSequenceLength?this.maxSequenceLength:0;const{allUniqueChars:d,globalCharCodeCounts:f,positionalCharCodeCounts:g}=db(u.map(m=>m.sequence),this.maxSequenceLength);this.allRepresentedCharacters=o?o.sequence.split("").reduce((m,p)=>(m.indexOf(p)===-1&&(m=m+p),m),d.join("")).split(""):d,this.positionalLetterCounts=Array.from(g).reduce((m,[p,v])=>(m.set(p,Object.keys(v).reduce((x,b)=>{if(v[b]){const _=String.fromCharCode(parseInt(b));x[_]=v[b]}return x},{})),m),new Map),this.globalAlphaLetterCounts=Object.keys(f).reduce((m,p)=>{if(f[p]){const v=String.fromCharCode(parseInt(p));m[v]=f[p]}return m},{}),this.predictedNT=!d.find(m=>{const p=m.match(/[a-z]/);return m.match(/[A-Z]/)||p?Nr.fromSingleLetterCode(m)===Nr.UNKNOWN:!1}),this.allUpperAlphaLettersInAlignmentSorted=d.reduce((m,p)=>(p.match(/[A-Z]/)&&m.push(p),m),[]).sort(),this.consensus={annotations:{[lr.ID]:"consensus",[lr.ACTUAL_ID]:"consensus"},sequence:Array.from(this.positionalLetterCounts).map(([m,p])=>Object.entries(p).sort((v,x)=>{const b=!!v[0].match(/[a-z]/),_=!!v[0].match(/[A-Z]/),y=!!x[0].match(/[a-z]/),I=!!x[0].match(/[A-Z]/);return b===y&&_===I?x[1]-v[1]:_?-1:I?1:b?-1:y?1:0}).map(v=>v[0])[0]).join("")},this.annotationFields={};for(const m of u)for(const p of Object.keys(m.annotations))p in this.annotationFields||(this.annotationFields[p]={key:p,name:cb(p)});s||console.log("done parsing alignment. took "+(new Date().getTime()-a.getTime())+"ms")}getAllRepresentedCharacters(){return this.allRepresentedCharacters}getNumberDuplicateSequencesInAlignment(){return this.numberDuplicateSequencesInAlignment}getNumberRemovedDuplicateSequences(){return this.numberRemovedDuplicateSequences}getPredictedType(){return this.predictedNT?Ot.NUCLEOTIDE:Ot.AMINOACID}getDefaultColorScheme(){return this.predictedNT?fr.list[0]:dr.list[0]}getUUID(){return this.uuid}getName(){return this.name}getConsensus(){return this.consensus}getGapsPerColumn(){return Array.from(this.positionalLetterCounts).map(([e,t])=>isNaN(t["-"])?0:t["-"])}getGapCountAtColumn(e){const t=this.positionalLetterCounts.get(e);return!t||!t["-"]?0:t["-"]}getGlobalAlphaLetterCounts(e,t){return e?Ki.normalizeLetterCounts(this.globalAlphaLetterCounts,t):t?Object.keys(this.globalAlphaLetterCounts).reduce((n,i)=>(t.includes(i)&&(n[i]=this.globalAlphaLetterCounts[i]),n),{}):this.globalAlphaLetterCounts}getSequenceLength(){return this.maxSequenceLength}getSequenceCount(){return this.sortedSequencesCache.get(ar.INPUT).length}getPositionalLetterCounts(e,t){return e||t?Array.from(this.positionalLetterCounts).reduce((n,[i,s])=>(n.set(i,e?Ki.normalizeLetterCounts(s,t):Object.keys(s).reduce((o,a)=>(t.includes(a)&&(o[a]=s[a]),o),{})),n),new Map):this.positionalLetterCounts}getSequences(e,t){return e=e||ar.INPUT,t=t||!1,e!==ar.INPUT&&(!this.sortedSequencesCache.has(e)||t)&&this.sortedSequencesCache.set(e,e.sortFn(this.sortedSequencesCache.get(ar.INPUT),this)),this.sortedSequencesCache.get(e)}getAnnotationFields(){return this.annotationFields}getAllUpperAlphaLettersInAlignmentSorted(){return this.allUpperAlphaLettersInAlignmentSorted}getQuery(){return this.querySequence}};Ki.getPositionalLetterColors=e=>{const{allPossibleChars:t,sequences:n,querySequence:i,consensusSequence:s,alignmentType:o,positionsToStyle:a,residueColoring:l,aaColorScheme:c=dr.list[0],ntColorScheme:u=fr.list[0]}=e,h=o===Ot.AMINOACID?c:u;if(n.length<1)return{};const d=o===Ot.AMINOACID?pn:Nr,f=d.UNKNOWN.colors.get(h).get(l),g={};for(var m=0,p=n[0].length;m<p;m++){const b={};for(var v=0,x=t.length;v<x;v++){const _=t[v],y=d.fromSingleLetterCode(_).colors.get(h).get(l),I=a===dt.ALL||a===dt.QUERY&&i[m]===_||a===dt.QUERY_DIFF&&i[m]!==_||a===dt.CONSENSUS&&s[m]===_||a===dt.CONSENSUS_DIFF&&s[m]!==_?y:f;b[_]={letter:_,...I}}g[m]=b}return g};let gn=Ki;class ta extends gn{static fromFileContents(e,t,n){var l;const i=t.trim();if(i.length<1||i[0]!==">")throw Ln("Fasta","File needs to begin with '>'");const s=i.split(">");for(var o=[],a=0;a<s.length;a++){const c=s[a].split(/\r?\n/);if(c.length>1){const u=(l=c[0].match(/^\s*(?<id>\S+)(?:\s+(?<description>.+\S+)\s*)?$/))==null?void 0:l.groups,h=c.slice(1).join("");u&&o.push({sequence:h,annotations:tp(u.id,h,u.description)})}}try{return new ta({name:e,sequencesAsInput:o,removeDuplicateSequences:n})}catch(c){throw Ln("Fasta",c.message)}}}class ra extends gn{constructor(e){super(e),this.metadata=e.metadata}static fromFileContents(e,t,n){var a,l;const i=t.trim().split(/\r?\n/);if(i.length<3)throw Ln("Stockholm","The file length is less than 3 rows");if(i[0].startsWith("# STOCKHOLM 1.0")===!1)throw Ln("Stockholm","The first line must be '# STOCKHOLM 1.0'");if(i[i.length-1]!=="//")throw Ln("Stockholm","The last line must be '//'");const s={GF:{},GS:{},GR:{},GC:{}},o=[];i.slice(1,i.length-1).forEach((c,u)=>{if(c=c.trim(),c&&!c.startsWith("#")){const h=c.match(/^(\S+)\s(.*)/).slice(1),d=h[0].trim();o.push({annotations:{[lr.ID]:d,[lr.ACTUAL_ID]:d},sequence:h[1].trim()})}else if(c.startsWith("#"))if(c.length<8||["GF","GS","GR","GC"].includes(c.substr(2,2))===!1)console.warn("Unexpected metadata line in Stockholm alignment: "+c);else{const h=c.substr(2,2),d=c.substr(5).trim().match(/^(\S+)\s(.*)/).slice(1);if(d[1]=d[1].trim(),h==="GF")d[0]in s.GF?s.GF[d[0]]+=" "+d[1]:s.GF[d[0]]=d[1];else if(h==="GS"){const f=d[0],g=d[1].trim().match(/^(\S+)\s(.*)/).slice(1);f in s.GS||(s.GS[f]={}),g[0]in s.GS[f]||(s.GS[f][g[0]]=[]),s.GS[f][g[0]].push(g[1])}else if(h==="GR"){const f=d[0],g=d[1].trim().match(/^(\S+)\s(.*)/).slice(1);f in s.GR||(s.GR[f]={}),s.GR[f][g[0]]=g[1]}else h==="GC"&&(s.GC[d[0]]=d[1])}});for(const c of o){const u=c.annotations[lr.ID],h=((l=(a=s.GS[u])==null?void 0:a.DE)==null?void 0:l.join(""))??"";if(Object.assign(c.annotations,tp(u,c.sequence,h)),s.GS[u])for(const d of Object.keys(s.GS[u]))d!=="DE"&&(c.annotations[d]=s.GS[u][d].join(" "))}try{return new ra({name:e,sequencesAsInput:o,metadata:s,removeDuplicateSequences:n})}catch(c){throw Ln("Stockholm",c.message)}}getMetadata(){return this.metadata}}class Wl extends Error{constructor(e,t,n){super(e),this.errors=t,this.possibleResolution=n}}const Dn=class Dn{static async loadAlignmentFromURL(e,t,n,i,s){let o;try{o=new File([await(await fetch(`${e}`)).blob()],s||e.substring(e.lastIndexOf("/")+1))}catch(a){console.error("Unable to load alignment by URL '"+e+"'",a);const l=new Wl("Unable to fetch alignment in URL",[{name:"Browser-reported error message",message:a.message}],"Possible causes: (1) The alignment is not sent using SSL or (2) the server that hosts the alignment has not enabled CORS. To be assessible to Alignment Viewer 2, the alignment must be served by HTTPS and the server must enable CORS.");i(l);return}try{Dn.loadAlignmentFromFile(o,t,n,i)}catch(a){i(a)}}static async loadAlignmentFromFile(e,t,n,i){var s=new FileReader;s.onload=o=>{try{n(Dn.loadAlignmentFromText(e.name,s.result,t))}catch(a){i(a)}},s.readAsText(e)}static loadAlignmentFromText(e,t,n){const i=new Wl("Alignment Format Error",[]);for(let s=0;s<Dn.AlignmentFileTypes.length;s++)try{return Dn.AlignmentFileTypes[s].fromFileContents(e,t,n)}catch(o){i.errors.push(o)}throw i}};Dn.AlignmentFileTypes=[ra,ta];let Ci=Dn;var zl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qc(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function fb(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var As={exports:{}},Pi={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vu;function pb(){if(Vu)return Pi;Vu=1;var r=w,e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var u,h={},d=null,f=null;c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),l.ref!==void 0&&(f=l.ref);for(u in l)n.call(l,u)&&!s.hasOwnProperty(u)&&(h[u]=l[u]);if(a&&a.defaultProps)for(u in l=a.defaultProps,l)h[u]===void 0&&(h[u]=l[u]);return{$$typeof:e,type:a,key:d,ref:f,props:h,_owner:i.current}}return Pi.Fragment=t,Pi.jsx=o,Pi.jsxs=o,Pi}var Bi={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uu;function gb(){return Uu||(Uu=1,process.env.NODE_ENV!=="production"&&function(){var r=w,e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.for("react.offscreen"),g=Symbol.iterator,m="@@iterator";function p(F){if(F===null||typeof F!="object")return null;var J=g&&F[g]||F[m];return typeof J=="function"?J:null}var v=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function x(F){{for(var J=arguments.length,ee=new Array(J>1?J-1:0),ye=1;ye<J;ye++)ee[ye-1]=arguments[ye];b("error",F,ee)}}function b(F,J,ee){{var ye=v.ReactDebugCurrentFrame,Ve=ye.getStackAddendum();Ve!==""&&(J+="%s",ee=ee.concat([Ve]));var Ue=ee.map(function(Ne){return String(Ne)});Ue.unshift("Warning: "+J),Function.prototype.apply.call(console[F],console,Ue)}}var _=!1,y=!1,I=!1,A=!1,P=!1,L;L=Symbol.for("react.module.reference");function V(F){return!!(typeof F=="string"||typeof F=="function"||F===n||F===s||P||F===i||F===c||F===u||A||F===f||_||y||I||typeof F=="object"&&F!==null&&(F.$$typeof===d||F.$$typeof===h||F.$$typeof===o||F.$$typeof===a||F.$$typeof===l||F.$$typeof===L||F.getModuleId!==void 0))}function U(F,J,ee){var ye=F.displayName;if(ye)return ye;var Ve=J.displayName||J.name||"";return Ve!==""?ee+"("+Ve+")":ee}function N(F){return F.displayName||"Context"}function M(F){if(F==null)return null;if(typeof F.tag=="number"&&x("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof F=="function")return F.displayName||F.name||null;if(typeof F=="string")return F;switch(F){case n:return"Fragment";case t:return"Portal";case s:return"Profiler";case i:return"StrictMode";case c:return"Suspense";case u:return"SuspenseList"}if(typeof F=="object")switch(F.$$typeof){case a:var J=F;return N(J)+".Consumer";case o:var ee=F;return N(ee._context)+".Provider";case l:return U(F,F.render,"ForwardRef");case h:var ye=F.displayName||null;return ye!==null?ye:M(F.type)||"Memo";case d:{var Ve=F,Ue=Ve._payload,Ne=Ve._init;try{return M(Ne(Ue))}catch{return null}}}return null}var k=Object.assign,O=0,S,E,C,B,T,R,D;function G(){}G.__reactDisabledLog=!0;function W(){{if(O===0){S=console.log,E=console.info,C=console.warn,B=console.error,T=console.group,R=console.groupCollapsed,D=console.groupEnd;var F={configurable:!0,enumerable:!0,value:G,writable:!0};Object.defineProperties(console,{info:F,log:F,warn:F,error:F,group:F,groupCollapsed:F,groupEnd:F})}O++}}function j(){{if(O--,O===0){var F={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:k({},F,{value:S}),info:k({},F,{value:E}),warn:k({},F,{value:C}),error:k({},F,{value:B}),group:k({},F,{value:T}),groupCollapsed:k({},F,{value:R}),groupEnd:k({},F,{value:D})})}O<0&&x("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Y=v.ReactCurrentDispatcher,$;function q(F,J,ee){{if($===void 0)try{throw Error()}catch(Ve){var ye=Ve.stack.trim().match(/\n( *(at )?)/);$=ye&&ye[1]||""}return`
`+$+F}}var oe=!1,te;{var de=typeof WeakMap=="function"?WeakMap:Map;te=new de}function Q(F,J){if(!F||oe)return"";{var ee=te.get(F);if(ee!==void 0)return ee}var ye;oe=!0;var Ve=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var Ue;Ue=Y.current,Y.current=null,W();try{if(J){var Ne=function(){throw Error()};if(Object.defineProperty(Ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ne,[])}catch(Xt){ye=Xt}Reflect.construct(F,[],Ne)}else{try{Ne.call()}catch(Xt){ye=Xt}F.call(Ne.prototype)}}else{try{throw Error()}catch(Xt){ye=Xt}F()}}catch(Xt){if(Xt&&ye&&typeof Xt.stack=="string"){for(var De=Xt.stack.split(`
`),gt=ye.stack.split(`
`),Se=De.length-1,Ye=gt.length-1;Se>=1&&Ye>=0&&De[Se]!==gt[Ye];)Ye--;for(;Se>=1&&Ye>=0;Se--,Ye--)if(De[Se]!==gt[Ye]){if(Se!==1||Ye!==1)do if(Se--,Ye--,Ye<0||De[Se]!==gt[Ye]){var Bt=`
`+De[Se].replace(" at new "," at ");return F.displayName&&Bt.includes("<anonymous>")&&(Bt=Bt.replace("<anonymous>",F.displayName)),typeof F=="function"&&te.set(F,Bt),Bt}while(Se>=1&&Ye>=0);break}}}finally{oe=!1,Y.current=Ue,j(),Error.prepareStackTrace=Ve}var sr=F?F.displayName||F.name:"",Ss=sr?q(sr):"";return typeof F=="function"&&te.set(F,Ss),Ss}function ie(F,J,ee){return Q(F,!1)}function K(F){var J=F.prototype;return!!(J&&J.isReactComponent)}function re(F,J,ee){if(F==null)return"";if(typeof F=="function")return Q(F,K(F));if(typeof F=="string")return q(F);switch(F){case c:return q("Suspense");case u:return q("SuspenseList")}if(typeof F=="object")switch(F.$$typeof){case l:return ie(F.render);case h:return re(F.type,J,ee);case d:{var ye=F,Ve=ye._payload,Ue=ye._init;try{return re(Ue(Ve),J,ee)}catch{}}}return""}var le=Object.prototype.hasOwnProperty,Z={},ne=v.ReactDebugCurrentFrame;function Ae(F){if(F){var J=F._owner,ee=re(F.type,F._source,J?J.type:null);ne.setExtraStackFrame(ee)}else ne.setExtraStackFrame(null)}function Le(F,J,ee,ye,Ve){{var Ue=Function.call.bind(le);for(var Ne in F)if(Ue(F,Ne)){var De=void 0;try{if(typeof F[Ne]!="function"){var gt=Error((ye||"React class")+": "+ee+" type `"+Ne+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof F[Ne]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw gt.name="Invariant Violation",gt}De=F[Ne](J,Ne,ye,ee,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Se){De=Se}De&&!(De instanceof Error)&&(Ae(Ve),x("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",ye||"React class",ee,Ne,typeof De),Ae(null)),De instanceof Error&&!(De.message in Z)&&(Z[De.message]=!0,Ae(Ve),x("Failed %s type: %s",ee,De.message),Ae(null))}}}var Oe=Array.isArray;function He(F){return Oe(F)}function it(F){{var J=typeof Symbol=="function"&&Symbol.toStringTag,ee=J&&F[Symbol.toStringTag]||F.constructor.name||"Object";return ee}}function Rt(F){try{return rr(F),!1}catch{return!0}}function rr(F){return""+F}function Te(F){if(Rt(F))return x("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",it(F)),rr(F)}var At=v.ReactCurrentOwner,Nt={key:!0,ref:!0,__self:!0,__source:!0},Ct,Dt;function Gt(F){if(le.call(F,"ref")){var J=Object.getOwnPropertyDescriptor(F,"ref").get;if(J&&J.isReactWarning)return!1}return F.ref!==void 0}function Pt(F){if(le.call(F,"key")){var J=Object.getOwnPropertyDescriptor(F,"key").get;if(J&&J.isReactWarning)return!1}return F.key!==void 0}function z(F,J){typeof F.ref=="string"&&At.current}function X(F,J){{var ee=function(){Ct||(Ct=!0,x("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",J))};ee.isReactWarning=!0,Object.defineProperty(F,"key",{get:ee,configurable:!0})}}function Re(F,J){{var ee=function(){Dt||(Dt=!0,x("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",J))};ee.isReactWarning=!0,Object.defineProperty(F,"ref",{get:ee,configurable:!0})}}var Fe=function(F,J,ee,ye,Ve,Ue,Ne){var De={$$typeof:e,type:F,key:J,ref:ee,props:Ne,_owner:Ue};return De._store={},Object.defineProperty(De._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(De,"_self",{configurable:!1,enumerable:!1,writable:!1,value:ye}),Object.defineProperty(De,"_source",{configurable:!1,enumerable:!1,writable:!1,value:Ve}),Object.freeze&&(Object.freeze(De.props),Object.freeze(De)),De};function Qe(F,J,ee,ye,Ve){{var Ue,Ne={},De=null,gt=null;ee!==void 0&&(Te(ee),De=""+ee),Pt(J)&&(Te(J.key),De=""+J.key),Gt(J)&&(gt=J.ref,z(J,Ve));for(Ue in J)le.call(J,Ue)&&!Nt.hasOwnProperty(Ue)&&(Ne[Ue]=J[Ue]);if(F&&F.defaultProps){var Se=F.defaultProps;for(Ue in Se)Ne[Ue]===void 0&&(Ne[Ue]=Se[Ue])}if(De||gt){var Ye=typeof F=="function"?F.displayName||F.name||"Unknown":F;De&&X(Ne,Ye),gt&&Re(Ne,Ye)}return Fe(F,De,gt,Ve,ye,At.current,Ne)}}var Ie=v.ReactCurrentOwner,yt=v.ReactDebugCurrentFrame;function ut(F){if(F){var J=F._owner,ee=re(F.type,F._source,J?J.type:null);yt.setExtraStackFrame(ee)}else yt.setExtraStackFrame(null)}var st;st=!1;function $e(F){return typeof F=="object"&&F!==null&&F.$$typeof===e}function ft(){{if(Ie.current){var F=M(Ie.current.type);if(F)return`

Check the render method of \``+F+"`."}return""}}function me(F){return""}var Be={};function pt(F){{var J=ft();if(!J){var ee=typeof F=="string"?F:F.displayName||F.name;ee&&(J=`

Check the top-level render call using <`+ee+">.")}return J}}function nr(F,J){{if(!F._store||F._store.validated||F.key!=null)return;F._store.validated=!0;var ee=pt(J);if(Be[ee])return;Be[ee]=!0;var ye="";F&&F._owner&&F._owner!==Ie.current&&(ye=" It was passed a child from "+M(F._owner.type)+"."),ut(F),x('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',ee,ye),ut(null)}}function ir(F,J){{if(typeof F!="object")return;if(He(F))for(var ee=0;ee<F.length;ee++){var ye=F[ee];$e(ye)&&nr(ye,J)}else if($e(F))F._store&&(F._store.validated=!0);else if(F){var Ve=p(F);if(typeof Ve=="function"&&Ve!==F.entries)for(var Ue=Ve.call(F),Ne;!(Ne=Ue.next()).done;)$e(Ne.value)&&nr(Ne.value,J)}}}function ae(F){{var J=F.type;if(J==null||typeof J=="string")return;var ee;if(typeof J=="function")ee=J.propTypes;else if(typeof J=="object"&&(J.$$typeof===l||J.$$typeof===h))ee=J.propTypes;else return;if(ee){var ye=M(J);Le(ee,F.props,"prop",ye,F)}else if(J.PropTypes!==void 0&&!st){st=!0;var Ve=M(J);x("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",Ve||"Unknown")}typeof J.getDefaultProps=="function"&&!J.getDefaultProps.isReactClassApproved&&x("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Pe(F){{for(var J=Object.keys(F.props),ee=0;ee<J.length;ee++){var ye=J[ee];if(ye!=="children"&&ye!=="key"){ut(F),x("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",ye),ut(null);break}}F.ref!==null&&(ut(F),x("Invalid attribute `ref` supplied to `React.Fragment`."),ut(null))}}function _e(F,J,ee,ye,Ve,Ue){{var Ne=V(F);if(!Ne){var De="";(F===void 0||typeof F=="object"&&F!==null&&Object.keys(F).length===0)&&(De+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var gt=me();gt?De+=gt:De+=ft();var Se;F===null?Se="null":He(F)?Se="array":F!==void 0&&F.$$typeof===e?(Se="<"+(M(F.type)||"Unknown")+" />",De=" Did you accidentally export a JSX literal instead of a component?"):Se=typeof F,x("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Se,De)}var Ye=Qe(F,J,ee,Ve,Ue);if(Ye==null)return Ye;if(Ne){var Bt=J.children;if(Bt!==void 0)if(ye)if(He(Bt)){for(var sr=0;sr<Bt.length;sr++)ir(Bt[sr],F);Object.freeze&&Object.freeze(Bt)}else x("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else ir(Bt,F)}return F===n?Pe(Ye):ae(Ye),Ye}}function et(F,J,ee){return _e(F,J,ee,!0)}function tt(F,J,ee){return _e(F,J,ee,!1)}var Lt=tt,Ht=et;Bi.Fragment=n,Bi.jsx=Lt,Bi.jsxs=Ht}()),Bi}var Wu;function mb(){return Wu||(Wu=1,process.env.NODE_ENV==="production"?As.exports=pb():As.exports=gb()),As.exports}var H=mb(),Kn={},zu;function vb(){if(zu)return Kn;zu=1;var r=Jc;if(process.env.NODE_ENV==="production")Kn.createRoot=r.createRoot,Kn.hydrateRoot=r.hydrateRoot;else{var e=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Kn.createRoot=function(t,n){e.usingClientEntryPoint=!0;try{return r.createRoot(t,n)}finally{e.usingClientEntryPoint=!1}},Kn.hydrateRoot=function(t,n,i){e.usingClientEntryPoint=!0;try{return r.hydrateRoot(t,n,i)}finally{e.usingClientEntryPoint=!1}}}return Kn}var yb=vb(),Ut=(r=>(r[r.ShiftOnlyFullyRendered=0]="ShiftOnlyFullyRendered",r[r.Virtualize=1]="Virtualize",r[r.Manual=2]="Manual",r))(Ut||{}),at=(r=>(r.NeverOn="NeverOn",r.AlwaysOnWhenOverflowed="AlwaysOnWhenOverflowed",r.OnHoverWhenOverflowed="AlwaysOnWOnHoverWhenOverflowedhenOverflowed",r))(at||{}),St=(r=>(r[r.Controller=0]="Controller",r[r.Responder=1]="Responder",r))(St||{}),Zn=(r=>(r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2",r))(Zn||{}),rp=(r=>(r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS",r))(rp||{}),Xl=(r=>(r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL",r))(Xl||{}),we=(r=>(r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR",r))(we||{}),Or=(r=>(r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN",r))(Or||{}),se=(r=>(r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r))(se||{}),fi=(r=>(r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r))(fi||{}),ve=(r=>(r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT",r))(ve||{}),he=(r=>(r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT",r))(he||{}),cr=(r=>(r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR",r))(cr||{}),fn=(r=>(r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",r))(fn||{}),kr=(r=>(r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL",r))(kr||{}),Wt=(r=>(r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",r))(Wt||{}),Br=(r=>(r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT",r))(Br||{}),Kc=(r=>(r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL",r))(Kc||{}),ur=(r=>(r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp",r))(ur||{}),bt=(r=>(r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE",r[r.COLOR=4]="COLOR",r))(bt||{}),mt=(r=>(r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH",r))(mt||{}),Dr=(r=>(r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",r))(Dr||{});const bb={createCanvas:(r,e)=>{const t=document.createElement("canvas");return t.width=r,t.height=e,t},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,e)=>fetch(r,e),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")},ue={ADAPTER:bb,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Sa=/iPhone/i,Xu=/iPod/i,ju=/iPad/i,$u=/\biOS-universal(?:.+)Mac\b/i,Aa=/\bAndroid(?:.+)Mobile\b/i,Yu=/Android/i,ei=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,ws=/Silk/i,Ur=/Windows Phone/i,Zu=/\bWindows(?:.+)ARM\b/i,qu=/BlackBerry/i,Ju=/BB10/i,Qu=/Opera Mini/i,Ku=/\b(CriOS|Chrome)(?:.+)Mobile/i,eh=/Mobile(?:.+)Firefox\b/i,th=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"};function xb(r){return function(e){return e.test(r)}}function rh(r){var e={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?e.userAgent=r:r&&r.userAgent&&(e={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var t=e.userAgent,n=t.split("[FBAN");typeof n[1]<"u"&&(t=n[0]),n=t.split("Twitter"),typeof n[1]<"u"&&(t=n[0]);var i=xb(t),s={apple:{phone:i(Sa)&&!i(Ur),ipod:i(Xu),tablet:!i(Sa)&&(i(ju)||th(e))&&!i(Ur),universal:i($u),device:(i(Sa)||i(Xu)||i(ju)||i($u)||th(e))&&!i(Ur)},amazon:{phone:i(ei),tablet:!i(ei)&&i(ws),device:i(ei)||i(ws)},android:{phone:!i(Ur)&&i(ei)||!i(Ur)&&i(Aa),tablet:!i(Ur)&&!i(ei)&&!i(Aa)&&(i(ws)||i(Yu)),device:!i(Ur)&&(i(ei)||i(ws)||i(Aa)||i(Yu))||i(/\bokhttp\b/i)},windows:{phone:i(Ur),tablet:i(Zu),device:i(Ur)||i(Zu)},other:{blackberry:i(qu),blackberry10:i(Ju),opera:i(Qu),firefox:i(eh),chrome:i(Ku),device:i(qu)||i(Ju)||i(Qu)||i(eh)||i(Ku)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const Cb=rh.default??rh,$r=Cb(globalThis.navigator);ue.RETINA_PREFIX=/@([0-9\.]+)x/;ue.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var wa={exports:{}},nh;function _b(){return nh||(nh=1,function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,h,d){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new i(u,h||l,d),g=t?t+c:c;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],f]:l._events[g].push(f):(l._events[g]=f,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,h;if(this._eventsCount===0)return c;for(h in u=this._events)e.call(u,h)&&c.push(t?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=t?t+c:c,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var d=0,f=h.length,g=new Array(f);d<f;d++)g[d]=h[d].fn;return g},a.prototype.listenerCount=function(c){var u=t?t+c:c,h=this._events[u];return h?h.fn?1:h.length:0},a.prototype.emit=function(c,u,h,d,f,g){var m=t?t+c:c;if(!this._events[m])return!1;var p=this._events[m],v=arguments.length,x,b;if(p.fn){switch(p.once&&this.removeListener(c,p.fn,void 0,!0),v){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,u),!0;case 3:return p.fn.call(p.context,u,h),!0;case 4:return p.fn.call(p.context,u,h,d),!0;case 5:return p.fn.call(p.context,u,h,d,f),!0;case 6:return p.fn.call(p.context,u,h,d,f,g),!0}for(b=1,x=new Array(v-1);b<v;b++)x[b-1]=arguments[b];p.fn.apply(p.context,x)}else{var _=p.length,y;for(b=0;b<_;b++)switch(p[b].once&&this.removeListener(c,p[b].fn,void 0,!0),v){case 1:p[b].fn.call(p[b].context);break;case 2:p[b].fn.call(p[b].context,u);break;case 3:p[b].fn.call(p[b].context,u,h);break;case 4:p[b].fn.call(p[b].context,u,h,d);break;default:if(!x)for(y=1,x=new Array(v-1);y<v;y++)x[y-1]=arguments[y];p[b].fn.apply(p[b].context,x)}}return!0},a.prototype.on=function(c,u,h){return s(this,c,u,h,!1)},a.prototype.once=function(c,u,h){return s(this,c,u,h,!0)},a.prototype.removeListener=function(c,u,h,d){var f=t?t+c:c;if(!this._events[f])return this;if(!u)return o(this,f),this;var g=this._events[f];if(g.fn)g.fn===u&&(!d||g.once)&&(!h||g.context===h)&&o(this,f);else{for(var m=0,p=[],v=g.length;m<v;m++)(g[m].fn!==u||d&&!g[m].once||h&&g[m].context!==h)&&p.push(g[m]);p.length?this._events[f]=p.length===1?p[0]:p:o(this,f)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=t?t+c:c,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,r.exports=a}(wa)),wa.exports}var Sb=_b();const ds=Qc(Sb);var Es={exports:{}},ih;function Ab(){if(ih)return Es.exports;ih=1,Es.exports=r,Es.exports.default=r;function r(S,E,C){C=C||2;var B=E&&E.length,T=B?E[0]*C:S.length,R=e(S,0,T,C,!0),D=[];if(!R||R.next===R.prev)return D;var G,W,j,Y,$,q,oe;if(B&&(R=l(S,E,R,C)),S.length>80*C){G=j=S[0],W=Y=S[1];for(var te=C;te<T;te+=C)$=S[te],q=S[te+1],$<G&&(G=$),q<W&&(W=q),$>j&&(j=$),q>Y&&(Y=q);oe=Math.max(j-G,Y-W),oe=oe!==0?32767/oe:0}return n(R,D,C,G,W,oe,0),D}function e(S,E,C,B,T){var R,D;if(T===O(S,E,C,B)>0)for(R=E;R<C;R+=B)D=N(R,S[R],S[R+1],D);else for(R=C-B;R>=E;R-=B)D=N(R,S[R],S[R+1],D);return D&&_(D,D.next)&&(M(D),D=D.next),D}function t(S,E){if(!S)return S;E||(E=S);var C=S,B;do if(B=!1,!C.steiner&&(_(C,C.next)||b(C.prev,C,C.next)===0)){if(M(C),C=E=C.prev,C===C.next)break;B=!0}else C=C.next;while(B||C!==E);return E}function n(S,E,C,B,T,R,D){if(S){!D&&R&&f(S,B,T,R);for(var G=S,W,j;S.prev!==S.next;){if(W=S.prev,j=S.next,R?s(S,B,T,R):i(S)){E.push(W.i/C|0),E.push(S.i/C|0),E.push(j.i/C|0),M(S),S=j.next,G=j.next;continue}if(S=j,S===G){D?D===1?(S=o(t(S),E,C),n(S,E,C,B,T,R,2)):D===2&&a(S,E,C,B,T,R):n(t(S),E,C,B,T,R,1);break}}}}function i(S){var E=S.prev,C=S,B=S.next;if(b(E,C,B)>=0)return!1;for(var T=E.x,R=C.x,D=B.x,G=E.y,W=C.y,j=B.y,Y=T<R?T<D?T:D:R<D?R:D,$=G<W?G<j?G:j:W<j?W:j,q=T>R?T>D?T:D:R>D?R:D,oe=G>W?G>j?G:j:W>j?W:j,te=B.next;te!==E;){if(te.x>=Y&&te.x<=q&&te.y>=$&&te.y<=oe&&v(T,G,R,W,D,j,te.x,te.y)&&b(te.prev,te,te.next)>=0)return!1;te=te.next}return!0}function s(S,E,C,B){var T=S.prev,R=S,D=S.next;if(b(T,R,D)>=0)return!1;for(var G=T.x,W=R.x,j=D.x,Y=T.y,$=R.y,q=D.y,oe=G<W?G<j?G:j:W<j?W:j,te=Y<$?Y<q?Y:q:$<q?$:q,de=G>W?G>j?G:j:W>j?W:j,Q=Y>$?Y>q?Y:q:$>q?$:q,ie=m(oe,te,E,C,B),K=m(de,Q,E,C,B),re=S.prevZ,le=S.nextZ;re&&re.z>=ie&&le&&le.z<=K;){if(re.x>=oe&&re.x<=de&&re.y>=te&&re.y<=Q&&re!==T&&re!==D&&v(G,Y,W,$,j,q,re.x,re.y)&&b(re.prev,re,re.next)>=0||(re=re.prevZ,le.x>=oe&&le.x<=de&&le.y>=te&&le.y<=Q&&le!==T&&le!==D&&v(G,Y,W,$,j,q,le.x,le.y)&&b(le.prev,le,le.next)>=0))return!1;le=le.nextZ}for(;re&&re.z>=ie;){if(re.x>=oe&&re.x<=de&&re.y>=te&&re.y<=Q&&re!==T&&re!==D&&v(G,Y,W,$,j,q,re.x,re.y)&&b(re.prev,re,re.next)>=0)return!1;re=re.prevZ}for(;le&&le.z<=K;){if(le.x>=oe&&le.x<=de&&le.y>=te&&le.y<=Q&&le!==T&&le!==D&&v(G,Y,W,$,j,q,le.x,le.y)&&b(le.prev,le,le.next)>=0)return!1;le=le.nextZ}return!0}function o(S,E,C){var B=S;do{var T=B.prev,R=B.next.next;!_(T,R)&&y(T,B,B.next,R)&&L(T,R)&&L(R,T)&&(E.push(T.i/C|0),E.push(B.i/C|0),E.push(R.i/C|0),M(B),M(B.next),B=S=R),B=B.next}while(B!==S);return t(B)}function a(S,E,C,B,T,R){var D=S;do{for(var G=D.next.next;G!==D.prev;){if(D.i!==G.i&&x(D,G)){var W=U(D,G);D=t(D,D.next),W=t(W,W.next),n(D,E,C,B,T,R,0),n(W,E,C,B,T,R,0);return}G=G.next}D=D.next}while(D!==S)}function l(S,E,C,B){var T=[],R,D,G,W,j;for(R=0,D=E.length;R<D;R++)G=E[R]*B,W=R<D-1?E[R+1]*B:S.length,j=e(S,G,W,B,!1),j===j.next&&(j.steiner=!0),T.push(p(j));for(T.sort(c),R=0;R<T.length;R++)C=u(T[R],C);return C}function c(S,E){return S.x-E.x}function u(S,E){var C=h(S,E);if(!C)return E;var B=U(C,S);return t(B,B.next),t(C,C.next)}function h(S,E){var C=E,B=S.x,T=S.y,R=-1/0,D;do{if(T<=C.y&&T>=C.next.y&&C.next.y!==C.y){var G=C.x+(T-C.y)*(C.next.x-C.x)/(C.next.y-C.y);if(G<=B&&G>R&&(R=G,D=C.x<C.next.x?C:C.next,G===B))return D}C=C.next}while(C!==E);if(!D)return null;var W=D,j=D.x,Y=D.y,$=1/0,q;C=D;do B>=C.x&&C.x>=j&&B!==C.x&&v(T<Y?B:R,T,j,Y,T<Y?R:B,T,C.x,C.y)&&(q=Math.abs(T-C.y)/(B-C.x),L(C,S)&&(q<$||q===$&&(C.x>D.x||C.x===D.x&&d(D,C)))&&(D=C,$=q)),C=C.next;while(C!==W);return D}function d(S,E){return b(S.prev,S,E.prev)<0&&b(E.next,S,S.next)<0}function f(S,E,C,B){var T=S;do T.z===0&&(T.z=m(T.x,T.y,E,C,B)),T.prevZ=T.prev,T.nextZ=T.next,T=T.next;while(T!==S);T.prevZ.nextZ=null,T.prevZ=null,g(T)}function g(S){var E,C,B,T,R,D,G,W,j=1;do{for(C=S,S=null,R=null,D=0;C;){for(D++,B=C,G=0,E=0;E<j&&(G++,B=B.nextZ,!!B);E++);for(W=j;G>0||W>0&&B;)G!==0&&(W===0||!B||C.z<=B.z)?(T=C,C=C.nextZ,G--):(T=B,B=B.nextZ,W--),R?R.nextZ=T:S=T,T.prevZ=R,R=T;C=B}R.nextZ=null,j*=2}while(D>1);return S}function m(S,E,C,B,T){return S=(S-C)*T|0,E=(E-B)*T|0,S=(S|S<<8)&16711935,S=(S|S<<4)&252645135,S=(S|S<<2)&858993459,S=(S|S<<1)&1431655765,E=(E|E<<8)&16711935,E=(E|E<<4)&252645135,E=(E|E<<2)&858993459,E=(E|E<<1)&1431655765,S|E<<1}function p(S){var E=S,C=S;do(E.x<C.x||E.x===C.x&&E.y<C.y)&&(C=E),E=E.next;while(E!==S);return C}function v(S,E,C,B,T,R,D,G){return(T-D)*(E-G)>=(S-D)*(R-G)&&(S-D)*(B-G)>=(C-D)*(E-G)&&(C-D)*(R-G)>=(T-D)*(B-G)}function x(S,E){return S.next.i!==E.i&&S.prev.i!==E.i&&!P(S,E)&&(L(S,E)&&L(E,S)&&V(S,E)&&(b(S.prev,S,E.prev)||b(S,E.prev,E))||_(S,E)&&b(S.prev,S,S.next)>0&&b(E.prev,E,E.next)>0)}function b(S,E,C){return(E.y-S.y)*(C.x-E.x)-(E.x-S.x)*(C.y-E.y)}function _(S,E){return S.x===E.x&&S.y===E.y}function y(S,E,C,B){var T=A(b(S,E,C)),R=A(b(S,E,B)),D=A(b(C,B,S)),G=A(b(C,B,E));return!!(T!==R&&D!==G||T===0&&I(S,C,E)||R===0&&I(S,B,E)||D===0&&I(C,S,B)||G===0&&I(C,E,B))}function I(S,E,C){return E.x<=Math.max(S.x,C.x)&&E.x>=Math.min(S.x,C.x)&&E.y<=Math.max(S.y,C.y)&&E.y>=Math.min(S.y,C.y)}function A(S){return S>0?1:S<0?-1:0}function P(S,E){var C=S;do{if(C.i!==S.i&&C.next.i!==S.i&&C.i!==E.i&&C.next.i!==E.i&&y(C,C.next,S,E))return!0;C=C.next}while(C!==S);return!1}function L(S,E){return b(S.prev,S,S.next)<0?b(S,E,S.next)>=0&&b(S,S.prev,E)>=0:b(S,E,S.prev)<0||b(S,S.next,E)<0}function V(S,E){var C=S,B=!1,T=(S.x+E.x)/2,R=(S.y+E.y)/2;do C.y>R!=C.next.y>R&&C.next.y!==C.y&&T<(C.next.x-C.x)*(R-C.y)/(C.next.y-C.y)+C.x&&(B=!B),C=C.next;while(C!==S);return B}function U(S,E){var C=new k(S.i,S.x,S.y),B=new k(E.i,E.x,E.y),T=S.next,R=E.prev;return S.next=E,E.prev=S,C.next=T,T.prev=C,B.next=C,C.prev=B,R.next=B,B.prev=R,B}function N(S,E,C,B){var T=new k(S,E,C);return B?(T.next=B.next,T.prev=B,B.next.prev=T,B.next=T):(T.prev=T,T.next=T),T}function M(S){S.next.prev=S.prev,S.prev.next=S.next,S.prevZ&&(S.prevZ.nextZ=S.nextZ),S.nextZ&&(S.nextZ.prevZ=S.prevZ)}function k(S,E,C){this.i=S,this.x=E,this.y=C,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}r.deviation=function(S,E,C,B){var T=E&&E.length,R=T?E[0]*C:S.length,D=Math.abs(O(S,0,R,C));if(T)for(var G=0,W=E.length;G<W;G++){var j=E[G]*C,Y=G<W-1?E[G+1]*C:S.length;D-=Math.abs(O(S,j,Y,C))}var $=0;for(G=0;G<B.length;G+=3){var q=B[G]*C,oe=B[G+1]*C,te=B[G+2]*C;$+=Math.abs((S[q]-S[te])*(S[oe+1]-S[q+1])-(S[q]-S[oe])*(S[te+1]-S[q+1]))}return D===0&&$===0?0:Math.abs(($-D)/D)};function O(S,E,C,B){for(var T=0,R=E,D=C-B;R<C;R+=B)T+=(S[D]-S[R])*(S[R+1]+S[D+1]),D=R;return T}return r.flatten=function(S){for(var E=S[0][0].length,C={vertices:[],holes:[],dimensions:E},B=0,T=0;T<S.length;T++){for(var R=0;R<S[T].length;R++)for(var D=0;D<E;D++)C.vertices.push(S[T][R][D]);T>0&&(B+=S[T-1].length,C.holes.push(B))}return C},Es.exports}var wb=Ab();const Eb=Qc(wb);var An={},Gi={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var Ib=Gi.exports,sh;function Tb(){return sh||(sh=1,function(r,e){(function(t){var n=e&&!e.nodeType&&e,i=r&&!r.nodeType&&r,s=typeof zl=="object"&&zl;(s.global===s||s.window===s||s.self===s)&&(t=s);var o,a=2147483647,l=36,c=1,u=26,h=38,d=700,f=72,g=128,m="-",p=/^xn--/,v=/[^\x20-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=l-c,y=Math.floor,I=String.fromCharCode,A;function P(T){throw new RangeError(b[T])}function L(T,R){for(var D=T.length,G=[];D--;)G[D]=R(T[D]);return G}function V(T,R){var D=T.split("@"),G="";D.length>1&&(G=D[0]+"@",T=D[1]),T=T.replace(x,".");var W=T.split("."),j=L(W,R).join(".");return G+j}function U(T){for(var R=[],D=0,G=T.length,W,j;D<G;)W=T.charCodeAt(D++),W>=55296&&W<=56319&&D<G?(j=T.charCodeAt(D++),(j&64512)==56320?R.push(((W&1023)<<10)+(j&1023)+65536):(R.push(W),D--)):R.push(W);return R}function N(T){return L(T,function(R){var D="";return R>65535&&(R-=65536,D+=I(R>>>10&1023|55296),R=56320|R&1023),D+=I(R),D}).join("")}function M(T){return T-48<10?T-22:T-65<26?T-65:T-97<26?T-97:l}function k(T,R){return T+22+75*(T<26)-((R!=0)<<5)}function O(T,R,D){var G=0;for(T=D?y(T/d):T>>1,T+=y(T/R);T>_*u>>1;G+=l)T=y(T/_);return y(G+(_+1)*T/(T+h))}function S(T){var R=[],D=T.length,G,W=0,j=g,Y=f,$,q,oe,te,de,Q,ie,K,re;for($=T.lastIndexOf(m),$<0&&($=0),q=0;q<$;++q)T.charCodeAt(q)>=128&&P("not-basic"),R.push(T.charCodeAt(q));for(oe=$>0?$+1:0;oe<D;){for(te=W,de=1,Q=l;oe>=D&&P("invalid-input"),ie=M(T.charCodeAt(oe++)),(ie>=l||ie>y((a-W)/de))&&P("overflow"),W+=ie*de,K=Q<=Y?c:Q>=Y+u?u:Q-Y,!(ie<K);Q+=l)re=l-K,de>y(a/re)&&P("overflow"),de*=re;G=R.length+1,Y=O(W-te,G,te==0),y(W/G)>a-j&&P("overflow"),j+=y(W/G),W%=G,R.splice(W++,0,j)}return N(R)}function E(T){var R,D,G,W,j,Y,$,q,oe,te,de,Q=[],ie,K,re,le;for(T=U(T),ie=T.length,R=g,D=0,j=f,Y=0;Y<ie;++Y)de=T[Y],de<128&&Q.push(I(de));for(G=W=Q.length,W&&Q.push(m);G<ie;){for($=a,Y=0;Y<ie;++Y)de=T[Y],de>=R&&de<$&&($=de);for(K=G+1,$-R>y((a-D)/K)&&P("overflow"),D+=($-R)*K,R=$,Y=0;Y<ie;++Y)if(de=T[Y],de<R&&++D>a&&P("overflow"),de==R){for(q=D,oe=l;te=oe<=j?c:oe>=j+u?u:oe-j,!(q<te);oe+=l)le=q-te,re=l-te,Q.push(I(k(te+le%re,0))),q=y(le/re);Q.push(I(k(q,0))),j=O(D,K,G==W),D=0,++G}++D,++R}return Q.join("")}function C(T){return V(T,function(R){return p.test(R)?S(R.slice(4).toLowerCase()):R})}function B(T){return V(T,function(R){return v.test(R)?"xn--"+E(R):R})}if(o={version:"1.4.1",ucs2:{decode:U,encode:N},decode:S,encode:E,toASCII:B,toUnicode:C},n&&i)if(r.exports==n)i.exports=o;else for(A in o)o.hasOwnProperty(A)&&(n[A]=o[A]);else t.punycode=o})(Ib)}(Gi,Gi.exports)),Gi.exports}var Ea,oh;function Rb(){return oh||(oh=1,Ea=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==i||o.enumerable!==!0)return!1}return!0}),Ea}var Ia,ah;function Pb(){if(ah)return Ia;ah=1;var r=typeof Symbol<"u"&&Symbol,e=Rb();return Ia=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},Ia}var Ta,lh;function Bb(){if(lh)return Ta;lh=1;var r={foo:{}},e=Object;return Ta=function(){return{__proto__:r}.foo===r.foo&&!({__proto__:null}instanceof e)},Ta}var Ra,ch;function Mb(){if(ch)return Ra;ch=1;var r="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,n="[object Function]",i=function(l,c){for(var u=[],h=0;h<l.length;h+=1)u[h]=l[h];for(var d=0;d<c.length;d+=1)u[d+l.length]=c[d];return u},s=function(l,c){for(var u=[],h=c,d=0;h<l.length;h+=1,d+=1)u[d]=l[h];return u},o=function(a,l){for(var c="",u=0;u<a.length;u+=1)c+=a[u],u+1<a.length&&(c+=l);return c};return Ra=function(l){var c=this;if(typeof c!="function"||e.apply(c)!==n)throw new TypeError(r+c);for(var u=s(arguments,1),h,d=function(){if(this instanceof h){var v=c.apply(this,i(u,arguments));return Object(v)===v?v:this}return c.apply(l,i(u,arguments))},f=t(0,c.length-u.length),g=[],m=0;m<f;m++)g[m]="$"+m;if(h=Function("binder","return function ("+o(g,",")+"){ return binder.apply(this,arguments); }")(d),c.prototype){var p=function(){};p.prototype=c.prototype,h.prototype=new p,p.prototype=null}return h},Ra}var Pa,uh;function eu(){if(uh)return Pa;uh=1;var r=Mb();return Pa=Function.prototype.bind||r,Pa}var Ba,hh;function Ob(){if(hh)return Ba;hh=1;var r=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=eu();return Ba=t.call(r,e),Ba}var Ma,dh;function qn(){if(dh)return Ma;dh=1;var r,e=SyntaxError,t=Function,n=TypeError,i=function(N){try{return t('"use strict"; return ('+N+").constructor;")()}catch{}},s=Object.getOwnPropertyDescriptor;if(s)try{s({},"")}catch{s=null}var o=function(){throw new n},a=s?function(){try{return arguments.callee,o}catch{try{return s(arguments,"callee").get}catch{return o}}}():o,l=Pb()(),c=Bb()(),u=Object.getPrototypeOf||(c?function(N){return N.__proto__}:null),h={},d=typeof Uint8Array>"u"||!u?r:u(Uint8Array),f={"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":l&&u?u([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":h,"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":h,"%AsyncIteratorPrototype%":h,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?r:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":t,"%GeneratorFunction%":h,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":l&&u?u(u([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!l||!u?r:u(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!l||!u?r:u(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":l&&u?u(""[Symbol.iterator]()):r,"%Symbol%":l?Symbol:r,"%SyntaxError%":e,"%ThrowTypeError%":a,"%TypedArray%":d,"%TypeError%":n,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet};if(u)try{null.error}catch(N){var g=u(u(N));f["%Error.prototype%"]=g}var m=function N(M){var k;if(M==="%AsyncFunction%")k=i("async function () {}");else if(M==="%GeneratorFunction%")k=i("function* () {}");else if(M==="%AsyncGeneratorFunction%")k=i("async function* () {}");else if(M==="%AsyncGenerator%"){var O=N("%AsyncGeneratorFunction%");O&&(k=O.prototype)}else if(M==="%AsyncIteratorPrototype%"){var S=N("%AsyncGenerator%");S&&u&&(k=u(S.prototype))}return f[M]=k,k},p={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},v=eu(),x=Ob(),b=v.call(Function.call,Array.prototype.concat),_=v.call(Function.apply,Array.prototype.splice),y=v.call(Function.call,String.prototype.replace),I=v.call(Function.call,String.prototype.slice),A=v.call(Function.call,RegExp.prototype.exec),P=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,L=/\\(\\)?/g,V=function(M){var k=I(M,0,1),O=I(M,-1);if(k==="%"&&O!=="%")throw new e("invalid intrinsic syntax, expected closing `%`");if(O==="%"&&k!=="%")throw new e("invalid intrinsic syntax, expected opening `%`");var S=[];return y(M,P,function(E,C,B,T){S[S.length]=B?y(T,L,"$1"):C||E}),S},U=function(M,k){var O=M,S;if(x(p,O)&&(S=p[O],O="%"+S[0]+"%"),x(f,O)){var E=f[O];if(E===h&&(E=m(O)),typeof E>"u"&&!k)throw new n("intrinsic "+M+" exists, but is not available. Please file an issue!");return{alias:S,name:O,value:E}}throw new e("intrinsic "+M+" does not exist!")};return Ma=function(M,k){if(typeof M!="string"||M.length===0)throw new n("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof k!="boolean")throw new n('"allowMissing" argument must be a boolean');if(A(/^%?[^%]*%?$/,M)===null)throw new e("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var O=V(M),S=O.length>0?O[0]:"",E=U("%"+S+"%",k),C=E.name,B=E.value,T=!1,R=E.alias;R&&(S=R[0],_(O,b([0,1],R)));for(var D=1,G=!0;D<O.length;D+=1){var W=O[D],j=I(W,0,1),Y=I(W,-1);if((j==='"'||j==="'"||j==="`"||Y==='"'||Y==="'"||Y==="`")&&j!==Y)throw new e("property names with quotes must have matching quotes");if((W==="constructor"||!G)&&(T=!0),S+="."+W,C="%"+S+"%",x(f,C))B=f[C];else if(B!=null){if(!(W in B)){if(!k)throw new n("base intrinsic for "+M+" exists, but the property is not available.");return}if(s&&D+1>=O.length){var $=s(B,W);G=!!$,G&&"get"in $&&!("originalValue"in $.get)?B=$.get:B=B[W]}else G=x(B,W),B=B[W];G&&!T&&(f[C]=B)}}return B},Ma}var Oa={exports:{}},Na,fh;function np(){if(fh)return Na;fh=1;var r=qn(),e=r("%Object.defineProperty%",!0),t=function(){if(e)try{return e({},"a",{value:1}),!0}catch{return!1}return!1};return t.hasArrayLengthDefineBug=function(){if(!t())return null;try{return e([],"length",{value:1}).length!==1}catch{return!0}},Na=t,Na}var Da,ph;function ip(){if(ph)return Da;ph=1;var r=qn(),e=r("%Object.getOwnPropertyDescriptor%",!0);if(e)try{e([],"length")}catch{e=null}return Da=e,Da}var La,gh;function Nb(){if(gh)return La;gh=1;var r=np()(),e=qn(),t=r&&e("%Object.defineProperty%",!0);if(t)try{t({},"a",{value:1})}catch{t=!1}var n=e("%SyntaxError%"),i=e("%TypeError%"),s=ip();return La=function(a,l,c){if(!a||typeof a!="object"&&typeof a!="function")throw new i("`obj` must be an object or a function`");if(typeof l!="string"&&typeof l!="symbol")throw new i("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new i("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new i("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new i("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new i("`loose`, if provided, must be a boolean");var u=arguments.length>3?arguments[3]:null,h=arguments.length>4?arguments[4]:null,d=arguments.length>5?arguments[5]:null,f=arguments.length>6?arguments[6]:!1,g=!!s&&s(a,l);if(t)t(a,l,{configurable:d===null&&g?g.configurable:!d,enumerable:u===null&&g?g.enumerable:!u,value:c,writable:h===null&&g?g.writable:!h});else if(f||!u&&!h&&!d)a[l]=c;else throw new n("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},La}var Fa,mh;function Db(){if(mh)return Fa;mh=1;var r=qn(),e=Nb(),t=np()(),n=ip(),i=r("%TypeError%"),s=r("%Math.floor%");return Fa=function(a,l){if(typeof a!="function")throw new i("`fn` is not a function");if(typeof l!="number"||l<0||l>4294967295||s(l)!==l)throw new i("`length` must be a positive 32-bit integer");var c=arguments.length>2&&!!arguments[2],u=!0,h=!0;if("length"in a&&n){var d=n(a,"length");d&&!d.configurable&&(u=!1),d&&!d.writable&&(h=!1)}return(u||h||!c)&&(t?e(a,"length",l,!0,!0):e(a,"length",l)),a},Fa}var vh;function Lb(){return vh||(vh=1,function(r){var e=eu(),t=qn(),n=Db(),i=t("%TypeError%"),s=t("%Function.prototype.apply%"),o=t("%Function.prototype.call%"),a=t("%Reflect.apply%",!0)||e.call(o,s),l=t("%Object.defineProperty%",!0),c=t("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}r.exports=function(d){if(typeof d!="function")throw new i("a function is required");var f=a(e,o,arguments);return n(f,1+c(0,d.length-(arguments.length-1)),!0)};var u=function(){return a(e,s,arguments)};l?l(r.exports,"apply",{value:u}):r.exports.apply=u}(Oa)),Oa.exports}var ka,yh;function Fb(){if(yh)return ka;yh=1;var r=qn(),e=Lb(),t=e(r("String.prototype.indexOf"));return ka=function(i,s){var o=r(i,!!s);return typeof o=="function"&&t(i,".prototype.")>-1?e(o):o},ka}const kb={},Gb=Object.freeze(Object.defineProperty({__proto__:null,default:kb},Symbol.toStringTag,{value:"Module"})),Hb=fb(Gb);var Ga,bh;function Vb(){if(bh)return Ga;bh=1;var r=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=r&&e&&typeof e.get=="function"?e.get:null,n=r&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,s=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,o=i&&s&&typeof s.get=="function"?s.get:null,a=i&&Set.prototype.forEach,l=typeof WeakMap=="function"&&WeakMap.prototype,c=l?WeakMap.prototype.has:null,u=typeof WeakSet=="function"&&WeakSet.prototype,h=u?WeakSet.prototype.has:null,d=typeof WeakRef=="function"&&WeakRef.prototype,f=d?WeakRef.prototype.deref:null,g=Boolean.prototype.valueOf,m=Object.prototype.toString,p=Function.prototype.toString,v=String.prototype.match,x=String.prototype.slice,b=String.prototype.replace,_=String.prototype.toUpperCase,y=String.prototype.toLowerCase,I=RegExp.prototype.test,A=Array.prototype.concat,P=Array.prototype.join,L=Array.prototype.slice,V=Math.floor,U=typeof BigInt=="function"?BigInt.prototype.valueOf:null,N=Object.getOwnPropertySymbols,M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,k=typeof Symbol=="function"&&typeof Symbol.iterator=="object",O=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===k||!0)?Symbol.toStringTag:null,S=Object.prototype.propertyIsEnumerable,E=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(z){return z.__proto__}:null);function C(z,X){if(z===1/0||z===-1/0||z!==z||z&&z>-1e3&&z<1e3||I.call(/e/,X))return X;var Re=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof z=="number"){var Fe=z<0?-V(-z):V(z);if(Fe!==z){var Qe=String(Fe),Ie=x.call(X,Qe.length+1);return b.call(Qe,Re,"$&_")+"."+b.call(b.call(Ie,/([0-9]{3})/g,"$&_"),/_$/,"")}}return b.call(X,Re,"$&_")}var B=Hb,T=B.custom,R=de(T)?T:null;Ga=function z(X,Re,Fe,Qe){var Ie=Re||{};if(K(Ie,"quoteStyle")&&Ie.quoteStyle!=="single"&&Ie.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(K(Ie,"maxStringLength")&&(typeof Ie.maxStringLength=="number"?Ie.maxStringLength<0&&Ie.maxStringLength!==1/0:Ie.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var yt=K(Ie,"customInspect")?Ie.customInspect:!0;if(typeof yt!="boolean"&&yt!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(K(Ie,"indent")&&Ie.indent!==null&&Ie.indent!=="	"&&!(parseInt(Ie.indent,10)===Ie.indent&&Ie.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(K(Ie,"numericSeparator")&&typeof Ie.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var ut=Ie.numericSeparator;if(typeof X>"u")return"undefined";if(X===null)return"null";if(typeof X=="boolean")return X?"true":"false";if(typeof X=="string")return Rt(X,Ie);if(typeof X=="number"){if(X===0)return 1/0/X>0?"0":"-0";var st=String(X);return ut?C(X,st):st}if(typeof X=="bigint"){var $e=String(X)+"n";return ut?C(X,$e):$e}var ft=typeof Ie.depth>"u"?5:Ie.depth;if(typeof Fe>"u"&&(Fe=0),Fe>=ft&&ft>0&&typeof X=="object")return W(X)?"[Array]":"[Object]";var me=Dt(Ie,Fe);if(typeof Qe>"u")Qe=[];else if(Z(Qe,X)>=0)return"[Circular]";function Be(Ne,De,gt){if(De&&(Qe=L.call(Qe),Qe.push(De)),gt){var Se={depth:Ie.depth};return K(Ie,"quoteStyle")&&(Se.quoteStyle=Ie.quoteStyle),z(Ne,Se,Fe+1,Qe)}return z(Ne,Ie,Fe+1,Qe)}if(typeof X=="function"&&!Y(X)){var pt=le(X),nr=Pt(X,Be);return"[Function"+(pt?": "+pt:" (anonymous)")+"]"+(nr.length>0?" { "+P.call(nr,", ")+" }":"")}if(de(X)){var ir=k?b.call(String(X),/^(Symbol\(.*\))_[^)]*$/,"$1"):M.call(X);return typeof X=="object"&&!k?Te(ir):ir}if(it(X)){for(var ae="<"+y.call(String(X.nodeName)),Pe=X.attributes||[],_e=0;_e<Pe.length;_e++)ae+=" "+Pe[_e].name+"="+D(G(Pe[_e].value),"double",Ie);return ae+=">",X.childNodes&&X.childNodes.length&&(ae+="..."),ae+="</"+y.call(String(X.nodeName))+">",ae}if(W(X)){if(X.length===0)return"[]";var et=Pt(X,Be);return me&&!Ct(et)?"["+Gt(et,me)+"]":"[ "+P.call(et,", ")+" ]"}if($(X)){var tt=Pt(X,Be);return!("cause"in Error.prototype)&&"cause"in X&&!S.call(X,"cause")?"{ ["+String(X)+"] "+P.call(A.call("[cause]: "+Be(X.cause),tt),", ")+" }":tt.length===0?"["+String(X)+"]":"{ ["+String(X)+"] "+P.call(tt,", ")+" }"}if(typeof X=="object"&&yt){if(R&&typeof X[R]=="function"&&B)return B(X,{depth:ft-Fe});if(yt!=="symbol"&&typeof X.inspect=="function")return X.inspect()}if(ne(X)){var Lt=[];return n&&n.call(X,function(Ne,De){Lt.push(Be(De,X,!0)+" => "+Be(Ne,X))}),Nt("Map",t.call(X),Lt,me)}if(Oe(X)){var Ht=[];return a&&a.call(X,function(Ne){Ht.push(Be(Ne,X))}),Nt("Set",o.call(X),Ht,me)}if(Ae(X))return At("WeakMap");if(He(X))return At("WeakSet");if(Le(X))return At("WeakRef");if(oe(X))return Te(Be(Number(X)));if(Q(X))return Te(Be(U.call(X)));if(te(X))return Te(g.call(X));if(q(X))return Te(Be(String(X)));if(typeof window<"u"&&X===window)return"{ [object Window] }";if(X===zl)return"{ [object globalThis] }";if(!j(X)&&!Y(X)){var F=Pt(X,Be),J=E?E(X)===Object.prototype:X instanceof Object||X.constructor===Object,ee=X instanceof Object?"":"null prototype",ye=!J&&O&&Object(X)===X&&O in X?x.call(re(X),8,-1):ee?"Object":"",Ve=J||typeof X.constructor!="function"?"":X.constructor.name?X.constructor.name+" ":"",Ue=Ve+(ye||ee?"["+P.call(A.call([],ye||[],ee||[]),": ")+"] ":"");return F.length===0?Ue+"{}":me?Ue+"{"+Gt(F,me)+"}":Ue+"{ "+P.call(F,", ")+" }"}return String(X)};function D(z,X,Re){var Fe=(Re.quoteStyle||X)==="double"?'"':"'";return Fe+z+Fe}function G(z){return b.call(String(z),/"/g,"&quot;")}function W(z){return re(z)==="[object Array]"&&(!O||!(typeof z=="object"&&O in z))}function j(z){return re(z)==="[object Date]"&&(!O||!(typeof z=="object"&&O in z))}function Y(z){return re(z)==="[object RegExp]"&&(!O||!(typeof z=="object"&&O in z))}function $(z){return re(z)==="[object Error]"&&(!O||!(typeof z=="object"&&O in z))}function q(z){return re(z)==="[object String]"&&(!O||!(typeof z=="object"&&O in z))}function oe(z){return re(z)==="[object Number]"&&(!O||!(typeof z=="object"&&O in z))}function te(z){return re(z)==="[object Boolean]"&&(!O||!(typeof z=="object"&&O in z))}function de(z){if(k)return z&&typeof z=="object"&&z instanceof Symbol;if(typeof z=="symbol")return!0;if(!z||typeof z!="object"||!M)return!1;try{return M.call(z),!0}catch{}return!1}function Q(z){if(!z||typeof z!="object"||!U)return!1;try{return U.call(z),!0}catch{}return!1}var ie=Object.prototype.hasOwnProperty||function(z){return z in this};function K(z,X){return ie.call(z,X)}function re(z){return m.call(z)}function le(z){if(z.name)return z.name;var X=v.call(p.call(z),/^function\s*([\w$]+)/);return X?X[1]:null}function Z(z,X){if(z.indexOf)return z.indexOf(X);for(var Re=0,Fe=z.length;Re<Fe;Re++)if(z[Re]===X)return Re;return-1}function ne(z){if(!t||!z||typeof z!="object")return!1;try{t.call(z);try{o.call(z)}catch{return!0}return z instanceof Map}catch{}return!1}function Ae(z){if(!c||!z||typeof z!="object")return!1;try{c.call(z,c);try{h.call(z,h)}catch{return!0}return z instanceof WeakMap}catch{}return!1}function Le(z){if(!f||!z||typeof z!="object")return!1;try{return f.call(z),!0}catch{}return!1}function Oe(z){if(!o||!z||typeof z!="object")return!1;try{o.call(z);try{t.call(z)}catch{return!0}return z instanceof Set}catch{}return!1}function He(z){if(!h||!z||typeof z!="object")return!1;try{h.call(z,h);try{c.call(z,c)}catch{return!0}return z instanceof WeakSet}catch{}return!1}function it(z){return!z||typeof z!="object"?!1:typeof HTMLElement<"u"&&z instanceof HTMLElement?!0:typeof z.nodeName=="string"&&typeof z.getAttribute=="function"}function Rt(z,X){if(z.length>X.maxStringLength){var Re=z.length-X.maxStringLength,Fe="... "+Re+" more character"+(Re>1?"s":"");return Rt(x.call(z,0,X.maxStringLength),X)+Fe}var Qe=b.call(b.call(z,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,rr);return D(Qe,"single",X)}function rr(z){var X=z.charCodeAt(0),Re={8:"b",9:"t",10:"n",12:"f",13:"r"}[X];return Re?"\\"+Re:"\\x"+(X<16?"0":"")+_.call(X.toString(16))}function Te(z){return"Object("+z+")"}function At(z){return z+" { ? }"}function Nt(z,X,Re,Fe){var Qe=Fe?Gt(Re,Fe):P.call(Re,", ");return z+" ("+X+") {"+Qe+"}"}function Ct(z){for(var X=0;X<z.length;X++)if(Z(z[X],`
`)>=0)return!1;return!0}function Dt(z,X){var Re;if(z.indent==="	")Re="	";else if(typeof z.indent=="number"&&z.indent>0)Re=P.call(Array(z.indent+1)," ");else return null;return{base:Re,prev:P.call(Array(X+1),Re)}}function Gt(z,X){if(z.length===0)return"";var Re=`
`+X.prev+X.base;return Re+P.call(z,","+Re)+`
`+X.prev}function Pt(z,X){var Re=W(z),Fe=[];if(Re){Fe.length=z.length;for(var Qe=0;Qe<z.length;Qe++)Fe[Qe]=K(z,Qe)?X(z[Qe],z):""}var Ie=typeof N=="function"?N(z):[],yt;if(k){yt={};for(var ut=0;ut<Ie.length;ut++)yt["$"+Ie[ut]]=Ie[ut]}for(var st in z)K(z,st)&&(Re&&String(Number(st))===st&&st<z.length||k&&yt["$"+st]instanceof Symbol||(I.call(/[^\w$]/,st)?Fe.push(X(st,z)+": "+X(z[st],z)):Fe.push(st+": "+X(z[st],z))));if(typeof N=="function")for(var $e=0;$e<Ie.length;$e++)S.call(z,Ie[$e])&&Fe.push("["+X(Ie[$e])+"]: "+X(z[Ie[$e]],z));return Fe}return Ga}var Ha,xh;function Ub(){if(xh)return Ha;xh=1;var r=qn(),e=Fb(),t=Vb(),n=r("%TypeError%"),i=r("%WeakMap%",!0),s=r("%Map%",!0),o=e("WeakMap.prototype.get",!0),a=e("WeakMap.prototype.set",!0),l=e("WeakMap.prototype.has",!0),c=e("Map.prototype.get",!0),u=e("Map.prototype.set",!0),h=e("Map.prototype.has",!0),d=function(p,v){for(var x=p,b;(b=x.next)!==null;x=b)if(b.key===v)return x.next=b.next,b.next=p.next,p.next=b,b},f=function(p,v){var x=d(p,v);return x&&x.value},g=function(p,v,x){var b=d(p,v);b?b.value=x:p.next={key:v,next:p.next,value:x}},m=function(p,v){return!!d(p,v)};return Ha=function(){var v,x,b,_={assert:function(y){if(!_.has(y))throw new n("Side channel does not contain "+t(y))},get:function(y){if(i&&y&&(typeof y=="object"||typeof y=="function")){if(v)return o(v,y)}else if(s){if(x)return c(x,y)}else if(b)return f(b,y)},has:function(y){if(i&&y&&(typeof y=="object"||typeof y=="function")){if(v)return l(v,y)}else if(s){if(x)return h(x,y)}else if(b)return m(b,y);return!1},set:function(y,I){i&&y&&(typeof y=="object"||typeof y=="function")?(v||(v=new i),a(v,y,I)):s?(x||(x=new s),u(x,y,I)):(b||(b={key:{},next:null}),g(b,y,I))}};return _},Ha}var Va,Ch;function tu(){if(Ch)return Va;Ch=1;var r=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return Va={default:t.RFC3986,formatters:{RFC1738:function(n){return r.call(n,e,"+")},RFC3986:function(n){return String(n)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},Va}var Ua,_h;function sp(){if(_h)return Ua;_h=1;var r=tu(),e=Object.prototype.hasOwnProperty,t=Array.isArray,n=function(){for(var m=[],p=0;p<256;++p)m.push("%"+((p<16?"0":"")+p.toString(16)).toUpperCase());return m}(),i=function(p){for(;p.length>1;){var v=p.pop(),x=v.obj[v.prop];if(t(x)){for(var b=[],_=0;_<x.length;++_)typeof x[_]<"u"&&b.push(x[_]);v.obj[v.prop]=b}}},s=function(p,v){for(var x=v&&v.plainObjects?Object.create(null):{},b=0;b<p.length;++b)typeof p[b]<"u"&&(x[b]=p[b]);return x},o=function m(p,v,x){if(!v)return p;if(typeof v!="object"){if(t(p))p.push(v);else if(p&&typeof p=="object")(x&&(x.plainObjects||x.allowPrototypes)||!e.call(Object.prototype,v))&&(p[v]=!0);else return[p,v];return p}if(!p||typeof p!="object")return[p].concat(v);var b=p;return t(p)&&!t(v)&&(b=s(p,x)),t(p)&&t(v)?(v.forEach(function(_,y){if(e.call(p,y)){var I=p[y];I&&typeof I=="object"&&_&&typeof _=="object"?p[y]=m(I,_,x):p.push(_)}else p[y]=_}),p):Object.keys(v).reduce(function(_,y){var I=v[y];return e.call(_,y)?_[y]=m(_[y],I,x):_[y]=I,_},b)},a=function(p,v){return Object.keys(v).reduce(function(x,b){return x[b]=v[b],x},p)},l=function(m,p,v){var x=m.replace(/\+/g," ");if(v==="iso-8859-1")return x.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(x)}catch{return x}},c=function(p,v,x,b,_){if(p.length===0)return p;var y=p;if(typeof p=="symbol"?y=Symbol.prototype.toString.call(p):typeof p!="string"&&(y=String(p)),x==="iso-8859-1")return escape(y).replace(/%u[0-9a-f]{4}/gi,function(L){return"%26%23"+parseInt(L.slice(2),16)+"%3B"});for(var I="",A=0;A<y.length;++A){var P=y.charCodeAt(A);if(P===45||P===46||P===95||P===126||P>=48&&P<=57||P>=65&&P<=90||P>=97&&P<=122||_===r.RFC1738&&(P===40||P===41)){I+=y.charAt(A);continue}if(P<128){I=I+n[P];continue}if(P<2048){I=I+(n[192|P>>6]+n[128|P&63]);continue}if(P<55296||P>=57344){I=I+(n[224|P>>12]+n[128|P>>6&63]+n[128|P&63]);continue}A+=1,P=65536+((P&1023)<<10|y.charCodeAt(A)&1023),I+=n[240|P>>18]+n[128|P>>12&63]+n[128|P>>6&63]+n[128|P&63]}return I},u=function(p){for(var v=[{obj:{o:p},prop:"o"}],x=[],b=0;b<v.length;++b)for(var _=v[b],y=_.obj[_.prop],I=Object.keys(y),A=0;A<I.length;++A){var P=I[A],L=y[P];typeof L=="object"&&L!==null&&x.indexOf(L)===-1&&(v.push({obj:y,prop:P}),x.push(L))}return i(v),p},h=function(p){return Object.prototype.toString.call(p)==="[object RegExp]"},d=function(p){return!p||typeof p!="object"?!1:!!(p.constructor&&p.constructor.isBuffer&&p.constructor.isBuffer(p))},f=function(p,v){return[].concat(p,v)},g=function(p,v){if(t(p)){for(var x=[],b=0;b<p.length;b+=1)x.push(v(p[b]));return x}return v(p)};return Ua={arrayToObject:s,assign:a,combine:f,compact:u,decode:l,encode:c,isBuffer:d,isRegExp:h,maybeMap:g,merge:o},Ua}var Wa,Sh;function Wb(){if(Sh)return Wa;Sh=1;var r=Ub(),e=sp(),t=tu(),n=Object.prototype.hasOwnProperty,i={brackets:function(p){return p+"[]"},comma:"comma",indices:function(p,v){return p+"["+v+"]"},repeat:function(p){return p}},s=Array.isArray,o=Array.prototype.push,a=function(m,p){o.apply(m,s(p)?p:[p])},l=Date.prototype.toISOString,c=t.default,u={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:e.encode,encodeValuesOnly:!1,format:c,formatter:t.formatters[c],indices:!1,serializeDate:function(p){return l.call(p)},skipNulls:!1,strictNullHandling:!1},h=function(p){return typeof p=="string"||typeof p=="number"||typeof p=="boolean"||typeof p=="symbol"||typeof p=="bigint"},d={},f=function m(p,v,x,b,_,y,I,A,P,L,V,U,N,M,k,O){for(var S=p,E=O,C=0,B=!1;(E=E.get(d))!==void 0&&!B;){var T=E.get(p);if(C+=1,typeof T<"u"){if(T===C)throw new RangeError("Cyclic object value");B=!0}typeof E.get(d)>"u"&&(C=0)}if(typeof A=="function"?S=A(v,S):S instanceof Date?S=V(S):x==="comma"&&s(S)&&(S=e.maybeMap(S,function(de){return de instanceof Date?V(de):de})),S===null){if(_)return I&&!M?I(v,u.encoder,k,"key",U):v;S=""}if(h(S)||e.isBuffer(S)){if(I){var R=M?v:I(v,u.encoder,k,"key",U);return[N(R)+"="+N(I(S,u.encoder,k,"value",U))]}return[N(v)+"="+N(String(S))]}var D=[];if(typeof S>"u")return D;var G;if(x==="comma"&&s(S))M&&I&&(S=e.maybeMap(S,I)),G=[{value:S.length>0?S.join(",")||null:void 0}];else if(s(A))G=A;else{var W=Object.keys(S);G=P?W.sort(P):W}for(var j=b&&s(S)&&S.length===1?v+"[]":v,Y=0;Y<G.length;++Y){var $=G[Y],q=typeof $=="object"&&typeof $.value<"u"?$.value:S[$];if(!(y&&q===null)){var oe=s(S)?typeof x=="function"?x(j,$):j:j+(L?"."+$:"["+$+"]");O.set(p,C);var te=r();te.set(d,O),a(D,m(q,oe,x,b,_,y,x==="comma"&&M&&s(S)?null:I,A,P,L,V,U,N,M,k,te))}}return D},g=function(p){if(!p)return u;if(p.encoder!==null&&typeof p.encoder<"u"&&typeof p.encoder!="function")throw new TypeError("Encoder has to be a function.");var v=p.charset||u.charset;if(typeof p.charset<"u"&&p.charset!=="utf-8"&&p.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var x=t.default;if(typeof p.format<"u"){if(!n.call(t.formatters,p.format))throw new TypeError("Unknown format option provided.");x=p.format}var b=t.formatters[x],_=u.filter;return(typeof p.filter=="function"||s(p.filter))&&(_=p.filter),{addQueryPrefix:typeof p.addQueryPrefix=="boolean"?p.addQueryPrefix:u.addQueryPrefix,allowDots:typeof p.allowDots>"u"?u.allowDots:!!p.allowDots,charset:v,charsetSentinel:typeof p.charsetSentinel=="boolean"?p.charsetSentinel:u.charsetSentinel,delimiter:typeof p.delimiter>"u"?u.delimiter:p.delimiter,encode:typeof p.encode=="boolean"?p.encode:u.encode,encoder:typeof p.encoder=="function"?p.encoder:u.encoder,encodeValuesOnly:typeof p.encodeValuesOnly=="boolean"?p.encodeValuesOnly:u.encodeValuesOnly,filter:_,format:x,formatter:b,serializeDate:typeof p.serializeDate=="function"?p.serializeDate:u.serializeDate,skipNulls:typeof p.skipNulls=="boolean"?p.skipNulls:u.skipNulls,sort:typeof p.sort=="function"?p.sort:null,strictNullHandling:typeof p.strictNullHandling=="boolean"?p.strictNullHandling:u.strictNullHandling}};return Wa=function(m,p){var v=m,x=g(p),b,_;typeof x.filter=="function"?(_=x.filter,v=_("",v)):s(x.filter)&&(_=x.filter,b=_);var y=[];if(typeof v!="object"||v===null)return"";var I;p&&p.arrayFormat in i?I=p.arrayFormat:p&&"indices"in p?I=p.indices?"indices":"repeat":I="indices";var A=i[I];if(p&&"commaRoundTrip"in p&&typeof p.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var P=A==="comma"&&p&&p.commaRoundTrip;b||(b=Object.keys(v)),x.sort&&b.sort(x.sort);for(var L=r(),V=0;V<b.length;++V){var U=b[V];x.skipNulls&&v[U]===null||a(y,f(v[U],U,A,P,x.strictNullHandling,x.skipNulls,x.encode?x.encoder:null,x.filter,x.sort,x.allowDots,x.serializeDate,x.format,x.formatter,x.encodeValuesOnly,x.charset,L))}var N=y.join(x.delimiter),M=x.addQueryPrefix===!0?"?":"";return x.charsetSentinel&&(x.charset==="iso-8859-1"?M+="utf8=%26%2310003%3B&":M+="utf8=%E2%9C%93&"),N.length>0?M+N:""},Wa}var za,Ah;function zb(){if(Ah)return za;Ah=1;var r=sp(),e=Object.prototype.hasOwnProperty,t=Array.isArray,n={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},i=function(d){return d.replace(/&#(\d+);/g,function(f,g){return String.fromCharCode(parseInt(g,10))})},s=function(d,f){return d&&typeof d=="string"&&f.comma&&d.indexOf(",")>-1?d.split(","):d},o="utf8=%26%2310003%3B",a="utf8=%E2%9C%93",l=function(f,g){var m={__proto__:null},p=g.ignoreQueryPrefix?f.replace(/^\?/,""):f,v=g.parameterLimit===1/0?void 0:g.parameterLimit,x=p.split(g.delimiter,v),b=-1,_,y=g.charset;if(g.charsetSentinel)for(_=0;_<x.length;++_)x[_].indexOf("utf8=")===0&&(x[_]===a?y="utf-8":x[_]===o&&(y="iso-8859-1"),b=_,_=x.length);for(_=0;_<x.length;++_)if(_!==b){var I=x[_],A=I.indexOf("]="),P=A===-1?I.indexOf("="):A+1,L,V;P===-1?(L=g.decoder(I,n.decoder,y,"key"),V=g.strictNullHandling?null:""):(L=g.decoder(I.slice(0,P),n.decoder,y,"key"),V=r.maybeMap(s(I.slice(P+1),g),function(U){return g.decoder(U,n.decoder,y,"value")})),V&&g.interpretNumericEntities&&y==="iso-8859-1"&&(V=i(V)),I.indexOf("[]=")>-1&&(V=t(V)?[V]:V),e.call(m,L)?m[L]=r.combine(m[L],V):m[L]=V}return m},c=function(d,f,g,m){for(var p=m?f:s(f,g),v=d.length-1;v>=0;--v){var x,b=d[v];if(b==="[]"&&g.parseArrays)x=[].concat(p);else{x=g.plainObjects?Object.create(null):{};var _=b.charAt(0)==="["&&b.charAt(b.length-1)==="]"?b.slice(1,-1):b,y=parseInt(_,10);!g.parseArrays&&_===""?x={0:p}:!isNaN(y)&&b!==_&&String(y)===_&&y>=0&&g.parseArrays&&y<=g.arrayLimit?(x=[],x[y]=p):_!=="__proto__"&&(x[_]=p)}p=x}return p},u=function(f,g,m,p){if(f){var v=m.allowDots?f.replace(/\.([^.[]+)/g,"[$1]"):f,x=/(\[[^[\]]*])/,b=/(\[[^[\]]*])/g,_=m.depth>0&&x.exec(v),y=_?v.slice(0,_.index):v,I=[];if(y){if(!m.plainObjects&&e.call(Object.prototype,y)&&!m.allowPrototypes)return;I.push(y)}for(var A=0;m.depth>0&&(_=b.exec(v))!==null&&A<m.depth;){if(A+=1,!m.plainObjects&&e.call(Object.prototype,_[1].slice(1,-1))&&!m.allowPrototypes)return;I.push(_[1])}return _&&I.push("["+v.slice(_.index)+"]"),c(I,g,m,p)}},h=function(f){if(!f)return n;if(f.decoder!==null&&f.decoder!==void 0&&typeof f.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof f.charset<"u"&&f.charset!=="utf-8"&&f.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var g=typeof f.charset>"u"?n.charset:f.charset;return{allowDots:typeof f.allowDots>"u"?n.allowDots:!!f.allowDots,allowPrototypes:typeof f.allowPrototypes=="boolean"?f.allowPrototypes:n.allowPrototypes,allowSparse:typeof f.allowSparse=="boolean"?f.allowSparse:n.allowSparse,arrayLimit:typeof f.arrayLimit=="number"?f.arrayLimit:n.arrayLimit,charset:g,charsetSentinel:typeof f.charsetSentinel=="boolean"?f.charsetSentinel:n.charsetSentinel,comma:typeof f.comma=="boolean"?f.comma:n.comma,decoder:typeof f.decoder=="function"?f.decoder:n.decoder,delimiter:typeof f.delimiter=="string"||r.isRegExp(f.delimiter)?f.delimiter:n.delimiter,depth:typeof f.depth=="number"||f.depth===!1?+f.depth:n.depth,ignoreQueryPrefix:f.ignoreQueryPrefix===!0,interpretNumericEntities:typeof f.interpretNumericEntities=="boolean"?f.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:typeof f.parameterLimit=="number"?f.parameterLimit:n.parameterLimit,parseArrays:f.parseArrays!==!1,plainObjects:typeof f.plainObjects=="boolean"?f.plainObjects:n.plainObjects,strictNullHandling:typeof f.strictNullHandling=="boolean"?f.strictNullHandling:n.strictNullHandling}};return za=function(d,f){var g=h(f);if(d===""||d===null||typeof d>"u")return g.plainObjects?Object.create(null):{};for(var m=typeof d=="string"?l(d,g):d,p=g.plainObjects?Object.create(null):{},v=Object.keys(m),x=0;x<v.length;++x){var b=v[x],_=u(b,m[b],g,typeof d=="string");p=r.merge(p,_,g)}return g.allowSparse===!0?p:r.compact(p)},za}var Xa,wh;function Xb(){if(wh)return Xa;wh=1;var r=Wb(),e=zb(),t=tu();return Xa={formats:t,parse:e,stringify:r},Xa}var Eh;function jb(){if(Eh)return An;Eh=1;var r=Tb();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,s=["<",">",'"',"`"," ","\r",`
`,"	"],o=["{","}","|","\\","^","`"].concat(s),a=["'"].concat(o),l=["%","/","?",";","#"].concat(a),c=["/","?","#"],u=255,h=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,f={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},p=Xb();function v(y,I,A){if(y&&typeof y=="object"&&y instanceof e)return y;var P=new e;return P.parse(y,I,A),P}e.prototype.parse=function(y,I,A){if(typeof y!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof y);var P=y.indexOf("?"),L=P!==-1&&P<y.indexOf("#")?"?":"#",V=y.split(L),U=/\\/g;V[0]=V[0].replace(U,"/"),y=V.join(L);var N=y;if(N=N.trim(),!A&&y.split("#").length===1){var M=i.exec(N);if(M)return this.path=N,this.href=N,this.pathname=M[1],M[2]?(this.search=M[2],I?this.query=p.parse(this.search.substr(1)):this.query=this.search.substr(1)):I&&(this.search="",this.query={}),this}var k=t.exec(N);if(k){k=k[0];var O=k.toLowerCase();this.protocol=O,N=N.substr(k.length)}if(A||k||N.match(/^\/\/[^@/]+@[^@/]+/)){var S=N.substr(0,2)==="//";S&&!(k&&g[k])&&(N=N.substr(2),this.slashes=!0)}if(!g[k]&&(S||k&&!m[k])){for(var E=-1,C=0;C<c.length;C++){var B=N.indexOf(c[C]);B!==-1&&(E===-1||B<E)&&(E=B)}var T,R;E===-1?R=N.lastIndexOf("@"):R=N.lastIndexOf("@",E),R!==-1&&(T=N.slice(0,R),N=N.slice(R+1),this.auth=decodeURIComponent(T)),E=-1;for(var C=0;C<l.length;C++){var B=N.indexOf(l[C]);B!==-1&&(E===-1||B<E)&&(E=B)}E===-1&&(E=N.length),this.host=N.slice(0,E),N=N.slice(E),this.parseHost(),this.hostname=this.hostname||"";var D=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!D)for(var G=this.hostname.split(/\./),C=0,W=G.length;C<W;C++){var j=G[C];if(j&&!j.match(h)){for(var Y="",$=0,q=j.length;$<q;$++)j.charCodeAt($)>127?Y+="x":Y+=j[$];if(!Y.match(h)){var oe=G.slice(0,C),te=G.slice(C+1),de=j.match(d);de&&(oe.push(de[1]),te.unshift(de[2])),te.length&&(N="/"+te.join(".")+N),this.hostname=oe.join(".");break}}}this.hostname.length>u?this.hostname="":this.hostname=this.hostname.toLowerCase(),D||(this.hostname=r.toASCII(this.hostname));var Q=this.port?":"+this.port:"",ie=this.hostname||"";this.host=ie+Q,this.href+=this.host,D&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),N[0]!=="/"&&(N="/"+N))}if(!f[O])for(var C=0,W=a.length;C<W;C++){var K=a[C];if(N.indexOf(K)!==-1){var re=encodeURIComponent(K);re===K&&(re=escape(K)),N=N.split(K).join(re)}}var le=N.indexOf("#");le!==-1&&(this.hash=N.substr(le),N=N.slice(0,le));var Z=N.indexOf("?");if(Z!==-1?(this.search=N.substr(Z),this.query=N.substr(Z+1),I&&(this.query=p.parse(this.query)),N=N.slice(0,Z)):I&&(this.search="",this.query={}),N&&(this.pathname=N),m[O]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Q=this.pathname||"",ne=this.search||"";this.path=Q+ne}return this.href=this.format(),this};function x(y){return typeof y=="string"&&(y=v(y)),y instanceof e?y.format():e.prototype.format.call(y)}e.prototype.format=function(){var y=this.auth||"";y&&(y=encodeURIComponent(y),y=y.replace(/%3A/i,":"),y+="@");var I=this.protocol||"",A=this.pathname||"",P=this.hash||"",L=!1,V="";this.host?L=y+this.host:this.hostname&&(L=y+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(L+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(V=p.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var U=this.search||V&&"?"+V||"";return I&&I.substr(-1)!==":"&&(I+=":"),this.slashes||(!I||m[I])&&L!==!1?(L="//"+(L||""),A&&A.charAt(0)!=="/"&&(A="/"+A)):L||(L=""),P&&P.charAt(0)!=="#"&&(P="#"+P),U&&U.charAt(0)!=="?"&&(U="?"+U),A=A.replace(/[?#]/g,function(N){return encodeURIComponent(N)}),U=U.replace("#","%23"),I+L+A+U+P};function b(y,I){return v(y,!1,!0).resolve(I)}e.prototype.resolve=function(y){return this.resolveObject(v(y,!1,!0)).format()};function _(y,I){return y?v(y,!1,!0).resolveObject(I):I}return e.prototype.resolveObject=function(y){if(typeof y=="string"){var I=new e;I.parse(y,!1,!0),y=I}for(var A=new e,P=Object.keys(this),L=0;L<P.length;L++){var V=P[L];A[V]=this[V]}if(A.hash=y.hash,y.href==="")return A.href=A.format(),A;if(y.slashes&&!y.protocol){for(var U=Object.keys(y),N=0;N<U.length;N++){var M=U[N];M!=="protocol"&&(A[M]=y[M])}return m[A.protocol]&&A.hostname&&!A.pathname&&(A.pathname="/",A.path=A.pathname),A.href=A.format(),A}if(y.protocol&&y.protocol!==A.protocol){if(!m[y.protocol]){for(var k=Object.keys(y),O=0;O<k.length;O++){var S=k[O];A[S]=y[S]}return A.href=A.format(),A}if(A.protocol=y.protocol,!y.host&&!g[y.protocol]){for(var W=(y.pathname||"").split("/");W.length&&!(y.host=W.shift()););y.host||(y.host=""),y.hostname||(y.hostname=""),W[0]!==""&&W.unshift(""),W.length<2&&W.unshift(""),A.pathname=W.join("/")}else A.pathname=y.pathname;if(A.search=y.search,A.query=y.query,A.host=y.host||"",A.auth=y.auth,A.hostname=y.hostname||y.host,A.port=y.port,A.pathname||A.search){var E=A.pathname||"",C=A.search||"";A.path=E+C}return A.slashes=A.slashes||y.slashes,A.href=A.format(),A}var B=A.pathname&&A.pathname.charAt(0)==="/",T=y.host||y.pathname&&y.pathname.charAt(0)==="/",R=T||B||A.host&&y.pathname,D=R,G=A.pathname&&A.pathname.split("/")||[],W=y.pathname&&y.pathname.split("/")||[],j=A.protocol&&!m[A.protocol];if(j&&(A.hostname="",A.port=null,A.host&&(G[0]===""?G[0]=A.host:G.unshift(A.host)),A.host="",y.protocol&&(y.hostname=null,y.port=null,y.host&&(W[0]===""?W[0]=y.host:W.unshift(y.host)),y.host=null),R=R&&(W[0]===""||G[0]==="")),T)A.host=y.host||y.host===""?y.host:A.host,A.hostname=y.hostname||y.hostname===""?y.hostname:A.hostname,A.search=y.search,A.query=y.query,G=W;else if(W.length)G||(G=[]),G.pop(),G=G.concat(W),A.search=y.search,A.query=y.query;else if(y.search!=null){if(j){A.host=G.shift(),A.hostname=A.host;var Y=A.host&&A.host.indexOf("@")>0?A.host.split("@"):!1;Y&&(A.auth=Y.shift(),A.hostname=Y.shift(),A.host=A.hostname)}return A.search=y.search,A.query=y.query,(A.pathname!==null||A.search!==null)&&(A.path=(A.pathname?A.pathname:"")+(A.search?A.search:"")),A.href=A.format(),A}if(!G.length)return A.pathname=null,A.search?A.path="/"+A.search:A.path=null,A.href=A.format(),A;for(var $=G.slice(-1)[0],q=(A.host||y.host||G.length>1)&&($==="."||$==="..")||$==="",oe=0,te=G.length;te>=0;te--)$=G[te],$==="."?G.splice(te,1):$===".."?(G.splice(te,1),oe++):oe&&(G.splice(te,1),oe--);if(!R&&!D)for(;oe--;oe)G.unshift("..");R&&G[0]!==""&&(!G[0]||G[0].charAt(0)!=="/")&&G.unshift(""),q&&G.join("/").substr(-1)!=="/"&&G.push("");var de=G[0]===""||G[0]&&G[0].charAt(0)==="/";if(j){A.hostname=de?"":G.length?G.shift():"",A.host=A.hostname;var Y=A.host&&A.host.indexOf("@")>0?A.host.split("@"):!1;Y&&(A.auth=Y.shift(),A.hostname=Y.shift(),A.host=A.hostname)}return R=R||A.host&&G.length,R&&!de&&G.unshift(""),G.length>0?A.pathname=G.join("/"):(A.pathname=null,A.path=null),(A.pathname!==null||A.search!==null)&&(A.path=(A.pathname?A.pathname:"")+(A.search?A.search:"")),A.auth=y.auth||A.auth,A.slashes=A.slashes||y.slashes,A.href=A.format(),A},e.prototype.parseHost=function(){var y=this.host,I=n.exec(y);I&&(I=I[0],I!==":"&&(this.port=I.substr(1)),y=y.substr(0,y.length-I.length)),y&&(this.hostname=y)},An.parse=v,An.resolve=b,An.resolveObject=_,An.format=x,An.Url=e,An}jb();const Ih={};function Ge(r,e,t=3){if(Ih[e])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${r}`):(n=n.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${r}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${r}`),console.warn(n))),Ih[e]=!0}function gr(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function Mi(r){return r.split("?")[0].split("#")[0]}function $b(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Yb(r,e,t){return r.replace(new RegExp($b(e),"g"),t)}function Zb(r,e){let t="",n=0,i=-1,s=0,o=-1;for(let a=0;a<=r.length;++a){if(a<r.length)o=r.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(t.length<2||n!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const l=t.lastIndexOf("/");if(l!==t.length-1){l===-1?(t="",n=0):(t=t.slice(0,l),n=t.length-1-t.lastIndexOf("/")),i=a,s=0;continue}}else if(t.length===2||t.length===1){t="",n=0,i=a,s=0;continue}}}else t.length>0?t+=`/${r.slice(i+1,a)}`:t=r.slice(i+1,a),n=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return t}const xt={toPosix(r){return Yb(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){gr(r),r=this.toPosix(r);const e=/^file:\/\/\//.exec(r);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(r);return t?t[0]:""},toAbsolute(r,e,t){if(gr(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;const n=Mi(this.toPosix(e??ue.ADAPTER.getBaseUrl())),i=Mi(this.toPosix(t??this.rootname(n)));return r=this.toPosix(r),r.startsWith("/")?xt.join(i,r.slice(1)):this.isAbsolute(r)?r:this.join(n,r)},normalize(r){if(gr(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let e="";const t=r.startsWith("/");this.hasProtocol(r)&&(e=this.rootname(r),r=r.slice(e.length));const n=r.endsWith("/");return r=Zb(r),r.length>0&&n&&(r+="/"),t?`/${r}`:e+r},isAbsolute(r){return gr(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let e;for(let t=0;t<r.length;++t){const n=r[t];if(gr(n),n.length>0)if(e===void 0)e=n;else{const i=r[t-1]??"";this.joinExtensions.includes(this.extname(i).toLowerCase())?e+=`/../${n}`:e+=`/${n}`}}return e===void 0?".":this.normalize(e)},dirname(r){if(gr(r),r.length===0)return".";r=this.toPosix(r);let e=r.charCodeAt(0);const t=e===47;let n=-1,i=!0;const s=this.getProtocol(r),o=r;r=r.slice(s.length);for(let a=r.length-1;a>=1;--a)if(e=r.charCodeAt(a),e===47){if(!i){n=a;break}}else i=!1;return n===-1?t?"/":this.isUrl(o)?s+r:s:t&&n===1?"//":s+r.slice(0,n)},rootname(r){gr(r),r=this.toPosix(r);let e="";if(r.startsWith("/")?e="/":e=this.getProtocol(r),this.isUrl(r)){const t=r.indexOf("/",e.length);t!==-1?e=r.slice(0,t):e=r,e.endsWith("/")||(e+="/")}return e},basename(r,e){gr(r),e&&gr(e),r=Mi(this.toPosix(r));let t=0,n=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e.length===r.length&&e===r)return"";let o=e.length-1,a=-1;for(s=r.length-1;s>=0;--s){const l=r.charCodeAt(s);if(l===47){if(!i){t=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(n=s):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=r.length),r.slice(t,n)}for(s=r.length-1;s>=0;--s)if(r.charCodeAt(s)===47){if(!i){t=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":r.slice(t,n)},extname(r){gr(r),r=Mi(this.toPosix(r));let e=-1,t=0,n=-1,i=!0,s=0;for(let o=r.length-1;o>=0;--o){const a=r.charCodeAt(o);if(a===47){if(!i){t=o+1;break}continue}n===-1&&(i=!1,n=o+1),a===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===t+1?"":r.slice(e,n)},parse(r){gr(r);const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;r=Mi(this.toPosix(r));let t=r.charCodeAt(0);const n=this.isAbsolute(r);let i;e.root=this.rootname(r),n||this.hasProtocol(r)?i=1:i=0;let s=-1,o=0,a=-1,l=!0,c=r.length-1,u=0;for(;c>=i;--c){if(t=r.charCodeAt(c),t===47){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),t===46?s===-1?s=c:u!==1&&(u=1):s!==-1&&(u=-1)}return s===-1||a===-1||u===0||u===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&n?e.base=e.name=r.slice(1,a):e.base=e.name=r.slice(o,a)):(o===0&&n?(e.name=r.slice(1,s),e.base=r.slice(1,a)):(e.name=r.slice(o,s),e.base=r.slice(o,a)),e.ext=r.slice(s,a)),e.dir=this.dirname(r),e},sep:"/",delimiter:":",joinExtensions:[".html"]};let ja;async function qb(){return ja??(ja=(async()=>{var s;const r=document.createElement("canvas").getContext("webgl");if(!r)return Wt.UNPACK;const e=await new Promise(o=>{const a=document.createElement("video");a.onloadeddata=()=>o(a),a.onerror=()=>o(null),a.autoplay=!1,a.crossOrigin="anonymous",a.preload="auto",a.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",a.load()});if(!e)return Wt.UNPACK;const t=r.createTexture();r.bindTexture(r.TEXTURE_2D,t);const n=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,n),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.NONE),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e);const i=new Uint8Array(4);return r.readPixels(0,0,1,1,r.RGBA,r.UNSIGNED_BYTE,i),r.deleteFramebuffer(n),r.deleteTexture(t),(s=r.getExtension("WEBGL_lose_context"))==null||s.loseContext(),i[0]<=i[3]?Wt.PMA:Wt.UNPACK})()),ja}let $a;function Jb(){return typeof $a>"u"&&($a=function(){var e;const r={stencil:!0,failIfMajorPerformanceCaveat:ue.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!ue.ADAPTER.getWebGLRenderingContext())return!1;const t=ue.ADAPTER.createCanvas();let n=t.getContext("webgl",r)||t.getContext("experimental-webgl",r);const i=!!((e=n==null?void 0:n.getContextAttributes())!=null&&e.stencil);if(n){const s=n.getExtension("WEBGL_lose_context");s&&s.loseContext()}return n=null,i}catch{return!1}}()),$a}var Qb={grad:.9,turn:360,rad:360/(2*Math.PI)},Wr=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},_t=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*r)/t+0},hr=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),r>t?t:r>e?r:e},op=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},Th=function(r){return{r:hr(r.r,0,255),g:hr(r.g,0,255),b:hr(r.b,0,255),a:hr(r.a)}},Ya=function(r){return{r:_t(r.r),g:_t(r.g),b:_t(r.b),a:_t(r.a,3)}},Kb=/^#([0-9a-f]{3,8})$/i,Is=function(r){var e=r.toString(16);return e.length<2?"0"+e:e},ap=function(r){var e=r.r,t=r.g,n=r.b,i=r.a,s=Math.max(e,t,n),o=s-Math.min(e,t,n),a=o?s===e?(t-n)/o:s===t?2+(n-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},lp=function(r){var e=r.h,t=r.s,n=r.v,i=r.a;e=e/360*6,t/=100,n/=100;var s=Math.floor(e),o=n*(1-t),a=n*(1-(e-s)*t),l=n*(1-(1-e+s)*t),c=s%6;return{r:255*[n,a,o,o,l,n][c],g:255*[l,n,n,a,o,o][c],b:255*[o,o,l,n,n,a][c],a:i}},Rh=function(r){return{h:op(r.h),s:hr(r.s,0,100),l:hr(r.l,0,100),a:hr(r.a)}},Ph=function(r){return{h:_t(r.h),s:_t(r.s),l:_t(r.l),a:_t(r.a,3)}},Bh=function(r){return lp((t=(e=r).s,{h:e.h,s:(t*=((n=e.l)<50?n:100-n)/100)>0?2*t/(n+t)*100:0,v:n+t,a:e.a}));var e,t,n},Ji=function(r){return{h:(e=ap(r)).h,s:(i=(200-(t=e.s))*(n=e.v)/100)>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,n,i},e1=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,t1=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,r1=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,n1=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,jl={string:[[function(r){var e=Kb.exec(r);return e?(r=e[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?_t(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?_t(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var e=r1.exec(r)||n1.exec(r);return e?e[2]!==e[4]||e[4]!==e[6]?null:Th({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(r){var e=e1.exec(r)||t1.exec(r);if(!e)return null;var t,n,i=Rh({h:(t=e[1],n=e[2],n===void 0&&(n="deg"),Number(t)*(Qb[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Bh(i)},"hsl"]],object:[[function(r){var e=r.r,t=r.g,n=r.b,i=r.a,s=i===void 0?1:i;return Wr(e)&&Wr(t)&&Wr(n)?Th({r:Number(e),g:Number(t),b:Number(n),a:Number(s)}):null},"rgb"],[function(r){var e=r.h,t=r.s,n=r.l,i=r.a,s=i===void 0?1:i;if(!Wr(e)||!Wr(t)||!Wr(n))return null;var o=Rh({h:Number(e),s:Number(t),l:Number(n),a:Number(s)});return Bh(o)},"hsl"],[function(r){var e=r.h,t=r.s,n=r.v,i=r.a,s=i===void 0?1:i;if(!Wr(e)||!Wr(t)||!Wr(n))return null;var o=function(a){return{h:op(a.h),s:hr(a.s,0,100),v:hr(a.v,0,100),a:hr(a.a)}}({h:Number(e),s:Number(t),v:Number(n),a:Number(s)});return lp(o)},"hsv"]]},Mh=function(r,e){for(var t=0;t<e.length;t++){var n=e[t][0](r);if(n)return[n,e[t][1]]}return[null,void 0]},i1=function(r){return typeof r=="string"?Mh(r.trim(),jl.string):typeof r=="object"&&r!==null?Mh(r,jl.object):[null,void 0]},Za=function(r,e){var t=Ji(r);return{h:t.h,s:hr(t.s+100*e,0,100),l:t.l,a:t.a}},qa=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},Oh=function(r,e){var t=Ji(r);return{h:t.h,s:t.s,l:hr(t.l+100*e,0,100),a:t.a}},$l=function(){function r(e){this.parsed=i1(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return _t(qa(this.rgba),2)},r.prototype.isDark=function(){return qa(this.rgba)<.5},r.prototype.isLight=function(){return qa(this.rgba)>=.5},r.prototype.toHex=function(){return e=Ya(this.rgba),t=e.r,n=e.g,i=e.b,o=(s=e.a)<1?Is(_t(255*s)):"","#"+Is(t)+Is(n)+Is(i)+o;var e,t,n,i,s,o},r.prototype.toRgb=function(){return Ya(this.rgba)},r.prototype.toRgbString=function(){return e=Ya(this.rgba),t=e.r,n=e.g,i=e.b,(s=e.a)<1?"rgba("+t+", "+n+", "+i+", "+s+")":"rgb("+t+", "+n+", "+i+")";var e,t,n,i,s},r.prototype.toHsl=function(){return Ph(Ji(this.rgba))},r.prototype.toHslString=function(){return e=Ph(Ji(this.rgba)),t=e.h,n=e.s,i=e.l,(s=e.a)<1?"hsla("+t+", "+n+"%, "+i+"%, "+s+")":"hsl("+t+", "+n+"%, "+i+"%)";var e,t,n,i,s},r.prototype.toHsv=function(){return e=ap(this.rgba),{h:_t(e.h),s:_t(e.s),v:_t(e.v),a:_t(e.a,3)};var e},r.prototype.invert=function(){return Ir({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},r.prototype.saturate=function(e){return e===void 0&&(e=.1),Ir(Za(this.rgba,e))},r.prototype.desaturate=function(e){return e===void 0&&(e=.1),Ir(Za(this.rgba,-e))},r.prototype.grayscale=function(){return Ir(Za(this.rgba,-1))},r.prototype.lighten=function(e){return e===void 0&&(e=.1),Ir(Oh(this.rgba,e))},r.prototype.darken=function(e){return e===void 0&&(e=.1),Ir(Oh(this.rgba,-e))},r.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},r.prototype.alpha=function(e){return typeof e=="number"?Ir({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):_t(this.rgba.a,3);var t},r.prototype.hue=function(e){var t=Ji(this.rgba);return typeof e=="number"?Ir({h:e,s:t.s,l:t.l,a:t.a}):_t(t.h)},r.prototype.isEqual=function(e){return this.toHex()===Ir(e).toHex()},r}(),Ir=function(r){return r instanceof $l?r:new $l(r)},Nh=[],s1=function(r){r.forEach(function(e){Nh.indexOf(e)<0&&(e($l,jl),Nh.push(e))})};function o1(r,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var i in t)n[t[i]]=i;var s={};r.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,c=n[this.toHex()];if(c)return c;if(o!=null&&o.closest){var u=this.toRgb(),h=1/0,d="black";if(!s.length)for(var f in t)s[f]=new r(t[f]).toRgb();for(var g in t){var m=(a=u,l=s[g],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));m<h&&(h=m,d=g)}return d}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new r(l).toRgb():null},"name"])}s1([o1]);const si=class co{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof co)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,t){const n=typeof e;if(n!==typeof t)return!1;if(n==="number"||n==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((i,s)=>i===t[s]);if(e!==null&&t!==null){const i=Object.keys(e),s=Object.keys(t);return i.length!==s.length?!1:i.every(o=>e[o]===t[o])}return e===t}toRgba(){const[e,t,n,i]=this._components;return{r:e,g:t,b:n,a:i}}toRgb(){const[e,t,n]=this._components;return{r:e,g:t,b:n}}toRgbaString(){const[e,t,n]=this.toUint8RgbArray();return`rgba(${e},${t},${n},${this.alpha})`}toUint8RgbArray(e){const[t,n,i]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(n*255),e[2]=Math.round(i*255),e}toRgbArray(e){e=e??[];const[t,n,i]=this._components;return e[0]=t,e[1]=n,e[2]=i,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,n,i,s]=co.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=n,this._components[2]*=i,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let n=this._int>>16&255,i=this._int>>8&255,s=this._int&255;return t&&(n=n*e+.5|0,i=i*e+.5|0,s=s*e+.5|0),(e*255<<24)+(n<<16)+(i<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,n,i]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(n*e)/e,this._components[2]=Math.round(i*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,n,i,s]=this._components;return e[0]=t,e[1]=n,e[2]=i,e[3]=s,e}normalize(e){let t,n,i,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const o=e;t=(o>>16&255)/255,n=(o>>8&255)/255,i=(o&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,n,i,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,n,i,s=255]=e,t/=255,n/=255,i/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const a=co.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}const o=Ir(e);o.isValid()&&({r:t,g:n,b:i,a:s}=o.rgba,t/=255,n/=255,i/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=n,this._components[2]=i,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,t,n]=this._components;this._int=(e*255<<16)+(t*255<<8)+(n*255|0)}_clamp(e,t=0,n=1){return typeof e=="number"?Math.min(Math.max(e,t),n):(e.forEach((i,s)=>{e[s]=Math.min(Math.max(i,t),n)}),e)}};si.shared=new si,si.temp=new si,si.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let rt=si;function a1(r){return Ge("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),rt.shared.setValue(r).toHex()}function l1(r){return Ge("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),rt.shared.setValue(r).toNumber()}function c1(){const r=[],e=[];for(let n=0;n<32;n++)r[n]=n,e[n]=n;r[we.NORMAL_NPM]=we.NORMAL,r[we.ADD_NPM]=we.ADD,r[we.SCREEN_NPM]=we.SCREEN,e[we.NORMAL]=we.NORMAL_NPM,e[we.ADD]=we.ADD_NPM,e[we.SCREEN]=we.SCREEN_NPM;const t=[];return t.push(e),t.push(r),t}const cp=c1();function up(r,e){return cp[e?1:0][r]}function u1(r,e=null){const t=r*6;if(e=e||new Uint16Array(t),e.length!==t)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${t}`);for(let n=0,i=0;n<t;n+=6,i+=4)e[n+0]=i+0,e[n+1]=i+1,e[n+2]=i+2,e[n+3]=i+0,e[n+4]=i+2,e[n+5]=i+3;return e}function hp(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}function Ao(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function Dh(r){return!(r&r-1)&&!!r}function Lh(r){let e=(r>65535?1:0)<<4;r>>>=e;let t=(r>255?1:0)<<3;return r>>>=t,e|=t,t=(r>15?1:0)<<2,r>>>=t,e|=t,t=(r>3?1:0)<<1,r>>>=t,e|=t,e|r>>1}function pi(r,e,t){const n=r.length;let i;if(e>=n||t===0)return;t=e+t>n?n-e:t;const s=n-t;for(i=e;i<s;++i)r[i]=r[i+t];r.length=s}function hn(r){return r===0?0:r<0?-1:1}let h1=0;function Wn(){return++h1}const Yl=class{constructor(r,e,t,n){this.left=r,this.top=e,this.right=t,this.bottom=n}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};Yl.EMPTY=new Yl(0,0,0,0);let Fh=Yl;const kh={},Tr=Object.create(null),nn=Object.create(null);class d1{constructor(e,t,n){this._canvas=ue.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=n||ue.RESOLUTION,this.resize(e,t)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,t){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(t*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function Gh(r,e,t){for(let n=0,i=4*t*e;n<e;++n,i+=4)if(r[i+3]!==0)return!1;return!0}function Hh(r,e,t,n,i){const s=4*e;for(let o=n,a=n*s+4*t;o<=i;++o,a+=s)if(r[a+3]!==0)return!1;return!0}function f1(r){const{width:e,height:t}=r,n=r.getContext("2d",{willReadFrequently:!0});if(n===null)throw new TypeError("Failed to get canvas 2D context");const i=n.getImageData(0,0,e,t).data;let s=0,o=0,a=e-1,l=t-1;for(;o<t&&Gh(i,e,o);)++o;if(o===t)return Fh.EMPTY;for(;Gh(i,e,l);)--l;for(;Hh(i,e,s,o,l);)++s;for(;Hh(i,e,a,o,l);)--a;return++a,++l,new Fh(s,o,a,l)}function p1(r){const e=f1(r),{width:t,height:n}=e;let i=null;if(!e.isEmpty()){const s=r.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");i=s.getImageData(e.left,e.top,t,n)}return{width:t,height:n,data:i}}function g1(r,e=globalThis.location){if(r.startsWith("data:"))return"";e=e||globalThis.location;const t=new URL(r,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function Qr(r,e=1){var n;const t=(n=ue.RETINA_PREFIX)==null?void 0:n.exec(r);return t?parseFloat(t[1]):e}var ce=(r=>(r.Renderer="renderer",r.Application="application",r.RendererSystem="renderer-webgl-system",r.RendererPlugin="renderer-webgl-plugin",r.CanvasRendererSystem="renderer-canvas-system",r.CanvasRendererPlugin="renderer-canvas-plugin",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r))(ce||{});const Zl=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},Vh=(r,e)=>Zl(r).priority??e,fe={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(Zl).forEach(e=>{e.type.forEach(t=>{var n,i;return(i=(n=this._removeHandlers)[t])==null?void 0:i.call(n,e)})}),this},add(...r){return r.map(Zl).forEach(e=>{e.type.forEach(t=>{const n=this._addHandlers,i=this._queue;n[t]?n[t](e):(i[t]=i[t]||[],i[t].push(e))})}),this},handle(r,e,t){const n=this._addHandlers,i=this._removeHandlers;if(n[r]||i[r])throw new Error(`Extension type ${r} already has a handler`);n[r]=e,i[r]=t;const s=this._queue;return s[r]&&(s[r].forEach(o=>e(o)),delete s[r]),this},handleByMap(r,e){return this.handle(r,t=>{e[t.name]=t.ref},t=>{delete e[t.name]})},handleByList(r,e,t=-1){return this.handle(r,n=>{e.includes(n.ref)||(e.push(n.ref),e.sort((i,s)=>Vh(s,t)-Vh(i,t)))},n=>{const i=e.indexOf(n.ref);i!==-1&&e.splice(i,1)})}};class ql{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const m1=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function v1(r){let e="";for(let t=0;t<r;++t)t>0&&(e+=`
else `),t<r-1&&(e+=`if(test == ${t}.0){}`);return e}function y1(r,e){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);for(;;){const n=m1.replace(/%forloop%/gi,v1(r));if(e.shaderSource(t,n),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))r=r/2|0;else break}return r}const Ja=0,Qa=1,Ka=2,el=3,tl=4,rl=5;class Vr{constructor(){this.data=0,this.blendMode=we.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Ja)}set blend(e){!!(this.data&1<<Ja)!==e&&(this.data^=1<<Ja)}get offsets(){return!!(this.data&1<<Qa)}set offsets(e){!!(this.data&1<<Qa)!==e&&(this.data^=1<<Qa)}get culling(){return!!(this.data&1<<Ka)}set culling(e){!!(this.data&1<<Ka)!==e&&(this.data^=1<<Ka)}get depthTest(){return!!(this.data&1<<el)}set depthTest(e){!!(this.data&1<<el)!==e&&(this.data^=1<<el)}get depthMask(){return!!(this.data&1<<rl)}set depthMask(e){!!(this.data&1<<rl)!==e&&(this.data^=1<<rl)}get clockwiseFrontFace(){return!!(this.data&1<<tl)}set clockwiseFrontFace(e){!!(this.data&1<<tl)!==e&&(this.data^=1<<tl)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==we.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new Vr;return e.depthTest=!1,e.blend=!0,e}}Vr.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const Jl=[];function dp(r,e){if(!r)return null;let t="";if(typeof r=="string"){const n=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);n&&(t=n[1].toLowerCase())}for(let n=Jl.length-1;n>=0;--n){const i=Jl[n];if(i.test&&i.test(r,t))return new i(r,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class Cr{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,t,n,i,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:c,items:u}=this;this._aliasCount++;for(let h=0,d=u.length;h<d;h++)u[h][c](e,t,n,i,s,o,a,l);return u===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Cr.prototype,{dispatch:{value:Cr.prototype.emit},run:{value:Cr.prototype.emit}});class es{constructor(e=0,t=0){this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new Cr("setRealSize"),this.onUpdate=new Cr("update"),this.onError=new Cr("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,t,n){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,t){return!1}}class na extends es{constructor(e,t){const{width:n,height:i}=t||{};if(!n||!i)throw new Error("BufferResource width or height invalid");super(n,i),this.data=e,this.unpackAlignment=t.unpackAlignment??4}upload(e,t,n){const i=e.gl;i.pixelStorei(i.UNPACK_ALIGNMENT,this.unpackAlignment),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===Wt.UNPACK);const s=t.realWidth,o=t.realHeight;return n.width===s&&n.height===o?i.texSubImage2D(t.target,0,0,0,s,o,t.format,n.type,this.data):(n.width=s,n.height=o,i.texImage2D(t.target,0,n.internalFormat,s,o,0,t.format,n.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const b1={scaleMode:cr.NEAREST,alphaMode:Wt.NPM},Ql=class oi extends ds{constructor(e=null,t=null){super(),t=Object.assign({},oi.defaultOptions,t);const{alphaMode:n,mipmap:i,anisotropicLevel:s,scaleMode:o,width:a,height:l,wrapMode:c,format:u,type:h,target:d,resolution:f,resourceOptions:g}=t;e&&!(e instanceof es)&&(e=dp(e,g),e.internal=!0),this.resolution=f||ue.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=s,this._wrapMode=c,this._scaleMode=o,this.format=u,this.type=h,this.target=d,this.alphaMode=n,this.uid=Wn(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,n=!0),n&&this.dirtyStyleId++,this}setSize(e,t,n){return n=n||this.resolution,this.setRealSize(e*n,t*n,n)}setRealSize(e,t,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=Dh(this.realWidth)&&Dh(this.realHeight)}setResolution(e){const t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete nn[this.cacheId],delete Tr[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),oi.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,n=ue.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else{if(!e._pixiId){const a=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${Wn()}`}s=e._pixiId}let o=nn[s];if(i&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return o||(o=new oi(e,t),o.cacheId=s,oi.addToCache(o,s)),o}static fromBuffer(e,t,n,i){e=e||new Float32Array(t*n*4);const s=new na(e,{width:t,height:n,...i==null?void 0:i.resourceOptions});let o,a;return e instanceof Float32Array?(o=se.RGBA,a=ve.FLOAT):e instanceof Int32Array?(o=se.RGBA_INTEGER,a=ve.INT):e instanceof Uint32Array?(o=se.RGBA_INTEGER,a=ve.UNSIGNED_INT):e instanceof Int16Array?(o=se.RGBA_INTEGER,a=ve.SHORT):e instanceof Uint16Array?(o=se.RGBA_INTEGER,a=ve.UNSIGNED_SHORT):e instanceof Int8Array?(o=se.RGBA,a=ve.BYTE):(o=se.RGBA,a=ve.UNSIGNED_BYTE),s.internal=!0,new oi(s,Object.assign({},b1,{type:a,format:o},i))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),nn[t]&&nn[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),nn[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=nn[e];if(t){const n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete nn[e],t}}else if(e!=null&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete nn[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};Ql.defaultOptions={mipmap:kr.POW2,anisotropicLevel:0,scaleMode:cr.LINEAR,wrapMode:fn.CLAMP,alphaMode:Wt.UNPACK,target:fi.TEXTURE_2D,format:se.RGBA,type:ve.UNSIGNED_BYTE},Ql._globalBatch=0;let Me=Ql;class Kl{constructor(){this.texArray=null,this.blend=0,this.type=Or.TRIANGLES,this.start=0,this.size=0,this.data=null}}let x1=0;class ht{constructor(e,t=!0,n=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=t,this.id=x1++,this.disposeRunner=new Cr("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?Dr.ELEMENT_ARRAY_BUFFER:Dr.ARRAY_BUFFER}get index(){return this.type===Dr.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new ht(e)}}class wo{constructor(e,t=0,n=!1,i=ve.FLOAT,s,o,a,l=1){this.buffer=e,this.size=t,this.normalized=n,this.type=i,this.stride=s,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(e,t,n,i,s){return new wo(e,t,n,i,s)}}const C1={Float32Array,Uint32Array,Int32Array,Uint8Array};function _1(r,e){let t=0,n=0;const i={};for(let l=0;l<r.length;l++)n+=e[l],t+=r[l].length;const s=new ArrayBuffer(t*4);let o=null,a=0;for(let l=0;l<r.length;l++){const c=e[l],u=r[l],h=hp(u);i[h]||(i[h]=new C1[h](s)),o=i[h];for(let d=0;d<u.length;d++){const f=(d/c|0)*n+a,g=d%c;o[f+g]=u[d]}a+=c}return new Float32Array(s)}const Uh={5126:4,5123:2,5121:1};let S1=0;const A1={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class mn{constructor(e=[],t={}){this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=S1++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Cr("disposeGeometry"),this.refCount=0}addAttribute(e,t,n=0,i=!1,s,o,a,l=!1){if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof ht||(t instanceof Array&&(t=new Float32Array(t)),t=new ht(t));const c=e.split("|");if(c.length>1){for(let h=0;h<c.length;h++)this.addAttribute(c[h],t,n,i,s);return this}let u=this.buffers.indexOf(t);return u===-1&&(this.buffers.push(t),u=this.buffers.length-1),this.attributes[e]=new wo(u,n,i,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof ht||(e instanceof Array&&(e=new Uint16Array(e)),e=new ht(e)),e.type=Dr.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],t=[],n=new ht;let i;for(i in this.attributes){const s=this.attributes[i],o=this.buffers[s.buffer];e.push(o.data),t.push(s.size*Uh[s.type]/4),s.buffer=0}for(n.data=_1(e,t),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new mn;for(let t=0;t<this.buffers.length;t++)e.buffers[t]=new ht(this.buffers[t].data.slice(0));for(const t in this.attributes){const n=this.attributes[t];e.attributes[t]=new wo(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Dr.ELEMENT_ARRAY_BUFFER),e}static merge(e){const t=new mn,n=[],i=[],s=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)i[l]=i[l]||0,i[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)n[a]=new A1[hp(o.buffers[a].data)](i[a]),t.buffers[a]=new ht(n[a]);for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)n[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(t.attributes=o.attributes,o.indexBuffer){t.indexBuffer=t.buffers[o.buffers.indexOf(o.indexBuffer)],t.indexBuffer.type=Dr.ELEMENT_ARRAY_BUFFER;let a=0,l=0,c=0,u=0;for(let h=0;h<o.buffers.length;h++)if(o.buffers[h]!==o.indexBuffer){u=h;break}for(const h in o.attributes){const d=o.attributes[h];(d.buffer|0)===u&&(l+=d.size*Uh[d.type]/4)}for(let h=0;h<e.length;h++){const d=e[h].indexBuffer.data;for(let f=0;f<d.length;f++)t.indexBuffer.data[f+c]+=a;a+=e[h].buffers[u].data.length/l,c+=d.length}}return t}}class fp extends mn{constructor(e=!1){super(),this._buffer=new ht(null,e,!1),this._indexBuffer=new ht(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,ve.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,ve.FLOAT).addAttribute("aColor",this._buffer,4,!0,ve.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,ve.FLOAT).addIndex(this._indexBuffer)}}const Eo=Math.PI*2,w1=180/Math.PI,E1=Math.PI/180;var Tt=(r=>(r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC",r))(Tt||{});class ze{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new ze(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}}ze.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const Ts=[new ze,new ze,new ze,new ze];class ke{constructor(e=0,t=0,n=0,i=0){this.x=Number(e),this.y=Number(t),this.width=Number(n),this.height=Number(i),this.type=Tt.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new ke(0,0,0,0)}clone(){return new ke(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}intersects(e,t){if(!t){const P=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=P)return!1;const L=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>L}const n=this.left,i=this.right,s=this.top,o=this.bottom;if(i<=n||o<=s)return!1;const a=Ts[0].set(e.left,e.top),l=Ts[1].set(e.left,e.bottom),c=Ts[2].set(e.right,e.top),u=Ts[3].set(e.right,e.bottom);if(c.x<=a.x||l.y<=a.y)return!1;const h=Math.sign(t.a*t.d-t.b*t.c);if(h===0||(t.apply(a,a),t.apply(l,l),t.apply(c,c),t.apply(u,u),Math.max(a.x,l.x,c.x,u.x)<=n||Math.min(a.x,l.x,c.x,u.x)>=i||Math.max(a.y,l.y,c.y,u.y)<=s||Math.min(a.y,l.y,c.y,u.y)>=o))return!1;const d=h*(l.y-a.y),f=h*(a.x-l.x),g=d*n+f*s,m=d*i+f*s,p=d*n+f*o,v=d*i+f*o;if(Math.max(g,m,p,v)<=d*a.x+f*a.y||Math.min(g,m,p,v)>=d*u.x+f*u.y)return!1;const x=h*(a.y-c.y),b=h*(c.x-a.x),_=x*n+b*s,y=x*i+b*s,I=x*n+b*o,A=x*i+b*o;return!(Math.max(_,y,I,A)<=x*a.x+b*a.y||Math.min(_,y,I,A)>=x*u.x+b*u.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(n-t,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(e=1,t=.001){const n=Math.ceil((this.x+this.width-t)*e)/e,i=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=n-this.x,this.height=i-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=n-t,this.y=i,this.height=s-i,this}}ke.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class ia{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.radius=n,this.type=Tt.CIRC}clone(){return new ia(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const n=this.radius*this.radius;let i=this.x-e,s=this.y-t;return i*=i,s*=s,i+s<=n}getBounds(){return new ke(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}ia.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class sa{constructor(e=0,t=0,n=0,i=0){this.x=e,this.y=t,this.width=n,this.height=i,this.type=Tt.ELIP}clone(){return new sa(this.x,this.y,this.width,this.height)}contains(e,t){if(this.width<=0||this.height<=0)return!1;let n=(e-this.x)/this.width,i=(t-this.y)/this.height;return n*=n,i*=i,n+i<=1}getBounds(){return new ke(this.x-this.width,this.y-this.height,this.width,this.height)}}sa.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Fn{constructor(...e){let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const n=[];for(let i=0,s=t.length;i<s;i++)n.push(t[i].x,t[i].y);t=n}this.points=t,this.type=Tt.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),t=new Fn(e);return t.closeStroke=this.closeStroke,t}contains(e,t){let n=!1;const i=this.points.length/2;for(let s=0,o=i-1;s<i;o=s++){const a=this.points[s*2],l=this.points[s*2+1],c=this.points[o*2],u=this.points[o*2+1];l>t!=u>t&&e<(c-a)*((t-l)/(u-l))+a&&(n=!n)}return n}}Fn.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((r,e)=>`${r}, ${e}`,"")}]`};class oa{constructor(e=0,t=0,n=0,i=0,s=20){this.x=e,this.y=t,this.width=n,this.height=i,this.radius=s,this.type=Tt.RREC}clone(){return new oa(this.x,this.y,this.width,this.height,this.radius)}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+n&&t<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;let i=e-(this.x+n),s=t-(this.y+n);const o=n*n;if(i*i+s*s<=o||(i=e-(this.x+this.width-n),i*i+s*s<=o)||(s=t-(this.y+this.height-n),i*i+s*s<=o)||(i=e-(this.x+n),i*i+s*s<=o))return!0}return!1}}oa.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class nt{constructor(e=1,t=0,n=0,i=1,s=0,o=0){this.array=null,this.a=e,this.b=t,this.c=n,this.d=i,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,n,i,s,o){return this.a=e,this.b=t,this.c=n,this.d=i,this.tx=s,this.ty=o,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(e,t){t=t||new ze;const n=e.x,i=e.y;return t.x=this.a*n+this.c*i+this.tx,t.y=this.b*n+this.d*i+this.ty,t}applyInverse(e,t){t=t||new ze;const n=1/(this.a*this.d+this.c*-this.b),i=e.x,s=e.y;return t.x=this.d*n*i+-this.c*n*s+(this.ty*this.c-this.tx*this.d)*n,t.y=this.a*n*s+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),i=this.a,s=this.c,o=this.tx;return this.a=i*t-this.b*n,this.b=i*n+this.b*t,this.c=s*t-this.d*n,this.d=s*n+this.d*t,this.tx=o*t-this.ty*n,this.ty=o*n+this.ty*t,this}append(e){const t=this.a,n=this.b,i=this.c,s=this.d;return this.a=e.a*t+e.b*i,this.b=e.a*n+e.b*s,this.c=e.c*t+e.d*i,this.d=e.c*n+e.d*s,this.tx=e.tx*t+e.ty*i+this.tx,this.ty=e.tx*n+e.ty*s+this.ty,this}setTransform(e,t,n,i,s,o,a,l,c){return this.a=Math.cos(a+c)*s,this.b=Math.sin(a+c)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(n*this.a+i*this.c),this.ty=t-(n*this.b+i*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const n=this.a,i=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,n=this.b,i=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-i,s),l=Math.atan2(n,t),c=Math.abs(a+l);return c<1e-5||Math.abs(Eo-c)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(t*t+n*n),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(o.x*t+o.y*i),e.position.y=this.ty+(o.x*n+o.y*s),e}invert(){const e=this.a,t=this.b,n=this.c,i=this.d,s=this.tx,o=e*i-t*n;return this.a=i/o,this.b=-t/o,this.c=-n/o,this.d=e/o,this.tx=(n*this.ty-i*s)/o,this.ty=-(e*this.ty-t*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new nt;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new nt}static get TEMP_MATRIX(){return new nt}}nt.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const In=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Tn=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Rn=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Pn=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],ec=[],pp=[],Rs=Math.sign;function I1(){for(let r=0;r<16;r++){const e=[];ec.push(e);for(let t=0;t<16;t++){const n=Rs(In[r]*In[t]+Rn[r]*Tn[t]),i=Rs(Tn[r]*In[t]+Pn[r]*Tn[t]),s=Rs(In[r]*Rn[t]+Rn[r]*Pn[t]),o=Rs(Tn[r]*Rn[t]+Pn[r]*Pn[t]);for(let a=0;a<16;a++)if(In[a]===n&&Tn[a]===i&&Rn[a]===s&&Pn[a]===o){e.push(a);break}}}for(let r=0;r<16;r++){const e=new nt;e.set(In[r],Tn[r],Rn[r],Pn[r],0,0),pp.push(e)}}I1();const ot={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>In[r],uY:r=>Tn[r],vX:r=>Rn[r],vY:r=>Pn[r],inv:r=>r&8?r&15:-r&7,add:(r,e)=>ec[r][e],sub:(r,e)=>ec[r][ot.inv(e)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,e)=>Math.abs(r)*2<=Math.abs(e)?e>=0?ot.S:ot.N:Math.abs(e)*2<=Math.abs(r)?r>0?ot.E:ot.W:e>0?r>0?ot.SE:ot.SW:r>0?ot.NE:ot.NW,matrixAppendRotationInv:(r,e,t=0,n=0)=>{const i=pp[ot.inv(e)];i.tx=t,i.ty=n,r.append(i)}};class Yr{constructor(e,t,n=0,i=0){this._x=n,this._y=i,this.cb=e,this.scope=t}clone(e=this.cb,t=this.scope){return new Yr(e,t,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}Yr.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const tc=class{constructor(){this.worldTransform=new nt,this.localTransform=new nt,this.position=new Yr(this.onChange,this,0,0),this.scale=new Yr(this.onChange,this,1,1),this.pivot=new Yr(this.onChange,this,0,0),this.skew=new Yr(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(r){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){const t=r.worldTransform,n=this.worldTransform;n.a=e.a*t.a+e.b*t.c,n.b=e.a*t.b+e.b*t.d,n.c=e.c*t.a+e.d*t.c,n.d=e.c*t.b+e.d*t.d,n.tx=e.tx*t.a+e.ty*t.c+t.tx,n.ty=e.tx*t.b+e.ty*t.d+t.ty,this._parentID=r._worldID,this._worldID++}}setFromMatrix(r){r.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())}};tc.IDENTITY=new tc;let ru=tc;ru.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var T1=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,R1=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function Wh(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}function nl(r){const e=new Array(r);for(let t=0;t<e.length;t++)e[t]=!1;return e}function gp(r,e){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return nl(2*e);case"bvec3":return nl(3*e);case"bvec4":return nl(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const gi=[{test:r=>r.type==="float"&&r.size===1&&!r.isArray,code:r=>`
            if(uv["${r}"] !== ud["${r}"].value)
            {
                ud["${r}"].value = uv["${r}"]
                gl.uniform1f(ud["${r}"].location, uv["${r}"])
            }
            `},{test:(r,e)=>(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray&&(e==null||e.castToBaseTexture!==void 0),code:r=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${r}"], t);

            if(ud["${r}"].value !== t)
            {
                ud["${r}"].value = t;
                gl.uniform1i(ud["${r}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(r,e)=>r.type==="mat3"&&r.size===1&&!r.isArray&&e.a!==void 0,code:r=>`
            gl.uniformMatrix3fv(ud["${r}"].location, false, uv["${r}"].toArray(true));
            `,codeUbo:r=>`
                var ${r}_matrix = uv.${r}.toArray(true);

                data[offset] = ${r}_matrix[0];
                data[offset+1] = ${r}_matrix[1];
                data[offset+2] = ${r}_matrix[2];
        
                data[offset + 4] = ${r}_matrix[3];
                data[offset + 5] = ${r}_matrix[4];
                data[offset + 6] = ${r}_matrix[5];
        
                data[offset + 8] = ${r}_matrix[6];
                data[offset + 9] = ${r}_matrix[7];
                data[offset + 10] = ${r}_matrix[8];
            `},{test:(r,e)=>r.type==="vec2"&&r.size===1&&!r.isArray&&e.x!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${r}"].location, v.x, v.y);
                }`,codeUbo:r=>`
                v = uv.${r};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:r=>r.type==="vec2"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${r}"].location, v[0], v[1]);
                }
            `},{test:(r,e)=>r.type==="vec4"&&r.size===1&&!r.isArray&&e.width!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${r}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(r,e)=>r.type==="vec4"&&r.size===1&&!r.isArray&&e.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${r}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(r,e)=>r.type==="vec3"&&r.size===1&&!r.isArray&&e.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${r}"].location, v.red, v.green, v.blue)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:r=>r.type==="vec4"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${r}"].location, v[0], v[1], v[2], v[3])
                }`}],P1={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},B1={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function M1(r,e){var n;const t=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const i in r.uniforms){const s=e[i];if(!s){((n=r.uniforms[i])==null?void 0:n.group)===!0&&(r.uniforms[i].ubo?t.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${i}, '${i}');
                    `):t.push(`
                        renderer.shader.syncUniformGroup(uv.${i}, syncData);
                    `));continue}const o=r.uniforms[i];let a=!1;for(let l=0;l<gi.length;l++)if(gi[l].test(s,o)){t.push(gi[l].code(i,o)),a=!0;break}if(!a){const l=(s.size===1&&!s.isArray?P1:B1)[s.type].replace("location",`ud["${i}"].location`);t.push(`
            cu = ud["${i}"];
            cv = cu.value;
            v = uv["${i}"];
            ${l};`)}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}const mp={};let ti=mp;function O1(){if(ti===mp||ti!=null&&ti.isContextLost()){const r=ue.ADAPTER.createCanvas();let e;ue.PREFER_ENV>=Zn.WEBGL2&&(e=r.getContext("webgl2",{})),e||(e=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),ti=e}return ti}let Ps;function N1(){if(!Ps){Ps=ur.MEDIUM;const r=O1();if(r&&r.getShaderPrecisionFormat){const e=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);e&&(Ps=e.precision?ur.HIGH:ur.MEDIUM)}}return Ps}function zh(r,e){const t=r.getShaderSource(e).split(`
`).map((c,u)=>`${u}: ${c}`),n=r.getShaderInfoLog(e),i=n.split(`
`),s={},o=i.map(c=>parseFloat(c.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(c=>c&&!s[c]?(s[c]=!0,!0):!1),a=[""];o.forEach(c=>{t[c-1]=`%c${t[c-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=t.join(`
`);a[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function D1(r,e,t,n){r.getProgramParameter(e,r.LINK_STATUS)||(r.getShaderParameter(t,r.COMPILE_STATUS)||zh(r,t),r.getShaderParameter(n,r.COMPILE_STATUS)||zh(r,n),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(e)))}const L1={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function vp(r){return L1[r]}let Bs=null;const Xh={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function yp(r,e){if(!Bs){const t=Object.keys(Xh);Bs={};for(let n=0;n<t.length;++n){const i=t[n];Bs[r[i]]=Xh[i]}}return Bs[e]}function jh(r,e,t){if(r.substring(0,9)!=="precision"){let n=e;return e===ur.HIGH&&t!==ur.HIGH&&(n=ur.MEDIUM),`precision ${n} float;
${r}`}else if(t!==ur.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}let Oi;function F1(){if(typeof Oi=="boolean")return Oi;try{Oi=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Oi=!1}return Oi}let k1=0;const Ms={},rc=class ai{constructor(e,t,n="pixi-shader",i={}){this.extra={},this.id=k1++,this.vertexSrc=e||ai.defaultVertexSrc,this.fragmentSrc=t||ai.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),Ms[n]?(Ms[n]++,n+=`-${Ms[n]}`):Ms[n]=1,this.vertexSrc=`#define SHADER_NAME ${n}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${n}
${this.fragmentSrc}`,this.vertexSrc=jh(this.vertexSrc,ai.defaultVertexPrecision,ur.HIGH),this.fragmentSrc=jh(this.fragmentSrc,ai.defaultFragmentPrecision,N1())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return R1}static get defaultFragmentSrc(){return T1}static from(e,t,n){const i=e+t;let s=kh[i];return s||(kh[i]=s=new ai(e,t,n)),s}};rc.defaultVertexPrecision=ur.HIGH,rc.defaultFragmentPrecision=$r.apple.device?ur.HIGH:ur.MEDIUM;let Zr=rc,G1=0;class _r{constructor(e,t,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=G1++,this.static=!!t,this.ubo=!!n,e instanceof ht?(this.buffer=e,this.buffer.type=Dr.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new ht(new Float32Array(1)),this.buffer.type=Dr.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,t,n){if(!this.ubo)this.uniforms[e]=new _r(t,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,t,n){return new _r(e,t,n)}static uboFrom(e,t){return new _r(e,t??!0,!0)}}class Lr{constructor(e,t){this.uniformBindCount=0,this.program=e,t?t instanceof _r?this.uniformGroup=t:this.uniformGroup=new _r(t):this.uniformGroup=new _r({}),this.disposeRunner=new Cr("disposeShader")}checkUniformExists(e,t){if(t.uniforms[e])return!0;for(const n in t.uniforms){const i=t.uniforms[n];if(i.group===!0&&this.checkUniformExists(e,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,t,n){const i=Zr.from(e,t);return new Lr(i,n)}}class H1{constructor(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},!t.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!t.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const n=new Int32Array(e);for(let s=0;s<e;s++)n[s]=s;this.defaultGroupCache[e]=_r.from({uSamplers:n},!0);let i=this.fragTemplate;i=i.replace(/%count%/gi,`${e}`),i=i.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Zr(this.vertexSrc,i)}const t={tint:new Float32Array([1,1,1,1]),translationMatrix:new nt,default:this.defaultGroupCache[e]};return new Lr(this.programCache[e],t)}generateSampleSrc(e){let t="";t+=`
`,t+=`
`;for(let n=0;n<e;n++)n>0&&(t+=`
else `),n<e-1&&(t+=`if(vTextureId < ${n}.5)`),t+=`
{`,t+=`
	color = texture2D(uSamplers[${n}], vTextureCoord);`,t+=`
}`;return t+=`
`,t+=`
`,t}}class nc{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function V1(){return!$r.apple.device}function U1(r){let e=!0;const t=ue.ADAPTER.getNavigator();if($r.tablet||$r.phone){if($r.apple.device){const n=t.userAgent.match(/OS (\d+)_(\d+)?/);n&&parseInt(n[1],10)<11&&(e=!1)}if($r.android.device){const n=t.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)<7&&(e=!1)}}return e?r:4}class aa{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var W1=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,z1=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const Hi=class vr extends aa{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=fp,this.vertexSize=6,this.state=Vr.for2d(),this.size=vr.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??U1(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??V1(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return Ge("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return z1}static get defaultFragmentTemplate(){return W1}setShaderGenerator({vertex:e=vr.defaultVertexSrc,fragment:t=vr.defaultFragmentTemplate}={}){this.shaderGenerator=new H1(e,t)}contextChange(){const e=this.renderer.gl;ue.PREFER_ENV===Zn.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),vr.defaultMaxTextures),this.maxTextures=y1(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=vr,n=this.size/4,i=Math.floor(n/this.maxTextures)+1;for(;e.length<n;)e.push(new Kl);for(;t.length<i;)t.push(new nc);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:t}=this,n=vr._textureArrayPool,i=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count;let a=++Me._globalBatch,l=0,c=n[0],u=0;i.copyBoundTextures(s,t);for(let h=0;h<this._bufferSize;++h){const d=e[h];e[h]=null,d._batchEnabled!==a&&(c.count>=t&&(i.boundArray(c,s,a,t),this.buildDrawCalls(c,u,h),u=h,c=n[++l],++a),d._batchEnabled=a,d.touched=o,c.elements[c.count++]=d)}c.count>0&&(i.boundArray(c,s,a,t),this.buildDrawCalls(c,u,this._bufferSize),++l,++a);for(let h=0;h<s.length;h++)s[h]=null;Me._globalBatch=a}buildDrawCalls(e,t,n){const{_bufferedElements:i,_attributeBuffer:s,_indexBuffer:o,vertexSize:a}=this,l=vr._drawCallPool;let c=this._dcIndex,u=this._aIndex,h=this._iIndex,d=l[c];d.start=this._iIndex,d.texArray=e;for(let f=t;f<n;++f){const g=i[f],m=g._texture.baseTexture,p=cp[m.alphaMode?1:0][g.blendMode];i[f]=null,t<f&&d.blend!==p&&(d.size=h-d.start,t=f,d=l[++c],d.texArray=e,d.start=h),this.packInterleavedGeometry(g,s,o,u,h),u+=g.vertexData.length/2*a,h+=g.indices.length,d.blend=p}t<n&&(d.size=h-d.start,++c),this._dcIndex=c,this._aIndex=u,this._iIndex=h}bindAndClearTexArray(e){const t=this.renderer.texture;for(let n=0;n<e.count;n++)t.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:n}=this;vr.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:n}=this.renderer,i=vr._drawCallPool;let s=null;for(let o=0;o<e;o++){const{texArray:a,type:l,size:c,start:u,blend:h}=i[o];s!==a&&(s=a,this.bindAndClearTexArray(a)),this.state.blendMode=h,n.set(this.state),t.drawElements(l,c,t.UNSIGNED_SHORT,u*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),vr.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=Ao(Math.ceil(e/8)),n=Lh(t),i=t*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);let s=this._aBuffers[i];return s||(this._aBuffers[i]=s=new ql(i*this.vertexSize*4)),s}getIndexBuffer(e){const t=Ao(Math.ceil(e/12)),n=Lh(t),i=t*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);let s=this._iBuffers[n];return s||(this._iBuffers[n]=s=new Uint16Array(i)),s}packInterleavedGeometry(e,t,n,i,s){const{uint32View:o,float32View:a}=t,l=i/this.vertexSize,c=e.uvs,u=e.indices,h=e.vertexData,d=e._texture.baseTexture._batchLocation,f=Math.min(e.worldAlpha,1),g=rt.shared.setValue(e._tintRGB).toPremultiplied(f,e._texture.baseTexture.alphaMode>0);for(let m=0;m<h.length;m+=2)a[i++]=h[m],a[i++]=h[m+1],a[i++]=c[m],a[i++]=c[m+1],o[i++]=g,a[i++]=d;for(let m=0;m<u.length;m++)n[s++]=l+u[m]}};Hi.defaultBatchSize=4096,Hi.extension={name:"batch",type:ce.RendererPlugin},Hi._drawCallPool=[],Hi._textureArrayPool=[];let Bn=Hi;fe.add(Bn);var X1=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,j1=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const ic=class Vi extends Lr{constructor(e,t,n){const i=Zr.from(e||Vi.defaultVertexSrc,t||Vi.defaultFragmentSrc);super(i,n),this.padding=0,this.resolution=Vi.defaultResolution,this.multisample=Vi.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Vr}apply(e,t,n,i,s){e.applyFilter(this,t,n,i)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return j1}static get defaultFragmentSrc(){return X1}};ic.defaultResolution=1,ic.defaultMultisample=mt.NONE;let kt=ic;class Io{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new rt(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:t,background:n,backgroundAlpha:i}=e,s=n??t;s!==void 0&&(this.color=s),this.alpha=i}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}Io.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},Io.extension={type:[ce.RendererSystem,ce.CanvasRendererSystem],name:"background"};fe.add(Io);class bp{constructor(e){this.renderer=e,this.emptyRenderer=new aa(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,t){const{boundTextures:n}=this.renderer.texture;for(let i=t-1;i>=0;--i)e[i]=n[i]||null,e[i]&&(e[i]._batchLocation=i)}boundArray(e,t,n,i){const{elements:s,ids:o,count:a}=e;let l=0;for(let c=0;c<a;c++){const u=s[c],h=u._batchLocation;if(h>=0&&h<i&&t[h]===u){o[c]=h;continue}for(;l<i;){const d=t[l];if(d&&d._batchEnabled===n&&d._batchLocation===l){l++;continue}o[c]=l,u._batchLocation=l,t[l]=u;break}}}destroy(){this.renderer=null}}bp.extension={type:ce.RendererSystem,name:"batch"};fe.add(bp);let $h=0;class To{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=$h++}init(e){if(e.context)this.initFromContext(e.context);else{const t=this.renderer.background.alpha<1,n=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:n,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=$h++,this.renderer.runners.contextChange.emit(e);const t=this.renderer.view;t.addEventListener!==void 0&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const t=this.createContext(this.renderer.view,e);this.initFromContext(t)}createContext(e,t){let n;if(ue.PREFER_ENV>=Zn.WEBGL2&&(n=e.getContext("webgl2",t)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const t=e.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}To.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},To.extension={type:ce.RendererSystem,name:"context"};fe.add(To);class sc{constructor(e,t){if(this.width=Math.round(e),this.height=Math.round(t),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Cr("disposeFramebuffer"),this.multisample=mt.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,t){return this.colorTextures[e]=t||new Me(null,{scaleMode:cr.NEAREST,resolution:1,mipmap:kr.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new Me(null,{scaleMode:cr.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:kr.OFF,format:se.DEPTH_COMPONENT,type:ve.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,t){if(e=Math.round(e),t=Math.round(t),!e||!t)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&t===this.height)){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(let n=0;n<this.colorTextures.length;n++){const i=this.colorTextures[n],s=i.resolution;i.setSize(e/s,t/s)}if(this.depthTexture){const n=this.depthTexture.resolution;this.depthTexture.setSize(e/n,t/n)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class xp extends Me{constructor(e={}){if(typeof e=="number"){const t=arguments[0],n=arguments[1],i=arguments[2],s=arguments[3];e={width:t,height:n,scaleMode:i,resolution:s}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=mt.NONE),super(null,e),this.mipmap=kr.OFF,this.valid=!0,this._clear=new rt([0,0,0,0]),this.framebuffer=new sc(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class vn extends es{constructor(e){const t=e,n=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;super(n,i),this.source=e,this.noSubImage=!1}static crossOrigin(e,t,n){n===void 0&&!t.startsWith("data:")?e.crossOrigin=g1(t):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")}upload(e,t,n,i){const s=e.gl,o=t.realWidth,a=t.realHeight;if(i=i||this.source,typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement){if(!i.complete||i.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement&&i.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===Wt.UNPACK),!this.noSubImage&&t.target===s.TEXTURE_2D&&n.width===o&&n.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,t.format,n.type,i):(n.width=o,n.height=a,s.texImage2D(t.target,0,n.internalFormat,t.format,n.type,i)),!0}update(){if(this.destroyed)return;const e=this.source,t=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(t,n),super.update()}dispose(){this.source=null}}class Cp extends vn{constructor(e,t){if(t=t||{},typeof e=="string"){const n=new Image;vn.crossOrigin(n,e,t.crossorigin),n.src=e,e=n}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(t.createBitmap??ue.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.bitmap=null,this._load=null,t.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((t,n)=>{const i=this.source;this.url=i.src;const s=()=>{this.destroyed||(i.onload=null,i.onerror=null,this.update(),this._load=null,this.createBitmap?t(this.process()):t(this))};i.complete&&i.src?s():(i.onload=s,i.onerror=o=>{n(o),this.onError.emit(o)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const t=globalThis.createImageBitmap,n=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:n?"cors":"no-cors"}).then(i=>i.blob()).then(i=>t(i,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Wt.UNPACK?"premultiply":"none"})).then(i=>this.destroyed?Promise.reject():(this.bitmap=i,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,t,n){if(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,t,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,t,n,this.bitmap),!this.preserveBitmap){let i=!0;const s=t._glTextures;for(const o in s){const a=s[o];if(a!==n&&a.dirtyId!==t.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class nu{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,n){const i=t.width,s=t.height;if(n){const o=e.width/2/i,a=e.height/2/s,l=e.x/i+o,c=e.y/s+a;n=ot.add(n,ot.NW),this.x0=l+o*ot.uX(n),this.y0=c+a*ot.uY(n),n=ot.add(n,2),this.x1=l+o*ot.uX(n),this.y1=c+a*ot.uY(n),n=ot.add(n,2),this.x2=l+o*ot.uX(n),this.y2=c+a*ot.uY(n),n=ot.add(n,2),this.x3=l+o*ot.uX(n),this.y3=c+a*ot.uY(n)}else this.x0=e.x/i,this.y0=e.y/s,this.x1=(e.x+e.width)/i,this.y1=e.y/s,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/s,this.x3=e.x/i,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}nu.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const Yh=new nu;function Os(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}class ge extends ds{constructor(e,t,n,i,s,o,a){if(super(),this.noFrame=!1,t||(this.noFrame=!0,t=new ke(0,0,1,1)),e instanceof ge&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=i,this.valid=!1,this.destroyed=!1,this._uvs=Yh,this.uvMatrix=null,this.orig=n||t,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new ze(o.x,o.y):new ze(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:t}=this.baseTexture;t!=null&&t.url&&Tr[t.url]&&ge.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,ge.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var i;const e=this._frame.clone(),t=this._frame===this.orig?e:this.orig.clone(),n=new ge(this.baseTexture,!this.noFrame&&e,t,(i=this.trim)==null?void 0:i.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(n._frame=e),n}updateUvs(){this._uvs===Yh&&(this._uvs=new nu),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,t={},n=ue.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else if(e instanceof Me){if(!e.cacheId){const a=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e.cacheId=`${a}-${Wn()}`,Me.addToCache(e,e.cacheId)}s=e.cacheId}else{if(!e._pixiId){const a=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${Wn()}`}s=e._pixiId}let o=Tr[s];if(i&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(e instanceof Me)?(t.resolution||(t.resolution=Qr(e)),o=new ge(new Me(e,t)),o.baseTexture.cacheId=s,Me.addToCache(o.baseTexture,s),ge.addToCache(o,s)):!o&&e instanceof Me&&(o=new ge(e),ge.addToCache(o,s)),o}static fromURL(e,t){const n=Object.assign({autoLoad:!1},t==null?void 0:t.resourceOptions),i=ge.from(e,Object.assign({resourceOptions:n},t),!1),s=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):s.load().then(()=>Promise.resolve(i))}static fromBuffer(e,t,n,i){return new ge(Me.fromBuffer(e,t,n,i))}static fromLoader(e,t,n,i){const s=new Me(e,Object.assign({scaleMode:Me.defaultOptions.scaleMode,resolution:Qr(t)},i)),{resource:o}=s;o instanceof Cp&&(o.url=t);const a=new ge(s);return n||(n=t),Me.addToCache(a.baseTexture,n),ge.addToCache(a,n),n!==t&&(Me.addToCache(a.baseTexture,t),ge.addToCache(a,t)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Tr[t]&&Tr[t]!==e&&console.warn(`Texture added to the cache with an id [${t}] that already had an entry`),Tr[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=Tr[e];if(t){const n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete Tr[e],t}}else if(e!=null&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)Tr[e.textureCacheIds[t]]===e&&delete Tr[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:t,y:n,width:i,height:s}=e,o=t+i>this.baseTexture.width,a=n+s>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",c=`X: ${t} + ${i} = ${t+i} > ${this.baseTexture.width}`,u=`Y: ${n} + ${s} = ${n+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${c} ${l} ${u}`)}this.valid=i&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return ge._EMPTY||(ge._EMPTY=new ge(new Me),Os(ge._EMPTY),Os(ge._EMPTY.baseTexture)),ge._EMPTY}static get WHITE(){if(!ge._WHITE){const e=ue.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),ge._WHITE=new ge(Me.from(e)),Os(ge._WHITE),Os(ge._WHITE.baseTexture)}return ge._WHITE}}class Jn extends ge{constructor(e,t){super(e,t),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t,n=!0){const i=this.baseTexture.resolution,s=Math.round(e*i)/i,o=Math.round(t*i)/i;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){const{baseTexture:t}=this;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}static create(e){return new Jn(new xp(e))}}class _p{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,t,n=mt.NONE){const i=new xp(Object.assign({width:e,height:t,resolution:1,multisample:n},this.textureOptions));return new Jn(i)}getOptimalTexture(e,t,n=1,i=mt.NONE){let s;e=Math.max(Math.ceil(e*n-1e-6),1),t=Math.max(Math.ceil(t*n-1e-6),1),!this.enableFullScreen||e!==this._pixelsWidth||t!==this._pixelsHeight?(e=Ao(e),t=Ao(t),s=((e&65535)<<16|t&65535)>>>0,i>1&&(s+=i*4294967296)):s=i>1?-i:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(e,t,i)),o.filterPoolKey=s,o.setResolution(n),o}getFilterTexture(e,t,n){const i=this.getOptimalTexture(e.width,e.height,t||e.resolution,n||mt.NONE);return i.filterFrame=e.filterFrame,i}returnTexture(e){const t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const t in this.texturePool){const n=this.texturePool[t];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const t in this.texturePool){if(!(Number(t)<0))continue;const n=this.texturePool[t];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}_p.SCREEN_KEY=-1;class $1 extends mn{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class Sp extends mn{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new ht(this.vertices),this.uvBuffer=new ht(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,t){let n=0,i=0;return this.uvs[0]=n,this.uvs[1]=i,this.uvs[2]=n+t.width/e.width,this.uvs[3]=i,this.uvs[4]=n+t.width/e.width,this.uvs[5]=i+t.height/e.height,this.uvs[6]=n,this.uvs[7]=i+t.height/e.height,n=t.x,i=t.y,this.vertices[0]=n,this.vertices[1]=i,this.vertices[2]=n+t.width,this.vertices[3]=i,this.vertices[4]=n+t.width,this.vertices[5]=i+t.height,this.vertices[6]=n,this.vertices[7]=i+t.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class Y1{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=mt.NONE,this.sourceFrame=new ke,this.destinationFrame=new ke,this.bindingSourceFrame=new ke,this.bindingDestinationFrame=new ke,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const Ns=[new ze,new ze,new ze,new ze],il=new nt;class Ap{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new _p,this.statePool=[],this.quad=new $1,this.quadUv=new Sp,this.tempRect=new ke,this.activeState={},this.globalUniforms=new _r({outputFrame:new ke,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,t){const n=this.renderer,i=this.defaultFilterStack,s=this.statePool.pop()||new Y1,o=n.renderTexture;let a,l;if(o.current){const p=o.current;a=p.resolution,l=p.multisample}else a=n.resolution,l=n.multisample;let c=t[0].resolution||a,u=t[0].multisample??l,h=t[0].padding,d=t[0].autoFit,f=t[0].legacy??!0;for(let p=1;p<t.length;p++){const v=t[p];c=Math.min(c,v.resolution||a),u=Math.min(u,v.multisample??l),h=this.useMaxPadding?Math.max(h,v.padding):h+v.padding,d=d&&v.autoFit,f=f||(v.legacy??!0)}i.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),i.push(s),s.resolution=c,s.multisample=u,s.legacy=f,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(h);const g=this.tempRect.copyFrom(o.sourceFrame);n.projection.transform&&this.transformAABB(il.copyFrom(n.projection.transform).invert(),g),d?(s.sourceFrame.fit(g),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(g)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:n.resolution,o.sourceFrame,o.destinationFrame,n.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,c,u),s.filters=t,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const m=this.tempRect;m.x=0,m.y=0,m.width=s.sourceFrame.width,m.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=n.projection.transform,n.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,m),n.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,t=e.pop(),n=t.filters;this.activeState=t;const i=this.globalUniforms.uniforms;i.outputFrame=t.sourceFrame,i.resolution=t.resolution;const s=i.inputSize,o=i.inputPixel,a=i.inputClamp;if(s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*t.resolution),o[1]=Math.round(s[1]*t.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=t.sourceFrame.width*s[2]-.5*o[2],a[3]=t.sourceFrame.height*s[3]-.5*o[3],t.legacy){const c=i.filterArea;c[0]=t.destinationFrame.width,c[1]=t.destinationFrame.height,c[2]=t.sourceFrame.x,c[3]=t.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();const l=e[e.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,t.renderTexture,l.renderTexture,Br.BLEND,t),this.returnFilterTexture(t.renderTexture);else{let c=t.renderTexture,u=this.getOptimalFilterTexture(c.width,c.height,t.resolution);u.filterFrame=c.filterFrame;let h=0;for(h=0;h<n.length-1;++h){h===1&&t.multisample>1&&(u=this.getOptimalFilterTexture(c.width,c.height,t.resolution),u.filterFrame=c.filterFrame),n[h].apply(this,c,u,Br.CLEAR,t);const d=c;c=u,u=d}n[h].apply(this,c,l.renderTexture,Br.BLEND,t),h>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(u)}t.clear(),this.statePool.push(t)}bindAndClear(e,t=Br.CLEAR){const{renderTexture:n,state:i}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e==null?void 0:e.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,n.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=i.stateId&1||this.forceClear;(t===Br.CLEAR||t===Br.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,t,n,i){const s=this.renderer;s.state.set(e.state),this.bindAndClear(n,i),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Or.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Or.TRIANGLE_STRIP))}calculateSpriteMatrix(e,t){const{sourceFrame:n,destinationFrame:i}=this.activeState,{orig:s}=t._texture,o=e.set(i.width,0,0,i.height,n.x,n.y),a=t.worldTransform.copyTo(nt.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(t.anchor.x,t.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,t,n=1,i=mt.NONE){return this.texturePool.getOptimalTexture(e,t,n,i)}getFilterTexture(e,t,n){if(typeof e=="number"){const s=e;e=t,t=s}e=e||this.activeState.renderTexture;const i=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,n||mt.NONE);return i.filterFrame=e.filterFrame,i}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,t){const n=Ns[0],i=Ns[1],s=Ns[2],o=Ns[3];n.set(t.left,t.top),i.set(t.left,t.bottom),s.set(t.right,t.top),o.set(t.right,t.bottom),e.apply(n,n),e.apply(i,i),e.apply(s,s),e.apply(o,o);const a=Math.min(n.x,i.x,s.x,o.x),l=Math.min(n.y,i.y,s.y,o.y),c=Math.max(n.x,i.x,s.x,o.x),u=Math.max(n.y,i.y,s.y,o.y);t.x=a,t.y=l,t.width=c-a,t.height=u-l}roundFrame(e,t,n,i,s){if(!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)){if(s){const{a:o,b:a,c:l,d:c}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(c)>1e-4))return}s=s?il.copyFrom(s):il.identity(),s.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.transformAABB(s,e),e.ceil(t),this.transformAABB(s.invert(),e)}}}Ap.extension={type:ce.RendererSystem,name:"filter"};fe.add(Ap);class Z1{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=mt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const q1=new ke;class wp{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new sc(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ke,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let t=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;ue.PREFER_ENV===Zn.WEBGL_LEGACY&&(t=null,n=null),t?e.drawBuffers=i=>t.drawBuffersWEBGL(i):(this.hasMRT=!1,e.drawBuffers=()=>{}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,t,n=0){const{gl:i}=this;if(e){const s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=n),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){const o=t.width>>n,a=t.height>>n,l=o/t.width;this.setViewport(t.x*l,t.y*l,o,a)}else{const o=e.width>>n,a=e.height>>n;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,t,n,i){const s=this.viewport;e=Math.round(e),t=Math.round(t),n=Math.round(n),i=Math.round(i),(s.width!==n||s.height!==i||s.x!==e||s.y!==t)&&(s.x=e,s.y=t,s.width=n,s.height=i,this.gl.viewport(e,t,n,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,t,n,i,s=Xl.COLOR|Xl.DEPTH){const{gl:o}=this;o.clearColor(e,t,n,i),o.clear(s)}initFramebuffer(e){const{gl:t}=this,n=new Z1(t.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n}resizeFramebuffer(e){const{gl:t}=this,n=e.glFramebuffers[this.CONTEXT_UID];if(n.stencil){t.bindRenderbuffer(t.RENDERBUFFER,n.stencil);let o;this.renderer.context.webGLVersion===1?o=t.DEPTH_STENCIL:e.depth&&e.stencil?o=t.DEPTH24_STENCIL8:e.depth?o=t.DEPTH_COMPONENT24:o=t.STENCIL_INDEX8,n.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,o,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,o,e.width,e.height)}const i=e.colorTextures;let s=i.length;t.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=i[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&n.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,n.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,t){const{gl:n}=this,i=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures;let o=s.length;n.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?i.msaaBuffer=i.msaaBuffer||n.createRenderbuffer():i.msaaBuffer&&(n.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const c=s[l],u=c.parentTextureArray||c;this.renderer.texture.bind(u,0),l===0&&i.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,u._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+l,c.target,u._glTextures[this.CONTEXT_UID].texture,t),a.push(n.COLOR_ATTACHMENT0+l))}if(a.length>1&&n.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const l=e.depthTexture;this.renderer.texture.bind(l,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,t)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){i.stencil=i.stencil||n.createRenderbuffer();let l,c;this.renderer.context.webGLVersion===1?(l=n.DEPTH_STENCIL_ATTACHMENT,c=n.DEPTH_STENCIL):e.depth&&e.stencil?(l=n.DEPTH_STENCIL_ATTACHMENT,c=n.DEPTH24_STENCIL8):e.depth?(l=n.DEPTH_ATTACHMENT,c=n.DEPTH_COMPONENT24):(l=n.STENCIL_ATTACHMENT,c=n.STENCIL_INDEX8),n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,c,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,c,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,l,n.RENDERBUFFER,i.stencil)}else i.stencil&&(n.deleteRenderbuffer(i.stencil),i.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:t}=this;let n=mt.NONE;if(e<=1||t===null)return n;for(let i=0;i<t.length;i++)if(t[i]<=e){n=t[i];break}return n===1&&(n=mt.NONE),n}blit(e,t,n){const{current:i,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!i)return;const l=i.glFramebuffers[a];if(!l)return;if(!e){if(!l.msaaBuffer)return;const u=i.colorTextures[0];if(!u)return;l.blitFramebuffer||(l.blitFramebuffer=new sc(i.width,i.height),l.blitFramebuffer.addColorTexture(0,u)),e=l.blitFramebuffer,e.colorTextures[0]!==u&&(e.colorTextures[0]=u,e.dirtyId++,e.dirtyFormat++),(e.width!==i.width||e.height!==i.height)&&(e.width=i.width,e.height=i.height,e.dirtyId++,e.dirtySize++)}t||(t=q1,t.width=i.width,t.height=i.height),n||(n=t);const c=t.width===n.width&&t.height===n.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(t.left,t.top,t.right,t.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,c?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,t){const n=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!n)return;delete e.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),t||(i.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&i.deleteRenderbuffer(n.msaaBuffer),n.stencil&&i.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&this.disposeFramebuffer(n.blitFramebuffer,t)}disposeAll(e){const t=this.managedFramebuffers;this.managedFramebuffers=[];for(let n=0;n<t.length;n++)this.disposeFramebuffer(t[n],e)}forceStencil(){const e=this.current;if(!e)return;const t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil&&e.stencil)return;e.stencil=!0;const n=e.width,i=e.height,s=this.gl,o=t.stencil=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o);let a,l;this.renderer.context.webGLVersion===1?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH_STENCIL):e.depth?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH24_STENCIL8):(a=s.STENCIL_ATTACHMENT,l=s.STENCIL_INDEX8),t.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,t.multisample,l,n,i):s.renderbufferStorage(s.RENDERBUFFER,l,n,i),s.framebufferRenderbuffer(s.FRAMEBUFFER,a,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new ke}destroy(){this.renderer=null}}wp.extension={type:ce.RendererSystem,name:"framebuffer"};fe.add(wp);const sl={5126:4,5123:2,5121:1};class Ep{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.webGLVersion!==2){let n=this.renderer.context.extensions.vertexArrayObject;ue.PREFER_ENV===Zn.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=()=>n.createVertexArrayOES(),e.bindVertexArray=i=>n.bindVertexArrayOES(i),e.deleteVertexArray=i=>n.deleteVertexArrayOES(i)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(t.webGLVersion!==2){const n=e.getExtension("ANGLE_instanced_arrays");n?(e.vertexAttribDivisor=(i,s)=>n.vertexAttribDivisorANGLE(i,s),e.drawElementsInstanced=(i,s,o,a,l)=>n.drawElementsInstancedANGLE(i,s,o,a,l),e.drawArraysInstanced=(i,s,o,a)=>n.drawArraysInstancedANGLE(i,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex}bind(e,t){t=t||this.renderer.shader.shader;const{gl:n}=this;let i=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);const o=i[t.program.id]||this.initGeometryVao(e,t,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(e,t.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,t=this.renderer.buffer;for(let n=0;n<e.buffers.length;n++){const i=e.buffers[n];t.update(i)}}checkCompatibility(e,t){const n=e.attributes,i=t.attributeData;for(const s in i)if(!n[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,t){const n=e.attributes,i=t.attributeData,s=["g",e.id];for(const o in n)i[o]&&s.push(o,i[o].location);return s.join("-")}initGeometryVao(e,t,n=!0){const i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=t.program;a.glPrograms[s]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,a);const l=this.getSignature(e,a),c=e.glVertexArrayObjects[this.CONTEXT_UID];let u=c[l];if(u)return c[a.id]=u,u;const h=e.buffers,d=e.attributes,f={},g={};for(const m in h)f[m]=0,g[m]=0;for(const m in d)!d[m].size&&a.attributeData[m]?d[m].size=a.attributeData[m].size:d[m].size||console.warn(`PIXI Geometry attribute '${m}' size cannot be determined (likely the bound shader does not have the attribute)`),f[d[m].buffer]+=d[m].size*sl[d[m].type];for(const m in d){const p=d[m],v=p.size;p.stride===void 0&&(f[p.buffer]===v*sl[p.type]?p.stride=0:p.stride=f[p.buffer]),p.start===void 0&&(p.start=g[p.buffer],g[p.buffer]+=v*sl[p.type])}u=i.createVertexArray(),i.bindVertexArray(u);for(let m=0;m<h.length;m++){const p=h[m];o.bind(p),n&&p._glBuffers[s].refCount++}return this.activateVao(e,a),c[a.id]=u,c[l]=u,i.bindVertexArray(null),o.unbind(Dr.ARRAY_BUFFER),u}disposeGeometry(e,t){var a;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const n=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,s=e.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(e.disposeRunner.remove(this),!!n){if(o)for(let l=0;l<s.length;l++){const c=s[l]._glBuffers[this.CONTEXT_UID];c&&(c.refCount--,c.refCount===0&&!t&&o.dispose(s[l],t))}if(!t){for(const l in n)if(l[0]==="g"){const c=n[l];this._activeVao===c&&this.unbind(),i.deleteVertexArray(c)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const t=Object.keys(this.managedGeometries);for(let n=0;n<t.length;n++)this.disposeGeometry(this.managedGeometries[t[n]],e)}activateVao(e,t){const n=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let l=null;for(const c in a){const u=a[c],h=o[u.buffer],d=h._glBuffers[i];if(t.attributeData[c]){l!==d&&(s.bind(h),l=d);const f=t.attributeData[c].location;if(n.enableVertexAttribArray(f),n.vertexAttribPointer(f,u.size,u.type||n.FLOAT,u.normalized,u.stride,u.start),u.instance)if(this.hasInstance)n.vertexAttribDivisor(f,u.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,t,n,i){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,t||o.indexBuffer.data.length,l,(n||0)*a,i||1):s.drawElements(e,t||o.indexBuffer.data.length,l,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,n,t||o.getSize(),i||1):s.drawArrays(e,n,t||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}Ep.extension={type:ce.RendererSystem,name:"geometry"};fe.add(Ep);const Zh=new nt;class Ip{constructor(e,t){this._texture=e,this.mapCoord=new nt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,t){t===void 0&&(t=e);const n=this.mapCoord;for(let i=0;i<e.length;i+=2){const s=e[i],o=e[i+1];t[i]=s*n.a+o*n.c+n.tx,t[i+1]=s*n.b+o*n.d+n.ty}return t}update(e){const t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;const n=t._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const i=t.orig,s=t.trim;s&&(Zh.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(Zh));const o=t.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,c=this.clampOffset;return a[0]=(t._frame.x+l+c)/o.width,a[1]=(t._frame.y+l+c)/o.height,a[2]=(t._frame.x+t._frame.width-l+c)/o.width,a[3]=(t._frame.y+t._frame.height-l+c)/o.height,this.uClampOffset[0]=c/o.realWidth,this.uClampOffset[1]=c/o.realHeight,this.isSimple=t._frame.width===o.width&&t._frame.height===o.height&&t.rotate===0,!0}}var J1=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,Q1=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class K1 extends kt{constructor(e,t,n){let i=null;typeof e!="string"&&t===void 0&&n===void 0&&(i=e,e=void 0,t=void 0,n=void 0),super(e||Q1,t||J1,n),this.maskSprite=i,this.maskMatrix=new nt}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,t,n,i){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Ip(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,t,n,i))}}class ex{constructor(e=null){this.type=bt.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=kt.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=bt.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class Tp{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,t){let n=t;if(!n.isMaskData){const s=this.maskDataPool.pop()||new ex;s.pooled=!0,s.maskObject=t,n=s}const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(i),n._colorMask=i?i._colorMask:15,n.autoDetect&&this.detect(n),n._target=e,n.type!==bt.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case bt.SCISSOR:this.renderer.scissor.push(n);break;case bt.STENCIL:this.renderer.stencil.push(n);break;case bt.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case bt.COLOR:this.pushColorMask(n);break}n.type===bt.SPRITE&&this.maskStack.push(n)}pop(e){const t=this.maskStack.pop();if(!(!t||t._target!==e)){if(t.enabled)switch(t.type){case bt.SCISSOR:this.renderer.scissor.pop(t);break;case bt.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case bt.SPRITE:this.popSpriteMask(t);break;case bt.COLOR:this.popColorMask(t);break}if(t.reset(),t.pooled&&this.maskDataPool.push(t),this.maskStack.length!==0){const n=this.maskStack[this.maskStack.length-1];n.type===bt.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}}detect(e){const t=e.maskObject;t?t.isSprite?e.type=bt.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=bt.SCISSOR:e.type=bt.STENCIL:e.type=bt.COLOR}pushSpriteMask(e){const{maskObject:t}=e,n=e._target;let i=e._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new K1])),i[0].resolution=e.resolution,i[0].multisample=e.multisample,i[0].maskSprite=t;const s=n.filterArea;n.filterArea=t.getBounds(!0),this.renderer.filter.push(n,i),n.filterArea=s,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const t=e._colorMask,n=e._colorMask=t&e.colorMask;n!==t&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}popColorMask(e){const t=e._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==t&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}destroy(){this.renderer=null}}Tp.extension={type:ce.RendererSystem,name:"mask"};fe.add(Tp);class Rp{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:t}=this.renderer,n=this.getStackLength();this.maskStack=e;const i=this.getStackLength();i!==n&&(i===0?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const qh=new nt,Jh=[],Pp=class uo extends Rp{constructor(e){super(e),this.glConst=ue.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:n}=e,{renderer:i}=this,s=i.renderTexture,o=n.getBounds(!0,Jh.pop()??new ke);this.roundFrameToPixels(o,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),t&&o.fit(t),e._scissorRectLocal=o}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:n,c:i,d:s}=e;return(Math.abs(n)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(s)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||uo.isMatrixRotated(t.worldTransform)||uo.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const n=e._scissorRectLocal;return n.width>0&&n.height>0}roundFrameToPixels(e,t,n,i,s){uo.isMatrixRotated(s)||(s=s?qh.copyFrom(s):qh.identity(),s.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.renderer.filter.transformAABB(s,e),e.fit(i),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&Jh.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};Pp.extension={type:ce.RendererSystem,name:"scissor"};let tx=Pp;fe.add(tx);class Bp extends Rp{constructor(e){super(e),this.glConst=ue.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const t=e.maskObject,{gl:n}=this.renderer,i=e._stencilCounter;i===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),e._stencilCounter++;const s=e._colorMask;s!==0&&(e._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,i,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,s!==0&&(e._colorMask=s,n.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(e){const t=this.renderer.gl;if(this.getStackLength()===0)t.disable(t.STENCIL_TEST);else{const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,i=n?n._colorMask:15;i!==0&&(n._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,i!==0&&(n._colorMask=i,t.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}Bp.extension={type:ce.RendererSystem,name:"stencil"};fe.add(Bp);class Mp{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return Ge("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return Ge("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return Ge("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const t in e)this.plugins[t]=new e[t](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}Mp.extension={type:[ce.RendererSystem,ce.CanvasRendererSystem],name:"_plugin"};fe.add(Mp);class Op{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new nt,this.transform=null}update(e,t,n,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,t,n,i){const s=this.projectionMatrix,o=i?-1:1;s.identity(),s.a=1/t.width*2,s.d=o*(1/t.height*2),s.tx=-1-t.x*s.a,s.ty=-o-t.y*s.d}setTransform(e){}destroy(){this.renderer=null}}Op.extension={type:ce.RendererSystem,name:"projection"};fe.add(Op);const rx=new ru,Qh=new ke;class Np{constructor(e){this.renderer=e,this._tempMatrix=new nt}generateTexture(e,t){const{region:n,...i}=t||{},s=(n==null?void 0:n.copyTo(Qh))||e.getLocalBounds(Qh,!0),o=i.resolution||this.renderer.resolution;s.width=Math.max(s.width,1/o),s.height=Math.max(s.height,1/o),i.width=s.width,i.height=s.height,i.resolution=o,i.multisample??(i.multisample=this.renderer.multisample);const a=Jn.create(i);this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const l=e.transform;return e.transform=rx,this.renderer.render(e,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=l,a}destroy(){}}Np.extension={type:[ce.RendererSystem,ce.CanvasRendererSystem],name:"textureGenerator"};fe.add(Np);const wn=new ke,Ni=new ke;class Dp{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new ke,this.destinationFrame=new ke,this.viewportFrame=new ke}contextChange(){var t;const e=(t=this.renderer)==null?void 0:t.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,t,n){const i=this.renderer;this.current=e;let s,o,a;e?(s=e.baseTexture,a=s.resolution,t||(wn.width=e.frame.width,wn.height=e.frame.height,t=wn),n||(Ni.x=e.frame.x,Ni.y=e.frame.y,Ni.width=t.width,Ni.height=t.height,n=Ni),o=s.framebuffer):(a=i.resolution,t||(wn.width=i._view.screen.width,wn.height=i._view.screen.height,t=wn),n||(n=wn,n.width=t.width,n.height=t.height));const l=this.viewportFrame;l.x=n.x*a,l.y=n.y*a,l.width=n.width*a,l.height=n.height*a,e||(l.y=i.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(n,t,a,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(n)}clear(e,t){const n=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,i=rt.shared.setValue(e||n);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&i.premultiply(i.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:l,y:c,width:u,height:h}=this.viewportFrame;l=Math.round(l),c=Math.round(c),u=Math.round(u),h=Math.round(h),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,c,u,h)}this.renderer.framebuffer.clear(i.red,i.green,i.blue,i.alpha,t),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}Dp.extension={type:ce.RendererSystem,name:"renderTexture"};fe.add(Dp);class nx{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function ix(r,e){const t={},n=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=e.getActiveAttrib(r,i);if(s.name.startsWith("gl_"))continue;const o=yp(e,s.type),a={type:o,name:s.name,size:vp(o),location:e.getAttribLocation(r,s.name)};t[s.name]=a}return t}function sx(r,e){const t={},n=e.getProgramParameter(r,e.ACTIVE_UNIFORMS);for(let i=0;i<n;i++){const s=e.getActiveUniform(r,i),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=yp(e,s.type);t[o]={name:o,index:i,type:l,size:s.size,isArray:a,value:gp(l,s.size)}}return t}function ox(r,e){var a;const t=Wh(r,r.VERTEX_SHADER,e.vertexSrc),n=Wh(r,r.FRAGMENT_SHADER,e.fragmentSrc),i=r.createProgram();r.attachShader(i,t),r.attachShader(i,n);const s=(a=e.extra)==null?void 0:a.transformFeedbackVaryings;if(s&&(typeof r.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):r.transformFeedbackVaryings(i,s.names,s.bufferMode==="separate"?r.SEPARATE_ATTRIBS:r.INTERLEAVED_ATTRIBS)),r.linkProgram(i),r.getProgramParameter(i,r.LINK_STATUS)||D1(r,i,t,n),e.attributeData=ix(i,r),e.uniformData=sx(i,r),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const l=Object.keys(e.attributeData);l.sort((c,u)=>c>u?1:-1);for(let c=0;c<l.length;c++)e.attributeData[l[c]].location=c,r.bindAttribLocation(i,c,l[c]);r.linkProgram(i)}r.deleteShader(t),r.deleteShader(n);const o={};for(const l in e.uniformData){const c=e.uniformData[l];o[l]={location:r.getUniformLocation(i,l),value:gp(c.type,c.size)}}return new nx(i,o)}function ax(r,e,t,n,i){t.buffer.update(i)}const lx={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},Lp={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function cx(r){const e=r.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let t=0,n=0,i=0;for(let s=0;s<e.length;s++){const o=e[s];if(t=Lp[o.data.type],o.data.size>1&&(t=Math.max(t,16)*o.data.size),o.dataLen=t,n%t!==0&&n<16){const a=n%t%16;n+=a,i+=a}n+t>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=t,n=t):(o.offset=i,n+=t,i+=t)}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}function ux(r,e){const t=[];for(const n in r)e[n]&&t.push(e[n]);return t.sort((n,i)=>n.index-i.index),t}function hx(r,e){if(!r.autoManage)return{size:0,syncFunc:ax};const t=ux(r.uniforms,e),{uboElements:n,size:i}=cx(t),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<n.length;o++){const a=n[o],l=r.uniforms[a.data.name],c=a.data.name;let u=!1;for(let h=0;h<gi.length;h++){const d=gi[h];if(d.codeUbo&&d.test(a.data,l)){s.push(`offset = ${a.offset/4};`,gi[h].codeUbo(a.data.name,l)),u=!0;break}}if(!u)if(a.data.size>1){const h=vp(a.data.type),d=Math.max(Lp[a.data.type]/16,1),f=h/d,g=(4-f%4)%4;s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*d}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${g};
                }

                `)}else{const h=lx[a.data.type];s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};
                ${h};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let dx=0;const Ds={textureCount:0,uboCount:0};class Fp{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=dx++}systemCheck(){if(!F1())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const n=e.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),t||(Ds.textureCount=0,Ds.uboCount=0,this.syncUniformGroup(e.uniformGroup,Ds)),i}setUniforms(e){const t=this.shader.program,n=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(n.uniformData,e,this.renderer)}syncUniformGroup(e,t){const n=this.getGlProgram();(!e.static||e.dirtyId!==n.uniformDirtyGroups[e.id])&&(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,t))}syncUniforms(e,t,n){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,n)}createSyncGroups(e){const t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=M1(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,t){const n=this.getGlProgram();if(!e.static||e.dirtyId!==0||!n.uniformGroups[e.id]){e.dirtyId=0;const i=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,t);e.buffer.update(),i(n.uniformData,e.uniforms,this.renderer,Ds,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[t])}createSyncBufferGroup(e,t,n){const{gl:i}=this.renderer;this.renderer.buffer.bind(e.buffer);const s=this.gl.getUniformBlockIndex(t.program,n);t.uniformBufferBindings[n]=this.shader.uniformBindCount,i.uniformBlockBinding(t.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=hx(e,this.shader.program.uniformData)),e.autoManage){const l=new Float32Array(a.size/4);e.buffer.update(l)}return t.uniformGroups[e.id]=a.syncFunc,t.uniformGroups[e.id]}getSignature(e,t,n){const i=e.uniforms,s=[`${n}-`];for(const o in i)s.push(o),t[o]&&s.push(t[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const t=this.gl,n=e.program,i=ox(t,n);return n.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}Fp.extension={type:ce.RendererSystem,name:"shader"};fe.add(Fp);class Ro{constructor(e){this.renderer=e}run(e){const{renderer:t}=this;t.runners.init.emit(t.options),e.hello&&console.log(`PixiJS 7.3.3 - ${t.rendererLogId} - https://pixijs.com`),t.resize(t.screen.width,t.screen.height)}destroy(){}}Ro.defaultOptions={hello:!1},Ro.extension={type:[ce.RendererSystem,ce.CanvasRendererSystem],name:"startup"};fe.add(Ro);function fx(r,e=[]){return e[we.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[we.ADD]=[r.ONE,r.ONE],e[we.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[we.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[we.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[we.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[we.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[we.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[we.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[we.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[we.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[we.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[we.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[we.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[we.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[we.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[we.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[we.NONE]=[0,0],e[we.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[we.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],e[we.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[we.SRC_IN]=[r.DST_ALPHA,r.ZERO],e[we.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],e[we.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[we.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],e[we.DST_IN]=[r.ZERO,r.SRC_ALPHA],e[we.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],e[we.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],e[we.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[we.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],e}const px=0,gx=1,mx=2,vx=3,yx=4,bx=5,kp=class oc{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=we.NONE,this._blendEq=!1,this.map=[],this.map[px]=this.setBlend,this.map[gx]=this.setOffset,this.map[mx]=this.setCullFace,this.map[vx]=this.setDepthTest,this.map[yx]=this.setFrontFace,this.map[bx]=this.setDepthMask,this.checks=[],this.defaultState=new Vr,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=fx(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,n=0;for(;t;)t&1&&this.map[n].call(this,!!(e.data&1<<n)),t=t>>1,n++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(oc.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(oc.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],n=this.gl;t.length===2?n.blendFunc(t[0],t[1]):n.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,n.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const n=this.checks.indexOf(e);t&&n===-1?this.checks.push(e):!t&&n!==-1&&this.checks.splice(n,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};kp.extension={type:ce.RendererSystem,name:"state"};let xx=kp;fe.add(xx);class Cx extends ds{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const t=(e.priority??[]).filter(i=>e.systems[i]),n=[...t,...Object.keys(e.systems).filter(i=>!t.includes(i))];for(const i of n)this.addSystem(e.systems[i],i)}addRunners(...e){e.forEach(t=>{this.runners[t]=new Cr(t)})}addSystem(e,t){const n=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=n,this._systemsHash[t]=n;for(const i in this.runners)this.runners[i].add(n);return this}emitWithCustomOptions(e,t){const n=Object.keys(this._systemsHash);e.items.forEach(i=>{const s=n.find(o=>this._systemsHash[o]===i);i[e.name](t[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const Ui=class ho{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=ho.defaultMaxIdle,this.checkCountMax=ho.defaultCheckCountMax,this.mode=ho.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==Kc.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let n=!1;for(let i=0;i<t.length;i++){const s=t[i];s.resource&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),t[i]=null,n=!0)}if(n){let i=0;for(let s=0;s<t.length;s++)t[s]!==null&&(t[i++]=t[s]);t.length=i}}unload(e){const t=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&t.destroyTexture(n);for(let i=e.children.length-1;i>=0;i--)this.unload(e.children[i])}destroy(){this.renderer=null}};Ui.defaultMode=Kc.AUTO,Ui.defaultMaxIdle=60*60,Ui.defaultCheckCountMax=60*10,Ui.extension={type:ce.RendererSystem,name:"textureGC"};let Mn=Ui;fe.add(Mn);class ol{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=ve.UNSIGNED_BYTE,this.internalFormat=se.RGBA,this.samplerType=0}}function _x(r){let e;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?e={[r.RGB]:he.FLOAT,[r.RGBA]:he.FLOAT,[r.ALPHA]:he.FLOAT,[r.LUMINANCE]:he.FLOAT,[r.LUMINANCE_ALPHA]:he.FLOAT,[r.R8]:he.FLOAT,[r.R8_SNORM]:he.FLOAT,[r.RG8]:he.FLOAT,[r.RG8_SNORM]:he.FLOAT,[r.RGB8]:he.FLOAT,[r.RGB8_SNORM]:he.FLOAT,[r.RGB565]:he.FLOAT,[r.RGBA4]:he.FLOAT,[r.RGB5_A1]:he.FLOAT,[r.RGBA8]:he.FLOAT,[r.RGBA8_SNORM]:he.FLOAT,[r.RGB10_A2]:he.FLOAT,[r.RGB10_A2UI]:he.FLOAT,[r.SRGB8]:he.FLOAT,[r.SRGB8_ALPHA8]:he.FLOAT,[r.R16F]:he.FLOAT,[r.RG16F]:he.FLOAT,[r.RGB16F]:he.FLOAT,[r.RGBA16F]:he.FLOAT,[r.R32F]:he.FLOAT,[r.RG32F]:he.FLOAT,[r.RGB32F]:he.FLOAT,[r.RGBA32F]:he.FLOAT,[r.R11F_G11F_B10F]:he.FLOAT,[r.RGB9_E5]:he.FLOAT,[r.R8I]:he.INT,[r.R8UI]:he.UINT,[r.R16I]:he.INT,[r.R16UI]:he.UINT,[r.R32I]:he.INT,[r.R32UI]:he.UINT,[r.RG8I]:he.INT,[r.RG8UI]:he.UINT,[r.RG16I]:he.INT,[r.RG16UI]:he.UINT,[r.RG32I]:he.INT,[r.RG32UI]:he.UINT,[r.RGB8I]:he.INT,[r.RGB8UI]:he.UINT,[r.RGB16I]:he.INT,[r.RGB16UI]:he.UINT,[r.RGB32I]:he.INT,[r.RGB32UI]:he.UINT,[r.RGBA8I]:he.INT,[r.RGBA8UI]:he.UINT,[r.RGBA16I]:he.INT,[r.RGBA16UI]:he.UINT,[r.RGBA32I]:he.INT,[r.RGBA32UI]:he.UINT,[r.DEPTH_COMPONENT16]:he.FLOAT,[r.DEPTH_COMPONENT24]:he.FLOAT,[r.DEPTH_COMPONENT32F]:he.FLOAT,[r.DEPTH_STENCIL]:he.FLOAT,[r.DEPTH24_STENCIL8]:he.FLOAT,[r.DEPTH32F_STENCIL8]:he.FLOAT}:e={[r.RGB]:he.FLOAT,[r.RGBA]:he.FLOAT,[r.ALPHA]:he.FLOAT,[r.LUMINANCE]:he.FLOAT,[r.LUMINANCE_ALPHA]:he.FLOAT,[r.DEPTH_STENCIL]:he.FLOAT},e}function Sx(r){let e;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?e={[ve.UNSIGNED_BYTE]:{[se.RGBA]:r.RGBA8,[se.RGB]:r.RGB8,[se.RG]:r.RG8,[se.RED]:r.R8,[se.RGBA_INTEGER]:r.RGBA8UI,[se.RGB_INTEGER]:r.RGB8UI,[se.RG_INTEGER]:r.RG8UI,[se.RED_INTEGER]:r.R8UI,[se.ALPHA]:r.ALPHA,[se.LUMINANCE]:r.LUMINANCE,[se.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[ve.BYTE]:{[se.RGBA]:r.RGBA8_SNORM,[se.RGB]:r.RGB8_SNORM,[se.RG]:r.RG8_SNORM,[se.RED]:r.R8_SNORM,[se.RGBA_INTEGER]:r.RGBA8I,[se.RGB_INTEGER]:r.RGB8I,[se.RG_INTEGER]:r.RG8I,[se.RED_INTEGER]:r.R8I},[ve.UNSIGNED_SHORT]:{[se.RGBA_INTEGER]:r.RGBA16UI,[se.RGB_INTEGER]:r.RGB16UI,[se.RG_INTEGER]:r.RG16UI,[se.RED_INTEGER]:r.R16UI,[se.DEPTH_COMPONENT]:r.DEPTH_COMPONENT16},[ve.SHORT]:{[se.RGBA_INTEGER]:r.RGBA16I,[se.RGB_INTEGER]:r.RGB16I,[se.RG_INTEGER]:r.RG16I,[se.RED_INTEGER]:r.R16I},[ve.UNSIGNED_INT]:{[se.RGBA_INTEGER]:r.RGBA32UI,[se.RGB_INTEGER]:r.RGB32UI,[se.RG_INTEGER]:r.RG32UI,[se.RED_INTEGER]:r.R32UI,[se.DEPTH_COMPONENT]:r.DEPTH_COMPONENT24},[ve.INT]:{[se.RGBA_INTEGER]:r.RGBA32I,[se.RGB_INTEGER]:r.RGB32I,[se.RG_INTEGER]:r.RG32I,[se.RED_INTEGER]:r.R32I},[ve.FLOAT]:{[se.RGBA]:r.RGBA32F,[se.RGB]:r.RGB32F,[se.RG]:r.RG32F,[se.RED]:r.R32F,[se.DEPTH_COMPONENT]:r.DEPTH_COMPONENT32F},[ve.HALF_FLOAT]:{[se.RGBA]:r.RGBA16F,[se.RGB]:r.RGB16F,[se.RG]:r.RG16F,[se.RED]:r.R16F},[ve.UNSIGNED_SHORT_5_6_5]:{[se.RGB]:r.RGB565},[ve.UNSIGNED_SHORT_4_4_4_4]:{[se.RGBA]:r.RGBA4},[ve.UNSIGNED_SHORT_5_5_5_1]:{[se.RGBA]:r.RGB5_A1},[ve.UNSIGNED_INT_2_10_10_10_REV]:{[se.RGBA]:r.RGB10_A2,[se.RGBA_INTEGER]:r.RGB10_A2UI},[ve.UNSIGNED_INT_10F_11F_11F_REV]:{[se.RGB]:r.R11F_G11F_B10F},[ve.UNSIGNED_INT_5_9_9_9_REV]:{[se.RGB]:r.RGB9_E5},[ve.UNSIGNED_INT_24_8]:{[se.DEPTH_STENCIL]:r.DEPTH24_STENCIL8},[ve.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[se.DEPTH_STENCIL]:r.DEPTH32F_STENCIL8}}:e={[ve.UNSIGNED_BYTE]:{[se.RGBA]:r.RGBA,[se.RGB]:r.RGB,[se.ALPHA]:r.ALPHA,[se.LUMINANCE]:r.LUMINANCE,[se.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[ve.UNSIGNED_SHORT_5_6_5]:{[se.RGB]:r.RGB},[ve.UNSIGNED_SHORT_4_4_4_4]:{[se.RGBA]:r.RGBA},[ve.UNSIGNED_SHORT_5_5_5_1]:{[se.RGBA]:r.RGBA}},e}class Gp{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Me,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=Sx(e),this.samplerTypes=_x(e);const t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(let i=0;i<t;i++)this.boundTextures[i]=null;this.emptyTextures={};const n=new ol(e.createTexture());e.bindTexture(e.TEXTURE_2D,n.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=n,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new ol(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let i=0;i<this.boundTextures.length;i++)this.bind(null,i)}bind(e,t=0){const{gl:n}=this;if(e=e==null?void 0:e.castToBaseTexture(),(e==null?void 0:e.valid)&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),this.updateTexture(e)):i.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[t]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:t,boundTextures:n}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let i=0;i<n.length;i++)n[i]===this.unknownTexture&&this.bind(null,i)}for(let i=0;i<n.length;i++)n[i]===e&&(this.currentLocation!==i&&(t.activeTexture(t.TEXTURE0+i),this.currentLocation=i),t.bindTexture(e.target,this.emptyTextures[e.target].texture),n[i]=null)}ensureSamplerType(e){const{boundTextures:t,hasIntegerTextures:n,CONTEXT_UID:i}=this;if(n)for(let s=e-1;s>=0;--s){const o=t[s];o&&o._glTextures[i].samplerType!==he.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const t=new ol(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}initTextureType(e,t){var n;t.internalFormat=((n=this.internalFormats[e.type])==null?void 0:n[e.format])??e.format,t.samplerType=this.samplerTypes[t.internalFormat]??he.FLOAT,this.webGLVersion===2&&e.type===ve.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type}updateTexture(e){var i;const t=e._glTextures[this.CONTEXT_UID];if(!t)return;const n=this.renderer;if(this.initTextureType(e,t),(i=e.resource)==null?void 0:i.upload(n,e,t))t.samplerType!==he.FLOAT&&(this.hasIntegerTextures=!0);else{const s=e.realWidth,o=e.realHeight,a=n.gl;(t.width!==s||t.height!==o||t.dirtyId<0)&&(t.width=s,t.height=o,a.texImage2D(e.target,0,t.internalFormat,s,o,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}destroyTexture(e,t){const{gl:n}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){const i=this.managedTextures.indexOf(e);i!==-1&&pi(this.managedTextures,i,1)}}updateTextureStyle(e){var n;const t=e._glTextures[this.CONTEXT_UID];t&&((e.mipmap===kr.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?t.mipmap=!1:t.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?t.wrapMode=fn.CLAMP:t.wrapMode=e.wrapMode,(n=e.resource)!=null&&n.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)}setStyle(e,t){const n=this.gl;if(t.mipmap&&e.mipmap!==kr.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,t.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===cr.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);const i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===cr.LINEAR){const s=Math.min(e.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===cr.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===cr.LINEAR?n.LINEAR:n.NEAREST)}destroy(){this.renderer=null}}Gp.extension={type:ce.RendererSystem,name:"texture"};fe.add(Gp);class Hp{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:n}=this,i=e._glTransformFeedbacks[n]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,i)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,t){const{gl:n,renderer:i}=this;t&&i.shader.bind(t),n.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:t,renderer:n,CONTEXT_UID:i}=this,s=t.createTransformFeedback();e._glTransformFeedbacks[i]=s,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];a&&(n.buffer.update(a),a._glBuffers[i].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[i].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,t){const n=e._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!t&&s.dispose(a,t))}n&&(t||i.deleteTransformFeedback(n),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}Hp.extension={type:ce.RendererSystem,name:"transformFeedback"};fe.add(Hp);class Po{constructor(e){this.renderer=e}init(e){this.screen=new ke(0,0,e.width,e.height),this.element=e.view||ue.ADAPTER.createCanvas(),this.resolution=e.resolution||ue.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);const n=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=n,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${n}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",n,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var t;e&&((t=this.element.parentNode)==null||t.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}Po.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},Po.extension={type:[ce.RendererSystem,ce.CanvasRendererSystem],name:"_view"};fe.add(Po);ue.PREFER_ENV=Zn.WEBGL2;ue.STRICT_TEXTURE_CACHE=!1;ue.RENDER_OPTIONS={...To.defaultOptions,...Io.defaultOptions,...Po.defaultOptions,...Ro.defaultOptions};Object.defineProperties(ue,{WRAP_MODE:{get(){return Me.defaultOptions.wrapMode},set(r){Ge("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Me.defaultOptions.wrapMode=r}},SCALE_MODE:{get(){return Me.defaultOptions.scaleMode},set(r){Ge("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Me.defaultOptions.scaleMode=r}},MIPMAP_TEXTURES:{get(){return Me.defaultOptions.mipmap},set(r){Ge("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Me.defaultOptions.mipmap=r}},ANISOTROPIC_LEVEL:{get(){return Me.defaultOptions.anisotropicLevel},set(r){Ge("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Me.defaultOptions.anisotropicLevel=r}},FILTER_RESOLUTION:{get(){return Ge("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),kt.defaultResolution},set(r){kt.defaultResolution=r}},FILTER_MULTISAMPLE:{get(){return Ge("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),kt.defaultMultisample},set(r){kt.defaultMultisample=r}},SPRITE_MAX_TEXTURES:{get(){return Bn.defaultMaxTextures},set(r){Ge("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Bn.defaultMaxTextures=r}},SPRITE_BATCH_SIZE:{get(){return Bn.defaultBatchSize},set(r){Ge("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Bn.defaultBatchSize=r}},CAN_UPLOAD_SAME_BUFFER:{get(){return Bn.canUploadSameBuffer},set(r){Ge("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Bn.canUploadSameBuffer=r}},GC_MODE:{get(){return Mn.defaultMode},set(r){Ge("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Mn.defaultMode=r}},GC_MAX_IDLE:{get(){return Mn.defaultMaxIdle},set(r){Ge("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Mn.defaultMaxIdle=r}},GC_MAX_CHECK_COUNT:{get(){return Mn.defaultCheckCountMax},set(r){Ge("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Mn.defaultCheckCountMax=r}},PRECISION_VERTEX:{get(){return Zr.defaultVertexPrecision},set(r){Ge("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Zr.defaultVertexPrecision=r}},PRECISION_FRAGMENT:{get(){return Zr.defaultFragmentPrecision},set(r){Ge("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Zr.defaultFragmentPrecision=r}}});var zn=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(zn||{});class al{constructor(e,t=null,n=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=n,this.once=i}match(e,t=null){return this.fn===e&&this.context===t}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const Vp=class jt{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new al(null,null,1/0),this.deltaMS=1/jt.targetFPMS,this.elapsedMS=1/jt.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,n=zn.NORMAL){return this._addListener(new al(e,t,n))}addOnce(e,t,n=zn.NORMAL){return this._addListener(new al(e,t,n,!0))}_addListener(e){let t=this._head.next,n=this._head;if(!t)e.connect(n);else{for(;t;){if(e.priority>t.priority){e.connect(n);break}n=t,t=t.next}e.previous||e.connect(n)}return this._startIfPossible(),this}remove(e,t){let n=this._head.next;for(;n;)n.match(e,t)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*jt.targetFPMS;const n=this._head;let i=n.next;for(;i;)i=i.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,t)/1e3,jt.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!jt._shared){const e=jt._shared=new jt;e.autoStart=!0,e._protected=!0}return jt._shared}static get system(){if(!jt._system){const e=jt._system=new jt;e.autoStart=!0,e._protected=!0}return jt._system}};Vp.targetFPMS=.06;let Zt=Vp;Object.defineProperties(ue,{TARGET_FPMS:{get(){return Zt.targetFPMS},set(r){Ge("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Zt.targetFPMS=r}}});class Up{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,zn.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Zt.shared:new Zt,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}Up.extension=ce.Application;fe.add(Up);const Wp=[];fe.handleByList(ce.Renderer,Wp);function Ax(r){for(const e of Wp)if(e.test(r))return new e(r);throw new Error("Unable to auto-detect a suitable renderer.")}var wx=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Ex=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const Ix=wx,zp=Ex;class Xp{constructor(e){this.renderer=e}contextChange(e){let t;if(this.renderer.context.webGLVersion===1){const n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{const n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}t>=mt.HIGH?this.multisample=mt.HIGH:t>=mt.MEDIUM?this.multisample=mt.MEDIUM:t>=mt.LOW?this.multisample=mt.LOW:this.multisample=mt.NONE}destroy(){}}Xp.extension={type:ce.RendererSystem,name:"_multisample"};fe.add(Xp);class Tx{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class jp{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:n}=this,i=e._glBuffers[n]||this.createGLBuffer(e);t.bindBuffer(e.type,i.buffer)}unbind(e){const{gl:t}=this;t.bindBuffer(e,null)}bindBufferBase(e,t){const{gl:n,CONTEXT_UID:i}=this;if(this.boundBufferBases[t]!==e){const s=e._glBuffers[i]||this.createGLBuffer(e);this.boundBufferBases[t]=e,n.bindBufferBase(n.UNIFORM_BUFFER,t,s.buffer)}}bindBufferRange(e,t,n){const{gl:i,CONTEXT_UID:s}=this;n=n||0;const o=e._glBuffers[s]||this.createGLBuffer(e);i.bindBufferRange(i.UNIFORM_BUFFER,t||0,o.buffer,n*256,256)}update(e){const{gl:t,CONTEXT_UID:n}=this,i=e._glBuffers[n]||this.createGLBuffer(e);if(e._updateID!==i.updateID)if(i.updateID=e._updateID,t.bindBuffer(e.type,i.buffer),i.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{const s=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;i.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,s)}}dispose(e,t){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const n=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),n&&(t||i.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const t=Object.keys(this.managedBuffers);for(let n=0;n<t.length;n++)this.dispose(this.managedBuffers[t[n]],e)}createGLBuffer(e){const{CONTEXT_UID:t,gl:n}=this;return e._glBuffers[t]=new Tx(n.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}}jp.extension={type:ce.RendererSystem,name:"buffer"};fe.add(jp);class $p{constructor(e){this.renderer=e}render(e,t){const n=this.renderer;let i,s,o,a;if(t&&(i=t.renderTexture,s=t.clear,o=t.transform,a=t.skipUpdateTransform),this.renderingToScreen=!i,n.runners.prerender.emit(),n.emit("prerender"),n.projection.transform=o,!n.context.isLost){if(i||(this.lastObjectRendered=e),!a){const l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}n.renderTexture.bind(i),n.batch.currentRenderer.start(),(s??n.background.clearBeforeRender)&&n.renderTexture.clear(),e.render(n),n.batch.currentRenderer.flush(),i&&(t.blit&&n.framebuffer.blit(),i.baseTexture.update()),n.runners.postrender.emit(),n.projection.transform=null,n.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}$p.extension={type:ce.RendererSystem,name:"objectRenderer"};fe.add($p);const fo=class ac extends Cx{constructor(e){super(),this.type=rp.WEBGL,e=Object.assign({},ue.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new _r({projectionMatrix:new nt},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:ac.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(Ge("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=ac.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e!=null&&e.forceCanvas?!1:Jb()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return Ge("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return Ge("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return Ge("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return Ge("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){Ge("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return Ge("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){Ge("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return Ge("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};fo.extension={type:ce.Renderer,priority:1},fo.__plugins={},fo.__systems={};let iu=fo;fe.handleByMap(ce.RendererPlugin,iu.__plugins);fe.handleByMap(ce.RendererSystem,iu.__systems);fe.add(iu);class Yp extends es{constructor(e,t){const{width:n,height:i}=t||{};super(n,i),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){const o=new Me;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,t){for(let n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof es?this.addResourceAt(e[n],n):this.addResourceAt(dp(e[n],t),n))}dispose(){for(let e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,t){if(!this.items[t])throw new Error(`Index ${t} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}unbind(e){super.unbind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(t=>t.resource).filter(t=>t).map(t=>t.load());return this._load=Promise.all(e).then(()=>{const{realWidth:t,realHeight:n}=this.items[0];return this.resize(t,n),this.update(),Promise.resolve(this)}),this._load}}class Rx extends Yp{constructor(e,t){const{width:n,height:i}=t||{};let s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:n,height:i}),s&&this.initFromArray(s,t)}addBaseTextureAt(e,t){if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=fi.TEXTURE_2D_ARRAY}upload(e,t,n){const{length:i,itemDirtyIds:s,items:o}=this,{gl:a}=e;n.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,i,0,t.format,n.type,null);for(let l=0;l<i;l++){const c=o[l];s[l]<c.dirtyId&&(s[l]=c.dirtyId,c.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,c.resource.width,c.resource.height,1,t.format,n.type,c.resource.source))}return!0}}class Px extends vn{constructor(e){super(e)}static test(e){const{OffscreenCanvas:t}=globalThis;return t&&e instanceof t?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const Zp=class Wi extends Yp{constructor(e,t){const{width:n,height:i,autoLoad:s,linkBaseTexture:o}=t||{};if(e&&e.length!==Wi.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:n,height:i});for(let a=0;a<Wi.SIDES;a++)this.items[a].target=fi.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=o!==!1,e&&this.initFromArray(e,t),s!==!1&&this.load()}bind(e){super.bind(e),e.target=fi.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=fi.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,n){const i=this.itemDirtyIds;for(let s=0;s<Wi.SIDES;s++){const o=this.items[s];(i[s]<o.dirtyId||n.dirtyId<t.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(e,o,n),i[s]=o.dirtyId):i[s]<-1&&(e.gl.texImage2D(o.target,0,n.internalFormat,t.realWidth,t.realHeight,0,t.format,n.type,null),i[s]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===Wi.SIDES}};Zp.SIDES=6;let Bx=Zp;class hi extends vn{constructor(e,t){t=t||{};let n,i,s;typeof e=="string"?(n=hi.EMPTY,i=e,s=!0):(n=e,i=null,s=!1),super(n),this.url=i,this.crossOrigin=t.crossOrigin??!0,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.ownsImageBitmap=t.ownsImageBitmap??s,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,t)=>{if(this.url===null){e(this);return}try{const n=await ue.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const i=await n.blob();if(this.destroyed)return;const s=await createImageBitmap(i,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Wt.UNPACK?"premultiply":"none"});if(this.destroyed){s.close();return}this.source=s,this.update(),e(this)}catch(n){if(this.destroyed)return;t(n),this.onError.emit(n)}}),this._load)}upload(e,t,n){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),super.upload(e,t,n)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return hi._EMPTY=hi._EMPTY??ue.ADAPTER.createCanvas(0,0),hi._EMPTY}}const lc=class po extends vn{constructor(e,t){t=t||{},super(ue.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},po.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;vn.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,n=e.height;if(!t||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=t*this.scale,s=n*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/n*t,s=this._overrideHeight||this._overrideWidth/t*n),i=Math.round(i),s=Math.round(s);const o=this.source;o.width=i,o.height=s,o._pixiId=`canvas_${Wn()}`,o.getContext("2d").drawImage(e,0,0,t,n,0,0,i,s),this._resolve(),this._resolve=null}}static getSize(e){const t=po.SVG_SIZE.exec(e),n={};return t&&(n[t[1]]=Math.round(parseFloat(t[3])),n[t[5]]=Math.round(parseFloat(t[7]))),n}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&po.SVG_XML.test(e)}};lc.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,lc.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let cc=lc;const uc=class hc extends vn{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const n=document.createElement("video");t.autoLoad!==!1&&n.setAttribute("preload","auto"),t.playsinline!==!1&&(n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline","")),t.muted===!0&&(n.setAttribute("muted",""),n.muted=!0),t.loop===!0&&n.setAttribute("loop",""),t.autoPlay!==!1&&n.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);const i=e[0].src||e[0];vn.crossOrigin(n,i,t.crossorigin);for(let s=0;s<e.length;++s){const o=document.createElement("source");let{src:a,mime:l}=e[s];if(a=a||e[s],a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const c=a.split("?").shift().toLowerCase(),u=c.slice(c.lastIndexOf(".")+1);l=l||hc.MIME_TYPES[u]||`video/${u}`}o.src=a,l&&(o.type=l),n.appendChild(o)}e=n}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const t=Zt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((t,n)=>{this.valid?t(this):(this._resolve=t,this._reject=n,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!t&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Zt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Zt.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Zt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||hc.TYPES.includes(t)}};uc.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],uc.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let qp=uc;Jl.push(hi,Cp,Px,qp,cc,na,Bx,Rx);class Bo{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?ke.EMPTY:(e=e||new ke(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,t){const{a:n,b:i,c:s,d:o,tx:a,ty:l}=e,c=n*t.x+s*t.y+a,u=i*t.x+o*t.y+l;this.minX=Math.min(this.minX,c),this.maxX=Math.max(this.maxX,c),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)}addQuad(e){let t=this.minX,n=this.minY,i=this.maxX,s=this.maxY,o=e[0],a=e[1];t=o<t?o:t,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=e[2],a=e[3],t=o<t?o:t,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=e[4],a=e[5],t=o<t?o:t,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=e[6],a=e[7],t=o<t?o:t,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,this.minX=t,this.minY=n,this.maxX=i,this.maxY=s}addFrame(e,t,n,i,s){this.addFrameMatrix(e.worldTransform,t,n,i,s)}addFrameMatrix(e,t,n,i,s){const o=e.a,a=e.b,l=e.c,c=e.d,u=e.tx,h=e.ty;let d=this.minX,f=this.minY,g=this.maxX,m=this.maxY,p=o*t+l*n+u,v=a*t+c*n+h;d=p<d?p:d,f=v<f?v:f,g=p>g?p:g,m=v>m?v:m,p=o*i+l*n+u,v=a*i+c*n+h,d=p<d?p:d,f=v<f?v:f,g=p>g?p:g,m=v>m?v:m,p=o*t+l*s+u,v=a*t+c*s+h,d=p<d?p:d,f=v<f?v:f,g=p>g?p:g,m=v>m?v:m,p=o*i+l*s+u,v=a*i+c*s+h,d=p<d?p:d,f=v<f?v:f,g=p>g?p:g,m=v>m?v:m,this.minX=d,this.minY=f,this.maxX=g,this.maxY=m}addVertexData(e,t,n){let i=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=t;l<n;l+=2){const c=e[l],u=e[l+1];i=c<i?c:i,s=u<s?u:s,o=c>o?c:o,a=u>a?u:a}this.minX=i,this.minY=s,this.maxX=o,this.maxY=a}addVertices(e,t,n,i){this.addVerticesMatrix(e.worldTransform,t,n,i)}addVerticesMatrix(e,t,n,i,s=0,o=s){const a=e.a,l=e.b,c=e.c,u=e.d,h=e.tx,d=e.ty;let f=this.minX,g=this.minY,m=this.maxX,p=this.maxY;for(let v=n;v<i;v+=2){const x=t[v],b=t[v+1],_=a*x+c*b+h,y=u*b+l*x+d;f=Math.min(f,_-s),m=Math.max(m,_+s),g=Math.min(g,y-o),p=Math.max(p,y+o)}this.minX=f,this.minY=g,this.maxX=m,this.maxY=p}addBounds(e){const t=this.minX,n=this.minY,i=this.maxX,s=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,t){const n=e.minX>t.minX?e.minX:t.minX,i=e.minY>t.minY?e.minY:t.minY,s=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(n<=s&&i<=o){const a=this.minX,l=this.minY,c=this.maxX,u=this.maxY;this.minX=n<a?n:a,this.minY=i<l?i:l,this.maxX=s>c?s:c,this.maxY=o>u?o:u}}addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,t){const n=e.minX>t.x?e.minX:t.x,i=e.minY>t.y?e.minY:t.y,s=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(n<=s&&i<=o){const a=this.minX,l=this.minY,c=this.maxX,u=this.maxY;this.minX=n<a?n:a,this.minY=i<l?i:l,this.maxX=s>c?s:c,this.maxY=o>u?o:u}}pad(e=0,t=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}addFramePad(e,t,n,i,s,o){e-=s,t-=o,n+=s,i+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>i?this.maxY:i}}class lt extends ds{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new ru,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Bo,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const t=Object.keys(e);for(let n=0;n<t.length;++n){const i=t[n];Object.defineProperty(lt.prototype,i,Object.getOwnPropertyDescriptor(e,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new ke),t=this._boundsRect),this._bounds.getRectangle(t)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new ke),e=this._localBoundsRect),this._localBounds||(this._localBounds=new Bo);const t=this.transform,n=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(n==null?void 0:n.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const i=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=n,this.transform=t,this._bounds=i,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,t,n=!1){return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}toLocal(e,t,n,i){return t&&(e=t.toGlobal(e,n,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,t=0,n=1,i=1,s=0,o=0,a=0,l=0,c=0){return this.position.x=e,this.position.y=t,this.scale.x=n||1,this.scale.y=i||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=c,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new Mx),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*w1}set angle(e){this.transform.rotation=e*E1}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount--,t._maskRefCount===0&&(t.renderable=!0,t.isMask=!1))}if(this._mask=e,this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount===0&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++)}}}}class Mx extends lt{constructor(){super(...arguments),this.sortDirty=null}}lt.prototype.displayObjectUpdateTransform=lt.prototype.updateTransform;const Ox=new nt;function Nx(r,e){return r.zIndex===e.zIndex?r._lastSortedIndex-e._lastSortedIndex:r.zIndex-e.zIndex}const Jp=class dc extends lt{constructor(){super(),this.children=[],this.sortableChildren=dc.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const n=this.getChildIndex(e),i=this.getChildIndex(t);this.children[n]=t,this.children[i]=e,this.onChildrenChange(n<i?n:i)}getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const n=this.getChildIndex(e);pi(this.children,n,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],n=this.children.indexOf(t);if(n===-1)return null;t.parent=null,t.transform._parentID=-1,pi(this.children,n,1),this._boundsID++,this.onChildrenChange(n),t.emit("removed",this),this.emit("childRemoved",t,this,n)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,pi(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const n=e,i=t,s=i-n;let o;if(s>0&&s<=i){o=this.children.splice(n,s);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,n=this.children.length;t<n;++t){const i=this.children[t];i._lastSortedIndex=t,!e&&i.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(Nx),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const n=this.children[e];n.visible&&n.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const n=t._mask.isMaskData?t._mask.maskObject:t._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(t._bounds,n._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const n=super.getLocalBounds(e);if(!t)for(let i=0,s=this.children.length;i<s;++i){const o=this.children[i];o.visible&&o.updateTransform()}return n}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let n,i;this.cullArea?(n=this.cullArea,i=this.worldTransform):this._render!==dc.prototype._render&&(n=this.getBounds(!0));const s=e.projection.transform;if(s&&(i?(i=Ox.copyFrom(i),i.prepend(s)):i=s),n&&t.intersects(n,i))this._render(e);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const l=this.children[o],c=l.cullable;l.cullable=c||!this.cullArea,l.render(e),l.cullable=c}}render(e){var t;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(t=this.filters)!=null&&t.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let n=0,i=this.children.length;n<i;++n)this.children[n].render(e)}}renderAdvanced(e){var s,o,a;const t=this.filters,n=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let l=0;l<t.length;l++)t[l].enabled&&this._enabledFilters.push(t[l])}const i=t&&((s=this._enabledFilters)==null?void 0:s.length)||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==bt.NONE));if(i&&e.batch.flush(),t&&((o=this._enabledFilters)!=null&&o.length)&&e.filter.push(this,this._enabledFilters),n&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let l=0,c=this.children.length;l<c;++l)this.children[l].render(e)}i&&e.batch.flush(),n&&e.mask.pop(this),t&&((a=this._enabledFilters)!=null&&a.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t=typeof e=="boolean"?e:e==null?void 0:e.children,n=this.removeChildren(0,this.children.length);if(t)for(let i=0;i<n.length;++i)n[i].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};Jp.defaultSortableChildren=!1;let Sr=Jp;Sr.prototype.containerUpdateTransform=Sr.prototype.updateTransform;Object.defineProperties(ue,{SORTABLE_CHILDREN:{get(){return Sr.defaultSortableChildren},set(r){Ge("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Sr.defaultSortableChildren=r}}});const Di=new ze,Dx=new Uint16Array([0,1,2,0,2,3]);class Qn extends Sr{constructor(e){super(),this._anchor=new Yr(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new rt(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=we.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||ge.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=Dx,this.pluginName="batch",this.isSprite=!0,this._roundPixels=ue.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=hn(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=hn(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const t=this.transform.worldTransform,n=t.a,i=t.b,s=t.c,o=t.d,a=t.tx,l=t.ty,c=this.vertexData,u=e.trim,h=e.orig,d=this._anchor;let f=0,g=0,m=0,p=0;if(u?(g=u.x-d._x*h.width,f=g+u.width,p=u.y-d._y*h.height,m=p+u.height):(g=-d._x*h.width,f=g+h.width,p=-d._y*h.height,m=p+h.height),c[0]=n*g+s*p+a,c[1]=o*p+i*g+l,c[2]=n*f+s*p+a,c[3]=o*p+i*f+l,c[4]=n*f+s*m+a,c[5]=o*m+i*f+l,c[6]=n*g+s*m+a,c[7]=o*m+i*g+l,this._roundPixels){const v=ue.RESOLUTION;for(let x=0;x<c.length;++x)c[x]=Math.round(c[x]*v)/v}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,t=this.vertexTrimmedData,n=e.orig,i=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,c=s.d,u=s.tx,h=s.ty,d=-i._x*n.width,f=d+n.width,g=-i._y*n.height,m=g+n.height;if(t[0]=o*d+l*g+u,t[1]=c*g+a*d+h,t[2]=o*f+l*g+u,t[3]=c*g+a*f+h,t[4]=o*f+l*m+u,t[5]=c*m+a*f+h,t[6]=o*d+l*m+u,t[7]=c*m+a*d+h,this._roundPixels){const p=ue.RESOLUTION;for(let v=0;v<t.length;++v)t[v]=Math.round(t[v]*p)/p}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new Bo),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new ke),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,Di);const t=this._texture.orig.width,n=this._texture.orig.height,i=-t*this.anchor.x;let s=0;return Di.x>=i&&Di.x<i+t&&(s=-n*this.anchor.y,Di.y>=s&&Di.y<s+n)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const t=typeof e=="boolean"?e:e==null?void 0:e.baseTexture;this._texture.destroy(!!t)}this._texture=null}static from(e,t){const n=e instanceof ge?e:ge.from(e,t);return new Qn(n)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const t=hn(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const t=hn(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||ge.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const Qp=new nt;lt.prototype._cacheAsBitmap=!1;lt.prototype._cacheData=null;lt.prototype._cacheAsBitmapResolution=null;lt.prototype._cacheAsBitmapMultisample=null;class Lx{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(lt.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(r){r!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(r){r!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(r){if(this._cacheAsBitmap===r)return;this._cacheAsBitmap=r;let e;r?(this._cacheData||(this._cacheData=new Lx),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});lt.prototype._renderCached=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(r),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(r))};lt.prototype._initCachedDisplayObject=function(r){var d,f;if((d=this._cacheData)!=null&&d.sprite)return;const e=this.alpha;this.alpha=1,r.batch.flush();const t=this.getLocalBounds(new ke,!0);if((f=this.filters)!=null&&f.length){const g=this.filters[0].padding;t.pad(g)}const n=this.cacheAsBitmapResolution||r.resolution;t.ceil(n),t.width=Math.max(t.width,1/n),t.height=Math.max(t.height,1/n);const i=r.renderTexture.current,s=r.renderTexture.sourceFrame.clone(),o=r.renderTexture.destinationFrame.clone(),a=r.projection.transform,l=Jn.create({width:t.width,height:t.height,resolution:n,multisample:this.cacheAsBitmapMultisample??r.multisample}),c=`cacheAsBitmap_${Wn()}`;this._cacheData.textureCacheId=c,Me.addToCache(l.baseTexture,c),ge.addToCache(l,c);const u=this.transform.localTransform.copyTo(Qp).invert().translate(-t.x,-t.y);this.render=this._cacheData.originalRender,r.render(this,{renderTexture:l,clear:!0,transform:u,skipUpdateTransform:!1}),r.framebuffer.blit(),r.projection.transform=a,r.renderTexture.bind(i,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const h=new Qn(l);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(t.x/t.width),h.anchor.y=-(t.y/t.height),h.alpha=e,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=h.containsPoint.bind(h)};lt.prototype._renderCachedCanvas=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(r),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(r))};lt.prototype._initCachedDisplayObjectCanvas=function(r){var u;if((u=this._cacheData)!=null&&u.sprite)return;const e=this.getLocalBounds(new ke,!0),t=this.alpha;this.alpha=1;const n=r.canvasContext.activeContext,i=r._projTransform,s=this.cacheAsBitmapResolution||r.resolution;e.ceil(s),e.width=Math.max(e.width,1/s),e.height=Math.max(e.height,1/s);const o=Jn.create({width:e.width,height:e.height,resolution:s}),a=`cacheAsBitmap_${Wn()}`;this._cacheData.textureCacheId=a,Me.addToCache(o.baseTexture,a),ge.addToCache(o,a);const l=Qp;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,r.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),r.canvasContext.activeContext=n,r._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const c=new Qn(o);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(e.x/e.width),c.anchor.y=-(e.y/e.height),c.alpha=t,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=r._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)};lt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};lt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};lt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Me.removeFromCache(this._cacheData.textureCacheId),ge.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};lt.prototype._cacheAsBitmapDestroy=function(r){this.cacheAsBitmap=!1,this.destroy(r)};lt.prototype.name=null;Sr.prototype.getChildByName=function(r,e){for(let t=0,n=this.children.length;t<n;t++)if(this.children[t].name===r)return this.children[t];if(e)for(let t=0,n=this.children.length;t<n;t++){const i=this.children[t];if(!i.getChildByName)continue;const s=i.getChildByName(r,!0);if(s)return s}return null};lt.prototype.getGlobalPosition=function(r=new ze,e=!1){return this.parent?this.parent.toGlobal(this.position,r,e):(r.x=this.position.x,r.y=this.position.y),r};var Fx=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class kx extends kt{constructor(e=1){super(Ix,Fx,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const Gx={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Hx=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function Vx(r){const e=Gx[r],t=e.length;let n=Hx,i="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<r;a++){let l=s.replace("%index%",a.toString());o=a,a>=t&&(o=r-a-1),l=l.replace("%value%",e[o].toString()),i+=l,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",r.toString()),n}const Ux=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function Wx(r,e){const t=Math.ceil(r/2);let n=Ux,i="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<r;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(t-1)}.0`),i+=a,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",r.toString()),n}class fc extends kt{constructor(e,t=8,n=4,i=kt.defaultResolution,s=5){const o=Wx(s,e),a=Vx(s);super(o,a),this.horizontal=e,this.resolution=i,this._quality=0,this.quality=n,this.blur=t}apply(e,t,n,i){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/t.width):this.uniforms.strength=1/n.height*(n.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,t,n,i);else{const s=e.getFilterTexture(),o=e.renderer;let a=t,l=s;this.state.blend=!1,e.applyFilter(this,a,l,Br.CLEAR);for(let c=1;c<this.passes-1;c++){e.bindAndClear(a,Br.BLIT),this.uniforms.uSampler=l;const u=l;l=a,a=u,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,l,n,i),e.returnFilterTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class zx extends kt{constructor(e=8,t=4,n=kt.defaultResolution,i=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new fc(!0,e,t,n,i),this.blurYFilter=new fc(!1,e,t,n,i),this.resolution=n,this.quality=t,this.blur=e,this.repeatEdgePixels=!1}apply(e,t,n,i){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=e.getFilterTexture();this.blurXFilter.apply(e,t,a,Br.CLEAR),this.blurYFilter.apply(e,a,n,i),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,t,n,i):this.blurXFilter.apply(e,t,n,i)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}var Xx=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class pc extends kt{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(zp,Xx,e),this.alpha=1}_loadMatrix(e,t=!1){let n=e;t&&(this._multiply(n,this.uniforms.m,e),n=this._colorMatrix(n)),this.uniforms.m=n}_multiply(e,t,n){return e[0]=t[0]*n[0]+t[1]*n[5]+t[2]*n[10]+t[3]*n[15],e[1]=t[0]*n[1]+t[1]*n[6]+t[2]*n[11]+t[3]*n[16],e[2]=t[0]*n[2]+t[1]*n[7]+t[2]*n[12]+t[3]*n[17],e[3]=t[0]*n[3]+t[1]*n[8]+t[2]*n[13]+t[3]*n[18],e[4]=t[0]*n[4]+t[1]*n[9]+t[2]*n[14]+t[3]*n[19]+t[4],e[5]=t[5]*n[0]+t[6]*n[5]+t[7]*n[10]+t[8]*n[15],e[6]=t[5]*n[1]+t[6]*n[6]+t[7]*n[11]+t[8]*n[16],e[7]=t[5]*n[2]+t[6]*n[7]+t[7]*n[12]+t[8]*n[17],e[8]=t[5]*n[3]+t[6]*n[8]+t[7]*n[13]+t[8]*n[18],e[9]=t[5]*n[4]+t[6]*n[9]+t[7]*n[14]+t[8]*n[19]+t[9],e[10]=t[10]*n[0]+t[11]*n[5]+t[12]*n[10]+t[13]*n[15],e[11]=t[10]*n[1]+t[11]*n[6]+t[12]*n[11]+t[13]*n[16],e[12]=t[10]*n[2]+t[11]*n[7]+t[12]*n[12]+t[13]*n[17],e[13]=t[10]*n[3]+t[11]*n[8]+t[12]*n[13]+t[13]*n[18],e[14]=t[10]*n[4]+t[11]*n[9]+t[12]*n[14]+t[13]*n[19]+t[14],e[15]=t[15]*n[0]+t[16]*n[5]+t[17]*n[10]+t[18]*n[15],e[16]=t[15]*n[1]+t[16]*n[6]+t[17]*n[11]+t[18]*n[16],e[17]=t[15]*n[2]+t[16]*n[7]+t[17]*n[12]+t[18]*n[17],e[18]=t[15]*n[3]+t[16]*n[8]+t[17]*n[13]+t[18]*n[18],e[19]=t[15]*n[4]+t[16]*n[9]+t[17]*n[14]+t[18]*n[19]+t[19],e}_colorMatrix(e){const t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}brightness(e,t){const n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)}tint(e,t){const[n,i,s]=rt.shared.setValue(e).toArray(),o=[n,0,0,0,0,0,i,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,t)}greyscale(e,t){const n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)}blackAndWhite(e){const t=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(t,e)}hue(e,t){e=(e||0)/180*Math.PI;const n=Math.cos(e),i=Math.sin(e),s=Math.sqrt,o=1/3,a=s(o),l=n+(1-n)*o,c=o*(1-n)-a*i,u=o*(1-n)+a*i,h=o*(1-n)+a*i,d=n+o*(1-n),f=o*(1-n)-a*i,g=o*(1-n)-a*i,m=o*(1-n)+a*i,p=n+o*(1-n),v=[l,c,u,0,0,h,d,f,0,0,g,m,p,0,0,0,0,0,1,0];this._loadMatrix(v,t)}contrast(e,t){const n=(e||0)+1,i=-.5*(n-1),s=[n,0,0,0,i,0,n,0,0,i,0,0,n,0,i,0,0,0,1,0];this._loadMatrix(s,t)}saturate(e=0,t){const n=e*2/3+1,i=(n-1)*-.5,s=[n,i,i,0,0,i,n,i,0,0,i,i,n,0,0,0,0,0,1,0];this._loadMatrix(s,t)}desaturate(){this.saturate(-1)}negative(e){const t=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(t,e)}sepia(e){const t=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(t,e)}technicolor(e){const t=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(t,e)}polaroid(e){const t=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(t,e)}toBGR(e){const t=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)}kodachrome(e){const t=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(t,e)}browni(e){const t=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(t,e)}vintage(e){const t=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(t,e)}colorTone(e,t,n,i,s){e=e||.2,t=t||.15,n=n||16770432,i=i||3375104;const o=rt.shared,[a,l,c]=o.setValue(n).toArray(),[u,h,d]=o.setValue(i).toArray(),f=[.3,.59,.11,0,0,a,l,c,e,0,u,h,d,t,0,a-u,l-h,c-d,0,0];this._loadMatrix(f,s)}night(e,t){e=e||.1;const n=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(n,t)}predator(e,t){const n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,t)}lsd(e){const t=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(t,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}pc.prototype.grayscale=pc.prototype.greyscale;var jx=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,$x=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class Yx extends kt{constructor(e,t){const n=new nt;e.renderable=!1,super($x,jx,{mapSampler:e._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=n,t==null&&(t=20),this.scale=new ze(t,t)}apply(e,t,n,i){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),e.applyFilter(this,t,n,i)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}var Zx=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,qx=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class Jx extends kt{constructor(){super(qx,Zx)}}var Qx=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class Kx extends kt{constructor(e=.5,t=Math.random()){super(zp,Qx,{uNoise:0,uSeed:0}),this.noise=e,this.seed=t}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const Kh={AlphaFilter:kx,BlurFilter:zx,BlurFilterPass:fc,ColorMatrixFilter:pc,DisplacementFilter:Yx,FXAAFilter:Jx,NoiseFilter:Kx};Object.entries(Kh).forEach(([r,e])=>{Object.defineProperty(Kh,r,{get(){return Ge("7.1.0",`filters.${r} has moved to ${r}`),e}})});class eC{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(Zt.system.add(this.tickerUpdate,this,zn.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Zt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const un=new eC;class fs{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=fs.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new ze,this.page=new ze,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,n,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Mo extends fs{constructor(){super(...arguments),this.client=new ze,this.movement=new ze,this.offset=new ze,this.global=new ze,this.screen=new ze}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,n){return e.worldTransform.applyInverse(n||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,n,i,s,o,a,l,c,u,h,d,f,g,m){throw new Error("Method not implemented.")}}class yr extends Mo{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class mi extends Mo{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}mi.DOM_DELTA_PIXEL=0,mi.DOM_DELTA_LINE=1,mi.DOM_DELTA_PAGE=2;const tC=2048,rC=new ze,ll=new ze;class nC{constructor(e){this.dispatch=new ds,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((n,i)=>n.priority-i.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const t=this.mappingTable[e.type];if(t)for(let n=0,i=t.length;n<i;n++)t[n].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){un.pauseUpdate=!0;const n=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",i=this[n](this.rootTarget,this.rootTarget.eventMode,rC.set(e,t),this.hitTestFn,this.hitPruneFn);return i&&i[0]}propagate(e,t){if(!e.target)return;const n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let i=0,s=n.length-1;i<s;i++)if(e.currentTarget=n[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let i=n.length-2;i>=0;i--)if(e.currentTarget=n[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,n=this._allInteractiveElements){if(n.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const i=Array.isArray(t)?t:[t];for(let s=n.length-1;s>=0;s--)i.forEach(o=>{e.currentTarget=n[s],this.notifyTarget(e,o)})}propagationPath(e){const t=[e];for(let n=0;n<tC&&e!==this.rootTarget;n++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,n,i,s,o=!1){let a=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(un.pauseUpdate=!1),e.interactiveChildren&&e.children){const u=e.children;for(let h=u.length-1;h>=0;h--){const d=u[h],f=this.hitTestMoveRecursive(d,this._isInteractive(t)?t:d.eventMode,n,i,s,o||s(e,n));if(f){if(f.length>0&&!f[f.length-1].parent)continue;const g=e.isInteractive();(f.length>0||g)&&(g&&this._allInteractiveElements.push(e),f.push(e)),this._hitElements.length===0&&(this._hitElements=f),a=!0}}}const l=this._isInteractive(t),c=e.isInteractive();return l&&c&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:l&&!s(e,n)&&i(e,n)?c?[e]:[]:null}hitTestRecursive(e,t,n,i,s){if(this._interactivePrune(e)||s(e,n))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(un.pauseUpdate=!1),e.interactiveChildren&&e.children){const l=e.children;for(let c=l.length-1;c>=0;c--){const u=l[c],h=this.hitTestRecursive(u,this._isInteractive(t)?t:u.eventMode,n,i,s);if(h){if(h.length>0&&!h[h.length-1].parent)continue;const d=e.isInteractive();return(h.length>0||d)&&h.push(e),h}}}const o=this._isInteractive(t),a=e.isInteractive();return o&&i(e,n)?a?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,t){var n;if(e.hitArea&&(e.worldTransform.applyInverse(t,ll),!e.hitArea.contains(ll.x,ll.y)))return!0;if(e._mask){const i=e._mask.isMaskData?e._mask.maskObject:e._mask;if(i&&!((n=i.containsPoint)!=null&&n.call(i,t)))return!0}return!1}hitTestFn(e,t){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(t):!1}notifyTarget(e,t){var s,o;t=t??e.type;const n=`on${t}`;(o=(s=e.currentTarget)[n])==null||o.call(s,e);const i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this.notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof yr)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),t.pointerType==="touch")this.dispatchEvent(t,"touchstart");else if(t.pointerType==="mouse"||t.pointerType==="pen"){const i=t.button===2;this.dispatchEvent(t,i?"rightdown":"mousedown")}const n=this.trackingData(e.pointerId);n.pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){var l,c;if(!(e instanceof yr)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const n=t.pointerType==="mouse"||t.pointerType==="pen",i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.overTargets);if(((l=i.overTargets)==null?void 0:l.length)>0&&s!==t.target){const u=e.type==="mousemove"?"mouseout":"pointerout",h=this.createPointerEvent(e,u,s);if(this.dispatchEvent(h,"pointerout"),n&&this.dispatchEvent(h,"mouseout"),!t.composedPath().includes(s)){const d=this.createPointerEvent(e,"pointerleave",s);for(d.eventPhase=d.AT_TARGET;d.target&&!t.composedPath().includes(d.target);)d.currentTarget=d.target,this.notifyTarget(d),n&&this.notifyTarget(d,"mouseleave"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(h)}if(s!==t.target){const u=e.type==="mousemove"?"mouseover":"pointerover",h=this.clonePointerEvent(t,u);this.dispatchEvent(h,"pointerover"),n&&this.dispatchEvent(h,"mouseover");let d=s==null?void 0:s.parent;for(;d&&d!==this.rootTarget.parent&&d!==t.target;)d=d.parent;if(!d||d===this.rootTarget.parent){const f=this.clonePointerEvent(t,"pointerenter");for(f.eventPhase=f.AT_TARGET;f.target&&f.target!==s&&f.target!==this.rootTarget.parent;)f.currentTarget=f.target,this.notifyTarget(f),n&&this.notifyTarget(f,"mouseenter"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(h)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(t,"pointermove"),a&&o.push("globalpointermove"),t.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(t,"touchmove"),a&&o.push("globaltouchmove")),n&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(t,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(c=t.target)==null?void 0:c.cursor),o.length>0&&this.all(t,o),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){var o;if(!(e instanceof yr)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),n=this.createPointerEvent(e),i=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),i&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=(o=n.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(n,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;t.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof yr)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId);if(t.overTargets){const n=e.pointerType==="mouse"||e.pointerType==="pen",i=this.findMountedTarget(t.overTargets),s=this.createPointerEvent(e,"pointerout",i);this.dispatchEvent(s),n&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",i);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),n&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;t.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof yr)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=performance.now(),n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const a=n.button===2;this.dispatchEvent(n,a?"rightup":"mouseup")}const i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[e.button]);let o=s;if(s&&!n.composedPath().includes(s)){let a=s;for(;a&&!n.composedPath().includes(a);){if(n.currentTarget=a,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const l=n.button===2;this.notifyTarget(n,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete i.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(n,"click");a.target=o,a.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:t});const l=i.clicksByButton[e.button];if(l.target===a.target&&t-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=t,a.detail=l.clickCount,a.pointerType==="mouse"){const c=a.button===2;this.dispatchEvent(a,c?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(n)}mapPointerUpOutside(e){if(!(e instanceof yr)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),n=this.findMountedTarget(t.pressTargetsByButton[e.button]),i=this.createPointerEvent(e);if(n){let s=n;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(i)}mapWheel(e){if(!(e instanceof mi)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let n=1;n<e.length&&e[n].parent===t;n++)t=e[n];return t}createPointerEvent(e,t,n){const i=this.allocateEvent(yr);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=n??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof t=="string"&&(i.type=t),i}createWheelEvent(e){const t=this.allocateEvent(mi);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){const n=this.allocateEvent(yr);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=t??n.type,n}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof yr&&t instanceof yr&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof Mo&&t instanceof Mo&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}notifyListeners(e,t){const n=e.currentTarget._events[t];if(n&&e.currentTarget.isInteractive())if("fn"in n)n.once&&e.currentTarget.removeListener(t,n.fn,void 0,!0),n.fn.call(n.context,e);else for(let i=0,s=n.length;i<s&&!e.propagationImmediatelyStopped;i++)n[i].once&&e.currentTarget.removeListener(t,n[i].fn,void 0,!0),n[i].fn.call(n[i].context,e)}}const iC=1,sC={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},gc=class mc{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new nC(null),un.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new yr(null),this.rootWheelEvent=new mi(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...mc.defaultEventFeatures},{set:(t,n,i)=>(n==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=i),t[n]=i,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:t,resolution:n}=this.renderer;this.setTargetElement(t),this.resolution=n,mc._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const n=this.cursorStyles[e];if(n)switch(typeof n){case"string":t&&(this.domElement.style.cursor=n);break;case"function":n(e);break;case"object":t&&Object.assign(this.domElement.style,n);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let n=0,i=t.length;n<i;n++){const s=t[n],o=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,un.pointerMoved();const t=this.normalizeToPointerData(e);for(let n=0,i=t.length;n<i;n++){const s=this.bootstrapEvent(this.rootPointerEvent,t[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const n=t!==this.domElement?"outside":"",i=this.normalizeToPointerData(e);for(let s=0,o=i.length;s<o;s++){const a=this.bootstrapEvent(this.rootPointerEvent,i[s]);a.type+=n,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);for(let n=0,i=t.length;n<i;n++){const s=this.bootstrapEvent(this.rootPointerEvent,t[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,un.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;un.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;un.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,n){const i=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(t-i.left)*(this.domElement.width/i.width)*s,e.y=(n-i.top)*(this.domElement.height/i.height)*s}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let n=0,i=e.changedTouches.length;n<i;n++){const s=e.changedTouches[n];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,t.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const n=e;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=iC),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,t.push(n)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=sC[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};gc.extension={name:"events",type:[ce.RendererSystem,ce.CanvasRendererSystem]},gc.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let vc=gc;fe.add(vc);function ed(r){return r==="dynamic"||r==="static"}const oC={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??ed(vc.defaultEventMode)},set interactive(r){Ge("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=r,this.eventMode=r?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??vc.defaultEventMode},set eventMode(r){this._internalInteractive=ed(r),this._internalEventMode=r},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(r,e,t){const n=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,i=typeof e=="function"?void 0:e;r=n?`${r}capture`:r,e=typeof e=="function"?e:e.handleEvent,this.on(r,e,i)},removeEventListener(r,e,t){const n=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,i=typeof e=="function"?void 0:e;r=n?`${r}capture`:r,e=typeof e=="function"?e:e.handleEvent,this.off(r,e,i)},dispatchEvent(r){if(!(r instanceof fs))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return r.defaultPrevented=!1,r.path=null,r.target=this,r.manager.dispatchEvent(r),!r.defaultPrevented}};lt.mixin(oC);const aC={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};lt.mixin(aC);const lC=9,Ls=100,cC=0,uC=0,td=2,rd=1,hC=-1e3,dC=-1e3,fC=2;class Kp{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,($r.tablet||$r.phone)&&this.createTouchHook();const t=document.createElement("div");t.style.width=`${Ls}px`,t.style.height=`${Ls}px`,t.style.position="absolute",t.style.top=`${cC}px`,t.style.left=`${uC}px`,t.style.zIndex=td.toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${rd}px`,e.style.height=`${rd}px`,e.style.position="absolute",e.style.top=`${hC}px`,e.style.left=`${dC}px`,e.style.zIndex=fC.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)==null||e.appendChild(this.div))}deactivate(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)==null||e.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const t=e.children;if(t)for(let n=0;n<t.length;n++)this.updateAccessibleObjects(t[n])}update(){const e=performance.now();if($r.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:t,y:n,width:i,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,c=i/o*l,u=s/a*l;let h=this.div;h.style.left=`${t}px`,h.style.top=`${n}px`,h.style.width=`${o}px`,h.style.height=`${a}px`;for(let d=0;d<this.children.length;d++){const f=this.children[d];if(f.renderId!==this.renderId)f._accessibleActive=!1,pi(this.children,d,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,d--;else{h=f._accessibleDiv;let g=f.hitArea;const m=f.worldTransform;f.hitArea?(h.style.left=`${(m.tx+g.x*m.a)*c}px`,h.style.top=`${(m.ty+g.y*m.d)*u}px`,h.style.width=`${g.width*m.a*c}px`,h.style.height=`${g.height*m.d*u}px`):(g=f.getBounds(),this.capHitArea(g),h.style.left=`${g.x*c}px`,h.style.top=`${g.y*u}px`,h.style.width=`${g.width*c}px`,h.style.height=`${g.height*u}px`,h.title!==f.accessibleTitle&&f.accessibleTitle!==null&&(h.title=f.accessibleTitle),h.getAttribute("aria-label")!==f.accessibleHint&&f.accessibleHint!==null&&h.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==h.title||f.tabIndex!==h.tabIndex)&&(h.title=f.accessibleTitle,h.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(h))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:t,height:n}=this.renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>n&&(e.height=n-e.y)}addChild(e){let t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=`${Ls}px`,t.style.height=`${Ls}px`,t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=td.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,t){const{displayObject:n}=e.target,i=this.renderer.events.rootBoundary,s=Object.assign(new fs(i),{target:n});i.rootTarget=this.renderer.lastObjectRendered,t.forEach(o=>i.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===lC&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}Kp.extension={name:"accessibility",type:[ce.RendererPlugin,ce.CanvasRendererPlugin]};fe.add(Kp);const eg=class yc{constructor(e){this.stage=new Sr,e=Object.assign({forceCanvas:!1},e),this.renderer=Ax(e),yc._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){var e;return(e=this.renderer)==null?void 0:e.view}get screen(){var e;return(e=this.renderer)==null?void 0:e.screen}destroy(e,t){const n=yc._plugins.slice(0);n.reverse(),n.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};eg._plugins=[];let tg=eg;fe.handleByList(ce.Application,tg._plugins);class rg{static init(e){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let t,n;if(this._resizeTo===globalThis.window)t=globalThis.innerWidth,n=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:s}=this._resizeTo;t=i,n=s}this.renderer.resize(t,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}rg.extension=ce.Application;fe.add(rg);const nd={loader:ce.LoadParser,resolver:ce.ResolveParser,cache:ce.CacheParser,detection:ce.DetectionParser};fe.handle(ce.Asset,r=>{const e=r.ref;Object.entries(nd).filter(([t])=>!!e[t]).forEach(([t,n])=>fe.add(Object.assign(e[t],{extension:e[t].extension??n})))},r=>{const e=r.ref;Object.keys(nd).filter(t=>!!e[t]).forEach(t=>fe.remove(e[t]))});class pC{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<t;n++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function Ii(r,e){if(Array.isArray(e)){for(const t of e)if(r.startsWith(`data:${t}`))return!0;return!1}return r.startsWith(`data:${e}`)}function Sn(r,e){const t=r.split("?")[0],n=xt.extname(t).toLowerCase();return Array.isArray(e)?e.includes(n):n===e}const xr=(r,e,t=!1)=>(Array.isArray(r)||(r=[r]),e?r.map(n=>typeof n=="string"||t?e(n):n):r),bc=(r,e)=>{const t=e.split("?")[1];return t&&(r+=`?${t}`),r};function ng(r,e,t,n,i){const s=e[t];for(let o=0;o<s.length;o++){const a=s[o];t<e.length-1?ng(r.replace(n[t],a),e,t+1,n,i):i.push(r.replace(n[t],a))}}function gC(r){const e=/\{(.*?)\}/g,t=r.match(e),n=[];if(t){const i=[];t.forEach(s=>{const o=s.substring(1,s.length-1).split(",");i.push(o)}),ng(r,i,0,t,n)}else n.push(r);return n}const Oo=r=>!Array.isArray(r);class mC{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const n=xr(e);let i;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(t)){i=l.getCacheableAssets(n,t);break}}i||(i={},n.forEach(a=>{i[a]=t}));const s=Object.keys(i),o={cacheKeys:s,keys:n};if(n.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==t&&console.warn("[Cache] already has key:",a),this._cache.set(a,i[a])}),t instanceof ge){const a=t;n.forEach(l=>{a.baseTexture!==ge.EMPTY.baseTexture&&Me.addToCache(a.baseTexture,l),ge.addToCache(a,l)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(n=>{this._cache.delete(n)}),t.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}}const Nn=new mC;class vC{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,n)=>(this._parsersValidated=!1,e[t]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const n={promise:null,parser:null};return n.promise=(async()=>{var o,a;let i=null,s=null;if(t.loadParser&&(s=this._parserHash[t.loadParser],s||console.warn(`[Assets] specified load parser "${t.loadParser}" not found while loading ${e}`)),!s){for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];if(c.load&&((o=c.test)!=null&&o.call(c,e,t,this))){s=c;break}}if(!s)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await s.load(e,t,this),n.parser=s;for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];c.parse&&c.parse&&await((a=c.testParse)==null?void 0:a.call(c,i,t,this))&&(i=await c.parse(i,t,this)||i,n.parser=c)}return i})(),n}async load(e,t){this._parsersValidated||this._validateParsers();let n=0;const i={},s=Oo(e),o=xr(e,c=>({alias:[c],src:c})),a=o.length,l=o.map(async c=>{const u=xt.toAbsolute(c.src);if(!i[c.src])try{this.promiseCache[u]||(this.promiseCache[u]=this._getLoadPromiseAndParser(u,c)),i[c.src]=await this.promiseCache[u].promise,t&&t(++n/a)}catch(h){throw delete this.promiseCache[u],delete i[c.src],new Error(`[Loader.load] Failed to load ${u}.
${h}`)}});return await Promise.all(l),s?i[o[0].src]:i}async unload(e){const t=xr(e,n=>({alias:[n],src:n})).map(async n=>{var o,a;const i=xt.toAbsolute(n.src),s=this.promiseCache[i];if(s){const l=await s.promise;delete this.promiseCache[i],(a=(o=s.parser)==null?void 0:o.unload)==null||a.call(o,l,n,this)}});await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,t)=>(e[t.name]&&console.warn(`[Assets] loadParser name conflict "${t.name}"`),{...e,[t.name]:t}),{})}}var Ar=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(Ar||{});const yC=".json",bC="application/json",xC={extension:{type:ce.LoadParser,priority:Ar.Low},name:"loadJson",test(r){return Ii(r,bC)||Sn(r,yC)},async load(r){return await(await ue.ADAPTER.fetch(r)).json()}};fe.add(xC);const CC=".txt",_C="text/plain",SC={name:"loadTxt",extension:{type:ce.LoadParser,priority:Ar.Low},test(r){return Ii(r,_C)||Sn(r,CC)},async load(r){return await(await ue.ADAPTER.fetch(r)).text()}};fe.add(SC);const AC=["normal","bold","100","200","300","400","500","600","700","800","900"],wC=[".ttf",".otf",".woff",".woff2"],EC=["font/ttf","font/otf","font/woff","font/woff2"],IC=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function TC(r){const e=xt.extname(r),t=xt.basename(r,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1));let n=t.length>0;for(const s of t)if(!s.match(IC)){n=!1;break}let i=t.join(" ");return n||(i=`"${i.replace(/[\\"]/g,"\\$&")}"`),i}const RC=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function PC(r){return RC.test(r)?r:encodeURI(r)}const BC={extension:{type:ce.LoadParser,priority:Ar.Low},name:"loadWebFont",test(r){return Ii(r,EC)||Sn(r,wC)},async load(r,e){var n,i,s;const t=ue.ADAPTER.getFontFaceSet();if(t){const o=[],a=((n=e.data)==null?void 0:n.family)??TC(r),l=((s=(i=e.data)==null?void 0:i.weights)==null?void 0:s.filter(u=>AC.includes(u)))??["normal"],c=e.data??{};for(let u=0;u<l.length;u++){const h=l[u],d=new FontFace(a,`url(${PC(r)})`,{...c,weight:h});await d.load(),t.add(d),o.push(d)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(r){(Array.isArray(r)?r:[r]).forEach(e=>ue.ADAPTER.getFontFaceSet().delete(e))}};fe.add(BC);let id=0,cl;const MC="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",OC={code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${MC}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},NC={code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let ul;class DC{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const t=URL.createObjectURL(new Blob([OC.code],{type:"application/javascript"})),n=new Worker(t);n.addEventListener("message",i=>{n.terminate(),URL.revokeObjectURL(t),e(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){cl===void 0&&(cl=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<cl&&(ul||(ul=URL.createObjectURL(new Blob([NC.code],{type:"application/javascript"}))),this._createdWorkers++,e=new Worker(ul),e.addEventListener("message",t=>{this.complete(t.data),this.returnWorker(t.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,t){await this._initWorkers();const n=new Promise((i,s)=>{this.queue.push({id:e,arguments:t,resolve:i,reject:s})});return this.next(),n}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const t=this.queue.pop(),n=t.id;this.resolveHash[id]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:id++,id:n})}}const sd=new DC;function ps(r,e,t){r.resource.internal=!0;const n=new ge(r),i=()=>{delete e.promiseCache[t],Nn.has(t)&&Nn.remove(t)};return n.baseTexture.once("destroyed",()=>{t in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),i())}),n.once("destroyed",()=>{r.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i())}),n}const LC=[".jpeg",".jpg",".png",".webp",".avif"],FC=["image/jpeg","image/png","image/webp","image/avif"];async function kC(r){const e=await ue.ADAPTER.fetch(r);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${e.status} ${e.statusText}`);const t=await e.blob();return await createImageBitmap(t)}const la={name:"loadTextures",extension:{type:ce.LoadParser,priority:Ar.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return Ii(r,FC)||Sn(r,LC)},async load(r,e,t){var a;const n=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let i;n?this.config.preferWorkers&&await sd.isImageBitmapSupported()?i=await sd.loadImageBitmap(r):i=await kC(r):i=await new Promise((l,c)=>{const u=new Image;u.crossOrigin=this.config.crossOrigin,u.src=r,u.complete?l(u):(u.onload=()=>l(u),u.onerror=h=>c(h))});const s={...e.data};s.resolution??(s.resolution=Qr(r)),n&&((a=s.resourceOptions)==null?void 0:a.ownsImageBitmap)===void 0&&(s.resourceOptions={...s.resourceOptions},s.resourceOptions.ownsImageBitmap=!0);const o=new Me(i,s);return o.resource.src=r,ps(o,t,r)},unload(r){r.destroy(!0)}};fe.add(la);const GC=".svg",HC="image/svg+xml",VC={extension:{type:ce.LoadParser,priority:Ar.High},name:"loadSVG",test(r){return Ii(r,HC)||Sn(r,GC)},async testParse(r){return cc.test(r)},async parse(r,e,t){var s;const n=new cc(r,(s=e==null?void 0:e.data)==null?void 0:s.resourceOptions);await n.load();const i=new Me(n,{resolution:Qr(r),...e==null?void 0:e.data});return i.resource.src=e.src,ps(i,t,e.src)},async load(r,e){return(await ue.ADAPTER.fetch(r)).text()},unload:la.unload};fe.add(VC);const UC=[".mp4",".m4v",".webm",".ogv"],WC=["video/mp4","video/webm","video/ogg"],zC={name:"loadVideo",extension:{type:ce.LoadParser,priority:Ar.High},config:{defaultAutoPlay:!0},test(r){return Ii(r,WC)||Sn(r,UC)},async load(r,e,t){var o;let n;const i=await(await ue.ADAPTER.fetch(r)).blob(),s=URL.createObjectURL(i);try{const a={autoPlay:this.config.defaultAutoPlay,...(o=e==null?void 0:e.data)==null?void 0:o.resourceOptions},l=new qp(s,a);await l.load();const c=new Me(l,{alphaMode:await qb(),resolution:Qr(r),...e==null?void 0:e.data});c.resource.src=r,n=ps(c,t,r),n.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(s)})}catch(a){throw URL.revokeObjectURL(s),a}return n},unload(r){r.destroy(!0)}};fe.add(zC);class XC{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(t[n])}`).join("&")}}getAlias(e){const{alias:t,name:n,src:i,srcs:s}=e;return xr(t||n||i||s,o=>typeof o=="string"?o:Array.isArray(o)?o.map(a=>(a==null?void 0:a.src)??(a==null?void 0:a.srcs)??a):o!=null&&o.src||o!=null&&o.srcs?o.src??o.srcs:o,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const n=[];Array.isArray(t)?t.forEach(i=>{const s=i.src??i.srcs,o=i.alias??i.name;let a;if(typeof o=="string"){const l=this._createBundleAssetId(e,o);n.push(l),a=[o,l]}else{const l=o.map(c=>this._createBundleAssetId(e,c));n.push(...l),a=[...o,...l]}this.add({...i,alias:a,src:s})}):Object.keys(t).forEach(i=>{const s=[i,this._createBundleAssetId(e,i)];if(typeof t[i]=="string")this.add({alias:s,src:t[i]});else if(Array.isArray(t[i]))this.add({alias:s,src:t[i]});else{const o=t[i],a=o.src??o.srcs;this.add({...o,alias:s,src:Array.isArray(a)?a:[a]})}n.push(...s)}),this._bundles[e]=n}add(e,t,n,i,s){const o=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(Ge("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:e,src:t,data:n,format:i,loadParser:s})):Array.isArray(e)?o.push(...e):o.push(e);let a;a=l=>{this.hasKey(l)&&console.warn(`[Resolver] already has key: ${l} overwriting`)},xr(o).forEach(l=>{const{src:c,srcs:u}=l;let{data:h,format:d,loadParser:f}=l;const g=xr(c||u).map(v=>typeof v=="string"?gC(v):Array.isArray(v)?v:[v]),m=this.getAlias(l);Array.isArray(m)?m.forEach(a):a(m);const p=[];g.forEach(v=>{v.forEach(x=>{let b={};if(typeof x!="object"){b.src=x;for(let _=0;_<this._parsers.length;_++){const y=this._parsers[_];if(y.test(x)){b=y.parse(x);break}}}else h=x.data??h,d=x.format??d,f=x.loadParser??f,b={...b,...x};if(!m)throw new Error(`[Resolver] alias is undefined for this asset: ${b.src}`);b=this.buildResolvedAsset(b,{aliases:m,data:h,format:d,loadParser:f}),p.push(b)})}),m.forEach(v=>{this._assetMap[v]=p})})}resolveBundle(e){const t=Oo(e);e=xr(e);const n={};return e.forEach(i=>{const s=this._bundles[i];if(s){const o=this.resolve(s),a={};for(const l in o){const c=o[l];a[this._extractAssetIdFromBundle(i,l)]=c}n[i]=a}}),t?n[e[0]]:n}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const n={};for(const i in t)n[i]=t[i].src;return n}return t.src}resolve(e){const t=Oo(e);e=xr(e);const n={};return e.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i];const o=s[0],a=this._getPreferredOrder(s);a==null||a.priority.forEach(l=>{a.params[l].forEach(c=>{const u=s.filter(h=>h[l]?h[l]===c:!1);u.length&&(s=u)})}),this._resolverHash[i]=s[0]??o}else this._resolverHash[i]=this.buildResolvedAsset({alias:[i],src:i},{});n[i]=this._resolverHash[i]}),t?n[e[0]]:n}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const n=e[0],i=this._preferredOrder.find(s=>s.params.format.includes(n.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}buildResolvedAsset(e,t){const{aliases:n,data:i,loadParser:s,format:o}=t;return(this._basePath||this._rootPath)&&(e.src=xt.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=n??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...i||{},...e.data},e.loadParser=s??e.loadParser,e.format=o??xt.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}class jC{constructor(){this._detections=[],this._initialized=!1,this.resolver=new XC,this.loader=new vC,this.cache=Nn,this._backgroundLoader=new pC(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var s,o;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let a=e.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const t=((s=e.texturePreference)==null?void 0:s.resolution)??1,n=typeof t=="number"?[t]:t,i=await this._detectFormats({preferredFormats:(o=e.texturePreference)==null?void 0:o.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:i,resolution:n}}),e.preferences&&this.setPreferences(e.preferences)}add(e,t,n,i,s){this.resolver.add(e,t,n,i,s)}async load(e,t){this._initialized||await this.init();const n=Oo(e),i=xr(e).map(a=>{if(typeof a!="string"){const l=this.resolver.getAlias(a);return l.some(c=>!this.resolver.hasKey(c))&&this.add(a),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),s=this.resolver.resolve(i),o=await this._mapLoadToResolve(s,t);return n?o[i[0]]:o}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let n=!1;typeof e=="string"&&(n=!0,e=[e]);const i=this.resolver.resolveBundle(e),s={},o=Object.keys(i);let a=0,l=0;const c=()=>{t==null||t(++a/l)},u=o.map(h=>{const d=i[h];return l+=Object.keys(d).length,this._mapLoadToResolve(d,c).then(f=>{s[h]=f})});return await Promise.all(u),n?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Nn.get(e);const t={};for(let n=0;n<e.length;n++)t[n]=Nn.get(e[n]);return t}async _mapLoadToResolve(e,t){const n=Object.values(e),i=Object.keys(e);this._backgroundLoader.active=!1;const s=await this.loader.load(n,t);this._backgroundLoader.active=!0;const o={};return n.forEach((a,l)=>{const c=s[a.src],u=[a.src];a.alias&&u.push(...a.alias),o[i[l]]=c,Nn.set(u,c)}),o}async unload(e){this._initialized||await this.init();const t=xr(e).map(i=>typeof i!="string"?i.src:i),n=this.resolver.resolve(t);await this._unloadFromResolved(n)}async unloadBundle(e){this._initialized||await this.init(),e=xr(e);const t=this.resolver.resolveBundle(e),n=Object.keys(t).map(i=>this._unloadFromResolved(t[i]));await Promise.all(n)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(n=>{Nn.remove(n.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const n of e.detections)e.skipDetections||await n.test()?t=await n.add(t):e.skipDetections||(t=await n.remove(t));return t=t.filter((n,i)=>t.indexOf(n)===i),t}get detections(){return this._detections}get preferWorkers(){return la.config.preferWorkers}set preferWorkers(e){Ge("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(n=>n in e).forEach(n=>{t.config[n]=e[n]})})}}const Fs=new jC;fe.handleByList(ce.LoadParser,Fs.loader.parsers).handleByList(ce.ResolveParser,Fs.resolver.parsers).handleByList(ce.CacheParser,Fs.cache.parsers).handleByList(ce.DetectionParser,Fs.detections);const $C={extension:ce.CacheParser,test:r=>Array.isArray(r)&&r.every(e=>e instanceof ge),getCacheableAssets:(r,e)=>{const t={};return r.forEach(n=>{e.forEach((i,s)=>{t[n+(s===0?"":s+1)]=i})}),t}};fe.add($C);async function ig(r){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(r)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const YC={extension:{type:ce.DetectionParser,priority:1},test:async()=>ig("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async r=>[...r,"avif"],remove:async r=>r.filter(e=>e!=="avif")};fe.add(YC);const ZC={extension:{type:ce.DetectionParser,priority:0},test:async()=>ig("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async r=>[...r,"webp"],remove:async r=>r.filter(e=>e!=="webp")};fe.add(ZC);const od=["png","jpg","jpeg"],qC={extension:{type:ce.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async r=>[...r,...od],remove:async r=>r.filter(e=>!od.includes(e))};fe.add(qC);const JC="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function su(r){return JC?!1:document.createElement("video").canPlayType(r)!==""}const QC={extension:{type:ce.DetectionParser,priority:0},test:async()=>su("video/webm"),add:async r=>[...r,"webm"],remove:async r=>r.filter(e=>e!=="webm")};fe.add(QC);const KC={extension:{type:ce.DetectionParser,priority:0},test:async()=>su("video/mp4"),add:async r=>[...r,"mp4","m4v"],remove:async r=>r.filter(e=>e!=="mp4"&&e!=="m4v")};fe.add(KC);const e_={extension:{type:ce.DetectionParser,priority:0},test:async()=>su("video/ogg"),add:async r=>[...r,"ogv"],remove:async r=>r.filter(e=>e!=="ogv")};fe.add(e_);const t_={extension:ce.ResolveParser,test:la.test,parse:r=>{var e;return{resolution:parseFloat(((e=ue.RETINA_PREFIX.exec(r))==null?void 0:e[1])??"1"),format:xt.extname(r).slice(1),src:r}}};fe.add(t_);var $t=(r=>(r[r.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",r[r.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",r[r.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",r[r.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",r[r.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",r[r.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",r[r.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",r[r.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",r[r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",r[r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",r[r.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",r[r.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",r))($t||{});const No={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1};let zr,li;function ad(){li={s3tc:zr.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:zr.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:zr.getExtension("WEBGL_compressed_texture_etc"),etc1:zr.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:zr.getExtension("WEBGL_compressed_texture_pvrtc")||zr.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:zr.getExtension("WEBGL_compressed_texture_atc"),astc:zr.getExtension("WEBGL_compressed_texture_astc")}}const r_={extension:{type:ce.DetectionParser,priority:2},test:async()=>{const r=ue.ADAPTER.createCanvas().getContext("webgl");return r?(zr=r,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async r=>{li||ad();const e=[];for(const t in li)li[t]&&e.push(t);return[...e,...r]},remove:async r=>(li||ad(),r.filter(e=>!(e in li)))};fe.add(r_);class n_ extends na{constructor(e,t={width:1,height:1,autoLoad:!0}){let n,i;typeof e=="string"?(n=e,i=new Uint8Array):(n=null,i=e),super(i,t),this.origin=n,this.buffer=i?new ql(i):null,this._load=null,this.loaded=!1,this.origin!==null&&t.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new ql(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class kn extends n_{constructor(e,t){super(e,t),this.format=t.format,this.levels=t.levels||1,this._width=t.width,this._height=t.height,this._extension=kn._formatToExtension(this.format),(t.levelBuffers||this.buffer)&&(this._levelBuffers=t.levelBuffers||kn._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,t,n){const i=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;i.pixelStorei(i.UNPACK_ALIGNMENT,4);for(let s=0,o=this.levels;s<o;s++){const{levelID:a,levelWidth:l,levelHeight:c,levelBuffer:u}=this._levelBuffers[s];i.compressedTexImage2D(i.TEXTURE_2D,a,this.format,l,c,0,u)}return!0}onBlobLoaded(){this._levelBuffers=kn._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(e,t,n,i,s,o,a){const l=new Array(n);let c=e.byteOffset,u=o,h=a,d=u+i-1&~(i-1),f=h+s-1&~(s-1),g=d*f*No[t];for(let m=0;m<n;m++)l[m]={levelID:m,levelWidth:n>1?u:d,levelHeight:n>1?h:f,levelBuffer:new Uint8Array(e.buffer,c,g)},c+=g,u=u>>1||1,h=h>>1||1,d=u+i-1&~(i-1),f=h+s-1&~(s-1),g=d*f*No[t];return l}}const hl=4,ks=124,i_=32,ld=20,s_=542327876,Gs={HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},o_={FOURCC:2},Hs={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3},a_=1,l_=2,c_=4,u_=64,h_=512,d_=131072,f_=827611204,p_=861165636,g_=894720068,m_=808540228,v_=4,y_={[f_]:$t.COMPRESSED_RGBA_S3TC_DXT1_EXT,[p_]:$t.COMPRESSED_RGBA_S3TC_DXT3_EXT,[g_]:$t.COMPRESSED_RGBA_S3TC_DXT5_EXT},b_={70:$t.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:$t.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:$t.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:$t.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:$t.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:$t.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:$t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:$t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:$t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function x_(r){const e=new Uint32Array(r);if(e[0]!==s_)throw new Error("Invalid DDS file magic word");const t=new Uint32Array(r,0,ks/Uint32Array.BYTES_PER_ELEMENT),n=t[Gs.HEIGHT],i=t[Gs.WIDTH],s=t[Gs.MIPMAP_COUNT],o=new Uint32Array(r,Gs.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,i_/Uint32Array.BYTES_PER_ELEMENT),a=o[a_];if(a&c_){const l=o[o_.FOURCC];if(l!==m_){const x=y_[l],b=hl+ks,_=new Uint8Array(r,b);return[new kn(_,{format:x,width:i,height:n,levels:s})]}const c=hl+ks,u=new Uint32Array(e.buffer,c,ld/Uint32Array.BYTES_PER_ELEMENT),h=u[Hs.DXGI_FORMAT],d=u[Hs.RESOURCE_DIMENSION],f=u[Hs.MISC_FLAG],g=u[Hs.ARRAY_SIZE],m=b_[h];if(m===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${h}`);if(f===v_)throw new Error("DDSParser does not support cubemap textures");if(d===6)throw new Error("DDSParser does not supported 3D texture data");const p=new Array,v=hl+ks+ld;if(g===1)p.push(new Uint8Array(r,v));else{const x=No[m];let b=0,_=i,y=n;for(let A=0;A<s;A++){const P=Math.max(1,_+3&-4),L=Math.max(1,y+3&-4),V=P*L*x;b+=V,_=_>>>1,y=y>>>1}let I=v;for(let A=0;A<g;A++)p.push(new Uint8Array(r,I,b)),I+=b}return p.map(x=>new kn(x,{format:m,width:i,height:n,levels:s}))}throw a&u_?new Error("DDSParser does not support uncompressed texture data."):a&h_?new Error("DDSParser does not supported YUV uncompressed texture data."):a&d_?new Error("DDSParser does not support single-channel (lumninance) texture data!"):a&l_?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const cd=[171,75,84,88,32,49,49,187,13,10,26,10],C_=67305985,mr={ENDIANNESS:12,GL_TYPE:16,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},xc=64,ud={[ve.UNSIGNED_BYTE]:1,[ve.UNSIGNED_SHORT]:2,[ve.INT]:4,[ve.UNSIGNED_INT]:4,[ve.FLOAT]:4,[ve.HALF_FLOAT]:8},__={[se.RGBA]:4,[se.RGB]:3,[se.RG]:2,[se.RED]:1,[se.LUMINANCE]:1,[se.LUMINANCE_ALPHA]:2,[se.ALPHA]:1},S_={[ve.UNSIGNED_SHORT_4_4_4_4]:2,[ve.UNSIGNED_SHORT_5_5_5_1]:2,[ve.UNSIGNED_SHORT_5_6_5]:2};function A_(r,e,t=!1){const n=new DataView(e);if(!w_(r,n))return null;const i=n.getUint32(mr.ENDIANNESS,!0)===C_,s=n.getUint32(mr.GL_TYPE,i),o=n.getUint32(mr.GL_FORMAT,i),a=n.getUint32(mr.GL_INTERNAL_FORMAT,i),l=n.getUint32(mr.PIXEL_WIDTH,i),c=n.getUint32(mr.PIXEL_HEIGHT,i)||1,u=n.getUint32(mr.PIXEL_DEPTH,i)||1,h=n.getUint32(mr.NUMBER_OF_ARRAY_ELEMENTS,i)||1,d=n.getUint32(mr.NUMBER_OF_FACES,i),f=n.getUint32(mr.NUMBER_OF_MIPMAP_LEVELS,i),g=n.getUint32(mr.BYTES_OF_KEY_VALUE_DATA,i);if(c===0||u!==1)throw new Error("Only 2D textures are supported");if(d!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(h!==1)throw new Error("WebGL does not support array textures");const m=4,p=4,v=l+3&-4,x=c+3&-4,b=new Array(h);let _=l*c;s===0&&(_=v*x);let y;if(s!==0?ud[s]?y=ud[s]*__[o]:y=S_[s]:y=No[a],y===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const I=t?I_(n,g,i):null;let A=_*y,P=l,L=c,V=v,U=x,N=xc+g;for(let M=0;M<f;M++){const k=n.getUint32(N,i);let O=N+4;for(let S=0;S<h;S++){let E=b[S];E||(E=b[S]=new Array(f)),E[M]={levelID:M,levelWidth:f>1||s!==0?P:V,levelHeight:f>1||s!==0?L:U,levelBuffer:new Uint8Array(e,O,A)},O+=A}N+=k+4,N=N%4!==0?N+4-N%4:N,P=P>>1||1,L=L>>1||1,V=P+m-1&-4,U=L+p-1&-4,A=V*U*y}return s!==0?{uncompressed:b.map(M=>{let k=M[0].levelBuffer,O=!1;return s===ve.FLOAT?k=new Float32Array(M[0].levelBuffer.buffer,M[0].levelBuffer.byteOffset,M[0].levelBuffer.byteLength/4):s===ve.UNSIGNED_INT?(O=!0,k=new Uint32Array(M[0].levelBuffer.buffer,M[0].levelBuffer.byteOffset,M[0].levelBuffer.byteLength/4)):s===ve.INT&&(O=!0,k=new Int32Array(M[0].levelBuffer.buffer,M[0].levelBuffer.byteOffset,M[0].levelBuffer.byteLength/4)),{resource:new na(k,{width:M[0].levelWidth,height:M[0].levelHeight}),type:s,format:O?E_(o):o}}),kvData:I}:{compressed:b.map(M=>new kn(null,{format:a,width:l,height:c,levels:f,levelBuffers:M})),kvData:I}}function w_(r,e){for(let t=0;t<cd.length;t++)if(e.getUint8(t)!==cd[t])return console.error(`${r} is not a valid *.ktx file!`),!1;return!0}function E_(r){switch(r){case se.RGBA:return se.RGBA_INTEGER;case se.RGB:return se.RGB_INTEGER;case se.RG:return se.RG_INTEGER;case se.RED:return se.RED_INTEGER;default:return r}}function I_(r,e,t){const n=new Map;let i=0;for(;i<e;){const s=r.getUint32(xc+i,t),o=xc+i+4,a=3-(s+3)%4;if(s===0||s>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&r.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const c=new TextDecoder().decode(new Uint8Array(r.buffer,o,l)),u=new DataView(r.buffer,o+l+1,s-l-1);n.set(c,u),i+=4+s+a}return n}const T_={extension:{type:ce.LoadParser,priority:Ar.High},name:"loadDDS",test(r){return Sn(r,".dds")},async load(r,e,t){const n=await(await ue.ADAPTER.fetch(r)).arrayBuffer(),i=x_(n).map(s=>{const o=new Me(s,{mipmap:kr.OFF,alphaMode:Wt.NO_PREMULTIPLIED_ALPHA,resolution:Qr(r),...e.data});return ps(o,t,r)});return i.length===1?i[0]:i},unload(r){Array.isArray(r)?r.forEach(e=>e.destroy(!0)):r.destroy(!0)}};fe.add(T_);const R_={extension:{type:ce.LoadParser,priority:Ar.High},name:"loadKTX",test(r){return Sn(r,".ktx")},async load(r,e,t){const n=await(await ue.ADAPTER.fetch(r)).arrayBuffer(),{compressed:i,uncompressed:s,kvData:o}=A_(r,n),a=i??s,l={mipmap:kr.OFF,alphaMode:Wt.NO_PREMULTIPLIED_ALPHA,resolution:Qr(r),...e.data},c=a.map(u=>{a===s&&Object.assign(l,{type:u.type,format:u.format});const h=u.resource??u,d=new Me(h,l);return d.ktxKeyValueData=o,ps(d,t,r)});return c.length===1?c[0]:c},unload(r){Array.isArray(r)?r.forEach(e=>e.destroy(!0)):r.destroy(!0)}};fe.add(R_);const P_={extension:ce.ResolveParser,test:r=>{const e=xt.extname(r).slice(1);return["basis","ktx","dds"].includes(e)},parse:r=>{var t,n;const e=xt.extname(r).slice(1);if(e==="ktx"){const i=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(i.some(s=>r.endsWith(s)))return{resolution:parseFloat(((t=ue.RETINA_PREFIX.exec(r))==null?void 0:t[1])??"1"),format:i.find(s=>r.endsWith(s)),src:r}}return{resolution:parseFloat(((n=ue.RETINA_PREFIX.exec(r))==null?void 0:n[1])??"1"),format:e,src:r}}};fe.add(P_);const Vs=new ke,B_=4,sg=class zi{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){var t;const e=(t=this.renderer)==null?void 0:t.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}async image(e,t,n,i){const s=new Image;return s.src=await this.base64(e,t,n,i),s}async base64(e,t,n,i){const s=this.canvas(e,i);if(s.toBlob!==void 0)return new Promise((o,a)=>{s.toBlob(l=>{if(!l){a(new Error("ICanvas.toBlob failed!"));return}const c=new FileReader;c.onload=()=>o(c.result),c.onerror=a,c.readAsDataURL(l)},t,n)});if(s.toDataURL!==void 0)return s.toDataURL(t,n);if(s.convertToBlob!==void 0){const o=await s.convertToBlob({type:t,quality:n});return new Promise((a,l)=>{const c=new FileReader;c.onload=()=>a(c.result),c.onerror=l,c.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,t){const{pixels:n,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,t);o&&zi._flipY(n,i,s),a&&zi._unpremultiplyAlpha(n);const l=new d1(i,s,1),c=new ImageData(new Uint8ClampedArray(n.buffer),i,s);return l.context.putImageData(c,0,0),l.canvas}pixels(e,t){const{pixels:n,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,t);return o&&zi._flipY(n,i,s),a&&zi._unpremultiplyAlpha(n),n}_rawPixels(e,t){const n=this.renderer;if(!n)throw new Error("The Extract has already been destroyed");let i,s=!1,o=!1,a,l=!1;e&&(e instanceof Jn?a=e:(a=n.generateTexture(e,{region:t,resolution:n.resolution,multisample:n.multisample}),l=!0,t&&(Vs.width=t.width,Vs.height=t.height,t=Vs)));const c=n.gl;if(a){if(i=a.baseTexture.resolution,t=t??a.frame,s=!1,o=a.baseTexture.alphaMode>0&&a.baseTexture.format===se.RGBA,!l){n.renderTexture.bind(a);const f=a.framebuffer.glFramebuffers[n.CONTEXT_UID];f.blitFramebuffer&&n.framebuffer.bind(f.blitFramebuffer)}}else i=n.resolution,t||(t=Vs,t.width=n.width/i,t.height=n.height/i),s=!0,o=this._rendererPremultipliedAlpha,n.renderTexture.bind();const u=Math.max(Math.round(t.width*i),1),h=Math.max(Math.round(t.height*i),1),d=new Uint8Array(B_*u*h);return c.readPixels(Math.round(t.x*i),Math.round(t.y*i),u,h,c.RGBA,c.UNSIGNED_BYTE,d),l&&(a==null||a.destroy(!0)),{pixels:d,width:u,height:h,flipY:s,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(e,t,n){const i=t<<2,s=n>>1,o=new Uint8Array(i);for(let a=0;a<s;a++){const l=a*i,c=(n-a-1)*i;o.set(e.subarray(l,l+i)),e.copyWithin(l,c,c+i),e.set(o,c)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const t=e.length;for(let n=0;n<t;n+=4){const i=e[n+3];if(i!==0){const s=255.001/i;e[n]=e[n]*s+.5,e[n+1]=e[n+1]*s+.5,e[n+2]=e[n+2]*s+.5}}}};sg.extension={name:"extract",type:ce.RendererSystem};let M_=sg;fe.add(M_);const Do={build(r){const e=r.points;let t,n,i,s,o,a;if(r.type===Tt.CIRC){const g=r.shape;t=g.x,n=g.y,o=a=g.radius,i=s=0}else if(r.type===Tt.ELIP){const g=r.shape;t=g.x,n=g.y,o=g.width,a=g.height,i=s=0}else{const g=r.shape,m=g.width/2,p=g.height/2;t=g.x+m,n=g.y+p,o=a=Math.max(0,Math.min(g.radius,Math.min(m,p))),i=m-o,s=p-a}if(!(o>=0&&a>=0&&i>=0&&s>=0)){e.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),c=l*8+(i?4:0)+(s?4:0);if(e.length=c,c===0)return;if(l===0){e.length=8,e[0]=e[6]=t+i,e[1]=e[3]=n+s,e[2]=e[4]=t-i,e[5]=e[7]=n-s;return}let u=0,h=l*4+(i?2:0)+2,d=h,f=c;{const g=i+o,m=s,p=t+g,v=t-g,x=n+m;if(e[u++]=p,e[u++]=x,e[--h]=x,e[--h]=v,s){const b=n-m;e[d++]=v,e[d++]=b,e[--f]=b,e[--f]=p}}for(let g=1;g<l;g++){const m=Math.PI/2*(g/l),p=i+Math.cos(m)*o,v=s+Math.sin(m)*a,x=t+p,b=t-p,_=n+v,y=n-v;e[u++]=x,e[u++]=_,e[--h]=_,e[--h]=b,e[d++]=b,e[d++]=y,e[--f]=y,e[--f]=x}{const g=i,m=s+a,p=t+g,v=t-g,x=n+m,b=n-m;e[u++]=p,e[u++]=x,e[--f]=b,e[--f]=p,i&&(e[u++]=v,e[u++]=x,e[--f]=b,e[--f]=v)}},triangulate(r,e){const t=r.points,n=e.points,i=e.indices;if(t.length===0)return;let s=n.length/2;const o=s;let a,l;if(r.type!==Tt.RREC){const u=r.shape;a=u.x,l=u.y}else{const u=r.shape;a=u.x+u.width/2,l=u.y+u.height/2}const c=r.matrix;n.push(r.matrix?c.a*a+c.c*l+c.tx:a,r.matrix?c.b*a+c.d*l+c.ty:l),s++,n.push(t[0],t[1]);for(let u=2;u<t.length;u+=2)n.push(t[u],t[u+1]),i.push(s++,o,s);i.push(o+1,o,s)}};function hd(r,e=!1){const t=r.length;if(t<6)return;let n=0;for(let i=0,s=r[t-2],o=r[t-1];i<t;i+=2){const a=r[i],l=r[i+1];n+=(a-s)*(l+o),s=a,o=l}if(!e&&n>0||e&&n<=0){const i=t/2;for(let s=i+i%2;s<t;s+=2){const o=t-s-2,a=t-s-1,l=s,c=s+1;[r[o],r[l]]=[r[l],r[o]],[r[a],r[c]]=[r[c],r[a]]}}}const og={build(r){r.points=r.shape.points.slice()},triangulate(r,e){let t=r.points;const n=r.holes,i=e.points,s=e.indices;if(t.length>=6){hd(t,!1);const o=[];for(let c=0;c<n.length;c++){const u=n[c];hd(u.points,!0),o.push(t.length/2),t=t.concat(u.points)}const a=Eb(t,o,2);if(!a)return;const l=i.length/2;for(let c=0;c<a.length;c+=3)s.push(a[c]+l),s.push(a[c+1]+l),s.push(a[c+2]+l);for(let c=0;c<t.length;c++)i.push(t[c])}}},O_={build(r){const e=r.shape,t=e.x,n=e.y,i=e.width,s=e.height,o=r.points;o.length=0,i>=0&&s>=0&&o.push(t,n,t+i,n,t+i,n+s,t,n+s)},triangulate(r,e){const t=r.points,n=e.points;if(t.length===0)return;const i=n.length/2;n.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},N_={build(r){Do.build(r)},triangulate(r,e){Do.triangulate(r,e)}};var or=(r=>(r.MITER="miter",r.BEVEL="bevel",r.ROUND="round",r))(or||{}),dn=(r=>(r.BUTT="butt",r.ROUND="round",r.SQUARE="square",r))(dn||{});const _i={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(r,e=20){if(!this.adaptive||!r||isNaN(r))return e;let t=Math.ceil(r/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}};class dd{static curveTo(e,t,n,i,s,o){const a=o[o.length-2],l=o[o.length-1]-t,c=a-e,u=i-t,h=n-e,d=Math.abs(l*h-c*u);if(d<1e-8||s===0)return(o[o.length-2]!==e||o[o.length-1]!==t)&&o.push(e,t),null;const f=l*l+c*c,g=u*u+h*h,m=l*u+c*h,p=s*Math.sqrt(f)/d,v=s*Math.sqrt(g)/d,x=p*m/f,b=v*m/g,_=p*h+v*c,y=p*u+v*l,I=c*(v+x),A=l*(v+x),P=h*(p+b),L=u*(p+b),V=Math.atan2(A-y,I-_),U=Math.atan2(L-y,P-_);return{cx:_+e,cy:y+t,radius:s,startAngle:V,endAngle:U,anticlockwise:c*u>h*l}}static arc(e,t,n,i,s,o,a,l,c){const u=a-o,h=_i._segmentsCount(Math.abs(u)*s,Math.ceil(Math.abs(u)/Eo)*40),d=u/(h*2),f=d*2,g=Math.cos(d),m=Math.sin(d),p=h-1,v=p%1/p;for(let x=0;x<=p;++x){const b=x+v*x,_=d+o+f*b,y=Math.cos(_),I=-Math.sin(_);c.push((g*y+m*I)*s+n,(g*-I+m*y)*s+i)}}}class D_{constructor(){this.reset()}begin(e,t,n){this.reset(),this.style=e,this.start=t,this.attribStart=n}end(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class ou{static curveLength(e,t,n,i,s,o,a,l){let c=0,u=0,h=0,d=0,f=0,g=0,m=0,p=0,v=0,x=0,b=0,_=e,y=t;for(let I=1;I<=10;++I)u=I/10,h=u*u,d=h*u,f=1-u,g=f*f,m=g*f,p=m*e+3*g*u*n+3*f*h*s+d*a,v=m*t+3*g*u*i+3*f*h*o+d*l,x=_-p,b=y-v,_=p,y=v,c+=Math.sqrt(x*x+b*b);return c}static curveTo(e,t,n,i,s,o,a){const l=a[a.length-2],c=a[a.length-1];a.length-=2;const u=_i._segmentsCount(ou.curveLength(l,c,e,t,n,i,s,o));let h=0,d=0,f=0,g=0,m=0;a.push(l,c);for(let p=1,v=0;p<=u;++p)v=p/u,h=1-v,d=h*h,f=d*h,g=v*v,m=g*v,a.push(f*l+3*d*v*e+3*h*g*n+m*s,f*c+3*d*v*t+3*h*g*i+m*o)}}function fd(r,e,t,n,i,s,o,a){const l=r-t*i,c=e-n*i,u=r+t*s,h=e+n*s;let d,f;o?(d=n,f=-t):(d=-n,f=t);const g=l+d,m=c+f,p=u+d,v=h+f;return a.push(g,m,p,v),2}function En(r,e,t,n,i,s,o,a){const l=t-r,c=n-e;let u=Math.atan2(l,c),h=Math.atan2(i-r,s-e);a&&u<h?u+=Math.PI*2:!a&&u>h&&(h+=Math.PI*2);let d=u;const f=h-u,g=Math.abs(f),m=Math.sqrt(l*l+c*c),p=(15*g*Math.sqrt(m)/Math.PI>>0)+1,v=f/p;if(d+=v,a){o.push(r,e,t,n);for(let x=1,b=d;x<p;x++,b+=v)o.push(r,e,r+Math.sin(b)*m,e+Math.cos(b)*m);o.push(r,e,i,s)}else{o.push(t,n,r,e);for(let x=1,b=d;x<p;x++,b+=v)o.push(r+Math.sin(b)*m,e+Math.cos(b)*m,r,e);o.push(i,s,r,e)}return p*2}function L_(r,e){const t=r.shape;let n=r.points||t.points.slice();const i=e.closePointEps;if(n.length===0)return;const s=r.lineStyle,o=new ze(n[0],n[1]),a=new ze(n[n.length-2],n[n.length-1]),l=t.type!==Tt.POLY||t.closeStroke,c=Math.abs(o.x-a.x)<i&&Math.abs(o.y-a.y)<i;if(l){n=n.slice(),c&&(n.pop(),n.pop(),a.set(n[n.length-2],n[n.length-1]));const E=(o.x+a.x)*.5,C=(a.y+o.y)*.5;n.unshift(E,C),n.push(E,C)}const u=e.points,h=n.length/2;let d=n.length;const f=u.length/2,g=s.width/2,m=g*g,p=s.miterLimit*s.miterLimit;let v=n[0],x=n[1],b=n[2],_=n[3],y=0,I=0,A=-(x-_),P=v-b,L=0,V=0,U=Math.sqrt(A*A+P*P);A/=U,P/=U,A*=g,P*=g;const N=s.alignment,M=(1-N)*2,k=N*2;l||(s.cap===dn.ROUND?d+=En(v-A*(M-k)*.5,x-P*(M-k)*.5,v-A*M,x-P*M,v+A*k,x+P*k,u,!0)+2:s.cap===dn.SQUARE&&(d+=fd(v,x,A,P,M,k,!0,u))),u.push(v-A*M,x-P*M,v+A*k,x+P*k);for(let E=1;E<h-1;++E){v=n[(E-1)*2],x=n[(E-1)*2+1],b=n[E*2],_=n[E*2+1],y=n[(E+1)*2],I=n[(E+1)*2+1],A=-(x-_),P=v-b,U=Math.sqrt(A*A+P*P),A/=U,P/=U,A*=g,P*=g,L=-(_-I),V=b-y,U=Math.sqrt(L*L+V*V),L/=U,V/=U,L*=g,V*=g;const C=b-v,B=x-_,T=b-y,R=I-_,D=C*T+B*R,G=B*T-R*C,W=G<0;if(Math.abs(G)<.001*Math.abs(D)){u.push(b-A*M,_-P*M,b+A*k,_+P*k),D>=0&&(s.join===or.ROUND?d+=En(b,_,b-A*M,_-P*M,b-L*M,_-V*M,u,!1)+4:d+=2,u.push(b-L*k,_-V*k,b+L*M,_+V*M));continue}const j=(-A+v)*(-P+_)-(-A+b)*(-P+x),Y=(-L+y)*(-V+_)-(-L+b)*(-V+I),$=(C*Y-T*j)/G,q=(R*j-B*Y)/G,oe=($-b)*($-b)+(q-_)*(q-_),te=b+($-b)*M,de=_+(q-_)*M,Q=b-($-b)*k,ie=_-(q-_)*k,K=Math.min(C*C+B*B,T*T+R*R),re=W?M:k,le=K+re*re*m,Z=oe<=le;let ne=s.join;if(ne===or.MITER&&oe/m>p&&(ne=or.BEVEL),Z)switch(ne){case or.MITER:{u.push(te,de,Q,ie);break}case or.BEVEL:{W?u.push(te,de,b+A*k,_+P*k,te,de,b+L*k,_+V*k):u.push(b-A*M,_-P*M,Q,ie,b-L*M,_-V*M,Q,ie),d+=2;break}case or.ROUND:{W?(u.push(te,de,b+A*k,_+P*k),d+=En(b,_,b+A*k,_+P*k,b+L*k,_+V*k,u,!0)+4,u.push(te,de,b+L*k,_+V*k)):(u.push(b-A*M,_-P*M,Q,ie),d+=En(b,_,b-A*M,_-P*M,b-L*M,_-V*M,u,!1)+4,u.push(b-L*M,_-V*M,Q,ie));break}}else{switch(u.push(b-A*M,_-P*M,b+A*k,_+P*k),ne){case or.MITER:{W?u.push(Q,ie,Q,ie):u.push(te,de,te,de),d+=2;break}case or.ROUND:{W?d+=En(b,_,b+A*k,_+P*k,b+L*k,_+V*k,u,!0)+2:d+=En(b,_,b-A*M,_-P*M,b-L*M,_-V*M,u,!1)+2;break}}u.push(b-L*M,_-V*M,b+L*k,_+V*k),d+=2}}v=n[(h-2)*2],x=n[(h-2)*2+1],b=n[(h-1)*2],_=n[(h-1)*2+1],A=-(x-_),P=v-b,U=Math.sqrt(A*A+P*P),A/=U,P/=U,A*=g,P*=g,u.push(b-A*M,_-P*M,b+A*k,_+P*k),l||(s.cap===dn.ROUND?d+=En(b-A*(M-k)*.5,_-P*(M-k)*.5,b-A*M,_-P*M,b+A*k,_+P*k,u,!1)+2:s.cap===dn.SQUARE&&(d+=fd(b,_,A,P,M,k,!1,u)));const O=e.indices,S=_i.epsilon*_i.epsilon;for(let E=f;E<d+f-2;++E)v=u[E*2],x=u[E*2+1],b=u[(E+1)*2],_=u[(E+1)*2+1],y=u[(E+2)*2],I=u[(E+2)*2+1],!(Math.abs(v*(_-I)+b*(I-x)+y*(x-_))<S)&&O.push(E,E+1,E+2)}function F_(r,e){let t=0;const n=r.shape,i=r.points||n.points,s=n.type!==Tt.POLY||n.closeStroke;if(i.length===0)return;const o=e.points,a=e.indices,l=i.length/2,c=o.length/2;let u=c;for(o.push(i[0],i[1]),t=1;t<l;t++)o.push(i[t*2],i[t*2+1]),a.push(u,u+1),u++;s&&a.push(u,c)}function pd(r,e){r.lineStyle.native?F_(r,e):L_(r,e)}class au{static curveLength(e,t,n,i,s,o){const a=e-2*n+s,l=t-2*i+o,c=2*n-2*e,u=2*i-2*t,h=4*(a*a+l*l),d=4*(a*c+l*u),f=c*c+u*u,g=2*Math.sqrt(h+d+f),m=Math.sqrt(h),p=2*h*m,v=2*Math.sqrt(f),x=d/m;return(p*g+m*d*(g-v)+(4*f*h-d*d)*Math.log((2*m+x+g)/(x+v)))/(4*p)}static curveTo(e,t,n,i,s){const o=s[s.length-2],a=s[s.length-1],l=_i._segmentsCount(au.curveLength(o,a,e,t,n,i));let c=0,u=0;for(let h=1;h<=l;++h){const d=h/l;c=o+(e-o)*d,u=a+(t-a)*d,s.push(c+(e+(n-e)*d-c)*d,u+(t+(i-t)*d-u)*d)}}}const dl={[Tt.POLY]:og,[Tt.CIRC]:Do,[Tt.ELIP]:Do,[Tt.RECT]:O_,[Tt.RREC]:N_},gd=[],Us=[];class Lo{constructor(e,t=null,n=null,i=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=n,this.fillStyle=t,this.matrix=i,this.type=e.type}clone(){return new Lo(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const ri=new ze,ag=class lg extends fp{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Bo,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Us.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),gd.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,n=null,i=null){const s=new Lo(e,t,n,i);return this.graphicsData.push(s),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const n=new Lo(e,null,null,t),i=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=i.lineStyle,i.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let n=0;n<t.length;++n){const i=t[n];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(e,ri):ri.copyFrom(e),i.shape.contains(ri.x,ri.y))){let s=!1;if(i.holes){for(let o=0;o<i.holes.length;o++)if(i.holes[o].shape.contains(ri.x,ri.y)){s=!0;break}}if(!s)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let n=null,i=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],i=n.style);for(let l=this.shapeIndex;l<t.length;l++){this.shapeIndex++;const c=t[l],u=c.fillStyle,h=c.lineStyle;dl[c.type].build(c),c.matrix&&this.transformPoints(c.points,c.matrix),(u.visible||h.visible)&&this.processHoles(c.holes);for(let d=0;d<2;d++){const f=d===0?u:h;if(!f.visible)continue;const g=f.texture.baseTexture,m=this.indices.length,p=this.points.length/2;g.wrapMode=fn.REPEAT,d===0?this.processFill(c):this.processLine(c);const v=this.points.length/2-p;v!==0&&(n&&!this._compareStyles(i,f)&&(n.end(m,p),n=null),n||(n=gd.pop()||new D_,n.begin(f,m,p),this.batches.push(n),i=f),this.addUvs(this.points,e,f.texture,p,v,f.matrix))}}const s=this.indices.length,o=this.points.length/2;if(n&&n.end(s,o),this.batches.length===0){this.batchable=!0;return}const a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const n=this.graphicsData[e],i=n.fillStyle,s=n.lineStyle;if(i&&!i.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,n=e.length;t<n;t++){const i=e[t];for(let s=0;s<i.size;s++){const o=i.start+s;this.indicesUint16[o]=this.indicesUint16[o]-i.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<lg.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++Me._globalBatch;for(let h=0;h<this.drawCalls.length;h++)this.drawCalls[h].texArray.clear(),Us.push(this.drawCalls[h]);this.drawCalls.length=0;const t=this.colors,n=this.textureIds;let i=Us.pop();i||(i=new Kl,i.texArray=new nc),i.texArray.count=0,i.start=0,i.size=0,i.type=Or.TRIANGLES;let s=0,o=null,a=0,l=!1,c=Or.TRIANGLES,u=0;this.drawCalls.push(i);for(let h=0;h<this.batches.length;h++){const d=this.batches[h],f=8,g=d.style,m=g.texture.baseTexture;l!==!!g.native&&(l=!!g.native,c=l?Or.LINES:Or.TRIANGLES,o=null,s=f,e++),o!==m&&(o=m,m._batchEnabled!==e&&(s===f&&(e++,s=0,i.size>0&&(i=Us.pop(),i||(i=new Kl,i.texArray=new nc),this.drawCalls.push(i)),i.start=u,i.size=0,i.texArray.count=0,i.type=c),m.touched=1,m._batchEnabled=e,m._batchLocation=s,m.wrapMode=fn.REPEAT,i.texArray.elements[i.texArray.count++]=m,s++)),i.size+=d.size,u+=d.size,a=m._batchLocation,this.addColors(t,g.color,g.alpha,d.attribSize,d.attribStart),this.addTextureIds(n,a,d.attribSize,d.attribStart)}Me._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,n=this.colors,i=this.textureIds,s=new ArrayBuffer(e.length*3*4),o=new Float32Array(s),a=new Uint32Array(s);let l=0;for(let c=0;c<e.length/2;c++)o[l++]=e[c*2],o[l++]=e[c*2+1],o[l++]=t[c*2],o[l++]=t[c*2+1],a[l++]=n[c],o[l++]=i[c];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?og.triangulate(e,this):dl[e.type].triangulate(e,this)}processLine(e){pd(e,this);for(let t=0;t<e.holes.length;t++)pd(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const n=e[t];dl[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let n=0;n<e.length/2;n++){const i=e[n*2],s=e[n*2+1];e[n*2]=t.a*i+t.c*s+t.tx,e[n*2+1]=t.b*i+t.d*s+t.ty}}addColors(e,t,n,i,s=0){const o=rt.shared.setValue(t).toLittleEndianNumber(),a=rt.shared.setValue(o).toPremultiplied(n);e.length=Math.max(e.length,s+i);for(let l=0;l<i;l++)e[s+l]=a}addTextureIds(e,t,n,i=0){e.length=Math.max(e.length,i+n);for(let s=0;s<n;s++)e[i+s]=t}addUvs(e,t,n,i,s,o=null){let a=0;const l=t.length,c=n.frame;for(;a<s;){let h=e[(i+a)*2],d=e[(i+a)*2+1];if(o){const f=o.a*h+o.c*d+o.tx;d=o.b*h+o.d*d+o.ty,h=f}a++,t.push(h/c.width,d/c.height)}const u=n.baseTexture;(c.width<u.width||c.height<u.height)&&this.adjustUvs(t,n,l,s)}adjustUvs(e,t,n,i){const s=t.baseTexture,o=1e-6,a=n+i*2,l=t.frame,c=l.width/s.width,u=l.height/s.height;let h=l.x/l.width,d=l.y/l.height,f=Math.floor(e[n]+o),g=Math.floor(e[n+1]+o);for(let m=n+2;m<a;m+=2)f=Math.min(f,Math.floor(e[m]+o)),g=Math.min(g,Math.floor(e[m+1]+o));h-=f,d-=g;for(let m=n;m<a;m+=2)e[m]=(e[m]+h)*c,e[m+1]=(e[m+1]+d)*u}};ag.BATCHABLE_SIZE=100;let k_=ag;class ca{constructor(){this.color=16777215,this.alpha=1,this.texture=ge.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new ca;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=ge.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class lu extends ca{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=dn.BUTT,this.join=or.MITER,this.miterLimit=10}clone(){const e=new lu;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=dn.BUTT,this.join=or.MITER,this.miterLimit=10}}const fl={},Cc=class go extends Sr{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new ca,this._lineStyle=new lu,this._matrix=null,this._holeMode=!1,this.state=Vr.for2d(),this._geometry=e||new k_,this._geometry.refCount++,this._transformID=-1,this._tintColor=new rt(16777215),this.blendMode=we.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new go(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,n,i=.5,s=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:n,alignment:i,native:s}),this.lineTextureStyle(e)}lineTextureStyle(e){const t={width:0,texture:ge.WHITE,color:e!=null&&e.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:dn.BUTT,join:or.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const n=e.width>0&&e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:n},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new Fn,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new Fn,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const n=this.currentPath.points,i=n[n.length-2],s=n[n.length-1];return(i!==e||s!==t)&&n.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,n,i){this._initCurve();const s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),au.curveTo(e,t,n,i,s),this}bezierCurveTo(e,t,n,i,s,o){return this._initCurve(),ou.curveTo(e,t,n,i,s,o,this.currentPath.points),this}arcTo(e,t,n,i,s){this._initCurve(e,t);const o=this.currentPath.points,a=dd.curveTo(e,t,n,i,s,o);if(a){const{cx:l,cy:c,radius:u,startAngle:h,endAngle:d,anticlockwise:f}=a;this.arc(l,c,u,h,d,f)}return this}arc(e,t,n,i,s,o=!1){if(i===s)return this;if(!o&&s<=i?s+=Eo:o&&i<=s&&(i+=Eo),s-i===0)return this;const a=e+Math.cos(i)*n,l=t+Math.sin(i)*n,c=this._geometry.closePointEps;let u=this.currentPath?this.currentPath.points:null;if(u){const h=Math.abs(u[u.length-2]-a),d=Math.abs(u[u.length-1]-l);h<c&&d<c||u.push(a,l)}else this.moveTo(a,l),u=this.currentPath.points;return dd.arc(a,l,e,t,n,i,s,o,u),this}beginFill(e=0,t){return this.beginTextureFill({texture:ge.WHITE,color:e,alpha:t})}normalizeColor(e){const t=rt.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){const t={texture:ge.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const n=e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:n},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,n,i){return this.drawShape(new ke(e,t,n,i))}drawRoundedRect(e,t,n,i,s){return this.drawShape(new oa(e,t,n,i,s))}drawCircle(e,t,n){return this.drawShape(new ia(e,t,n))}drawEllipse(e,t,n,i){return this.drawShape(new sa(e,t,n,i))}drawPolygon(...e){let t,n=!0;const i=e[0];i.points?(n=i.closeStroke,t=i.points):Array.isArray(e[0])?t=e[0]:t=e;const s=new Fn(t);return s.closeStroke=n,this.drawShape(s),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Tt.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(let i=0;i<n;i++){const s=e.batches[i],o=s.style.color,a=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),l=new Float32Array(e.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),c=new Uint16Array(e.indicesUint16.buffer,s.start*2,s.size),u={vertexData:a,blendMode:t,indices:c,uvs:l,_batchRGB:rt.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[i]=u}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,n=this.batches.length;t<n;t++){const i=this.batches[t];i.worldAlpha=this.worldAlpha*i.alpha,e.plugins[this.pluginName].render(i)}}}_renderDirect(e){const t=this._resolveDirectShader(e),n=this._geometry,i=this.worldAlpha,s=t.uniforms,o=n.drawCalls;s.translationMatrix=this.transform.worldTransform,rt.shared.setValue(this._tintColor).premultiply(i).toArray(s.tint),e.shader.bind(t),e.geometry.bind(n,t),e.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(e,n.drawCalls[a])}_renderDrawCallDirect(e,t){const{texArray:n,type:i,size:s,start:o}=t,a=n.count;for(let l=0;l<a;l++)e.texture.bind(n.elements[l],l);e.geometry.draw(i,s,o)}_resolveDirectShader(e){let t=this.shader;const n=this.pluginName;if(!t){if(!fl[n]){const{maxTextures:i}=e.plugins[n],s=new Int32Array(i);for(let l=0;l<i;l++)s[l]=l;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new nt,default:_r.from({uSamplers:s},!0)},a=e.plugins[n]._shader.program;fl[n]=new Lr(a,o)}t=fl[n]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:n,maxX:i,maxY:s}=e.bounds;this._bounds.addFrame(this.transform,t,n,i,s)}containsPoint(e){return this.worldTransform.applyInverse(e,go._TEMP_POINT),this._geometry.containsPoint(go._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t._tintRGB=rt.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,n=t.a,i=t.b,s=t.c,o=t.d,a=t.tx,l=t.ty,c=this._geometry.points,u=this.vertexData;let h=0;for(let d=0;d<c.length;d+=2){const f=c[d],g=c[d+1];u[h++]=n*f+s*g+a,u[h++]=o*g+i*f+l}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};Cc.curves=_i,Cc._TEMP_POINT=new ze;let cg=Cc;class G_{constructor(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}}const pl=new ze,md=new Fn,ug=class hg extends Sr{constructor(e,t,n,i=Or.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=n||Vr.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=ue.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Or.TRIANGLES&&t.length<hg.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;const i=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[i]),e.plugins[i].render(this)}calculateVertices(){const e=this.geometry.buffers[0],t=e.data,n=e._updateID;if(n===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));const i=this.transform.worldTransform,s=i.a,o=i.b,a=i.c,l=i.d,c=i.tx,u=i.ty,h=this.vertexData;for(let d=0;d<h.length/2;d++){const f=t[d*2],g=t[d*2+1];h[d*2]=s*f+a*g+c,h[d*2+1]=o*f+l*g+u}if(this._roundPixels){const d=ue.RESOLUTION;for(let f=0;f<h.length;++f)h[f]=Math.round(h[f]*d)/d}this.vertexDirty=n}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new G_(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,pl);const t=this.geometry.getBuffer("aVertexPosition").data,n=md.points,i=this.geometry.getIndex().data,s=i.length,o=this.drawMode===4?3:1;for(let a=0;a+2<s;a+=o){const l=i[a]*2,c=i[a+1]*2,u=i[a+2]*2;if(n[0]=t[l],n[1]=t[l+1],n[2]=t[c],n[3]=t[c+1],n[4]=t[u],n[5]=t[u+1],md.contains(pl.x,pl.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};ug.BATCHABLE_SIZE=100;let vd=ug;class H_ extends mn{constructor(e,t,n){super();const i=new ht(e),s=new ht(t,!0),o=new ht(n,!0,!0);this.addAttribute("aVertexPosition",i,2,!1,ve.FLOAT).addAttribute("aTextureCoord",s,2,!1,ve.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var V_=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,U_=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class yd extends Lr{constructor(e,t){const n={uSampler:e,alpha:1,uTextureMatrix:nt.IDENTITY,uColor:new Float32Array([1,1,1,1])};t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t),t.uniforms&&Object.assign(n,t.uniforms),super(t.program||Zr.from(U_,V_),n),this._colorDirty=!1,this.uvMatrix=new Ip(e),this.batchable=t.program===void 0,this.pluginName=t.pluginName,this._tintColor=new rt(t.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=t.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;rt.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class bd{constructor(e,t,n){this.geometry=new mn,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(let i=0;i<e.length;++i){let s=e[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||ve.FLOAT,offset:s.offset},t[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let t=0;this.indexBuffer=new ht(u1(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=t,t+=a.size,this.dynamicStride+=a.size}const n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new ht(this.dynamicData,!1,!1);let i=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=i,i+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new ht(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===ve.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===ve.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(e,t,n){for(let i=0;i<this.dynamicProperties.length;i++){const s=this.dynamicProperties[i];s.uploadFunction(e,t,n,s.type===ve.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,t,n){for(let i=0;i<this.staticProperties.length;i++){const s=this.staticProperties[i];s.uploadFunction(e,t,n,s.type===ve.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var W_=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,z_=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class dg extends aa{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new nt,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ve.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Lr.from(z_,W_,{}),this.state=Vr.for2d()}render(e){const t=e.children,n=e._maxSize,i=e._batchSize,s=this.renderer;let o=t.length;if(o===0)return;o>n&&!e.autoResize&&(o=n);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const l=t[0]._texture.baseTexture,c=l.alphaMode>0;this.state.blendMode=up(e.blendMode,c),s.state.set(this.state);const u=s.gl,h=e.worldTransform.copyTo(this.tempMatrix);h.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=h.toArray(!0),this.shader.uniforms.uColor=rt.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,c).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let d=!1;for(let f=0,g=0;f<o;f+=i,g+=1){let m=o-f;m>i&&(m=i),g>=a.length&&a.push(this._generateOneMoreBuffer(e));const p=a[g];p.uploadDynamic(t,f,m);const v=e._bufferUpdateIDs[g]||0;d=d||p._updateID<v,d&&(p._updateID=e._updateID,p.uploadStatic(t,f,m)),s.geometry.bind(p.geometry),u.drawElements(u.TRIANGLES,m*6,u.UNSIGNED_SHORT,0)}}generateBuffers(e){const t=[],n=e._maxSize,i=e._batchSize,s=e._properties;for(let o=0;o<n;o+=i)t.push(new bd(this.properties,s,i));return t}_generateOneMoreBuffer(e){const t=e._batchSize,n=e._properties;return new bd(this.properties,n,t)}uploadVertices(e,t,n,i,s,o){let a=0,l=0,c=0,u=0;for(let h=0;h<n;++h){const d=e[t+h],f=d._texture,g=d.scale.x,m=d.scale.y,p=f.trim,v=f.orig;p?(l=p.x-d.anchor.x*v.width,a=l+p.width,u=p.y-d.anchor.y*v.height,c=u+p.height):(a=v.width*(1-d.anchor.x),l=v.width*-d.anchor.x,c=v.height*(1-d.anchor.y),u=v.height*-d.anchor.y),i[o]=l*g,i[o+1]=u*m,i[o+s]=a*g,i[o+s+1]=u*m,i[o+s*2]=a*g,i[o+s*2+1]=c*m,i[o+s*3]=l*g,i[o+s*3+1]=c*m,o+=s*4}}uploadPosition(e,t,n,i,s,o){for(let a=0;a<n;a++){const l=e[t+a].position;i[o]=l.x,i[o+1]=l.y,i[o+s]=l.x,i[o+s+1]=l.y,i[o+s*2]=l.x,i[o+s*2+1]=l.y,i[o+s*3]=l.x,i[o+s*3+1]=l.y,o+=s*4}}uploadRotation(e,t,n,i,s,o){for(let a=0;a<n;a++){const l=e[t+a].rotation;i[o]=l,i[o+s]=l,i[o+s*2]=l,i[o+s*3]=l,o+=s*4}}uploadUvs(e,t,n,i,s,o){for(let a=0;a<n;++a){const l=e[t+a]._texture._uvs;l?(i[o]=l.x0,i[o+1]=l.y0,i[o+s]=l.x1,i[o+s+1]=l.y1,i[o+s*2]=l.x2,i[o+s*2+1]=l.y2,i[o+s*3]=l.x3,i[o+s*3+1]=l.y3,o+=s*4):(i[o]=0,i[o+1]=0,i[o+s]=0,i[o+s+1]=0,i[o+s*2]=0,i[o+s*2+1]=0,i[o+s*3]=0,i[o+s*3+1]=0,o+=s*4)}}uploadTint(e,t,n,i,s,o){for(let a=0;a<n;++a){const l=e[t+a],c=rt.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);i[o]=c,i[o+s]=c,i[o+s*2]=c,i[o+s*3]=c,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}dg.extension={name:"particle",type:ce.RendererPlugin};fe.add(dg);var ua=(r=>(r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",r))(ua||{});const Ws={willReadFrequently:!0},Rr=class pe{static get experimentalLetterSpacingSupported(){let e=pe._experimentalLetterSpacingSupported;if(e!==void 0){const t=ue.ADAPTER.getCanvasRenderingContext2D().prototype;e=pe._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,n,i,s,o,a,l,c){this.text=e,this.style=t,this.width=n,this.height=i,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=c}static measureText(e,t,n,i=pe._canvas){n=n??t.wordWrap;const s=t.toFontString(),o=pe.measureFont(s);o.fontSize===0&&(o.fontSize=t.fontSize,o.ascent=t.fontSize);const a=i.getContext("2d",Ws);a.font=s;const l=(n?pe.wordWrap(e,t,i):e).split(/(?:\r\n|\r|\n)/),c=new Array(l.length);let u=0;for(let g=0;g<l.length;g++){const m=pe._measureText(l[g],t.letterSpacing,a);c[g]=m,u=Math.max(u,m)}let h=u+t.strokeThickness;t.dropShadow&&(h+=t.dropShadowDistance);const d=t.lineHeight||o.fontSize+t.strokeThickness;let f=Math.max(d,o.fontSize+t.strokeThickness*2)+t.leading+(l.length-1)*(d+t.leading);return t.dropShadow&&(f+=t.dropShadowDistance),new pe(e,t,h,f,l,c,d+t.leading,u,o)}static _measureText(e,t,n){let i=!1;pe.experimentalLetterSpacingSupported&&(pe.experimentalLetterSpacing?(n.letterSpacing=`${t}px`,n.textLetterSpacing=`${t}px`,i=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));let s=n.measureText(e).width;return s>0&&(i?s-=t:s+=(pe.graphemeSegmenter(e).length-1)*t),s}static wordWrap(e,t,n=pe._canvas){const i=n.getContext("2d",Ws);let s=0,o="",a="";const l=Object.create(null),{letterSpacing:c,whiteSpace:u}=t,h=pe.collapseSpaces(u),d=pe.collapseNewlines(u);let f=!h;const g=t.wordWrapWidth+c,m=pe.tokenize(e);for(let p=0;p<m.length;p++){let v=m[p];if(pe.isNewline(v)){if(!d){a+=pe.addLine(o),f=!h,o="",s=0;continue}v=" "}if(h){const b=pe.isBreakingSpace(v),_=pe.isBreakingSpace(o[o.length-1]);if(b&&_)continue}const x=pe.getFromCache(v,c,l,i);if(x>g)if(o!==""&&(a+=pe.addLine(o),o="",s=0),pe.canBreakWords(v,t.breakWords)){const b=pe.wordWrapSplit(v);for(let _=0;_<b.length;_++){let y=b[_],I=y,A=1;for(;b[_+A];){const L=b[_+A];if(!pe.canBreakChars(I,L,v,_,t.breakWords))y+=L;else break;I=L,A++}_+=A-1;const P=pe.getFromCache(y,c,l,i);P+s>g&&(a+=pe.addLine(o),f=!1,o="",s=0),o+=y,s+=P}}else{o.length>0&&(a+=pe.addLine(o),o="",s=0);const b=p===m.length-1;a+=pe.addLine(v,!b),f=!1,o="",s=0}else x+s>g&&(f=!1,a+=pe.addLine(o),o="",s=0),(o.length>0||!pe.isBreakingSpace(v)||f)&&(o+=v,s+=x)}return a+=pe.addLine(o,!1),a}static addLine(e,t=!0){return e=pe.trimRight(e),e=t?`${e}
`:e,e}static getFromCache(e,t,n,i){let s=n[e];return typeof s!="number"&&(s=pe._measureText(e,t,i)+t,n[e]=s),s}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const n=e[t];if(!pe.isBreakingSpace(n))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:pe._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:pe._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const t=[];let n="";if(typeof e!="string")return t;for(let i=0;i<e.length;i++){const s=e[i],o=e[i+1];if(pe.isBreakingSpace(s,o)||pe.isNewline(s)){n!==""&&(t.push(n),n=""),t.push(s);continue}n+=s}return n!==""&&t.push(n),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,n,i,s){return!0}static wordWrapSplit(e){return pe.graphemeSegmenter(e)}static measureFont(e){if(pe._fonts[e])return pe._fonts[e];const t={ascent:0,descent:0,fontSize:0},n=pe._canvas,i=pe._context;i.font=e;const s=pe.METRICS_STRING+pe.BASELINE_SYMBOL,o=Math.ceil(i.measureText(s).width);let a=Math.ceil(i.measureText(pe.BASELINE_SYMBOL).width);const l=Math.ceil(pe.HEIGHT_MULTIPLIER*a);if(a=a*pe.BASELINE_MULTIPLIER|0,o===0||l===0)return pe._fonts[e]=t,t;n.width=o,n.height=l,i.fillStyle="#f00",i.fillRect(0,0,o,l),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(s,0,a);const c=i.getImageData(0,0,o,l).data,u=c.length,h=o*4;let d=0,f=0,g=!1;for(d=0;d<a;++d){for(let m=0;m<h;m+=4)if(c[f+m]!==255){g=!0;break}if(!g)f+=h;else break}for(t.ascent=a-d,f=u-h,g=!1,d=l;d>a;--d){for(let m=0;m<h;m+=4)if(c[f+m]!==255){g=!0;break}if(!g)f-=h;else break}return t.descent=d-a,t.fontSize=t.ascent+t.descent,pe._fonts[e]=t,t}static clearMetrics(e=""){e?delete pe._fonts[e]:pe._fonts={}}static get _canvas(){var e;if(!pe.__canvas){let t;try{const n=new OffscreenCanvas(0,0);if((e=n.getContext("2d",Ws))!=null&&e.measureText)return pe.__canvas=n,n;t=ue.ADAPTER.createCanvas()}catch{t=ue.ADAPTER.createCanvas()}t.width=t.height=10,pe.__canvas=t}return pe.__canvas}static get _context(){return pe.__context||(pe.__context=pe._canvas.getContext("2d",Ws)),pe.__context}};Rr.METRICS_STRING="|ÉqÅ",Rr.BASELINE_SYMBOL="M",Rr.BASELINE_MULTIPLIER=1.4,Rr.HEIGHT_MULTIPLIER=2,Rr.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const r=new Intl.Segmenter;return e=>[...r.segment(e)].map(t=>t.segment)}return r=>[...r]})(),Rr.experimentalLetterSpacing=!1,Rr._fonts={},Rr._newlines=[10,13],Rr._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let cn=Rr;const X_=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],fg=class Xi{constructor(e){this.styleID=0,this.reset(),ml(this,e,e)}clone(){const e={};return ml(e,this,Xi.defaultStyle),new Xi(e)}reset(){ml(this,Xi.defaultStyle,Xi.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=gl(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=gl(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){j_(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=gl(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let n=t.length-1;n>=0;n--){let i=t[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&!X_.includes(i)&&(i=`"${i}"`),t[n]=i}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};fg.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:ua.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let yn=fg;function gl(r){const e=rt.shared,t=n=>{const i=e.setValue(n);return i.alpha===1?i.toHex():i.toRgbaString()};return Array.isArray(r)?r.map(t):t(r)}function j_(r,e){if(!Array.isArray(r)||!Array.isArray(e)||r.length!==e.length)return!1;for(let t=0;t<r.length;++t)if(r[t]!==e[t])return!1;return!0}function ml(r,e,t){for(const n in t)Array.isArray(e[n])?r[n]=e[n].slice():r[n]=e[n]}const $_={texture:!0,children:!1,baseTexture:!0},pg=class _c extends Qn{constructor(e,t,n){let i=!1;n||(n=ue.ADAPTER.createCanvas(),i=!0),n.width=3,n.height=3;const s=ge.from(n);s.orig=new ke,s.trim=new ke,super(s),this._ownCanvas=i,this.canvas=n,this.context=n.getContext("2d",{willReadFrequently:!0}),this._resolution=_c.defaultResolution??ue.RESOLUTION,this._autoResolution=_c.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return cn.experimentalLetterSpacing}static set experimentalLetterSpacing(e){Ge("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),cn.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const n=this.context,i=cn.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=i.width,o=i.height,a=i.lines,l=i.lineHeight,c=i.lineWidths,u=i.maxLineWidth,h=i.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+t.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=t.strokeThickness,n.textBaseline=t.textBaseline,n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit;let d,f;const g=t.dropShadow?2:1;for(let m=0;m<g;++m){const p=t.dropShadow&&m===0,v=p?Math.ceil(Math.max(1,o)+t.padding*2):0,x=v*this._resolution;if(p){n.fillStyle="black",n.strokeStyle="black";const _=t.dropShadowColor,y=t.dropShadowBlur*this._resolution,I=t.dropShadowDistance*this._resolution;n.shadowColor=rt.shared.setValue(_).setAlpha(t.dropShadowAlpha).toRgbaString(),n.shadowBlur=y,n.shadowOffsetX=Math.cos(t.dropShadowAngle)*I,n.shadowOffsetY=Math.sin(t.dropShadowAngle)*I+x}else n.fillStyle=this._generateFillStyle(t,a,i),n.strokeStyle=t.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;let b=(l-h.fontSize)/2;l-h.fontSize<0&&(b=0);for(let _=0;_<a.length;_++)d=t.strokeThickness/2,f=t.strokeThickness/2+_*l+h.ascent+b,t.align==="right"?d+=u-c[_]:t.align==="center"&&(d+=(u-c[_])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(a[_],d+t.padding,f+t.padding-v,!0),t.fill&&this.drawLetterSpacing(a[_],d+t.padding,f+t.padding-v)}this.updateTexture()}drawLetterSpacing(e,t,n,i=!1){const s=this._style.letterSpacing;let o=!1;if(cn.experimentalLetterSpacingSupported&&(cn.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){i?this.context.strokeText(e,t,n):this.context.fillText(e,t,n);return}let a=t;const l=cn.graphemeSegmenter(e);let c=this.context.measureText(e).width,u=0;for(let h=0;h<l.length;++h){const d=l[h];i?this.context.strokeText(d,a,n):this.context.fillText(d,a,n);let f="";for(let g=h+1;g<l.length;++g)f+=l[g];u=this.context.measureText(f).width,a+=c-u+s,c=u}}updateTexture(){const e=this.canvas;if(this._style.trim){const o=p1(e);o.data&&(e.width=o.width,e.height=o.height,this.context.putImageData(o.data,0,0))}const t=this._texture,n=this._style,i=n.trim?0:n.padding,s=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-i,t.trim.y=-i,t.orig.width=t._frame.width-i*2,t.orig.height=t._frame.height-i*2,this._onTextureUpdate(),s.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,n){const i=e.fill;if(Array.isArray(i)){if(i.length===1)return i[0]}else return i;let s;const o=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,l=this.canvas.width/this._resolution-o-a*2,c=this.canvas.height/this._resolution-o-a*2,u=i.slice(),h=e.fillGradientStops.slice();if(!h.length){const d=u.length+1;for(let f=1;f<d;++f)h.push(f/d)}if(u.unshift(i[0]),h.unshift(0),u.push(i[i.length-1]),h.push(1),e.fillGradientType===ua.LINEAR_VERTICAL){s=this.context.createLinearGradient(l/2,a,l/2,c+a);const d=n.fontProperties.fontSize+e.strokeThickness;for(let f=0;f<t.length;f++){const g=n.lineHeight*(f-1)+d,m=n.lineHeight*f;let p=m;f>0&&g>m&&(p=(m+g)/2);const v=m+d,x=n.lineHeight*(f+1);let b=v;f+1<t.length&&x<v&&(b=(v+x)/2);const _=(b-p)/c;for(let y=0;y<u.length;y++){let I=0;typeof h[y]=="number"?I=h[y]:I=y/u.length;let A=Math.min(1,Math.max(0,p/c+I*_));A=Number(A.toFixed(5)),s.addColorStop(A,u[y])}}}else{s=this.context.createLinearGradient(a,c/2,l+a,c/2);const d=u.length+1;let f=1;for(let g=0;g<u.length;g++){let m;typeof h[g]=="number"?m=h[g]:m=f/d,s.addColorStop(m,u[g]),f++}}return s}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},$_,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=hn(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=hn(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof yn?this._style=e:this._style=new yn(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};pg.defaultAutoResolution=!0;let gg=pg;class Y_{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function Z_(r,e){var n;let t=!1;if((n=r==null?void 0:r._textures)!=null&&n.length){for(let i=0;i<r._textures.length;i++)if(r._textures[i]instanceof ge){const s=r._textures[i].baseTexture;e.includes(s)||(e.push(s),t=!0)}}return t}function q_(r,e){if(r.baseTexture instanceof Me){const t=r.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function J_(r,e){if(r._texture&&r._texture instanceof ge){const t=r._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function Q_(r,e){return e instanceof gg?(e.updateText(!0),!0):!1}function K_(r,e){if(e instanceof yn){const t=e.toFontString();return cn.measureFont(t),!0}return!1}function eS(r,e){if(r instanceof gg){e.includes(r.style)||e.push(r.style),e.includes(r)||e.push(r);const t=r._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function tS(r,e){return r instanceof yn?(e.includes(r)||e.push(r),!0):!1}const mg=class vg{constructor(e){this.limiter=new Y_(vg.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(eS),this.registerFindHook(tS),this.registerFindHook(Z_),this.registerFindHook(q_),this.registerFindHook(J_),this.registerUploadHook(Q_),this.registerUploadHook(K_)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,Zt.system.addOnce(this.tick,this,zn.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed){for(let n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)Zt.system.addOnce(this.tick,this,zn.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,n=e.length;t<n;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,n=this.addHooks.length;t<n&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Sr)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&Zt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};mg.uploadsPerFrame=4;let Sc=mg;Object.defineProperties(ue,{UPLOADS_PER_FRAME:{get(){return Sc.uploadsPerFrame},set(r){Ge("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Sc.uploadsPerFrame=r}}});function yg(r,e){return e instanceof Me?(e._glTextures[r.CONTEXT_UID]||r.texture.bind(e),!0):!1}function rS(r,e){if(!(e instanceof cg))return!1;const{geometry:t}=e;e.finishPoly(),t.updateBatches();const{batches:n}=t;for(let i=0;i<n.length;i++){const{texture:s}=n[i].style;s&&yg(r,s.baseTexture)}return t.batchable||r.geometry.bind(t,e._resolveDirectShader(r)),!0}function nS(r,e){return r instanceof cg?(e.push(r),!0):!1}class bg extends Sc{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(nS),this.registerUploadHook(yg),this.registerUploadHook(rS)}}bg.extension={name:"prepare",type:ce.RendererSystem};fe.add(bg);var iS=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,sS=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,oS=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,xd=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,aS=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const zs=new nt;class xg extends aa{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new Sp,this.state=Vr.for2d()}contextChange(){const e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=Lr.from(xd,aS,t),this.shader=e.context.webGLVersion>1?Lr.from(sS,iS,t):Lr.from(xd,oS,t)}render(e){const t=this.renderer,n=this.quad;let i=n.vertices;i[0]=i[6]=e._width*-e.anchor.x,i[1]=i[3]=e._height*-e.anchor.y,i[2]=i[4]=e._width*(1-e.anchor.x),i[5]=i[7]=e._height*(1-e.anchor.y);const s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;i=n.uvs,i[0]=i[6]=-s,i[1]=i[3]=-o,i[2]=i[4]=1-s,i[5]=i[7]=1-o,n.invalidate();const a=e._texture,l=a.baseTexture,c=l.alphaMode>0,u=e.tileTransform.localTransform,h=e.uvMatrix;let d=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;d&&(l._glTextures[t.CONTEXT_UID]?d=l.wrapMode!==fn.CLAMP:l.wrapMode===fn.CLAMP&&(l.wrapMode=fn.REPEAT));const f=d?this.simpleShader:this.shader,g=a.width,m=a.height,p=e._width,v=e._height;zs.set(u.a*g/p,u.b*g/v,u.c*m/p,u.d*m/v,u.tx/p,u.ty/v),zs.invert(),d?zs.prepend(h.mapCoord):(f.uniforms.uMapCoord=h.mapCoord.toArray(!0),f.uniforms.uClampFrame=h.uClampFrame,f.uniforms.uClampOffset=h.uClampOffset),f.uniforms.uTransform=zs.toArray(!0),f.uniforms.uColor=rt.shared.setValue(e.tint).premultiply(e.worldAlpha,c).toArray(f.uniforms.uColor),f.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,t.shader.bind(f),t.geometry.bind(n),this.state.blendMode=up(e.blendMode,c),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}xg.extension={name:"tilingSprite",type:ce.RendererPlugin};fe.add(xg);const Cg=class ji{constructor(e,t,n=null){this.linkedSheets=[],this._texture=e instanceof ge?e:null,this.baseTexture=e instanceof Me?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;const i=this.baseTexture.resource;this.resolution=this._updateResolution(n||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let n=Qr(e,null);return n===null&&(n=typeof t=="number"?t:parseFloat(t??"1")),n!==1&&this.baseTexture.setResolution(n),n}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=ji.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const n=ji.BATCH_SIZE;for(;t-e<n&&t<this._frameKeys.length;){const i=this._frameKeys[t],s=this._frames[i],o=s.frame;if(o){let a=null,l=null;const c=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,u=new ke(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);s.rotated?a=new ke(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new ke(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(l=new ke(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[i]=new ge(this.baseTexture,a,u,l,s.rotated?2:0,s.anchor,s.borders),ge.addToCache(this.textures[i],i.toString())}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let n=0;n<e[t].length;n++){const i=e[t][n];this.animations[t].push(this.textures[i])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*ji.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*ji.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};Cg.BATCH_SIZE=1e3;let Cd=Cg;const lS=["jpg","png","jpeg","avif","webp"];function _g(r,e,t){const n={};if(r.forEach(i=>{n[i]=e}),Object.keys(e.textures).forEach(i=>{n[i]=e.textures[i]}),!t){const i=xt.dirname(r[0]);e.linkedSheets.forEach((s,o)=>{const a=_g([`${i}/${e.data.meta.related_multi_packs[o]}`],s,!0);Object.assign(n,a)})}return n}const cS={extension:ce.Asset,cache:{test:r=>r instanceof Cd,getCacheableAssets:(r,e)=>_g(r,e,!1)},resolver:{test:r=>{const e=r.split("?")[0].split("."),t=e.pop(),n=e.pop();return t==="json"&&lS.includes(n)},parse:r=>{var t;const e=r.split(".");return{resolution:parseFloat(((t=ue.RETINA_PREFIX.exec(r))==null?void 0:t[1])??"1"),format:e[e.length-2],src:r}}},loader:{name:"spritesheetLoader",extension:{type:ce.LoadParser,priority:Ar.Normal},async testParse(r,e){return xt.extname(e.src).toLowerCase()===".json"&&!!r.frames},async parse(r,e,t){var l,c;let n=xt.dirname(e.src);n&&n.lastIndexOf("/")!==n.length-1&&(n+="/");let i=n+r.meta.image;i=bc(i,e.src);const s=(await t.load([i]))[i],o=new Cd(s.baseTexture,r,e.src);await o.parse();const a=(l=r==null?void 0:r.meta)==null?void 0:l.related_multi_packs;if(Array.isArray(a)){const u=[];for(const d of a){if(typeof d!="string")continue;let f=n+d;(c=e.data)!=null&&c.ignoreMultiPack||(f=bc(f,e.src),u.push(t.load({src:f,data:{ignoreMultiPack:!0}})))}const h=await Promise.all(u);o.linkedSheets=h,h.forEach(d=>{d.linkedSheets=[o].concat(o.linkedSheets.filter(f=>f!==d))})}return o},unload(r){r.destroy(!0)}}};fe.add(cS);class Fo{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class mo{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const t=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in t){const o=t[s].match(/^[a-z]+/gm)[0],a=t[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const c in a){const u=a[c].split("="),h=u[0],d=u[1].replace(/"/gm,""),f=parseFloat(d),g=isNaN(f)?d:f;l[h]=g}n[o].push(l)}const i=new Fo;return n.info.forEach(s=>i.info.push({face:s.face,size:parseInt(s.size,10)})),n.common.forEach(s=>i.common.push({lineHeight:parseInt(s.lineHeight,10)})),n.page.forEach(s=>i.page.push({id:parseInt(s.id,10),file:s.file})),n.char.forEach(s=>i.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),n.kerning.forEach(s=>i.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),n.distanceField.forEach(s=>i.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),i}}class Ac{static test(e){const t=e;return typeof e!="string"&&"getElementsByTagName"in e&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const t=new Fo,n=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField");for(let c=0;c<n.length;c++)t.info.push({face:n[c].getAttribute("face"),size:parseInt(n[c].getAttribute("size"),10)});for(let c=0;c<i.length;c++)t.common.push({lineHeight:parseInt(i[c].getAttribute("lineHeight"),10)});for(let c=0;c<s.length;c++)t.page.push({id:parseInt(s[c].getAttribute("id"),10)||0,file:s[c].getAttribute("file")});for(let c=0;c<o.length;c++){const u=o[c];t.char.push({id:parseInt(u.getAttribute("id"),10),page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xoffset:parseInt(u.getAttribute("xoffset"),10),yoffset:parseInt(u.getAttribute("yoffset"),10),xadvance:parseInt(u.getAttribute("xadvance"),10)})}for(let c=0;c<a.length;c++)t.kerning.push({first:parseInt(a[c].getAttribute("first"),10),second:parseInt(a[c].getAttribute("second"),10),amount:parseInt(a[c].getAttribute("amount"),10)});for(let c=0;c<l.length;c++)t.distanceField.push({fieldType:l[c].getAttribute("fieldType"),distanceRange:parseInt(l[c].getAttribute("distanceRange"),10)});return t}}class wc{static test(e){return typeof e=="string"&&e.includes("<font>")?Ac.test(ue.ADAPTER.parseXML(e)):!1}static parse(e){return Ac.parse(ue.ADAPTER.parseXML(e))}}const vl=[mo,Ac,wc];function uS(r){for(let e=0;e<vl.length;e++)if(vl[e].test(r))return vl[e];return null}function hS(r,e,t,n,i,s){const o=t.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=t.dropShadow?t.dropShadowDistance:0,c=t.padding||0,u=r.width/n-l-c*2,h=r.height/n-l-c*2,d=o.slice(),f=t.fillGradientStops.slice();if(!f.length){const g=d.length+1;for(let m=1;m<g;++m)f.push(m/g)}if(d.unshift(o[0]),f.unshift(0),d.push(o[o.length-1]),f.push(1),t.fillGradientType===ua.LINEAR_VERTICAL){a=e.createLinearGradient(u/2,c,u/2,h+c);let g=0;const m=(s.fontProperties.fontSize+t.strokeThickness)/h;for(let p=0;p<i.length;p++){const v=s.lineHeight*p;for(let x=0;x<d.length;x++){let b=0;typeof f[x]=="number"?b=f[x]:b=x/d.length;const _=v/h+b*m;let y=Math.max(g,_);y=Math.min(y,1),a.addColorStop(y,d[x]),g=y}}}else{a=e.createLinearGradient(c,h/2,u+c,h/2);const g=d.length+1;let m=1;for(let p=0;p<d.length;p++){let v;typeof f[p]=="number"?v=f[p]:v=m/g,a.addColorStop(v,d[p]),m++}}return a}function dS(r,e,t,n,i,s,o){const a=t.text,l=t.fontProperties;e.translate(n,i),e.scale(s,s);const c=o.strokeThickness/2,u=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=hS(r,e,o,s,[a],t),e.strokeStyle=o.stroke,o.dropShadow){const h=o.dropShadowColor,d=o.dropShadowBlur*s,f=o.dropShadowDistance*s;e.shadowColor=rt.shared.setValue(h).setAlpha(o.dropShadowAlpha).toRgbaString(),e.shadowBlur=d,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*f,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*f}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,c,u+t.lineHeight-l.descent),o.fill&&e.fillText(a,c,u+t.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function vo(r){return r.codePointAt?r.codePointAt(0):r.charCodeAt(0)}function Sg(r){return Array.from?Array.from(r):r.split("")}function fS(r){typeof r=="string"&&(r=[r]);const e=[];for(let t=0,n=r.length;t<n;t++){const i=r[t];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);const s=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)e.push(String.fromCharCode(a))}else e.push(...Sg(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const on=class Pr{constructor(e,t,n){var u;const[i]=e.info,[s]=e.common,[o]=e.page,[a]=e.distanceField,l=Qr(o.file),c={};this._ownsTextures=n,this.font=i.face,this.size=i.size,this.lineHeight=s.lineHeight/l,this.chars={},this.pageTextures=c;for(let h=0;h<e.page.length;h++){const{id:d,file:f}=e.page[h];c[d]=t instanceof Array?t[h]:t[f],a!=null&&a.fieldType&&a.fieldType!=="none"&&(c[d].baseTexture.alphaMode=Wt.NO_PREMULTIPLIED_ALPHA,c[d].baseTexture.mipmap=kr.OFF)}for(let h=0;h<e.char.length;h++){const{id:d,page:f}=e.char[h];let{x:g,y:m,width:p,height:v,xoffset:x,yoffset:b,xadvance:_}=e.char[h];g/=l,m/=l,p/=l,v/=l,x/=l,b/=l,_/=l;const y=new ke(g+c[f].frame.x/l,m+c[f].frame.y/l,p,v);this.chars[d]={xOffset:x,yOffset:b,xAdvance:_,kerning:{},texture:new ge(c[f].baseTexture,y),page:f}}for(let h=0;h<e.kerning.length;h++){let{first:d,second:f,amount:g}=e.kerning[h];d/=l,f/=l,g/=l,this.chars[f]&&(this.chars[f].kerning[d]=g)}this.distanceFieldRange=a==null?void 0:a.distanceRange,this.distanceFieldType=((u=a==null?void 0:a.fieldType)==null?void 0:u.toLowerCase())??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,n){let i;if(e instanceof Fo)i=e;else{const o=uS(e);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(e)}t instanceof ge&&(t=[t]);const s=new Pr(i,t,n);return Pr.available[s.font]=s,s}static uninstall(e){const t=Pr.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete Pr.available[e]}static from(e,t,n){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:i,padding:s,resolution:o,textureWidth:a,textureHeight:l,...c}=Object.assign({},Pr.defaultOptions,n),u=fS(i),h=t instanceof yn?t:new yn(t),d=a,f=new Fo;f.info[0]={face:h.fontFamily,size:h.fontSize},f.common[0]={lineHeight:h.fontSize};let g=0,m=0,p,v,x,b=0;const _=[];for(let I=0;I<u.length;I++){p||(p=ue.ADAPTER.createCanvas(),p.width=a,p.height=l,v=p.getContext("2d"),x=new Me(p,{resolution:o,...c}),_.push(new ge(x)),f.page.push({id:_.length-1,file:""}));const A=u[I],P=cn.measureText(A,h,!1,p),L=P.width,V=Math.ceil(P.height),U=Math.ceil((h.fontStyle==="italic"?2:1)*L);if(m>=l-V*o){if(m===0)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${h.fontFamily}', fontSize: ${h.fontSize}px, char: '${A}')`);--I,p=null,v=null,x=null,m=0,g=0,b=0;continue}if(b=Math.max(V+P.fontProperties.descent,b),U*o+g>=d){if(g===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${h.fontFamily}', fontSize: ${h.fontSize}px, char: '${A}')`);--I,m+=b*o,m=Math.ceil(m),g=0,b=0;continue}dS(p,v,P,g,m,o,h);const N=vo(P.text);f.char.push({id:N,page:_.length-1,x:g/o,y:m/o,width:U,height:V,xoffset:0,yoffset:0,xadvance:L-(h.dropShadow?h.dropShadowDistance:0)-(h.stroke?h.strokeThickness:0)}),g+=(U+2*s)*o,g=Math.ceil(g)}if(!(n!=null&&n.skipKerning))for(let I=0,A=u.length;I<A;I++){const P=u[I];for(let L=0;L<A;L++){const V=u[L],U=v.measureText(P).width,N=v.measureText(V).width,M=v.measureText(P+V).width-(U+N);M&&f.kerning.push({first:vo(P),second:vo(V),amount:M})}}const y=new Pr(f,_,!0);return Pr.available[e]!==void 0&&Pr.uninstall(e),Pr.available[e]=y,y}};on.ALPHA=[["a","z"],["A","Z"]," "],on.NUMERIC=[["0","9"]],on.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],on.ASCII=[[" ","~"]],on.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:on.ALPHANUMERIC},on.available={};let an=on;var pS=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,gS=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const _d=[],Sd=[],Ad=[],mS=class Ag extends Sr{constructor(e,t={}){super();const{align:n,tint:i,maxWidth:s,letterSpacing:o,fontName:a,fontSize:l}=Object.assign({},Ag.styleDefaults,t);if(!an.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=n,this._tintColor=new rt(i),this._font=void 0,this._fontName=a,this._fontSize=l,this.text=e,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new Yr(()=>{this.dirty=!0},this,0,0),this._roundPixels=ue.ROUND_PIXELS,this.dirty=!0,this._resolution=ue.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var U;const e=an.available[this._fontName],t=this.fontSize,n=t/e.size,i=new ze,s=[],o=[],a=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",c=Sg(l),u=this._maxWidth*e.size/t,h=e.distanceFieldType==="none"?_d:Sd;let d=null,f=0,g=0,m=0,p=-1,v=0,x=0,b=0,_=0;for(let N=0;N<c.length;N++){const M=c[N],k=vo(M);if(/(?:\s)/.test(M)&&(p=N,v=f,_++),M==="\r"||M===`
`){o.push(f),a.push(-1),g=Math.max(g,f),++m,++x,i.x=0,i.y+=e.lineHeight,d=null,_=0;continue}const O=e.chars[k];if(!O)continue;d&&O.kerning[d]&&(i.x+=O.kerning[d]);const S=Ad.pop()||{texture:ge.EMPTY,line:0,charCode:0,prevSpaces:0,position:new ze};S.texture=O.texture,S.line=m,S.charCode=k,S.position.x=Math.round(i.x+O.xOffset+this._letterSpacing/2),S.position.y=Math.round(i.y+O.yOffset),S.prevSpaces=_,s.push(S),f=S.position.x+Math.max(O.xAdvance-O.xOffset,O.texture.orig.width),i.x+=O.xAdvance+this._letterSpacing,b=Math.max(b,O.yOffset+O.texture.height),d=k,p!==-1&&u>0&&i.x>u&&(++x,pi(s,1+p-x,1+N-p),N=p,p=-1,o.push(v),a.push(s.length>0?s[s.length-1].prevSpaces:0),g=Math.max(g,v),m++,i.x=0,i.y+=e.lineHeight,d=null,_=0)}const y=c[c.length-1];y!=="\r"&&y!==`
`&&(/(?:\s)/.test(y)&&(f=v),o.push(f),g=Math.max(g,f),a.push(-1));const I=[];for(let N=0;N<=m;N++){let M=0;this._align==="right"?M=g-o[N]:this._align==="center"?M=(g-o[N])/2:this._align==="justify"&&(M=a[N]<0?0:(g-o[N])/a[N]),I.push(M)}const A=s.length,P={},L=[],V=this._activePagesMeshData;h.push(...V);for(let N=0;N<A;N++){const M=s[N].texture,k=M.baseTexture.uid;if(!P[k]){let O=h.pop();if(!O){const E=new H_;let C,B;e.distanceFieldType==="none"?(C=new yd(ge.EMPTY),B=we.NORMAL):(C=new yd(ge.EMPTY,{program:Zr.from(gS,pS),uniforms:{uFWidth:0}}),B=we.NORMAL_NPM);const T=new vd(E,C);T.blendMode=B,O={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:T,vertices:null,uvs:null,indices:null}}O.index=0,O.indexCount=0,O.vertexCount=0,O.uvsCount=0,O.total=0;const{_textureCache:S}=this;S[k]=S[k]||new ge(M.baseTexture),O.mesh.texture=S[k],O.mesh.tint=this._tintColor.value,L.push(O),P[k]=O}P[k].total++}for(let N=0;N<V.length;N++)L.includes(V[N])||this.removeChild(V[N].mesh);for(let N=0;N<L.length;N++)L[N].mesh.parent!==this&&this.addChild(L[N].mesh);this._activePagesMeshData=L;for(const N in P){const M=P[N],k=M.total;if(!(((U=M.indices)==null?void 0:U.length)>6*k)||M.vertices.length<vd.BATCHABLE_SIZE*2)M.vertices=new Float32Array(4*2*k),M.uvs=new Float32Array(4*2*k),M.indices=new Uint16Array(6*k);else{const O=M.total,S=M.vertices;for(let E=O*4*2;E<S.length;E++)S[E]=0}M.mesh.size=6*k}for(let N=0;N<A;N++){const M=s[N];let k=M.position.x+I[M.line]*(this._align==="justify"?M.prevSpaces:1);this._roundPixels&&(k=Math.round(k));const O=k*n,S=M.position.y*n,E=M.texture,C=P[E.baseTexture.uid],B=E.frame,T=E._uvs,R=C.index++;C.indices[R*6+0]=0+R*4,C.indices[R*6+1]=1+R*4,C.indices[R*6+2]=2+R*4,C.indices[R*6+3]=0+R*4,C.indices[R*6+4]=2+R*4,C.indices[R*6+5]=3+R*4,C.vertices[R*8+0]=O,C.vertices[R*8+1]=S,C.vertices[R*8+2]=O+B.width*n,C.vertices[R*8+3]=S,C.vertices[R*8+4]=O+B.width*n,C.vertices[R*8+5]=S+B.height*n,C.vertices[R*8+6]=O,C.vertices[R*8+7]=S+B.height*n,C.uvs[R*8+0]=T.x0,C.uvs[R*8+1]=T.y0,C.uvs[R*8+2]=T.x1,C.uvs[R*8+3]=T.y1,C.uvs[R*8+4]=T.x2,C.uvs[R*8+5]=T.y2,C.uvs[R*8+6]=T.x3,C.uvs[R*8+7]=T.y3}this._textWidth=g*n,this._textHeight=(i.y+e.lineHeight)*n;for(const N in P){const M=P[N];if(this.anchor.x!==0||this.anchor.y!==0){let E=0;const C=this._textWidth*this.anchor.x,B=this._textHeight*this.anchor.y;for(let T=0;T<M.total;T++)M.vertices[E++]-=C,M.vertices[E++]-=B,M.vertices[E++]-=C,M.vertices[E++]-=B,M.vertices[E++]-=C,M.vertices[E++]-=B,M.vertices[E++]-=C,M.vertices[E++]-=B}this._maxLineHeight=b*n;const k=M.mesh.geometry.getBuffer("aVertexPosition"),O=M.mesh.geometry.getBuffer("aTextureCoord"),S=M.mesh.geometry.getIndex();k.data=M.vertices,O.data=M.uvs,S.data=M.indices,k.update(),O.update(),S.update()}for(let N=0;N<s.length;N++)Ad.push(s[N]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:n,size:i}=an.available[this._fontName];if(n!=="none"){const{a:s,b:o,c:a,d:l}=this.worldTransform,c=Math.sqrt(s*s+o*o),u=Math.sqrt(a*a+l*l),h=(Math.abs(c)+Math.abs(u))/2,d=this.fontSize/i,f=e._view.resolution;for(const g of this._activePagesMeshData)g.mesh.shader.uniforms.uFWidth=h*t*d*f}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=an.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!an.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??an.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,n=an.available[this._fontName].distanceFieldType==="none"?_d:Sd;n.push(...this._activePagesMeshData);for(const i of this._activePagesMeshData)this.removeChild(i.mesh);this._activePagesMeshData=[],n.filter(i=>t[i.mesh.texture.baseTexture.uid]).forEach(i=>{i.mesh.texture=ge.EMPTY});for(const i in t)t[i].destroy(),delete t[i];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};mS.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const vS=[".xml",".fnt"],yS={extension:{type:ce.LoadParser,priority:Ar.Normal},name:"loadBitmapFont",test(r){return vS.includes(xt.extname(r).toLowerCase())},async testParse(r){return mo.test(r)||wc.test(r)},async parse(r,e,t){const n=mo.test(r)?mo.parse(r):wc.parse(r),{src:i}=e,{page:s}=n,o=[];for(let c=0;c<s.length;++c){const u=s[c].file;let h=xt.join(xt.dirname(i),u);h=bc(h,i),o.push(h)}const a=await t.load(o),l=o.map(c=>a[c]);return an.install(n,l,!0)},async load(r,e){return(await ue.ADAPTER.fetch(r)).text()},unload(r){r.destroy()}};fe.add(yS);const Ec=class ci extends yn{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new ci(Object.keys(ci.defaultOptions).reduce((t,n)=>({...t,[n]:e[n]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete ci.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){const{availableFonts:n}=ci;if(n[e]){const i=n[e];return this._fonts.push(i),i.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return ue.ADAPTER.fetch(e).then(i=>i.blob()).then(async i=>new Promise((s,o)=>{const a=URL.createObjectURL(i),l=new FileReader;l.onload=()=>s([a,l.result]),l.onerror=o,l.readAsDataURL(i)})).then(async([i,s])=>{const o=Object.assign({family:xt.basename(e,xt.extname(e)),weight:"normal",style:"normal",display:"auto",src:i,dataSrc:s,refs:1,originalUrl:e,fontFace:null},t);n[e]=o,this._fonts.push(o),this.styleID++;const a=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=a,await a.load(),document.fonts.add(a),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const t=e.filter(n=>!this._overrides.includes(n));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){const t=e.filter(n=>this._overrides.includes(n));t.length>0&&(this._overrides=this._overrides.filter(n=>!t.includes(n)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style};
                font-display: ${t.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=l1(e)),typeof e=="number"?a1(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,n=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),i=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(t*255|0).toString(16).padStart(2,"0"));const s=`${n}px ${i}px`;return this.dropShadowBlur>0?`text-shadow: ${s} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${s} ${e}`}reset(){Object.assign(this,ci.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=ue.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};Ec.availableFonts={},Ec.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let yl=Ec;const Xs=class ui extends Qn{constructor(e="",t={}){super(ge.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const n=new Image,i=ge.from(n,{scaleMode:ue.SCALE_MODE,resourceOptions:{autoLoad:!1}});i.orig=new ke,i.trim=new ke,this.texture=i;const s="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",a=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject"),c=document.createElementNS(o,"div"),u=document.createElementNS(o,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",a.appendChild(l),this.maxWidth=ui.defaultMaxWidth,this.maxHeight=ui.defaultMaxHeight,this._domElement=c,this._styleElement=u,this._svgRoot=a,this._foreignObject=l,this._foreignObject.appendChild(u),this._foreignObject.appendChild(c),this._image=n,this._loadImage=new Image,this._autoResolution=ui.defaultAutoResolution,this._resolution=ui.defaultResolution??ue.RESOLUTION,this.text=e,this.style=t}measureText(e){var u,h;const{text:t,style:n,resolution:i}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:n.toCSS(i)}),this._styleElement.textContent=n.toGlobalCSS(),document.body.appendChild(this._svgRoot);const s=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:a}=s;(o>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const l=Math.min(this.maxWidth,Math.ceil(o)),c=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",l.toString()),this._svgRoot.setAttribute("height",c.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),n!==this._style&&(Object.assign(this._domElement,{style:(u=this._style)==null?void 0:u.toCSS(i)}),this._styleElement.textContent=(h=this._style)==null?void 0:h.toGlobalCSS()),{width:l+n.padding*2,height:c+n.padding*2}}async updateText(e=!0){const{style:t,_image:n,_loadImage:i}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;const{width:s,height:o}=this.measureText();n.width=i.width=Math.ceil(Math.max(1,s)),n.height=i.height=Math.ceil(Math.max(1,o)),this._updateID++;const a=this._updateID;await new Promise(l=>{i.onload=async()=>{if(a<this._updateID){l();return}await t.onBeforeDraw(),n.src=i.src,i.onload=null,i.src="",this.updateTexture(),l()};const c=new XMLSerializer().serializeToString(this._svgRoot);i.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(c)}`})}get source(){return this._image}updateTexture(){const{style:e,texture:t,_image:n,resolution:i}=this,{padding:s}=e,{baseTexture:o}=t;t.trim.width=t._frame.width=n.width/i,t.trim.height=t._frame.height=n.height/i,t.trim.x=-s,t.trim.y=-s,t.orig.width=t._frame.width-s*2,t.orig.height=t._frame.height-s*2,this._onTextureUpdate(),o.setRealSize(n.width,n.height,i),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){var n,i,s,o,a;typeof e=="boolean"&&(e={children:e}),e=Object.assign({},ui.defaultDestroyOptions,e),super.destroy(e);const t=null;this.ownsStyle&&((n=this._style)==null||n.cleanFonts()),this._style=t,(i=this._svgRoot)==null||i.remove(),this._svgRoot=t,(s=this._domElement)==null||s.remove(),this._domElement=t,(o=this._foreignObject)==null||o.remove(),this._foreignObject=t,(a=this._styleElement)==null||a.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const t=hn(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const t=hn(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof yl?(this.ownsStyle=!1,this._style=e):e instanceof yn?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=yl.from(e)):(this.ownsStyle=!0,this._style=new yl(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};Xs.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},Xs.defaultMaxWidth=2024,Xs.defaultMaxHeight=2024,Xs.defaultAutoResolution=!0;var Gn=[],bS=function(){return Gn.some(function(r){return r.activeTargets.length>0})},xS=function(){return Gn.some(function(r){return r.skippedTargets.length>0})},wd="ResizeObserver loop completed with undelivered notifications.",CS=function(){var r;typeof ErrorEvent=="function"?r=new ErrorEvent("error",{message:wd}):(r=document.createEvent("Event"),r.initEvent("error",!1,!1),r.message=wd),window.dispatchEvent(r)},ts;(function(r){r.BORDER_BOX="border-box",r.CONTENT_BOX="content-box",r.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(ts||(ts={}));var Hn=function(r){return Object.freeze(r)},_S=function(){function r(e,t){this.inlineSize=e,this.blockSize=t,Hn(this)}return r}(),wg=function(){function r(e,t,n,i){return this.x=e,this.y=t,this.width=n,this.height=i,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Hn(this)}return r.prototype.toJSON=function(){var e=this,t=e.x,n=e.y,i=e.top,s=e.right,o=e.bottom,a=e.left,l=e.width,c=e.height;return{x:t,y:n,top:i,right:s,bottom:o,left:a,width:l,height:c}},r.fromRect=function(e){return new r(e.x,e.y,e.width,e.height)},r}(),cu=function(r){return r instanceof SVGElement&&"getBBox"in r},Eg=function(r){if(cu(r)){var e=r.getBBox(),t=e.width,n=e.height;return!t&&!n}var i=r,s=i.offsetWidth,o=i.offsetHeight;return!(s||o||r.getClientRects().length)},Ed=function(r){var e;if(r instanceof Element)return!0;var t=(e=r==null?void 0:r.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(t&&r instanceof t.Element)},SS=function(r){switch(r.tagName){case"INPUT":if(r.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Qi=typeof window<"u"?window:{},js=new WeakMap,Id=/auto|scroll/,AS=/^tb|vertical/,wS=/msie|trident/i.test(Qi.navigator&&Qi.navigator.userAgent),wr=function(r){return parseFloat(r||"0")},yi=function(r,e,t){return r===void 0&&(r=0),e===void 0&&(e=0),t===void 0&&(t=!1),new _S((t?e:r)||0,(t?r:e)||0)},Td=Hn({devicePixelContentBoxSize:yi(),borderBoxSize:yi(),contentBoxSize:yi(),contentRect:new wg(0,0,0,0)}),Ig=function(r,e){if(e===void 0&&(e=!1),js.has(r)&&!e)return js.get(r);if(Eg(r))return js.set(r,Td),Td;var t=getComputedStyle(r),n=cu(r)&&r.ownerSVGElement&&r.getBBox(),i=!wS&&t.boxSizing==="border-box",s=AS.test(t.writingMode||""),o=!n&&Id.test(t.overflowY||""),a=!n&&Id.test(t.overflowX||""),l=n?0:wr(t.paddingTop),c=n?0:wr(t.paddingRight),u=n?0:wr(t.paddingBottom),h=n?0:wr(t.paddingLeft),d=n?0:wr(t.borderTopWidth),f=n?0:wr(t.borderRightWidth),g=n?0:wr(t.borderBottomWidth),m=n?0:wr(t.borderLeftWidth),p=h+c,v=l+u,x=m+f,b=d+g,_=a?r.offsetHeight-b-r.clientHeight:0,y=o?r.offsetWidth-x-r.clientWidth:0,I=i?p+x:0,A=i?v+b:0,P=n?n.width:wr(t.width)-I-y,L=n?n.height:wr(t.height)-A-_,V=P+p+y+x,U=L+v+_+b,N=Hn({devicePixelContentBoxSize:yi(Math.round(P*devicePixelRatio),Math.round(L*devicePixelRatio),s),borderBoxSize:yi(V,U,s),contentBoxSize:yi(P,L,s),contentRect:new wg(h,l,P,L)});return js.set(r,N),N},Tg=function(r,e,t){var n=Ig(r,t),i=n.borderBoxSize,s=n.contentBoxSize,o=n.devicePixelContentBoxSize;switch(e){case ts.DEVICE_PIXEL_CONTENT_BOX:return o;case ts.BORDER_BOX:return i;default:return s}},ES=function(){function r(e){var t=Ig(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=Hn([t.borderBoxSize]),this.contentBoxSize=Hn([t.contentBoxSize]),this.devicePixelContentBoxSize=Hn([t.devicePixelContentBoxSize])}return r}(),Rg=function(r){if(Eg(r))return 1/0;for(var e=0,t=r.parentNode;t;)e+=1,t=t.parentNode;return e},IS=function(){var r=1/0,e=[];Gn.forEach(function(o){if(o.activeTargets.length!==0){var a=[];o.activeTargets.forEach(function(c){var u=new ES(c.target),h=Rg(c.target);a.push(u),c.lastReportedSize=Tg(c.target,c.observedBox),h<r&&(r=h)}),e.push(function(){o.callback.call(o.observer,a,o.observer)}),o.activeTargets.splice(0,o.activeTargets.length)}});for(var t=0,n=e;t<n.length;t++){var i=n[t];i()}return r},Rd=function(r){Gn.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(i){i.isActive()&&(Rg(i.target)>r?t.activeTargets.push(i):t.skippedTargets.push(i))})})},TS=function(){var r=0;for(Rd(r);bS();)r=IS(),Rd(r);return xS()&&CS(),r>0},bl,Pg=[],RS=function(){return Pg.splice(0).forEach(function(r){return r()})},PS=function(r){if(!bl){var e=0,t=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return RS()}).observe(t,n),bl=function(){t.textContent="".concat(e?e--:e++)}}Pg.push(r),bl()},BS=function(r){PS(function(){requestAnimationFrame(r)})},yo=0,MS=function(){return!!yo},OS=250,NS={attributes:!0,characterData:!0,childList:!0,subtree:!0},Pd=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Bd=function(r){return r===void 0&&(r=0),Date.now()+r},xl=!1,DS=function(){function r(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return r.prototype.run=function(e){var t=this;if(e===void 0&&(e=OS),!xl){xl=!0;var n=Bd(e);BS(function(){var i=!1;try{i=TS()}finally{if(xl=!1,e=n-Bd(),!MS())return;i?t.run(1e3):e>0?t.run(e):t.start()}})}},r.prototype.schedule=function(){this.stop(),this.run()},r.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,NS)};document.body?t():Qi.addEventListener("DOMContentLoaded",t)},r.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Pd.forEach(function(t){return Qi.addEventListener(t,e.listener,!0)}))},r.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),Pd.forEach(function(t){return Qi.removeEventListener(t,e.listener,!0)}),this.stopped=!0)},r}(),Ic=new DS,Md=function(r){!yo&&r>0&&Ic.start(),yo+=r,!yo&&Ic.stop()},LS=function(r){return!cu(r)&&!SS(r)&&getComputedStyle(r).display==="inline"},FS=function(){function r(e,t){this.target=e,this.observedBox=t||ts.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return r.prototype.isActive=function(){var e=Tg(this.target,this.observedBox,!0);return LS(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},r}(),kS=function(){function r(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t}return r}(),$s=new WeakMap,Od=function(r,e){for(var t=0;t<r.length;t+=1)if(r[t].target===e)return t;return-1},Ys=function(){function r(){}return r.connect=function(e,t){var n=new kS(e,t);$s.set(e,n)},r.observe=function(e,t,n){var i=$s.get(e),s=i.observationTargets.length===0;Od(i.observationTargets,t)<0&&(s&&Gn.push(i),i.observationTargets.push(new FS(t,n&&n.box)),Md(1),Ic.schedule())},r.unobserve=function(e,t){var n=$s.get(e),i=Od(n.observationTargets,t),s=n.observationTargets.length===1;i>=0&&(s&&Gn.splice(Gn.indexOf(n),1),n.observationTargets.splice(i,1),Md(-1))},r.disconnect=function(e){var t=this,n=$s.get(e);n.observationTargets.slice().forEach(function(i){return t.unobserve(e,i.target)}),n.activeTargets.splice(0,n.activeTargets.length)},r}(),GS=function(){function r(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Ys.connect(this,e)}return r.prototype.observe=function(e,t){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Ed(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Ys.observe(this,e,t)},r.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Ed(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Ys.unobserve(this,e)},r.prototype.disconnect=function(){Ys.disconnect(this)},r.toString=function(){return"function ResizeObserver () { [polyfill code] }"},r}();const Bg=w[typeof document<"u"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"],HS=r=>{const e=be.useRef(r);return be.useEffect(()=>{e.current=r}),e},VS=typeof window<"u"&&"ResizeObserver"in window?window.ResizeObserver:GS;function US(){}function WS(r,e){const t=XS(),n=HS(e);return Bg(()=>{let i=!1;const s=r&&"current"in r?r.current:r;if(!s)return US;function o(a,l){i||n.current(a,l)}return t.subscribe(s,o),()=>{i=!0,t.unsubscribe(s,o)}},[r,t,n]),t.observer}function zS(){let r=!1,e=[];const t=new Map,n=new VS((i,s)=>{e=e.concat(i);function o(){const a=new Set;for(let l=0;l<e.length;l++){if(a.has(e[l].target))continue;a.add(e[l].target);const c=t.get(e[l].target);c==null||c.forEach(u=>u(e[l],s))}e=[],r=!1}r||window.requestAnimationFrame(o),r=!0});return{observer:n,subscribe(i,s){var o;n.observe(i);const a=(o=t.get(i))!==null&&o!==void 0?o:[];a.push(s),t.set(i,a)},unsubscribe(i,s){var o;const a=(o=t.get(i))!==null&&o!==void 0?o:[];if(a.length===1){n.unobserve(i),t.delete(i);return}const l=a.indexOf(s);l!==-1&&a.splice(l,1),t.set(i,a)}}}let Cl;const XS=()=>Cl||(Cl=zS()),Mg=(r,e)=>{const[t,n]=be.useState(()=>{var i,s;const o=r&&"current"in r?r.current:r;return o?[o.offsetWidth,o.offsetHeight]:[(i=void 0)!==null&&i!==void 0?i:0,(s=void 0)!==null&&s!==void 0?s:0]});return Bg(()=>{const i=r&&"current"in r?r.current:r;i&&n([i.offsetWidth,i.offsetHeight])},[r]),WS(r,i=>{const s=i.target;n([s.offsetWidth,s.offsetHeight])}),t};function gs(r){const{onSizeChanged:e,children:t,logId:n}=r,i=w.useRef(null),[s,o]=Mg(i);return w.useEffect(()=>{e({width:s,height:o,getLiveLeft:()=>i.current?i.current.getBoundingClientRect().left:0,getLiveRight:()=>i.current?i.current.getBoundingClientRect().width+i.current.getBoundingClientRect().left:0,getLiveTop:()=>i.current?i.current.getBoundingClientRect().top:0})},[e,s,o,n]),H.jsxs(H.Fragment,{children:[H.jsx("div",{ref:i,className:"resize-sensor-holder"}),t]})}function Et(r){return`Minified Redux error #${r}; visit https://redux.js.org/Errors?code=${r} for the full message or use the non-minified dev environment for full errors. `}var jS=typeof Symbol=="function"&&Symbol.observable||"@@observable",Nd=jS,_l=()=>Math.random().toString(36).substring(7).split("").join("."),$S={INIT:`@@redux/INIT${_l()}`,REPLACE:`@@redux/REPLACE${_l()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${_l()}`},Vn=$S;function ms(r){if(typeof r!="object"||r===null)return!1;let e=r;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e}function YS(r){if(r===void 0)return"undefined";if(r===null)return"null";const e=typeof r;switch(e){case"boolean":case"string":case"number":case"symbol":case"function":return e}if(Array.isArray(r))return"array";if(JS(r))return"date";if(qS(r))return"error";const t=ZS(r);switch(t){case"Symbol":case"Promise":case"WeakMap":case"WeakSet":case"Map":case"Set":return t}return Object.prototype.toString.call(r).slice(8,-1).toLowerCase().replace(/\s/g,"")}function ZS(r){return typeof r.constructor=="function"?r.constructor.name:null}function qS(r){return r instanceof Error||typeof r.message=="string"&&r.constructor&&typeof r.constructor.stackTraceLimit=="number"}function JS(r){return r instanceof Date?!0:typeof r.toDateString=="function"&&typeof r.getDate=="function"&&typeof r.setDate=="function"}function ln(r){let e=typeof r;return process.env.NODE_ENV!=="production"&&(e=YS(r)),e}function Og(r,e,t){if(typeof r!="function")throw new Error(process.env.NODE_ENV==="production"?Et(2):`Expected the root reducer to be a function. Instead, received: '${ln(r)}'`);if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(process.env.NODE_ENV==="production"?Et(0):"It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.");if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(process.env.NODE_ENV==="production"?Et(1):`Expected the enhancer to be a function. Instead, received: '${ln(t)}'`);return t(Og)(r,e)}let n=r,i=e,s=new Map,o=s,a=0,l=!1;function c(){o===s&&(o=new Map,s.forEach((p,v)=>{o.set(v,p)}))}function u(){if(l)throw new Error(process.env.NODE_ENV==="production"?Et(3):"You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return i}function h(p){if(typeof p!="function")throw new Error(process.env.NODE_ENV==="production"?Et(4):`Expected the listener to be a function. Instead, received: '${ln(p)}'`);if(l)throw new Error(process.env.NODE_ENV==="production"?Et(5):"You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api/store#subscribelistener for more details.");let v=!0;c();const x=a++;return o.set(x,p),function(){if(v){if(l)throw new Error(process.env.NODE_ENV==="production"?Et(6):"You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api/store#subscribelistener for more details.");v=!1,c(),o.delete(x),s=null}}}function d(p){if(!ms(p))throw new Error(process.env.NODE_ENV==="production"?Et(7):`Actions must be plain objects. Instead, the actual type was: '${ln(p)}'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.`);if(typeof p.type>"u")throw new Error(process.env.NODE_ENV==="production"?Et(8):'Actions may not have an undefined "type" property. You may have misspelled an action type string constant.');if(typeof p.type!="string")throw new Error(process.env.NODE_ENV==="production"?Et(17):`Action "type" property must be a string. Instead, the actual type was: '${ln(p.type)}'. Value was: '${p.type}' (stringified)`);if(l)throw new Error(process.env.NODE_ENV==="production"?Et(9):"Reducers may not dispatch actions.");try{l=!0,i=n(i,p)}finally{l=!1}return(s=o).forEach(x=>{x()}),p}function f(p){if(typeof p!="function")throw new Error(process.env.NODE_ENV==="production"?Et(10):`Expected the nextReducer to be a function. Instead, received: '${ln(p)}`);n=p,d({type:Vn.REPLACE})}function g(){const p=h;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(process.env.NODE_ENV==="production"?Et(11):`Expected the observer to be an object. Instead, received: '${ln(v)}'`);function x(){const _=v;_.next&&_.next(u())}return x(),{unsubscribe:p(x)}},[Nd](){return this}}}return d({type:Vn.INIT}),{dispatch:d,subscribe:h,getState:u,replaceReducer:f,[Nd]:g}}function Dd(r){typeof console<"u"&&typeof console.error=="function"&&console.error(r);try{throw new Error(r)}catch{}}function QS(r,e,t,n){const i=Object.keys(e),s=t&&t.type===Vn.INIT?"preloadedState argument passed to createStore":"previous state received by the reducer";if(i.length===0)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";if(!ms(r))return`The ${s} has unexpected type of "${ln(r)}". Expected argument to be an object with the following keys: "${i.join('", "')}"`;const o=Object.keys(r).filter(a=>!e.hasOwnProperty(a)&&!n[a]);if(o.forEach(a=>{n[a]=!0}),!(t&&t.type===Vn.REPLACE)&&o.length>0)return`Unexpected ${o.length>1?"keys":"key"} "${o.join('", "')}" found in ${s}. Expected to find one of the known reducer keys instead: "${i.join('", "')}". Unexpected keys will be ignored.`}function KS(r){Object.keys(r).forEach(e=>{const t=r[e];if(typeof t(void 0,{type:Vn.INIT})>"u")throw new Error(process.env.NODE_ENV==="production"?Et(12):`The slice reducer for key "${e}" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.`);if(typeof t(void 0,{type:Vn.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(process.env.NODE_ENV==="production"?Et(13):`The slice reducer for key "${e}" returned undefined when probed with a random type. Don't try to handle '${Vn.INIT}' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.`)})}function eA(r){const e=Object.keys(r),t={};for(let o=0;o<e.length;o++){const a=e[o];process.env.NODE_ENV!=="production"&&typeof r[a]>"u"&&Dd(`No reducer provided for key "${a}"`),typeof r[a]=="function"&&(t[a]=r[a])}const n=Object.keys(t);let i;process.env.NODE_ENV!=="production"&&(i={});let s;try{KS(t)}catch(o){s=o}return function(a={},l){if(s)throw s;if(process.env.NODE_ENV!=="production"){const h=QS(a,t,l,i);h&&Dd(h)}let c=!1;const u={};for(let h=0;h<n.length;h++){const d=n[h],f=t[d],g=a[d],m=f(g,l);if(typeof m>"u"){const p=l&&l.type;throw new Error(process.env.NODE_ENV==="production"?Et(14):`When called with an action of type ${p?`"${String(p)}"`:"(unknown type)"}, the slice reducer for key "${d}" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.`)}u[d]=m,c=c||m!==g}return c=c||n.length!==Object.keys(a).length,c?u:a}}function ko(...r){return r.length===0?e=>e:r.length===1?r[0]:r.reduce((e,t)=>(...n)=>e(t(...n)))}function tA(...r){return e=>(t,n)=>{const i=e(t,n);let s=()=>{throw new Error(process.env.NODE_ENV==="production"?Et(15):"Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")};const o={getState:i.getState,dispatch:(l,...c)=>s(l,...c)},a=r.map(l=>l(o));return s=ko(...a)(i.dispatch),{...i,dispatch:s}}}function Ng(r){return ms(r)&&"type"in r&&typeof r.type=="string"}var Dg=Symbol.for("immer-nothing"),Ld=Symbol.for("immer-draftable"),er=Symbol.for("immer-state"),rA=process.env.NODE_ENV!=="production"?[function(r){return`The plugin for '${r}' has not been loaded into Immer. To enable the plugin, import and call \`enable${r}()\` when initializing your application.`},function(r){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${r}'`},"This object has been frozen and should not be mutated",function(r){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+r},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(r){return`'current' expects a draft, got: ${r}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(r){return`'original' expects a draft, got: ${r}`}]:[];function Vt(r,...e){if(process.env.NODE_ENV!=="production"){const t=rA[r],n=typeof t=="function"?t.apply(null,e):t;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${r}. Full error at: https://bit.ly/3cXEKWf`)}var Si=Object.getPrototypeOf;function bn(r){return!!r&&!!r[er]}function Kr(r){var e;return r?Lg(r)||Array.isArray(r)||!!r[Ld]||!!((e=r.constructor)!=null&&e[Ld])||da(r)||fa(r):!1}var nA=Object.prototype.constructor.toString();function Lg(r){if(!r||typeof r!="object")return!1;const e=Si(r);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===nA}function rs(r,e){ha(r)===0?Object.entries(r).forEach(([t,n])=>{e(t,n,r)}):r.forEach((t,n)=>e(n,t,r))}function ha(r){const e=r[er];return e?e.type_:Array.isArray(r)?1:da(r)?2:fa(r)?3:0}function Tc(r,e){return ha(r)===2?r.has(e):Object.prototype.hasOwnProperty.call(r,e)}function Fg(r,e,t){const n=ha(r);n===2?r.set(e,t):n===3?r.add(t):r[e]=t}function iA(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}function da(r){return r instanceof Map}function fa(r){return r instanceof Set}function On(r){return r.copy_||r.base_}function Rc(r,e){if(da(r))return new Map(r);if(fa(r))return new Set(r);if(Array.isArray(r))return Array.prototype.slice.call(r);if(!e&&Lg(r))return Si(r)?{...r}:Object.assign(Object.create(null),r);const t=Object.getOwnPropertyDescriptors(r);delete t[er];let n=Reflect.ownKeys(t);for(let i=0;i<n.length;i++){const s=n[i],o=t[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:r[s]})}return Object.create(Si(r),t)}function uu(r,e=!1){return pa(r)||bn(r)||!Kr(r)||(ha(r)>1&&(r.set=r.add=r.clear=r.delete=sA),Object.freeze(r),e&&rs(r,(t,n)=>uu(n,!0))),r}function sA(){Vt(2)}function pa(r){return Object.isFrozen(r)}var oA={};function Xn(r){const e=oA[r];return e||Vt(0,r),e}var ns;function kg(){return ns}function aA(r,e){return{drafts_:[],parent_:r,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Fd(r,e){e&&(Xn("Patches"),r.patches_=[],r.inversePatches_=[],r.patchListener_=e)}function Pc(r){Bc(r),r.drafts_.forEach(lA),r.drafts_=null}function Bc(r){r===ns&&(ns=r.parent_)}function kd(r){return ns=aA(ns,r)}function lA(r){const e=r[er];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Gd(r,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return r!==void 0&&r!==t?(t[er].modified_&&(Pc(e),Vt(4)),Kr(r)&&(r=Go(e,r),e.parent_||Ho(e,r)),e.patches_&&Xn("Patches").generateReplacementPatches_(t[er].base_,r,e.patches_,e.inversePatches_)):r=Go(e,t,[]),Pc(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),r!==Dg?r:void 0}function Go(r,e,t){if(pa(e))return e;const n=e[er];if(!n)return rs(e,(i,s)=>Hd(r,n,e,i,s,t)),e;if(n.scope_!==r)return e;if(!n.modified_)return Ho(r,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let s=i,o=!1;n.type_===3&&(s=new Set(i),i.clear(),o=!0),rs(s,(a,l)=>Hd(r,n,i,a,l,t,o)),Ho(r,i,!1),t&&r.patches_&&Xn("Patches").generatePatches_(n,t,r.patches_,r.inversePatches_)}return n.copy_}function Hd(r,e,t,n,i,s,o){if(process.env.NODE_ENV!=="production"&&i===t&&Vt(5),bn(i)){const a=s&&e&&e.type_!==3&&!Tc(e.assigned_,n)?s.concat(n):void 0,l=Go(r,i,a);if(Fg(t,n,l),bn(l))r.canAutoFreeze_=!1;else return}else o&&t.add(i);if(Kr(i)&&!pa(i)){if(!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1)return;Go(r,i),(!e||!e.scope_.parent_)&&Ho(r,i)}}function Ho(r,e,t=!1){!r.parent_&&r.immer_.autoFreeze_&&r.canAutoFreeze_&&uu(e,t)}function cA(r,e){const t=Array.isArray(r),n={type_:t?1:0,scope_:e?e.scope_:kg(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:r,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,s=hu;t&&(i=[n],s=is);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return n.draft_=a,n.revoke_=o,a}var hu={get(r,e){if(e===er)return r;const t=On(r);if(!Tc(t,e))return uA(r,t,e);const n=t[e];return r.finalized_||!Kr(n)?n:n===Sl(r.base_,e)?(Al(r),r.copy_[e]=Oc(n,r)):n},has(r,e){return e in On(r)},ownKeys(r){return Reflect.ownKeys(On(r))},set(r,e,t){const n=Gg(On(r),e);if(n!=null&&n.set)return n.set.call(r.draft_,t),!0;if(!r.modified_){const i=Sl(On(r),e),s=i==null?void 0:i[er];if(s&&s.base_===t)return r.copy_[e]=t,r.assigned_[e]=!1,!0;if(iA(t,i)&&(t!==void 0||Tc(r.base_,e)))return!0;Al(r),Mc(r)}return r.copy_[e]===t&&(t!==void 0||e in r.copy_)||Number.isNaN(t)&&Number.isNaN(r.copy_[e])||(r.copy_[e]=t,r.assigned_[e]=!0),!0},deleteProperty(r,e){return Sl(r.base_,e)!==void 0||e in r.base_?(r.assigned_[e]=!1,Al(r),Mc(r)):delete r.assigned_[e],r.copy_&&delete r.copy_[e],!0},getOwnPropertyDescriptor(r,e){const t=On(r),n=Reflect.getOwnPropertyDescriptor(t,e);return n&&{writable:!0,configurable:r.type_!==1||e!=="length",enumerable:n.enumerable,value:t[e]}},defineProperty(){Vt(11)},getPrototypeOf(r){return Si(r.base_)},setPrototypeOf(){Vt(12)}},is={};rs(hu,(r,e)=>{is[r]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});is.deleteProperty=function(r,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&Vt(13),is.set.call(this,r,e,void 0)};is.set=function(r,e,t){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&Vt(14),hu.set.call(this,r[0],e,t,r[0])};function Sl(r,e){const t=r[er];return(t?On(t):r)[e]}function uA(r,e,t){var i;const n=Gg(e,t);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(r.draft_):void 0}function Gg(r,e){if(!(e in r))return;let t=Si(r);for(;t;){const n=Object.getOwnPropertyDescriptor(t,e);if(n)return n;t=Si(t)}}function Mc(r){r.modified_||(r.modified_=!0,r.parent_&&Mc(r.parent_))}function Al(r){r.copy_||(r.copy_=Rc(r.base_,r.scope_.immer_.useStrictShallowCopy_))}var hA=class{constructor(r){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if(typeof e=="function"&&typeof t!="function"){const s=t;t=e;const o=this;return function(l=s,...c){return o.produce(l,u=>t.call(this,u,...c))}}typeof t!="function"&&Vt(6),n!==void 0&&typeof n!="function"&&Vt(7);let i;if(Kr(e)){const s=kd(this),o=Oc(e,void 0);let a=!0;try{i=t(o),a=!1}finally{a?Pc(s):Bc(s)}return Fd(s,n),Gd(i,s)}else if(!e||typeof e!="object"){if(i=t(e),i===void 0&&(i=e),i===Dg&&(i=void 0),this.autoFreeze_&&uu(i,!0),n){const s=[],o=[];Xn("Patches").generateReplacementPatches_(e,i,s,o),n(s,o)}return i}else Vt(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let n,i;return[this.produce(e,t,(o,a)=>{n=o,i=a}),n,i]},typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze),typeof(r==null?void 0:r.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(r.useStrictShallowCopy)}createDraft(r){Kr(r)||Vt(8),bn(r)&&(r=Hg(r));const e=kd(this),t=Oc(r,void 0);return t[er].isManual_=!0,Bc(e),t}finishDraft(r,e){const t=r&&r[er];(!t||!t.isManual_)&&Vt(9);const{scope_:n}=t;return Fd(n,e),Gd(void 0,n)}setAutoFreeze(r){this.autoFreeze_=r}setUseStrictShallowCopy(r){this.useStrictShallowCopy_=r}applyPatches(r,e){let t;for(t=e.length-1;t>=0;t--){const i=e[t];if(i.path.length===0&&i.op==="replace"){r=i.value;break}}t>-1&&(e=e.slice(t+1));const n=Xn("Patches").applyPatches_;return bn(r)?n(r,e):this.produce(r,i=>n(i,e))}};function Oc(r,e){const t=da(r)?Xn("MapSet").proxyMap_(r,e):fa(r)?Xn("MapSet").proxySet_(r,e):cA(r,e);return(e?e.scope_:kg()).drafts_.push(t),t}function Hg(r){return bn(r)||Vt(10,r),Vg(r)}function Vg(r){if(!Kr(r)||pa(r))return r;const e=r[er];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=Rc(r,e.scope_.immer_.useStrictShallowCopy_)}else t=Rc(r,!0);return rs(t,(n,i)=>{Fg(t,n,Vg(i))}),e&&(e.finalized_=!1),t}var tr=new hA,Ug=tr.produce;tr.produceWithPatches.bind(tr);tr.setAutoFreeze.bind(tr);tr.setUseStrictShallowCopy.bind(tr);tr.applyPatches.bind(tr);tr.createDraft.bind(tr);tr.finishDraft.bind(tr);var dA=r=>{let e=!1;try{const t={};r(t)===t&&(e=!0)}catch{}if(e){let t;try{throw new Error}catch(n){({stack:t}=n)}console.warn(`The result function returned its own inputs without modification. e.g
\`createSelector([state => state.todos], todos => todos)\`
This could lead to inefficient memoization and unnecessary re-renders.
Ensure transformation logic is in the result function, and extraction logic is in the input selectors.`,{stack:t})}},fA=(r,e,t)=>{const{memoize:n,memoizeOptions:i}=e,{inputSelectorResults:s,inputSelectorResultsCopy:o}=r,a=n(()=>({}),...i);if(!(a.apply(null,s)===a.apply(null,o))){let c;try{throw new Error}catch(u){({stack:c}=u)}console.warn(`An input selector returned a different result when passed same arguments.
This means your output selector will likely run more frequently than intended.
Avoid returning a new reference inside your input selector, e.g.
\`createSelector([state => state.todos.map(todo => todo.id)], todoIds => todoIds.length)\``,{arguments:t,firstInputs:s,secondInputs:o,stack:c})}},pA={inputStabilityCheck:"once",identityFunctionCheck:"once"};function gA(r,e=`expected a function, instead received ${typeof r}`){if(typeof r!="function")throw new TypeError(e)}function mA(r,e="expected all items to be functions, instead received the following types: "){if(!r.every(t=>typeof t=="function")){const t=r.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${t}]`)}}var Vd=r=>Array.isArray(r)?r:[r];function vA(r){const e=Array.isArray(r[0])?r[0]:r;return mA(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function Ud(r,e){const t=[],{length:n}=r;for(let i=0;i<n;i++)t.push(r[i].apply(null,e));return t}var yA=(r,e)=>{const{identityFunctionCheck:t,inputStabilityCheck:n}={...pA,...e};return{identityFunctionCheck:{shouldRun:t==="always"||t==="once"&&r,run:dA},inputStabilityCheck:{shouldRun:n==="always"||n==="once"&&r,run:fA}}},bA=class{constructor(r){this.value=r}deref(){return this.value}},xA=typeof WeakRef<"u"?WeakRef:bA,CA=0,Wd=1;function Zs(){return{s:CA,v:void 0,o:null,p:null}}function Wg(r,e={}){let t=Zs();const{resultEqualityCheck:n}=e;let i,s=0;function o(){let a=t;const{length:l}=arguments;for(let h=0,d=l;h<d;h++){const f=arguments[h];if(typeof f=="function"||typeof f=="object"&&f!==null){let g=a.o;g===null&&(a.o=g=new WeakMap);const m=g.get(f);m===void 0?(a=Zs(),g.set(f,a)):a=m}else{let g=a.p;g===null&&(a.p=g=new Map);const m=g.get(f);m===void 0?(a=Zs(),g.set(f,a)):a=m}}const c=a;let u;if(a.s===Wd?u=a.v:(u=r.apply(null,arguments),s++),c.s=Wd,n){const h=(i==null?void 0:i.deref())??i;h!=null&&n(h,u)&&(u=h,s!==0&&s--),i=typeof u=="object"&&u!==null||typeof u=="function"?new xA(u):u}return c.v=u,u}return o.clearCache=()=>{t=Zs(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function _A(r,...e){const t=typeof r=="function"?{memoize:r,memoizeOptions:e}:r;return(...i)=>{let s=0,o=0,a,l={},c=i.pop();typeof c=="object"&&(l=c,c=i.pop()),gA(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const u={...t,...l},{memoize:h,memoizeOptions:d=[],argsMemoize:f=Wg,argsMemoizeOptions:g=[],devModeChecks:m={}}=u,p=Vd(d),v=Vd(g),x=vA(i),b=h(function(){return s++,c.apply(null,arguments)},...p);let _=!0;const y=f(function(){o++;const A=Ud(x,arguments);if(process.env.NODE_ENV!=="production"){const{identityFunctionCheck:P,inputStabilityCheck:L}=yA(_,m);if(P.shouldRun&&P.run(c),L.shouldRun){const V=Ud(x,arguments);L.run({inputSelectorResults:A,inputSelectorResultsCopy:V},{memoize:h,memoizeOptions:p},arguments)}_&&(_=!1)}return a=b.apply(null,A),a},...v);return Object.assign(y,{resultFunc:c,memoizedResultFunc:b,dependencies:x,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:h,argsMemoize:f})}}function zg(r){return({dispatch:t,getState:n})=>i=>s=>typeof s=="function"?s(t,n,r):i(s)}var SA=zg(),AA=zg,wA=(...r)=>{const e=_A(...r);return(...t)=>{const n=e(...t),i=(s,...o)=>n(bn(s)?Hg(s):s,...o);return Object.assign(i,n),i}};wA(Wg);var EA=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ko:ko.apply(null,arguments)},IA=r=>r&&typeof r.match=="function";function ss(r,e){function t(...n){if(e){let i=e(...n);if(!i)throw new Error(process.env.NODE_ENV==="production"?Ke(0):"prepareAction did not return an object");return{type:r,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:r,payload:n[0]}}return t.toString=()=>`${r}`,t.type=r,t.match=n=>Ng(n)&&n.type===r,t}function TA(r){return typeof r=="function"&&"type"in r&&IA(r)}function RA(r){const e=r?`${r}`.split("/"):[],t=e[e.length-1]||"actionCreator";return`Detected an action creator with type "${r||"unknown"}" being dispatched. 
Make sure you're calling the action creator before dispatching, i.e. \`dispatch(${t}())\` instead of \`dispatch(${t})\`. This is necessary even if the action has no payload.`}function PA(r={}){if(process.env.NODE_ENV==="production")return()=>t=>n=>t(n);const{isActionCreator:e=TA}=r;return()=>t=>n=>(e(n)&&console.warn(RA(n.type)),t(n))}function Xg(r,e){let t=0;return{measureTime(n){const i=Date.now();try{return n()}finally{const s=Date.now();t+=s-i}},warnIfExceeded(){t>r&&console.warn(`${e} took ${t}ms, which is more than the warning threshold of ${r}ms. 
If your state or actions are very large, you may want to disable the middleware as it might cause too much of a slowdown in development mode. See https://redux-toolkit.js.org/api/getDefaultMiddleware for instructions.
It is disabled in production builds, so you don't need to worry about that.`)}}}var jg=class $i extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,$i.prototype)}static get[Symbol.species](){return $i}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new $i(...e[0].concat(this)):new $i(...e.concat(this))}};function zd(r){return Kr(r)?Ug(r,()=>{}):r}function Xd(r,e,t){if(r.has(e)){let i=r.get(e);return t.update&&(i=t.update(i,e,r),r.set(e,i)),i}if(!t.insert)throw new Error(process.env.NODE_ENV==="production"?Ke(10):"No insert provided for key not already in map");const n=t.insert(e,r);return r.set(e,n),n}function BA(r){return typeof r!="object"||r==null||Object.isFrozen(r)}function MA(r,e,t){const n=$g(r,e,t);return{detectMutations(){return Yg(r,e,n,t)}}}function $g(r,e=[],t,n="",i=new Set){const s={value:t};if(!r(t)&&!i.has(t)){i.add(t),s.children={};for(const o in t){const a=n?n+"."+o:o;e.length&&e.indexOf(a)!==-1||(s.children[o]=$g(r,e,t[o],a))}}return s}function Yg(r,e=[],t,n,i=!1,s=""){const o=t?t.value:void 0,a=o===n;if(i&&!a&&!Number.isNaN(n))return{wasMutated:!0,path:s};if(r(o)||r(n))return{wasMutated:!1};const l={};for(let u in t.children)l[u]=!0;for(let u in n)l[u]=!0;const c=e.length>0;for(let u in l){const h=s?s+"."+u:u;if(c&&e.some(g=>g instanceof RegExp?g.test(h):h===g))continue;const d=Yg(r,e,t.children[u],n[u],a,h);if(d.wasMutated)return d}return{wasMutated:!1}}function OA(r={}){if(process.env.NODE_ENV==="production")return()=>e=>t=>e(t);{let e=function(a,l,c,u){return JSON.stringify(a,t(l,u),c)},t=function(a,l){let c=[],u=[];return l||(l=function(h,d){return c[0]===d?"[Circular ~]":"[Circular ~."+u.slice(0,c.indexOf(d)).join(".")+"]"}),function(h,d){if(c.length>0){var f=c.indexOf(this);~f?c.splice(f+1):c.push(this),~f?u.splice(f,1/0,h):u.push(h),~c.indexOf(d)&&(d=l.call(this,h,d))}else c.push(d);return a==null?d:a.call(this,h,d)}},{isImmutable:n=BA,ignoredPaths:i,warnAfter:s=32}=r;const o=MA.bind(null,n,i);return({getState:a})=>{let l=a(),c=o(l),u;return h=>d=>{const f=Xg(s,"ImmutableStateInvariantMiddleware");f.measureTime(()=>{if(l=a(),u=c.detectMutations(),c=o(l),u.wasMutated)throw new Error(process.env.NODE_ENV==="production"?Ke(19):`A state mutation was detected between dispatches, in the path '${u.path||""}'.  This may cause incorrect behavior. (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)`)});const g=h(d);return f.measureTime(()=>{if(l=a(),u=c.detectMutations(),c=o(l),u.wasMutated)throw new Error(process.env.NODE_ENV==="production"?Ke(20):`A state mutation was detected inside a dispatch, in the path: ${u.path||""}. Take a look at the reducer(s) handling the action ${e(d)}. (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)`)}),f.warnIfExceeded(),g}}}}function Zg(r){const e=typeof r;return r==null||e==="string"||e==="boolean"||e==="number"||Array.isArray(r)||ms(r)}function Nc(r,e="",t=Zg,n,i=[],s){let o;if(!t(r))return{keyPath:e||"<root>",value:r};if(typeof r!="object"||r===null||s!=null&&s.has(r))return!1;const a=n!=null?n(r):Object.entries(r),l=i.length>0;for(const[c,u]of a){const h=e?e+"."+c:c;if(!(l&&i.some(f=>f instanceof RegExp?f.test(h):h===f))){if(!t(u))return{keyPath:h,value:u};if(typeof u=="object"&&(o=Nc(u,h,t,n,i,s),o))return o}}return s&&qg(r)&&s.add(r),!1}function qg(r){if(!Object.isFrozen(r))return!1;for(const e of Object.values(r))if(!(typeof e!="object"||e===null)&&!qg(e))return!1;return!0}function NA(r={}){if(process.env.NODE_ENV==="production")return()=>e=>t=>e(t);{const{isSerializable:e=Zg,getEntries:t,ignoredActions:n=[],ignoredActionPaths:i=["meta.arg","meta.baseQueryMeta"],ignoredPaths:s=[],warnAfter:o=32,ignoreState:a=!1,ignoreActions:l=!1,disableCache:c=!1}=r,u=!c&&WeakSet?new WeakSet:void 0;return h=>d=>f=>{if(!Ng(f))return d(f);const g=d(f),m=Xg(o,"SerializableStateInvariantMiddleware");return!l&&!(n.length&&n.indexOf(f.type)!==-1)&&m.measureTime(()=>{const p=Nc(f,"",e,t,i,u);if(p){const{keyPath:v,value:x}=p;console.error(`A non-serializable value was detected in an action, in the path: \`${v}\`. Value:`,x,`
Take a look at the logic that dispatched this action: `,f,`
(See https://redux.js.org/faq/actions#why-should-type-be-a-string-or-at-least-serializable-why-should-my-action-types-be-constants)`,`
(To allow non-serializable values see: https://redux-toolkit.js.org/usage/usage-guide#working-with-non-serializable-data)`)}}),a||(m.measureTime(()=>{const p=h.getState(),v=Nc(p,"",e,t,s,u);if(v){const{keyPath:x,value:b}=v;console.error(`A non-serializable value was detected in the state, in the path: \`${x}\`. Value:`,b,`
Take a look at the reducer(s) handling this action type: ${f.type}.
(See https://redux.js.org/faq/organizing-state#can-i-put-functions-promises-or-other-non-serializable-items-in-my-store-state)`)}}),m.warnIfExceeded()),g}}}function qs(r){return typeof r=="boolean"}var DA=()=>function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let o=new jg;if(t&&(qs(t)?o.push(SA):o.push(AA(t.extraArgument))),process.env.NODE_ENV!=="production"){if(n){let a={};qs(n)||(a=n),o.unshift(OA(a))}if(i){let a={};qs(i)||(a=i),o.push(NA(a))}if(s){let a={};qs(s)||(a=s),o.unshift(PA(a))}}return o},LA="RTK_autoBatch",Jg=r=>e=>{setTimeout(e,r)},FA=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Jg(10),kA=(r={type:"raf"})=>e=>(...t)=>{const n=e(...t);let i=!0,s=!1,o=!1;const a=new Set,l=r.type==="tick"?queueMicrotask:r.type==="raf"?FA:r.type==="callback"?r.queueNotification:Jg(r.timeout),c=()=>{o=!1,s&&(s=!1,a.forEach(u=>u()))};return Object.assign({},n,{subscribe(u){const h=()=>i&&u(),d=n.subscribe(h);return a.add(u),()=>{d(),a.delete(u)}},dispatch(u){var h;try{return i=!((h=u==null?void 0:u.meta)!=null&&h[LA]),s=!i,s&&(o||(o=!0,l(c))),n.dispatch(u)}finally{i=!0}}})},GA=r=>function(t){const{autoBatch:n=!0}=t??{};let i=new jg(r);return n&&i.push(kA(typeof n=="object"?n:void 0)),i},sn=process.env.NODE_ENV==="production";function HA(r){const e=DA(),{reducer:t=void 0,middleware:n,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=r||{};let a;if(typeof t=="function")a=t;else if(ms(t))a=eA(t);else throw new Error(process.env.NODE_ENV==="production"?Ke(1):"`reducer` is a required argument, and must be a function or an object of functions that can be passed to combineReducers");if(!sn&&n&&typeof n!="function")throw new Error(process.env.NODE_ENV==="production"?Ke(2):"`middleware` field must be a callback");let l;if(typeof n=="function"){if(l=n(e),!sn&&!Array.isArray(l))throw new Error(process.env.NODE_ENV==="production"?Ke(3):"when using a middleware builder function, an array of middleware must be returned")}else l=e();if(!sn&&l.some(g=>typeof g!="function"))throw new Error(process.env.NODE_ENV==="production"?Ke(4):"each middleware provided to configureStore must be a function");let c=ko;i&&(c=EA({trace:!sn,...typeof i=="object"&&i}));const u=tA(...l),h=GA(u);if(!sn&&o&&typeof o!="function")throw new Error(process.env.NODE_ENV==="production"?Ke(5):"`enhancers` field must be a callback");let d=typeof o=="function"?o(h):h();if(!sn&&!Array.isArray(d))throw new Error(process.env.NODE_ENV==="production"?Ke(6):"`enhancers` callback must return an array");if(!sn&&d.some(g=>typeof g!="function"))throw new Error(process.env.NODE_ENV==="production"?Ke(7):"each enhancer provided to configureStore must be a function");!sn&&l.length&&!d.includes(u)&&console.error("middlewares were provided, but middleware enhancer was not included in final enhancers - make sure to call `getDefaultEnhancers`");const f=c(...d);return Og(a,s,f)}function Qg(r){const e={},t=[];let n;const i={addCase(s,o){if(process.env.NODE_ENV!=="production"){if(t.length>0)throw new Error(process.env.NODE_ENV==="production"?Ke(26):"`builder.addCase` should only be called before calling `builder.addMatcher`");if(n)throw new Error(process.env.NODE_ENV==="production"?Ke(27):"`builder.addCase` should only be called before calling `builder.addDefaultCase`")}const a=typeof s=="string"?s:s.type;if(!a)throw new Error(process.env.NODE_ENV==="production"?Ke(28):"`builder.addCase` cannot be called with an empty action type");if(a in e)throw new Error(process.env.NODE_ENV==="production"?Ke(29):`\`builder.addCase\` cannot be called with two reducers for the same action type '${a}'`);return e[a]=o,i},addMatcher(s,o){if(process.env.NODE_ENV!=="production"&&n)throw new Error(process.env.NODE_ENV==="production"?Ke(30):"`builder.addMatcher` should only be called before calling `builder.addDefaultCase`");return t.push({matcher:s,reducer:o}),i},addDefaultCase(s){if(process.env.NODE_ENV!=="production"&&n)throw new Error(process.env.NODE_ENV==="production"?Ke(31):"`builder.addDefaultCase` can only be called once");return n=s,i}};return r(i),[e,t,n]}function VA(r){return typeof r=="function"}function UA(r,e){if(process.env.NODE_ENV!=="production"&&typeof e=="object")throw new Error(process.env.NODE_ENV==="production"?Ke(8):"The object notation for `createReducer` has been removed. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createReducer");let[t,n,i]=Qg(e),s;if(VA(r))s=()=>zd(r());else{const a=zd(r);s=()=>a}function o(a=s(),l){let c=[t[l.type],...n.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[i]),c.reduce((u,h)=>{if(h)if(bn(u)){const f=h(u,l);return f===void 0?u:f}else{if(Kr(u))return Ug(u,d=>h(d,l));{const d=h(u,l);if(d===void 0){if(u===null)return u;throw new Error(process.env.NODE_ENV==="production"?Ke(9):"A case reducer on a non-draftable value must not return undefined")}return d}}return u},a)}return o.getInitialState=s,o}var WA=Symbol.for("rtk-slice-createasyncthunk");function zA(r,e){return`${r}/${e}`}function XA({creators:r}={}){var t;const e=(t=r==null?void 0:r.asyncThunk)==null?void 0:t[WA];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(process.env.NODE_ENV==="production"?Ke(11):"`name` is a required option for createSlice");typeof process<"u"&&process.env.NODE_ENV==="development"&&i.initialState===void 0&&console.error("You must provide an `initialState` value that is not `undefined`. You may have misspelled `initialState`");const a=(typeof i.reducers=="function"?i.reducers(YA()):i.reducers)||{},l=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(p,v){const x=typeof p=="string"?p:p.type;if(!x)throw new Error(process.env.NODE_ENV==="production"?Ke(12):"`context.addCase` cannot be called with an empty action type");if(x in c.sliceCaseReducersByType)throw new Error(process.env.NODE_ENV==="production"?Ke(13):"`context.addCase` cannot be called with two reducers for the same action type: "+x);return c.sliceCaseReducersByType[x]=v,u},addMatcher(p,v){return c.sliceMatchers.push({matcher:p,reducer:v}),u},exposeAction(p,v){return c.actionCreators[p]=v,u},exposeCaseReducer(p,v){return c.sliceCaseReducersByName[p]=v,u}};l.forEach(p=>{const v=a[p],x={reducerName:p,type:zA(s,p),createNotation:typeof i.reducers=="function"};qA(v)?QA(x,v,u,e):ZA(x,v,u)});function h(){if(process.env.NODE_ENV!=="production"&&typeof i.extraReducers=="object")throw new Error(process.env.NODE_ENV==="production"?Ke(14):"The object notation for `createSlice.extraReducers` has been removed. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createSlice");const[p={},v=[],x=void 0]=typeof i.extraReducers=="function"?Qg(i.extraReducers):[i.extraReducers],b={...p,...c.sliceCaseReducersByType};return UA(i.initialState,_=>{for(let y in b)_.addCase(y,b[y]);for(let y of c.sliceMatchers)_.addMatcher(y.matcher,y.reducer);for(let y of v)_.addMatcher(y.matcher,y.reducer);x&&_.addDefaultCase(x)})}const d=p=>p,f=new WeakMap;let g;const m={name:s,reducerPath:o,reducer(p,v){return g||(g=h()),g(p,v)},actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState(){return g||(g=h()),g.getInitialState()},getSelectors(p=d){const v=Xd(f,this,{insert:()=>new WeakMap});return Xd(v,p,{insert:()=>{const x={};for(const[b,_]of Object.entries(i.selectors??{}))x[b]=jA(this,_,p,this!==m);return x}})},selectSlice(p){let v=p[this.reducerPath];if(typeof v>"u"){if(this!==m)v=this.getInitialState();else if(process.env.NODE_ENV!=="production")throw new Error(process.env.NODE_ENV==="production"?Ke(15):"selectSlice returned undefined for an uninjected slice reducer")}return v},get selectors(){return this.getSelectors(this.selectSlice)},injectInto(p,{reducerPath:v,...x}={}){const b=v??this.reducerPath;return p.inject({reducerPath:b,reducer:this.reducer},x),{...this,reducerPath:b}}};return m}}function jA(r,e,t,n){function i(s,...o){let a=t.call(r,s);if(typeof a>"u"){if(n)a=r.getInitialState();else if(process.env.NODE_ENV!=="production")throw new Error(process.env.NODE_ENV==="production"?Ke(16):"selectState returned undefined for an uninjected slice reducer")}return e(a,...o)}return i.unwrapped=e,i}var $A=XA();function YA(){function r(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return r.withTypes=()=>r,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:r}}function ZA({type:r,reducerName:e,createNotation:t},n,i){let s,o;if("reducer"in n){if(t&&!JA(n))throw new Error(process.env.NODE_ENV==="production"?Ke(17):"Please use the `create.preparedReducer` notation for prepared action creators with the `create` notation.");s=n.reducer,o=n.prepare}else s=n;i.addCase(r,s).exposeCaseReducer(e,s).exposeAction(e,o?ss(r,o):ss(r))}function qA(r){return r._reducerDefinitionType==="asyncThunk"}function JA(r){return r._reducerDefinitionType==="reducerWithPrepare"}function QA({type:r,reducerName:e},t,n,i){if(!i)throw new Error(process.env.NODE_ENV==="production"?Ke(18):"Cannot use `create.asyncThunk` in the built-in `createSlice`. Use `buildCreateSlice({ creators: { asyncThunk: asyncThunkCreator } })` to create a customised version of `createSlice`.");const{payloadCreator:s,fulfilled:o,pending:a,rejected:l,settled:c,options:u}=t,h=i(r,s,u);n.exposeAction(e,h),o&&n.addCase(h.fulfilled,o),a&&n.addCase(h.pending,a),l&&n.addCase(h.rejected,l),c&&n.addMatcher(h.settled,c),n.exposeCaseReducer(e,{fulfilled:o||Js,pending:a||Js,rejected:l||Js,settled:c||Js})}function Js(){}var du="listenerMiddleware";ss(`${du}/add`);ss(`${du}/removeAll`);ss(`${du}/remove`);function Ke(r){return`Minified Redux Toolkit error #${r}; visit https://redux-toolkit.js.org/Errors?code=${r} for the full message or use the non-minified dev environment for full errors. `}const Kg=r=>{const{cellCount:e,cellSizePx:t,containerSizePx:n,worldOffsetPx:i}=r,s={worldOffsetPx:i,worldRenderSizePx:e*t,firstIdxToRender:0,lastIdxToRender:e-1,numIdxsToRender:e,offsetForRenderingIdxsOnly:0,subsetRenderSizePx:e*t};if(s.worldRenderSizePx>n){const o=i%t!==0,a=(i+n)%t!==0;let l=Math.ceil(i/t),c=Math.floor(n/t);o&&l-1>=0&&(c+=1,l-=1),a&&l+c+1<e&&(c+=1),c=c<1&&e>0?1:c,s.offsetForRenderingIdxsOnly=-(i%t),s.subsetRenderSizePx=t*c,s.firstIdxToRender=l,s.lastIdxToRender=l+c-1,s.numIdxsToRender=c}return s},Qs=r=>{const{cellCount:e,cellSizePx:t,containerSizePx:n,worldOffsetPx:i}=r;let o=e*t-n;o=o>=0?o:0,r.worldOffsetPx=i<0?0:i>o?o:i;const a=Kg(r);r.worldOffsetPx=a.worldOffsetPx,r.worldRenderSizePx=a.worldRenderSizePx,r.firstIdxToRender=a.firstIdxToRender,r.lastIdxToRender=a.lastIdxToRender,r.numIdxsToRender=a.numIdxsToRender,r.offsetForRenderingIdxsOnly=a.offsetForRenderingIdxsOnly,r.subsetRenderSizePx=a.subsetRenderSizePx},KA={initializeNewVirtualization:(r,e)=>{const{virtualizationId:t,virtualization:n}=e.payload,i={...n,...Kg(n)};r[t]=i},setCellCount:(r,e)=>{const{virtualizationId:t,cellCount:n}=e.payload;r[t].cellCount!==n&&(r[t].cellCount=n,Qs(r[t]))},setCellSize:(r,e)=>{const{cellSizePx:t,virtualizationId:n}=e.payload;r[n].cellSizePx!==t&&(r[n].worldOffsetPx=r[n].worldOffsetPx/r[n].cellSizePx*t,r[n].cellSizePx=t,Qs(r[n]))},setContainerSize:(r,e)=>{const{virtualizationId:t,containerSizePx:n}=e.payload;r[t].containerSizePx!==n&&(r[t].containerSizePx=n,Qs(r[t]))},setWorldOffset:(r,e)=>{const{virtualizationId:t,worldOffsetPx:n}=e.payload;r[t].worldOffsetPx!==n&&(r[t].worldOffsetPx=n,Qs(r[t]))},setHoveredOffset:(r,e)=>{const{virtualizationId:t,mouseContainerOffsetPx:n}=e.payload;if(n===void 0)r[t].hoveredEvent=void 0;else{const{offsetForRenderingIdxsOnly:i,firstIdxToRender:s,lastIdxToRender:o,cellSizePx:a,hoveredEvent:l}=r[t],c=n-i,u=Math.floor(c/a),h=s+u;if(h>o)l!==void 0&&(r[t].hoveredEvent=void 0);else if(!l||l.cellIdx!==h){const d=u*a+i;r[t].hoveredEvent={cellIdx:h,containerOffsetCellStartPx:d,containerOffsetCellMiddlePx:d+a/2,containerOffsetCellEndPx:d+a}}}}},em=$A({name:"alignment-virtualization",initialState:{},reducers:KA}),{initializeNewVirtualization:ew,setCellCount:tw,setCellSize:rw,setContainerSize:nw,setWorldOffset:iw,setHoveredOffset:sw}=em.actions;var Ks={exports:{}},wl={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jd;function ow(){if(jd)return wl;jd=1;var r=w;function e(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var t=typeof Object.is=="function"?Object.is:e,n=r.useSyncExternalStore,i=r.useRef,s=r.useEffect,o=r.useMemo,a=r.useDebugValue;return wl.useSyncExternalStoreWithSelector=function(l,c,u,h,d){var f=i(null);if(f.current===null){var g={hasValue:!1,value:null};f.current=g}else g=f.current;f=o(function(){function p(y){if(!v){if(v=!0,x=y,y=h(y),d!==void 0&&g.hasValue){var I=g.value;if(d(I,y))return b=I}return b=y}if(I=b,t(x,y))return I;var A=h(y);return d!==void 0&&d(I,A)?I:(x=y,b=A)}var v=!1,x,b,_=u===void 0?null:u;return[function(){return p(c())},_===null?void 0:function(){return p(_())}]},[c,u,h,d]);var m=n(l,f[0],f[1]);return s(function(){g.hasValue=!0,g.value=m},[m]),a(m),m},wl}var El={};/**
 * @license React
 * use-sync-external-store-with-selector.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $d;function aw(){return $d||($d=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var r=w;function e(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var t=typeof Object.is=="function"?Object.is:e,n=r.useSyncExternalStore,i=r.useRef,s=r.useEffect,o=r.useMemo,a=r.useDebugValue;function l(c,u,h,d,f){var g=i(null),m;g.current===null?(m={hasValue:!1,value:null},g.current=m):m=g.current;var p=o(function(){var _=!1,y,I,A=function(U){if(!_){_=!0,y=U;var N=d(U);if(f!==void 0&&m.hasValue){var M=m.value;if(f(M,N))return I=M,M}return I=N,N}var k=y,O=I;if(t(k,U))return O;var S=d(U);return f!==void 0&&f(O,S)?O:(y=U,I=S,S)},P=h===void 0?null:h,L=function(){return A(u())},V=P===null?void 0:function(){return A(P())};return[L,V]},[u,h,d,f]),v=p[0],x=p[1],b=n(c,v,x);return s(function(){m.hasValue=!0,m.value=b},[b]),a(b),b}El.useSyncExternalStoreWithSelector=l,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),El}var Yd;function lw(){return Yd||(Yd=1,process.env.NODE_ENV==="production"?Ks.exports=ow():Ks.exports=aw()),Ks.exports}var cw=lw(),qt="default"in be?be.default:be,Zd=Symbol.for("react-redux-context"),qd=typeof globalThis<"u"?globalThis:{};function uw(){if(!qt.createContext)return{};const r=qd[Zd]??(qd[Zd]=new Map);let e=r.get(qt.createContext);return e||(e=qt.createContext(null),process.env.NODE_ENV!=="production"&&(e.displayName="ReactRedux"),r.set(qt.createContext,e)),e}var xn=uw(),hw=()=>{throw new Error("uSES not initialized!")};function fu(r=xn){return function(){const t=qt.useContext(r);if(process.env.NODE_ENV!=="production"&&!t)throw new Error("could not find react-redux context value; please ensure the component is wrapped in a <Provider>");return t}}var tm=fu(),rm=hw,dw=r=>{rm=r},fw=(r,e)=>r===e;function pw(r=xn){const e=r===xn?tm:fu(r);return function(n,i={}){const{equalityFn:s=fw,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i;if(process.env.NODE_ENV!=="production"){if(!n)throw new Error("You must pass a selector to useSelector");if(typeof n!="function")throw new Error("You must pass a function as a selector to useSelector");if(typeof s!="function")throw new Error("You must pass a function as an equality function to useSelector")}const{store:a,subscription:l,getServerState:c,stabilityCheck:u,identityFunctionCheck:h}=e(),d=qt.useRef(!0),f=qt.useCallback({[n.name](m){const p=n(m);if(process.env.NODE_ENV!=="production"){const{identityFunctionCheck:v,stabilityCheck:x}={stabilityCheck:u,identityFunctionCheck:h,...o};if(x==="always"||x==="once"&&d.current){const b=n(m);if(!s(p,b)){let _;try{throw new Error}catch(y){({stack:_}=y)}console.warn("Selector "+(n.name||"unknown")+` returned a different result when called with the same parameters. This can lead to unnecessary rerenders.
Selectors that return a new reference (such as an object or an array) should be memoized: https://redux.js.org/usage/deriving-data-selectors#optimizing-selectors-with-memoization`,{state:m,selected:p,selected2:b,stack:_})}}if((v==="always"||v==="once"&&d.current)&&p===m){let b;try{throw new Error}catch(_){({stack:b}=_)}console.warn("Selector "+(n.name||"unknown")+` returned the root state when called. This can lead to unnecessary rerenders.
Selectors that return the entire state are almost certainly a mistake, as they will cause a rerender whenever *anything* in state changes.`,{stack:b})}d.current&&(d.current=!1)}return p}}[n.name],[n,u,o.stabilityCheck]),g=rm(l.addNestedSub,a.getState,c||a.getState,f,s);return qt.useDebugValue(g),g}}var gw=pw();function mw(r){r()}function vw(){let r=null,e=null;return{clear(){r=null,e=null},notify(){mw(()=>{let t=r;for(;t;)t.callback(),t=t.next})},get(){let t=[],n=r;for(;n;)t.push(n),n=n.next;return t},subscribe(t){let n=!0,i=e={callback:t,next:null,prev:e};return i.prev?i.prev.next=i:r=i,function(){!n||r===null||(n=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:r=i.next)}}}}var Jd={notify(){},get:()=>[]};function yw(r,e){let t,n=Jd,i=0,s=!1;function o(m){u();const p=n.subscribe(m);let v=!1;return()=>{v||(v=!0,p(),h())}}function a(){n.notify()}function l(){g.onStateChange&&g.onStateChange()}function c(){return s}function u(){i++,t||(t=r.subscribe(l),n=vw())}function h(){i--,t&&i===0&&(t(),t=void 0,n.clear(),n=Jd)}function d(){s||(s=!0,u())}function f(){s&&(s=!1,h())}const g={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:d,tryUnsubscribe:f,getListeners:()=>n};return g}var bw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xw=bw?qt.useLayoutEffect:qt.useEffect;function Cw({store:r,context:e,children:t,serverState:n,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=qt.useMemo(()=>{const c=yw(r);return{store:r,subscription:c,getServerState:n?()=>n:void 0,stabilityCheck:i,identityFunctionCheck:s}},[r,n,i,s]),a=qt.useMemo(()=>r.getState(),[r]);xw(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==r.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||xn;return qt.createElement(l.Provider,{value:o},t)}var _w=Cw;function nm(r=xn){const e=r===xn?tm:fu(r);return function(){const{store:n}=e();return n}}var Sw=nm();function Aw(r=xn){const e=r===xn?Sw:nm(r);return function(){return e().dispatch}}var ww=Aw();dw(cw.useSyncExternalStoreWithSelector);const im=HA({reducer:{virtualizations:em.reducer}}),sm=()=>ww(),om=gw;function Vo(r,e,t){const n=om(h=>r!=null&&r.virtualizationId?h.virtualizations[r.virtualizationId]:void 0),i=(r==null?void 0:r.role)===St.Controller,s=sm();w.useEffect(()=>{i&&t!==void 0&&(n&&n.controllerContainerId!==e&&console.warn(`Development possibly misconfigured - attempt to initialize multiple 
        "controller" virtualizations. There must only be a single controller for each
        virtualization. Updating to the last created controller, but this may be an
        error.`),(!n||n.controllerContainerId!==e)&&s(ew({virtualizationId:r==null?void 0:r.virtualizationId,virtualization:{cellCount:r.cellCount,controllerContainerId:e,containerSizePx:t,cellSizePx:r.cellSizePx,worldOffsetPx:0}})))},[t,e,s,i,r==null?void 0:r.virtualizationId,r==null?void 0:r.cellCount,r==null?void 0:r.cellSizePx,n]);const o=w.useCallback(h=>{r!=null&&r.virtualizationId&&s(iw({virtualizationId:r.virtualizationId,worldOffsetPx:h}))},[s,r==null?void 0:r.virtualizationId]),a=w.useCallback(h=>{r!=null&&r.virtualizationId&&s(sw({virtualizationId:r.virtualizationId,mouseContainerOffsetPx:h}))},[s,r==null?void 0:r.virtualizationId]),l=w.useCallback(h=>{r!=null&&r.virtualizationId&&s(nw({virtualizationId:r.virtualizationId,containerSizePx:h}))},[s,r==null?void 0:r.virtualizationId]),c=w.useCallback(h=>{r!=null&&r.virtualizationId&&s(rw({virtualizationId:r.virtualizationId,cellSizePx:h}))},[s,r==null?void 0:r.virtualizationId]),u=w.useCallback(h=>{r!=null&&r.virtualizationId&&s(tw({virtualizationId:r.virtualizationId,cellCount:h}))},[s,r==null?void 0:r.virtualizationId]);return n?i?{...n,setWorldOffsetPx:o,setHoveredOffsetPx:a,updateContainerSizePx:l,updateCellSizePx:c,updateCellCount:u}:{...n,setWorldOffsetPx:o,setHoveredOffsetPx:a,updateContainerSizePx:void 0,updateCellSizePx:void 0,updateCellCount:void 0}:void 0}function Dc(r){var M,k;const{visible:e,direction:t,draggerFixedDimSize:n=10,draggerVarDimMinSize:i=20,oppositeScrollbarFixedDimSize:s,scrollbarMoved:o,worldSize:a,worldOffset:l}=r,c=w.useRef(null),[u,h]=Mg(c),d=t==="horizontal"?u:h,[f,g]=w.useState(!1),[m,p]=w.useState(-1),[v,x]=w.useState(-1),b=t==="horizontal"?(M=c.current)==null?void 0:M.getBoundingClientRect().left:(k=c.current)==null?void 0:k.getBoundingClientRect().top,_=w.useMemo(()=>b===void 0?{draggerHolderSize:0,draggerHolderStart:0}:{draggerHolderSize:d-s,draggerHolderStart:b},[b,d,s]),y=w.useMemo(()=>{const O=Math.max(i,_.draggerHolderSize*(_.draggerHolderSize/a)),S=_.draggerHolderSize-O,C=(a-(_.draggerHolderSize+s))/S;return{draggerSizePx:O,draggerOffsetPx:l/C,worldToScrollablePixelsRatio:C,numScrollablePx:S}},[i,_.draggerHolderSize,s,l,a]),I=w.useCallback(O=>O*y.worldToScrollablePixelsRatio,[y.worldToScrollablePixelsRatio]),A=w.useCallback(O=>{if(f&&m!==-1){O.stopPropagation(),O.preventDefault();const E=(t==="horizontal"?O.pageX:O.pageY)-m+v;o(E<=0?0:E>=y.numScrollablePx?I(y.numScrollablePx):I(E))}},[t,f,m,v,I,o,y.numScrollablePx]),P=w.useCallback(O=>{O.stopPropagation(),O.preventDefault(),g(!0),p(t==="horizontal"?O.pageX:O.pageY),x(O.currentTarget.getBoundingClientRect()[t==="horizontal"?"left":"top"]-_.draggerHolderStart)},[t,_.draggerHolderStart]),L=w.useCallback(O=>{f&&(O.stopPropagation(),O.preventDefault(),g(!1),p(-1),x(-1))},[f]),V=w.useMemo(()=>H.jsx("div",{className:`${t}-scrollbar-fullpage-drag`,style:{display:f?"block":"none"},onMouseDown:L,onMouseUp:L,onMouseOut:L,onMouseMove:A}),[t,f,L,A]),U=w.useMemo(()=>H.jsx("div",{className:`${t}-scrollbar`,style:t==="horizontal"?{left:y.draggerOffsetPx,width:y.draggerSizePx,height:n}:{top:y.draggerOffsetPx,height:y.draggerSizePx,width:n},onMouseDown:P}),[t,n,y.draggerOffsetPx,y.draggerSizePx,P]),N=w.useCallback(O=>{const S=O.currentTarget.getBoundingClientRect(),E=t==="horizontal"?O.clientX-S.left:O.clientY-S.top,C=I(E-y.draggerSizePx/2);o(C)},[t,I,o,y.draggerSizePx]);return H.jsxs(H.Fragment,{children:[H.jsx("div",{ref:c,className:`${t}-scrollbar-holder`,style:{...t==="horizontal"?{height:n}:{width:n}},onMouseDown:N,children:e?U:void 0}),V]})}function am(r){return gu({getContent:r.getContentForRows,params:{verticalParams:r.verticalParams}})}function vs(r){return gu({getContent:r.getContentForColumns,params:{horizontalParams:r.horizontalParams}})}function pu(r){return gu({getContent:r.getMatrixContent,params:{horizontalParams:r.horizontalParams,verticalParams:r.verticalParams}})}function gu(r){const{getContent:e}=r,{horizontalParams:t,verticalParams:n}=r.params,i=12,s=25,o=w.useRef(null),[a,l]=w.useState(!1),[c,u]=w.useState(void 0),[h]=w.useState(Hr()),d=Vo(t,h,c==null?void 0:c.width),f=Vo(n,h,c==null?void 0:c.height),g=d==null?void 0:d.updateContainerSizePx,m=f==null?void 0:f.updateContainerSizePx,p=t==null?void 0:t.containerBoundsUpdated,v=n==null?void 0:n.containerBoundsUpdated,x=w.useCallback($=>{u($),g&&g($.width),m&&m($.height),p&&p($),v&&v($)},[p,v,g,m]);w.useEffect(()=>{ue.RENDER_OPTIONS.hello=!1,Me.defaultOptions.scaleMode=cr.NEAREST},[]);const b=d==null?void 0:d.updateCellSizePx,_=f==null?void 0:f.updateCellSizePx;w.useEffect(()=>{(t==null?void 0:t.cellSizePx)!==void 0&&b&&b(t.cellSizePx),(n==null?void 0:n.cellSizePx)!==void 0&&_&&_(n==null?void 0:n.cellSizePx)},[b,_,t==null?void 0:t.cellSizePx,n==null?void 0:n.cellSizePx]);const y=d==null?void 0:d.updateCellCount,I=f==null?void 0:f.updateCellCount;w.useEffect(()=>{y!==void 0&&(t!=null&&t.cellCount)&&y(t.cellCount),I!==void 0&&(n!=null&&n.cellCount)&&I(n.cellCount)},[y,I,t==null?void 0:t.cellCount,n==null?void 0:n.cellCount]);const A=!f||(n==null?void 0:n.scrollbar)===at.NeverOn?!0:f.containerSizePx>=f.worldRenderSizePx,P=!d||(t==null?void 0:t.scrollbar)===at.NeverOn?!0:d.containerSizePx>=d.worldRenderSizePx,L=(!n||n&&f)&&(!t||t&&d),V=w.useMemo(()=>{const $=(d==null?void 0:d.firstIdxToRender)===void 0?void 0:{firstColIdxToRender:d.firstIdxToRender,lastColIdxToRender:d.lastIdxToRender,renderWidthPx:d.subsetRenderSizePx,renderShiftLeftPx:d.offsetForRenderingIdxsOnly,worldWidthPx:d.worldRenderSizePx,worldShiftLeftPx:d.worldOffsetPx},q=(f==null?void 0:f.firstIdxToRender)===void 0?void 0:{firstRowIdxToRender:f.firstIdxToRender,lastRowIdxToRender:f.lastIdxToRender,renderHeightPx:f.subsetRenderSizePx,renderShiftTopPx:f.offsetForRenderingIdxsOnly,worldHeightPx:f.worldRenderSizePx,worldShiftTopPx:f.worldOffsetPx};return $&&q?e({...$,...q}):$?e($):q?e(q):H.jsx("div",{children:"uninitialized?"})},[e,d==null?void 0:d.firstIdxToRender,d==null?void 0:d.lastIdxToRender,d==null?void 0:d.subsetRenderSizePx,d==null?void 0:d.offsetForRenderingIdxsOnly,d==null?void 0:d.worldRenderSizePx,d==null?void 0:d.worldOffsetPx,f==null?void 0:f.firstIdxToRender,f==null?void 0:f.lastIdxToRender,f==null?void 0:f.subsetRenderSizePx,f==null?void 0:f.offsetForRenderingIdxsOnly,f==null?void 0:f.worldRenderSizePx,f==null?void 0:f.worldOffsetPx]),U=f==null?void 0:f.setWorldOffsetPx,N=w.useMemo(()=>A||!U?void 0:H.jsx(Dc,{direction:"vertical",visible:(n==null?void 0:n.scrollbar)===at.AlwaysOnWhenOverflowed||(n==null?void 0:n.scrollbar)===at.OnHoverWhenOverflowed&&a,oppositeScrollbarFixedDimSize:P?0:i,draggerFixedDimSize:i,draggerVarDimMinSize:s,worldSize:f.worldRenderSizePx,worldOffset:f.worldOffsetPx,scrollbarMoved:$=>{U($)}}),[P,A,a,n==null?void 0:n.scrollbar,U,f==null?void 0:f.worldRenderSizePx,f==null?void 0:f.worldOffsetPx]),M=d==null?void 0:d.setWorldOffsetPx,k=w.useMemo(()=>P||!M?void 0:H.jsx(Dc,{direction:"horizontal",visible:(t==null?void 0:t.scrollbar)===at.AlwaysOnWhenOverflowed||(t==null?void 0:t.scrollbar)===at.OnHoverWhenOverflowed&&a,oppositeScrollbarFixedDimSize:A?0:i,draggerFixedDimSize:i,draggerVarDimMinSize:s,worldSize:d.worldRenderSizePx,worldOffset:d.worldOffsetPx,scrollbarMoved:$=>{M($)}}),[P,A,a,t==null?void 0:t.scrollbar,M,d==null?void 0:d.worldRenderSizePx,d==null?void 0:d.worldOffsetPx]),O=w.useCallback($=>{$.deltaX!==0&&M&&M(d.worldOffsetPx+$.deltaX),$.deltaY!==0&&U&&U(f.worldOffsetPx+$.deltaY)},[M,U,d==null?void 0:d.worldOffsetPx,f==null?void 0:f.worldOffsetPx]),S=d==null?void 0:d.setHoveredOffsetPx,E=f==null?void 0:f.setHoveredOffsetPx,C=w.useCallback($=>{const q=$.currentTarget.getBoundingClientRect(),oe=$.clientX-q.left<0?0:$.clientX-q.left,te=$.clientY-q.top<0?0:$.clientY-q.top;S&&S(oe),E&&E(te)},[S,E]),B=w.useCallback(()=>{S&&S(void 0),E&&E(void 0)},[S,E]),T=12,R=w.useMemo(()=>{if(!c)return;const $=(f==null?void 0:f.hoveredEvent)&&((n==null?void 0:n.hoverTracker)==="start"||(n==null?void 0:n.hoverTracker)==="both"),q=(f==null?void 0:f.hoveredEvent)&&((n==null?void 0:n.hoverTracker)==="end"||(n==null?void 0:n.hoverTracker)==="both"),oe=(d==null?void 0:d.hoveredEvent)&&((t==null?void 0:t.hoverTracker)==="start"||(t==null?void 0:t.hoverTracker)==="both"),te=(d==null?void 0:d.hoveredEvent)&&((t==null?void 0:t.hoverTracker)==="end"||(t==null?void 0:t.hoverTracker)==="both");return H.jsxs(H.Fragment,{children:[n!=null&&n.hoverTracker?H.jsxs(w.Fragment,{children:[H.jsx("div",{className:"hover-tracker-y triangle-right",style:{left:c.getLiveLeft()-T,top:c.getLiveTop()+(f!=null&&f.hoveredEvent?f.hoveredEvent.containerOffsetCellMiddlePx:0)-T/2,display:$?"block":"none"}}),H.jsx("div",{className:"hover-tracker-y triangle-left",style:{left:c.getLiveLeft()+c.width,top:c.getLiveTop()+(f!=null&&f.hoveredEvent?f.hoveredEvent.containerOffsetCellMiddlePx:0)-T/2,display:q?"block":"none"}})]},"vert"):void 0,t!=null&&t.hoverTracker?H.jsxs(w.Fragment,{children:[H.jsx("div",{className:"hover-tracker-x triangle-down",style:{top:c.getLiveTop()-T,left:c.getLiveLeft()+(d!=null&&d.hoveredEvent?d.hoveredEvent.containerOffsetCellMiddlePx:0)-T/2,display:oe?"block":"none"}}),H.jsx("div",{className:"hover-tracker-x triangle-up",style:{top:c.getLiveTop()+c.height,left:c.getLiveLeft()+(d!=null&&d.hoveredEvent?d.hoveredEvent.containerOffsetCellMiddlePx:0)-T/2,display:te?"block":"none"}})]},"horiz"):void 0]})},[c,t==null?void 0:t.hoverTracker,d==null?void 0:d.hoveredEvent,n==null?void 0:n.hoverTracker,f==null?void 0:f.hoveredEvent]),[D,G,W,j]=w.useMemo(()=>{const $=d!=null&&d.worldOffsetPx?"17px 0 16px -16px rgba(0, 0, 0, 0.4) inset":void 0,q=f!=null&&f.worldOffsetPx?"0 17px 16px -16px rgba(0, 0, 0, 0.4) inset":void 0,oe=!(f!=null&&f.worldRenderSizePx)||f.worldRenderSizePx<=f.worldOffsetPx+f.containerSizePx?void 0:"0 -17px 16px -16px rgba(0, 0, 0, 0.4) inset",te=!(d!=null&&d.worldRenderSizePx)||d.worldRenderSizePx<=d.worldOffsetPx+d.containerSizePx?void 0:"-17px 0 16px -16px rgba(0, 0, 0, 0.4) inset";return[$,q,oe,te]},[d==null?void 0:d.worldOffsetPx,d==null?void 0:d.worldRenderSizePx,d==null?void 0:d.containerSizePx,f==null?void 0:f.worldOffsetPx,f==null?void 0:f.worldRenderSizePx,f==null?void 0:f.containerSizePx]),Y=w.useMemo(()=>H.jsxs(H.Fragment,{children:[H.jsxs("div",{className:"av2-virtualized-matrix",ref:o,style:{overflowX:t!=null&&t.overflowVisible?"visible":"clip",overflowY:n!=null&&n.overflowVisible?"visible":"clip"},children:[D?H.jsx("div",{className:"scrolled-indicator left",style:{boxShadow:D,...t==null?void 0:t.startScrolledIndicatorStyleAttr}}):void 0,j?H.jsx("div",{className:"scrolled-indicator right",style:{boxShadow:j,...t==null?void 0:t.endScrolledIndicatorStyleAttr}}):void 0,G?H.jsx("div",{className:"scrolled-indicator top",style:{boxShadow:G,...n==null?void 0:n.startScrolledIndicatorStyleAttr}}):void 0,W?H.jsx("div",{className:"scrolled-indicator bottom",style:{boxShadow:W,...n==null?void 0:n.endScrolledIndicatorStyleAttr}}):void 0,!L||!o?void 0:H.jsxs("div",{className:"av2-wheel-scroller",onMouseOut:B,onMouseMove:C,onWheel:O,children:[R,H.jsx("div",{className:"av2-data",style:{top:(f==null?void 0:f.worldOffsetPx)!==void 0?(n==null?void 0:n.virtualizationStrategy)===Ut.ShiftOnlyFullyRendered?-f.worldOffsetPx:(n==null?void 0:n.virtualizationStrategy)===Ut.Virtualize?f.offsetForRenderingIdxsOnly:void 0:void 0,left:(d==null?void 0:d.worldOffsetPx)!==void 0?(t==null?void 0:t.virtualizationStrategy)===Ut.ShiftOnlyFullyRendered?-d.worldOffsetPx:(t==null?void 0:t.virtualizationStrategy)===Ut.Virtualize?d.offsetForRenderingIdxsOnly:void 0:void 0},children:V})]})]}),N,k]}),[V,C,B,O,d==null?void 0:d.offsetForRenderingIdxsOnly,d==null?void 0:d.worldOffsetPx,t==null?void 0:t.overflowVisible,t==null?void 0:t.virtualizationStrategy,k,L,R,N,n==null?void 0:n.overflowVisible,n==null?void 0:n.virtualizationStrategy,f==null?void 0:f.offsetForRenderingIdxsOnly,f==null?void 0:f.worldOffsetPx,D,G,W,j,t==null?void 0:t.startScrolledIndicatorStyleAttr,t==null?void 0:t.endScrolledIndicatorStyleAttr,n==null?void 0:n.startScrolledIndicatorStyleAttr,n==null?void 0:n.endScrolledIndicatorStyleAttr]);return H.jsxs("div",{className:"virtualized-matrix-viewer",onMouseEnter:()=>{l(!0)},onMouseLeave:()=>{l(!1)},children:[H.jsx(gs,{onSizeChanged:x,logId:"virtualized-matrix"}),Y]})}const lm=window.getComputedStyle(document.body).getPropertyValue("font-family"),os='Monaco, Menlo, "Ubuntu Mono", Consolas, source-code-pro, monospace';let Er;const Il=new Map,Tl=new Map;function Lc(r,e){if(e&&!Il.has(r)||!e&&!Tl.has(r)){Er||(Er=document.createElement("div"),document.body.appendChild(Er),Er.style.position="absolute",Er.style.left="-1000px",Er.style.top="-1000px",Er.innerHTML="X"),Er.style.fontSize=r+"px",Er.style.fontFamily=e?os:"";const t=Er.getBoundingClientRect();(e?Il:Tl).set(r,{width:t.width,height:t.height})}return e?Il.get(r):Tl.get(r)}const Qd=new OffscreenCanvas(1,1).getContext("2d");function Fc(r){const{fontSize:e,maxWidthAllowed:t,stringsToMeasure:n,fontFamily:i=lm,fontWeight:s="normal"}=r;Qd.font=`${e}px ${s} ${i}`;for(var o=0,a=0;a<n.length;a++){const l=Qd.measureText(n[a]).width;if(o=o<l?l:o,t&&o>=t)return t}return Math.ceil(o)}const mu=r=>{let e="";for(let t=1;t<=r;t++){const n=t%10===0,i=!n&&t%5===0;if(e+=n?"|":i?":":".",!n)continue;const s=""+t,o=e.length-s.length-1;o<0||(e=e.substring(0,o)+s+"|")}return e};function cm(r){const{alignmentUUID:e,fontSize:t,positions:n,residueWidth:i,hoverTracker:s="end"}=r,o=Math.max(...n)+1,a=w.useState(Hr()),l=w.useMemo(()=>r.horizVirtualization==="None"?void 0:r.horizVirtualization==="Automatic"?{virtualizationId:`x_auto_generated_positionalaxis_virtualization_${e}_${a}`,role:St.Controller,cellCount:o,cellSizePx:i}:r.horizVirtualization,[e,a,o,r.horizVirtualization,i]),c=w.useMemo(()=>mu(o).split("").map((d,f)=>H.jsx("span",{children:d},f)),[o]),u=w.useMemo(()=>H.jsx("div",{className:"av2-positional-axis",style:{fontSize:t,fontFamily:os},children:c}),[c,t]),h=w.useCallback(()=>u,[u]);return l?H.jsx(vs,{horizontalParams:{...l,scrollbar:at.NeverOn,virtualizationStrategy:Ut.ShiftOnlyFullyRendered,hoverTracker:s},getContentForColumns:h}):void 0}const um="msa",hm="posaxis";function Ew(r){const{alignment:e,svgFilename:t}=r,n=pm(r);if(n){var i=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(n)}`,s=document.createElement("a");s.download=t||`barplot_${e.getName()}.svg`,s.href=i,document.body.appendChild(s),s.click(),document.body.removeChild(s)}}function Iw(r){const{alignment:e,svgFilename:t}=r,n=gm(r);if(n){var i=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(n)}`,s=document.createElement("a");s.download=t||`logo_${e.getName()}.svg`,s.href=i,document.body.appendChild(s),s.click(),document.body.removeChild(s)}}function Tw(r){const{alignment:e,svgFilename:t}=r,n=Pw(r);var i=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(n)}`,s=document.createElement("a");s.download=t||`msa_${e.getName()}.svg`,s.href=i,document.body.appendChild(s),s.click(),document.body.removeChild(s)}const dm=r=>{const{numPos:e,posHeight:t,posWidth:n,width:i=e*n,height:s=t}=r,o=mu(r.numPos),a=H.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${e*n} ${t}`,width:i,height:s,children:o.split("").map((h,d)=>H.jsx("text",{className:hm,dx:d*n,children:h},d))}),l=document.createElement("div"),c=yb.createRoot(l);Jc.flushSync(()=>{c.render(a)});const u=l.innerHTML;return c.unmount(),u},fm=r=>{const{svgElement:e,positionalAxis:t,width:n=t.numPos*t.posWidth,height:i=100}=r,{numPos:s,posWidth:o,posHeight:a,spaceBtwBarplotAndPositionalAxis:l}=t;e.setAttribute("y","0"),e.setAttribute("x","0"),e.setAttribute("width",`${s*o}`),e.setAttribute("height",`${i-a-l}`);const c=dm({...t,width:s*o,height:a});return[`<svg width="${n}" height="${i}" xmlns="http://www.w3.org/2000/svg">`,e.outerHTML,`<g transform="translate(0, ${i-a})">`,c,"</g>","</svg>"].join(`
`)},pm=r=>{const{svgId:e,width:t,height:n,positionalAxis:i}=r,s=document.getElementById(e);if(!s){console.error(`ERROR: no barplot (no elements with '${e}' found on the page)`);return}const o=s.cloneNode(!0),a=o.getElementsByClassName("interaction-placeholder");for(var l=a.length-1;l>=0;--l)a[l].remove();return["g","rect"].forEach(c=>{const u=o.getElementsByTagName(c);for(var h=u.length-1;h>=0;--h)u[h].removeAttribute("class")}),o.removeAttribute("style"),o.removeAttribute("x"),o.removeAttribute("y"),i?fm({svgElement:o,positionalAxis:i,width:t,height:n}):(t!==void 0&&o.setAttribute("width",`${t}`),n!==void 0&&o.setAttribute("height",`${n}`),o.outerHTML)},gm=r=>{var p,v;const{svgId:e,alignmentType:t,aaColorScheme:n=dr.list[0],ntColorScheme:i=fr.list[0],positionsToStyle:s,width:o,height:a,positionalAxis:l}=r,c=t===Ot.AMINOACID?n:i,u=document.getElementById(e);if(!u){console.error(`ERROR: no logo (no elements id '${e}' found on the page)`);return}const h=u.cloneNode(!0);h.removeAttribute("style");const d=h.getElementsByClassName("interaction-placeholder");for(var f=d.length-1;f>=0;--f)d[f].remove();const m=(v=(p=(t===Ot.AMINOACID?pn:Nr).UNKNOWN.colors.get(c))==null?void 0:p.get(Jt.NO_BACKGROUND))==null?void 0:v.letterColor.hexString;return Array.from(h.getElementsByTagName("g")).forEach(x=>{Array.from(x.getElementsByTagName("path")).forEach(b=>{var V;const _=(V=b.getAttribute("class"))==null?void 0:V.split(" "),y=_.find(U=>U.startsWith(qi)).slice(-1),I=_.includes(dt.QUERY.shortClassname),A=_.includes(dt.CONSENSUS.shortClassname),P=c.colors[y]?c.colors[y]:m,L=s===dt.ALL||s===dt.QUERY&&I||s===dt.QUERY_DIFF&&!I||s===dt.CONSENSUS&&A?P:m;b.setAttribute("style",`fill:${L};`)})}),o!==void 0&&h.setAttribute("width",`${o}`),a!==void 0&&h.setAttribute("height",`${a}`),l?fm({svgElement:h,positionalAxis:l,width:o,height:a}).replaceAll(qi,"r"):h.outerHTML.replaceAll(qi,"r")},Li=(r,e,t)=>[`<text class="title" x="${e}" y="${t}">${r}:</text>`].join(" "),Rw=()=>['<style type="text/css">',["text.geneid{","text-anchor: end;","font-family: monospace;","font-size: 10px;","dominant-baseline: hanging;","}"].join(""),[`text.${hm}{`,"text-anchor: start;","font-family: monospace;","font-size: 10px;","dominant-baseline: hanging;","}"].join(""),[`text.${um}{`,"text-anchor: middle;","font-family: monospace;","font-size: 10px;","dominant-baseline: hanging;","}"].join(""),["text.title{","text-anchor: end;","font-family: monospace;","font-size: 12px;","font-weight: bold;","dominant-baseline: middle;","}"].join(""),"</style>"].join(`
`),Pw=r=>{const{alignment:e,sortBy:t,alignmentType:n,aaColorScheme:i=dr.list[0],ntColorScheme:s=fr.list[0],positionsToStyle:o,residueColoring:a,logoSvgId:l,barplots:c=[],includePositionAxis:u=!0,includeMetadata:h=!0,includeConsensus:d=!0,includeQuery:f=!0,endSeqIdx:g,startSeqIdx:m=0,moleculeWidth:p=7,moleculeHeight:v=10,logoHeight:x=v*10,barplotHeights:b=v*10,gapBetweenPlots:_=5}=r,y=n===Ot.AMINOACID?i:s,I=m,A=g!==void 0?g:e.getSequenceCount()>100?99:e.getSequenceCount()-1,P=e.getSequences(t),L=ea(I,A).map(Z=>P[Z]),U=L.reduce((Z,ne)=>Z>ne.annotations[lr.ID].length?Z:ne.annotations[lr.ID].length,-1)*p,N=c.length<1?0:c.length*(b+_),M=l?x+_:0,k=d?v+_:0,O=f?v+_:0,S=u?v+_:0,E=h?U:0,C={barplots:{y:0,x:E},logo:{y:N,x:E},consensus:{y:N+M,x:E},query:{y:N+M+k,x:E},position_axis:{y:N+M+k+O,x:E},msa:{y:N+M+k+O+S,x:E},metadata_and_titles:{x:E-p}},B=n===Ot.AMINOACID?pn:Nr,T=[...f?[e.getQuery()]:[],...d?[e.getConsensus()]:[],...L],R=[...new Set([B.UNKNOWN.singleLetterCode,...T.map(Z=>Z.sequence.split("")).join("")])],D=new Map;for(let Z=0;Z<T[0].sequence.length;Z++)D.set(Z,[...new Set(T.reduce((ne,Ae)=>(ne.push(Ae.sequence[Z]),ne),[]))]);const G=R.reduce((Z,ne)=>{const Le=B.fromSingleLetterCode(ne).colors.get(y).get(a);return Z[ne]={letter:ne,backgroundColor:Le.backgroundColor.hexString,letterColor:Le.letterColor.hexString},Z},{}),W=(Z,ne)=>{const Ae=Z==="."?"dot":Z==="-"?"dash":Z;return ne!==void 0&&o!==dt.ALL?`${Ae}${ne}`:Ae},j=c.map((Z,ne)=>{const Ae=C.barplots.x,Le=C.barplots.y+ne*(b+_);return[h?Li(Z.title,C.metadata_and_titles.x,Le+b/2):"",`<g transform="translate(${Ae}, ${Le})">`,pm({svgId:Z.svgId,height:b,width:e.getSequenceLength()*p}),"</g>"].join("")}).join(`
`),Y=l?[h?Li("Logo",C.metadata_and_titles.x,C.logo.y+x/2):"",`<g transform="translate(${C.logo.x}, ${C.logo.y})">`,gm({svgId:l,alignmentType:n,aaColorScheme:i,ntColorScheme:s,positionsToStyle:o,height:x,width:e.getSequenceLength()*p}),"</g>"].join(""):"",$=[h?Li("Position",C.metadata_and_titles.x,C.position_axis.y+v/2):"",`<g transform="translate(${C.position_axis.x},${C.position_axis.y})">`,dm({numPos:e.getSequenceLength(),posHeight:v,posWidth:p}),"</g>"].join(""),q=L.map((Z,ne)=>[`<g transform="translate(${C.metadata_and_titles.x}, ${C.msa.y+ne*v})">`,`<text class="geneid">${Z.annotations[lr.ID]}</text>`,"</g>"].join("")),oe=(Z,ne,Ae,Le)=>{const Oe=[`<text class="${um}"`,`x="${p/2}"`,`fill="${Le}">${ne}</text>`].join(" "),He=["<rect",`width="${p}px"`,`height="${v}px"`,`fill="${Ae}"/>`].join(" ");return`<g id="${Z}">${He}${Oe}</g>`},te=o===dt.ALL?R.map(Z=>{const ne=G[Z];return oe(W(Z),Z,ne.backgroundColor,ne.letterColor)}):Array.from(D).map(([Z,ne])=>{const Ae=e.getQuery().sequence,Le=e.getConsensus().sequence;return ne.reduce((He,it)=>{const Rt=G[it];return o===dt.QUERY&&it===Ae[Z]||o===dt.QUERY_DIFF&&it!==Ae[Z]||o===dt.CONSENSUS&&it===Le[Z]||o===dt.CONSENSUS_DIFF&&it!==Le[Z]?He.push(Rt):He.push({...G[B.UNKNOWN.singleLetterCode],letter:it}),He},[]).map(He=>oe(W(He.letter,Z),He.letter,He.backgroundColor,He.letterColor)).join(`
`)}),de=[h?Li("Consensus",C.metadata_and_titles.x,C.consensus.y+v/2):"",`<g transform="translate(${C.consensus.x}, ${C.consensus.y})">`,...e.getConsensus().sequence.split("").map((Z,ne)=>`<use xlink:href="#${W(Z,ne)}" x="${ne*p}"/>`),"</g>"].join(`
`),Q=[h?Li("Query",C.metadata_and_titles.x,C.query.y+v/2):"",`<g transform="translate(${C.query.x}, ${C.query.y})">`,...e.getQuery().sequence.split("").map((Z,ne)=>`<use xlink:href="#${W(Z,ne)}" x="${ne*p}"/>`),"</g>"].join(`
`),ie=L.map((Z,ne)=>[`<g transform="translate(${C.msa.x}, ${C.msa.y+ne*v})">`,...Z.sequence.split("").map((Ae,Le)=>`<use xlink:href="#${W(Ae,Le)}" x="${Le*p}"/>`),"</g>"].join(`
`)),K=C.msa.x+e.getSequenceLength()*p,re=C.msa.y+(A-I+1)*v;return['<?xml version="1.0" encoding="utf-8"?>',`<svg viewBox="0 0 ${K} ${re}" 
          xmlns="http://www.w3.org/2000/svg" 
          xmlns:xlink="http://www.w3.org/1999/xlink">`,Rw(),"<defs>",...te,"</defs>",j,Y,d?de:"",f?Q:"",u?$:"",...h?q:[],...ie,"</svg>"].join(`
`)};class bo{constructor(e){this.value=e,this.subscribers=new Set}get(){return this.value}set(e){this.value!==e&&(this.value=e,this.subscribers.forEach(t=>t(this.value)))}subscribe(e){return this.subscribers.add(e),()=>this.unsubscribe(e)}unsubscribe(e){this.subscribers.delete(e)}}const Ft=class Ft{constructor(e,t){this.key=e,this.description=t}static fromKey(e){return Ft.list.find(t=>t.key===e)}};Ft.HELVETICA=new Ft("HELVETICA","Helvetica"),Ft.HELVETICA_BOLD=new Ft("HELVETICA_BOLD","Helvetica Bold"),Ft.ROBOTO_MONO_MEDIUM=new Ft("ROBOTO_MONO_MEDIUM","Roboto Mono Medium"),Ft.DEFAULT=Ft.HELVETICA_BOLD,Ft.list=[Ft.HELVETICA,Ft.HELVETICA_BOLD,Ft.ROBOTO_MONO_MEDIUM];let jr=Ft;const Xr=class Xr{constructor(){this.fontToGlyphGetters=[...Xr.GLYPH_PATH_D].reduce((e,[t,n])=>(e.set(t,Object.entries(n).reduce((i,[s,o])=>(i[s]=a=>H.jsx("path",{...a,d:o}),i),{})),e),new Map)}static glyphFromChar(e,t){Xr.singleton||(Xr.singleton=new Xr);let n=Xr.singleton.fontToGlyphGetters.get(t);return n||(console.warn(`WARNING: Glyph font "${t.key}" not implemented. Reverting
         to default font (${jr.DEFAULT.key})`),n=Xr.singleton.fontToGlyphGetters.get(jr.DEFAULT)),n[e]}};Xr.GLYPH_PATH_D=new Map([[jr.HELVETICA,{A:"M43,0h15.4l36.3,100H79.8L69.7,70H30.1l-10.8,30H5.4L43,0z M65.3,59L50.1,14.8L34,59H65.3z",B:`M11.2,0h43.2c11.8,0,20.2,3.5,25.1,10.5c2.9,4.1,4.4,8.9,4.4,14.3c0,6.3-1.8,11.5-5.4,15.5
           c-1.9,2.1-4.5,4.1-8,5.9c5.1,2,9,4.2,11.5,6.6c4.5,4.4,6.7,10.4,6.7,18c0,6.4-2,12.3-6.1,17.5C76.6,96.1,67,100,53.7,100H11.2V0z
            M49.4,42.3c5.8,0,10.3-0.8,13.5-2.4c5-2.5,7.6-7,7.6-13.5c0-6.5-2.7-10.9-8-13.2c-3-1.3-7.5-1.9-13.5-1.9H24.5v31H49.4z M54,88.4
           c8.4,0,14.4-2.4,17.9-7.2c2.2-3,3.4-6.7,3.4-11c0-7.3-3.3-12.2-9.8-14.8c-3.5-1.4-8.1-2.1-13.8-2.1H24.5v35.2H54z`,C:`M79.8,9.5C86.3,15.8,90,23,90.7,31.1H78.2c-1.4-6.1-4.2-11-8.3-14.5c-4.2-3.6-10-5.4-17.5-5.4
            c-9.2,0-16.6,3.3-22.2,9.9c-5.6,6.6-8.5,16.6-8.5,30.2c0,11.1,2.5,20.1,7.6,27.1c5.1,6.9,12.7,10.4,22.8,10.4
            c9.3,0,16.4-3.6,21.3-10.9c2.6-3.8,4.5-8.9,5.8-15.1h12.5c-1.1,10-4.8,18.4-11,25.1C73.2,95.9,63.1,100,50.5,100
            c-10.9,0-20.1-3.3-27.5-10C13.3,81.1,8.4,67.5,8.4,49.1c0-14,3.7-25.5,11-34.5C27.3,4.9,38.2,0,52.1,0C64,0,73.2,3.2,79.8,9.5z`,D:`M9.2,0h40c13.6,0,24.1,4.9,31.6,14.6c6.7,8.8,10,20.1,10,33.8c0,10.6-2,20.2-5.9,28.8
           C77.9,92.4,66,100,49.1,100H9.2V0z M46.5,88.4c4.5,0,8.2-0.5,11.1-1.4c5.1-1.8,9.4-5.2,12.6-10.2c2.6-4,4.5-9.2,5.7-15.5
           c0.7-3.8,1-7.3,1-10.5c0-12.4-2.4-22-7.2-28.9c-4.8-6.9-12.6-10.3-23.3-10.3H22.9v76.8H46.5z`,E:"M13.2,0h72.6v12.3H26.4v30.4h54.9v11.6H26.4v33.9h60.4V100H13.2V0z",F:"M15.3,0h69.4v12.3H28.9v30.4h49.1v11.9H28.9V100H15.3V0z",G:`M74.1,5.2c9.3,5,15,13.6,17.1,26.1H78.5c-1.5-6.9-4.7-12-9.4-15.2c-4.8-3.2-10.8-4.8-18.1-4.8
            c-8.6,0-15.9,3.3-21.8,9.9c-5.9,6.6-8.8,16.4-8.8,29.5c0,11.3,2.4,20.5,7.3,27.6c4.9,7.1,12.8,10.6,23.8,10.6
            c8.4,0,15.4-2.5,20.9-7.5c5.5-5,8.3-13,8.5-24.2H51.1V46.6h41.7v50.8h-8.3l-3.1-12.2c-4.3,4.8-8.1,8.1-11.4,10
            c-5.6,3.2-12.6,4.8-21.2,4.8c-11.1,0-20.6-3.6-28.6-10.9c-8.7-9.1-13-21.7-13-37.6c0-15.9,4.2-28.6,12.7-38C28,4.5,38.5,0,51.3,0
            C60.1,0,67.7,1.7,74.1,5.2z`,H:"M10.6,0h13.7v41.3h51.4V0h13.7v100H75.7V53.2H24.3V100H10.6V0z",I:"M43.2,0h13.7v100H43.2V0z",J:`M94.6,68.4c0,8.2-1.9,14.6-5.8,19.2C81.6,95.8,67.9,100,47.7,100C36,100,26,98,17.8,94.1
            c-8.3-4-12.4-11-12.4-21.1v-7h19.8v7c0,5.3,1.9,9.3,5.7,12c3.8,2.7,9.7,4,17.7,4c11.2,0,18.6-2.4,22.1-7.2c2.1-3,3.2-8.6,3.2-16.8V0
            h20.9V68.4z`,K:"M8.5,0h13.2v48.9L71.7,0h18.9L47.9,40.4L91.5,100H73.8L38,49.8L21.7,65.1V100H8.5V0z",L:"M18.1,0h13.5v88.1h50.2V100H18.1V0z",M:`M2,0h19.4l28.8,84.5L78.7,0H98v100H85.1V41c0-2,0-5.4,0.1-10.1c0.1-4.7,0.1-9.8,0.1-15.2L56.8,100H43.4
            L14.5,15.7v3.1c0,2.5,0.1,6.2,0.2,11.2c0.1,5,0.2,8.7,0.2,11.1v59H2V0z`,N:"M10.6,0h16l49.9,80.8V0h12.9v100H74.2L23.6,19.3V100H10.6V0z",O:`M86.7,16.1c6.3,8.4,9.4,19.1,9.4,32.2c0,14.1-3.6,25.9-10.8,35.2c-8.4,11-20.4,16.5-36,16.5
            c-14.6,0-26-4.8-34.3-14.4c-7.4-9.3-11.1-21-11.1-35.2c0-12.8,3.2-23.8,9.5-32.9C21.6,5.8,33.6,0,49.6,0C66.3,0,78.7,5.4,86.7,16.1z
            M75.4,76.4c5-8.1,7.6-17.4,7.6-28c0-11.1-2.9-20.1-8.7-26.9c-5.8-6.8-13.8-10.2-23.9-10.2c-9.8,0-17.8,3.4-24,10.1
            s-9.3,16.6-9.3,29.8c0,10.5,2.7,19.3,8,26.5C30.4,85,39,88.6,50.9,88.6C62.2,88.6,70.4,84.5,75.4,76.4z`,P:`M12.8,0h44.7c8.8,0,16,2.5,21.4,7.5c5.4,5,8.2,12.1,8.2,21.1c0,7.8-2.4,14.6-7.3,20.4
            c-4.9,5.8-12.3,8.7-22.3,8.7H26.4V100H12.8V0z M65.4,13.8c-3-1.4-7.1-2.1-12.2-2.1H26.4v34.6h26.8c6,0,10.9-1.3,14.7-3.9
            c3.8-2.6,5.6-7.1,5.6-13.7C73.5,21.4,70.8,16.4,65.4,13.8z`,Q:`M93.2,92.6l-6.1,7.4l-14-10.6c-3.4,1.8-7,3.3-10.9,4.4s-8.2,1.7-12.8,1.7c-14,0-25-4.6-33-13.8
            c-7-8.9-10.5-20.1-10.5-33.6c0-12.2,3-22.7,9.1-31.4C22.8,5.5,34.3,0,49.7,0c16,0,27.8,5.1,35.4,15.4c6,8,9,18.2,9,30.7
            c0,5.8-0.7,11.4-2.2,16.8c-2.2,8.2-5.8,14.9-11,20L93.2,92.6z M58.1,84.1c2.2-0.4,4.1-1,5.8-2.1l-10-7.7l6.1-7.6l11.8,9.2
            c3.7-4.3,6.3-9.1,7.6-14.3c1.3-5.3,2-10.4,2-15.2c0-10.6-2.8-19.2-8.3-25.7C67.4,14.2,59.8,11,50.3,11c-9.8,0-17.5,3.1-23.2,9.3
            c-5.7,6.2-8.6,15.8-8.6,28.7c0,10.9,2.7,19.5,8.2,26c5.5,6.4,13.5,9.7,24.1,9.7C53.4,84.6,55.8,84.4,58.1,84.1z`,R:`M9.2,0h45.5c7.5,0,13.7,1.1,18.5,3.3C82.4,7.6,87,15.4,87,26.9c0,6-1.2,10.9-3.7,14.7
            c-2.5,3.8-5.9,6.9-10.4,9.2c3.9,1.6,6.8,3.7,8.8,6.3c2,2.6,3.1,6.8,3.3,12.6l0.5,13.4c0.1,3.8,0.5,6.6,1,8.5
            c0.8,3.2,2.3,5.2,4.4,6.1v2.2H74.2c-0.5-0.9-0.8-2-1.1-3.3c-0.3-1.4-0.5-4-0.7-7.9L71.6,72c-0.3-6.5-2.7-10.9-7.1-13.1
            c-2.5-1.2-6.5-1.8-11.8-1.8h-30V100H9.2L9.2,0L9.2,0z M53.2,45.8c6.2,0,11.1-1.3,14.7-3.8s5.4-7.1,5.4-13.8c0-7.1-2.5-12-7.5-14.6
            c-2.7-1.4-6.3-2-10.8-2H22.8v34.2L53.2,45.8L53.2,45.8z`,S:`M25.2,66.6c0.3,5.4,1.5,9.7,3.7,13.1c4.1,6.3,11.3,9.4,21.7,9.4c4.6,0,8.9-0.7,12.7-2.1
            c7.4-2.7,11.1-7.4,11.1-14.3c0-5.2-1.6-8.8-4.7-11c-3.2-2.2-8.1-4-14.9-5.6l-12.4-2.9c-8.1-1.9-13.9-4-17.3-6.3
            c-5.8-4-8.8-9.9-8.8-17.8c0-8.5,2.9-15.5,8.6-21C30.6,2.7,38.8,0,49.3,0C59,0,67.2,2.4,73.9,7.2c6.8,4.8,10.1,12.5,10.1,23H72
            c-0.6-5.1-1.9-9-4-11.7c-3.8-4.9-10.1-7.4-19.1-7.4c-7.3,0-12.5,1.6-15.7,4.8c-3.2,3.2-4.8,6.9-4.8,11.1c0,4.6,1.9,8,5.6,10.2
            c2.5,1.4,8,3.1,16.7,5.2l12.9,3c6.2,1.5,11,3.5,14.4,6c5.8,4.4,8.8,10.9,8.8,19.3c0,10.5-3.7,18-11.2,22.5c-7.5,4.5-16.1,6.8-26,6.8
            c-11.5,0-20.5-3-27-9c-6.5-6-9.7-14.1-9.6-24.3H25.2z`,T:"M90.5,0v11.9H56.8V100H43.2V11.9H9.5V0H90.5z",U:`M24.8,0v60.2c0,7.1,1.3,13,4,17.6c4,7.1,10.6,10.6,20.1,10.6c11.3,0,18.9-3.8,23-11.5c2.2-4.2,3.3-9.7,3.3-16.8
            V0h13.3v54.7c0,12-1.6,21.2-4.9,27.7C77.7,94.1,66.5,100,50,100c-16.5,0-27.7-5.9-33.6-17.6c-3.2-6.5-4.9-15.7-4.9-27.7V0H24.8z`,V:"M21.3,0l28.7,85.2L78.5,0h15.2L57.1,100H42.8L6.4,0H21.3z",W:"M11.6,0l14.8,81.2L44.2,0h11.5l17.8,81.4L88.3,0H100L79.3,100H68.2L50,17.1L31.8,100H20.5L0,0H11.6z",X:"M22.7,100H6.5l35.4-51.3L8.7,0h16.9l25.2,38.3L75.8,0h16.1L58.7,48.7L93.5,100H76.8L50.1,58.9L22.7,100z",Y:"M5.4,0h15.8l28.7,48.1L78.7,0h15.9L56.7,59.7V100H43.2V59.7L5.4,0z",Z:"M10.5,88.8L72,11.9H15V0h74.5v11.6L27.6,88.1h61.9V100h-79V88.8z"}],[jr.ROBOTO_MONO_MEDIUM,{A:"M65.8,76.8H34.5L27.6,100h-17L43.1,0h14.5l31.9,100h-17L65.8,76.8z M38.7,62.7h22.9L50.3,23.5L38.7,62.7z",B:`M15.6,100V0h31.9c4.8,0,9.3,0.6,13.5,1.6s7.9,2.7,11,4.9s5.6,5,7.4,8.4S82.1,22.4,82,27c0,4.9-1.4,9.2-4.1,12.7
            s-6.3,6.2-10.9,8.1c2.8,0.8,5.3,1.9,7.5,3.3s4,3.2,5.5,5.2s2.6,4.2,3.4,6.7c0.8,2.4,1.2,5,1.2,7.8c0,4.8-0.9,9-2.6,12.6
            s-4.2,6.6-7.2,9.1c-3.1,2.4-6.8,4.3-11,5.5c-4.2,1.3-8.8,1.9-13.7,2H15.6z M32.2,42.1H48c2.5,0,4.8-0.4,6.9-1
            c2.1-0.6,4-1.5,5.5-2.7s2.8-2.7,3.7-4.5c0.9-1.8,1.4-3.8,1.4-6.1c0-2.5-0.4-4.7-1.3-6.5c-0.9-1.8-2.1-3.3-3.7-4.4
            c-1.6-1.1-3.4-2-5.6-2.5c-2.2-0.5-4.5-0.8-7.1-0.9H32.2V42.1z M32.2,54.7v31.9h18c2.6,0,5-0.4,7.1-1.2s4-1.8,5.6-3.1
            c1.6-1.3,2.8-3,3.7-4.9c0.9-1.9,1.3-4.1,1.3-6.5c0-2.5-0.4-4.8-1.2-6.8c-0.8-2-1.9-3.7-3.4-5c-1.5-1.3-3.3-2.4-5.4-3.2
            c-2.1-0.8-4.5-1.2-7.1-1.2C50.8,54.7,32.2,54.7,32.2,54.7z`,C:`M84.8,68.8c-0.4,4.7-1.6,8.9-3.3,12.8c-1.8,3.8-4.1,7.1-7.1,9.9c-2.9,2.7-6.4,4.9-10.4,6.3s-8.4,2.2-13.3,2.2
            c-5.9,0-11.1-1.1-15.5-3.4s-8.1-5.4-11-9.3s-5.1-8.5-6.6-13.8c-1.5-5.3-2.3-10.9-2.3-16.8V43.4c0-5.9,0.8-11.5,2.3-16.8
            s3.8-9.9,6.7-13.8s6.6-7.1,11-9.3S44.8,0,50.7,0c5.1,0,9.7,0.8,13.7,2.3s7.4,3.6,10.3,6.4c2.8,2.8,5.1,6.1,6.8,10.1
            c1.7,4,2.8,8.4,3.3,13.2h-16c-0.3-2.8-0.8-5.4-1.6-7.8s-1.9-4.3-3.4-6s-3.2-2.9-5.4-3.8c-2.2-0.9-4.7-1.3-7.6-1.3
            c-3.6,0-6.6,0.8-9.1,2.5s-4.4,3.9-5.9,6.6s-2.6,6-3.2,9.6c-0.6,3.6-1,7.5-1,11.5v13.4c0,4.2,0.3,8.1,1,11.8
            c0.6,3.7,1.7,6.9,3.2,9.6c1.5,2.8,3.4,4.9,5.9,6.5s5.5,2.4,9.1,2.4c5.6,0,9.9-1.6,12.8-4.8c2.9-3.2,4.7-7.7,5.2-13.5L84.8,68.8
            L84.8,68.8z`,D:`M15.5,100V0H40c6.9,0,13,1.2,18.5,3.4s10.1,5.4,13.9,9.5s6.8,8.9,8.8,14.6c2.1,5.7,3.1,11.9,3.2,18.8v7.6
            c0,6.9-1.1,13.1-3.2,18.8c-2.1,5.7-5,10.5-8.8,14.6s-8.4,7.2-13.8,9.4c-5.4,2.2-11.5,3.4-18.2,3.4L15.5,100L15.5,100z M32.3,13.3
            v73.4h8.2c4.5,0,8.5-0.9,11.9-2.4c3.4-1.6,6.2-3.8,8.5-6.7c2.3-2.9,4-6.3,5.1-10.3c1.1-4,1.7-8.5,1.8-13.5v-7.7
            c0-4.8-0.6-9.2-1.8-13.2c-1.2-4-2.8-7.4-5.1-10.3s-5.2-5.2-8.6-6.8s-7.5-2.5-12.2-2.5C40.2,13.3,32.3,13.3,32.3,13.3z`,E:"M75.4,55.2H34.2v31.4h48.1V100H17.7V0h64.2v13.6H34.2v28.2h41.1C75.3,41.8,75.3,55.2,75.4,55.2z",F:"M76.2,57.4h-42V100H17.6V0h64.8v13.6H34.2v30.3h42V57.4z",G:`M84.6,86.5c-1.6,2-3.6,3.8-5.8,5.4s-4.7,3.1-7.5,4.3c-2.8,1.2-5.8,2.1-9,2.8c-3.2,0.7-6.7,1-10.3,1c-5.8,0-11-1.1-15.5-3.4
            s-8.3-5.4-11.4-9.3s-5.5-8.6-7.1-13.9c-1.6-5.4-2.5-11.2-2.5-17.3v-12c0-6.1,0.8-11.9,2.4-17.2s3.9-10,6.9-14s6.7-7.2,11.1-9.5
            S45.2,0,50.9,0c5,0,9.5,0.7,13.5,2.1s7.4,3.4,10.2,6c2.9,2.6,5.1,5.8,6.8,9.5s2.7,7.9,3.2,12.6H68.8c-0.4-2.6-1-5-1.9-7.1
            s-2-3.9-3.4-5.3s-3.2-2.6-5.2-3.4c-2-0.8-4.4-1.2-7.2-1.2c-3.4,0-6.3,0.8-8.7,2.5s-4.4,3.9-6,6.8c-1.6,2.8-2.8,6.1-3.5,9.8
            s-1.2,7.6-1.2,11.7v12.2c0,4.1,0.5,7.9,1.2,11.6s2,7,3.7,9.8s3.8,5.1,6.5,6.8s5.8,2.6,9.5,2.6c1.5,0,3.1-0.1,4.7-0.3
            c1.6-0.2,3.1-0.5,4.6-1s2.8-1,4-1.7c1.2-0.7,2.2-1.5,2.9-2.6l0.1-19.5H51.2V49.4h33.3L84.6,86.5z`,H:"M83.1,100H66.9V55.4H33V100H17V0h16v41.8h34V0h16.1V100z",I:"M20.2,0h59.5v13.7H58v72.7h21.6V100H20.2V86.4h21.2V13.7H20.2V0z",J:`M66.4,0h16.5l0.1,68.5c-0.1,4.6-1,8.8-2.7,12.7c-1.7,3.9-4,7.2-7,10s-6.4,4.9-10.4,6.5S54.7,100,50,100
            c-4.8,0-9.2-0.7-13.1-2s-7.3-3.3-10.2-5.8c-2.9-2.5-5.1-5.7-6.8-9.5s-2.6-8-2.8-12.9h16.4c0.2,5.3,1.7,9.5,4.5,12.4
            c2.8,3,6.8,4.4,12,4.4c2.5,0,4.7-0.5,6.8-1.4s3.8-2.3,5.2-3.9c1.4-1.7,2.5-3.6,3.3-5.8s1.2-4.6,1.2-7.1V0H66.4z`,K:"M40.4,56.5l-10.7,12V100H13V0h16.7v46.8L38.8,35L65.1,0h20.1l-34,43.9L87,100H67.2L40.4,56.5z",L:"M34.5,86.5h47.7V100H18V0h16.5V86.5z",M:"M37,0l12.4,43.2L63,0h20.5v100H68.1V65.7l1-43.8L53.7,69.8H45L31.1,23.5l1,42.2V100H16.5V0H37z",N:"M82.9,100H66.3L33.8,31.2L33.8,100H17V0h16.7l32.4,68.6L66.2,0h16.7V100z",O:`M84.9,56.3c0,5.7-0.7,11.3-2.2,16.5c-1.5,5.3-3.7,9.9-6.6,14c-2.9,4-6.6,7.2-11,9.6c-4.4,2.4-9.5,3.6-15.4,3.6
            c-5.8,0-10.9-1.2-15.2-3.6s-7.9-5.6-10.8-9.7c-2.9-4-5-8.7-6.5-13.9C15.7,67.5,15,62,15,56.3V43.9c0-3.8,0.3-7.6,1-11.2
            c0.7-3.6,1.6-7.1,2.9-10.3c1.3-3.2,2.9-6.2,4.7-9s4.1-5.1,6.7-7.1s5.5-3.5,8.7-4.6S45.8,0,49.6,0c5.9,0,11,1.2,15.4,3.6
            c4.4,2.4,8.1,5.6,11,9.7c2.9,4.1,5.1,8.7,6.6,14s2.2,10.8,2.2,16.6v12.4H84.9z M68.8,43.7c0-3.7-0.4-7.3-1-10.9s-1.7-6.8-3.1-9.7
            c-1.4-2.9-3.4-5.1-5.8-6.9s-5.5-2.6-9.1-2.6c-3.6,0-6.6,0.9-9,2.6s-4.3,4.1-5.7,6.9s-2.4,6.1-2.9,9.7c-0.5,3.6-0.9,7.2-0.9,10.9
            v12.6c0,3.7,0.4,7.3,0.9,10.9c0.6,3.6,1.6,6.8,3,9.7c1.4,2.9,3.3,5.2,5.7,7s5.4,2.7,9,2.7c3.7,0,6.7-0.9,9.1-2.7s4.4-4.1,5.8-7
            c1.4-2.9,2.5-6.1,3.1-9.7s0.9-7.2,1-10.9L68.8,43.7L68.8,43.7z`,P:`M32.5,61.7V100H16V0h33.4c5,0,9.6,0.8,13.8,2.2s7.9,3.5,11,6.2c3.1,2.7,5.5,5.9,7.2,9.8C83.1,22,84,26.3,84,31.1
            c0,4.7-0.9,8.9-2.6,12.6c-1.7,3.8-4.1,7-7.2,9.6c-3.1,2.7-6.7,4.7-11,6.1c-4.2,1.4-8.8,2.2-13.8,2.2L32.5,61.7L32.5,61.7z
            M32.5,48.4h17c2.8,0,5.3-0.4,7.5-1.3c2.2-0.8,4.1-2,5.6-3.5c1.6-1.5,2.7-3.3,3.6-5.4c0.8-2.1,1.2-4.4,1.2-6.9c0-2.6-0.4-5-1.2-7.2
            s-2-4.1-3.6-5.7s-3.4-2.8-5.6-3.7c-2.2-0.9-4.7-1.3-7.5-1.4h-17V48.4z`,Q:`M79.2,49.4c0,2.9-0.3,5.7-0.8,8.5s-1.2,5.5-2.2,8c-0.9,2.6-2.1,5-3.6,7.3c-1.4,2.3-3.1,4.3-5,6.1l14.4,12.3l-9.2,8.4
            L56.4,85.6c-1.2,0.3-2.5,0.6-3.9,0.8c-1.3,0.2-2.7,0.3-4.2,0.3c-5.1,0-9.6-1.1-13.4-3.2c-3.8-2.1-7-5-9.5-8.5
            c-2.4-3.5-4.3-7.5-5.5-11.9c-1.2-4.4-1.9-9-1.9-13.7V38.7c0-3.4,0.3-6.6,0.9-9.9s1.4-6.3,2.5-9.1s2.5-5.5,4.2-7.9
            c1.7-2.4,3.6-4.5,5.8-6.2s4.8-3.1,7.6-4.1S45,0,48.3,0c5.2,0,9.7,1.1,13.5,3.2c3.8,2.1,7.1,5,9.6,8.5s4.5,7.7,5.7,12.4
            c1.3,4.7,1.9,9.5,2,14.6L79.2,49.4L79.2,49.4z M65.2,38.6c0-3.3-0.3-6.5-0.8-9.7c-0.5-3.2-1.4-6.1-2.7-8.6s-3-4.5-5.2-6.1
            s-4.9-2.3-8.2-2.3s-6,0.8-8.1,2.3c-2.1,1.5-3.8,3.6-5,6.1c-1.2,2.5-2.1,5.4-2.6,8.6s-0.7,6.4-0.7,9.7v10.9c0,2.9,0.2,5.8,0.7,8.8
            s1.3,5.7,2.6,8.2c1.2,2.5,2.9,4.5,5,6.1c2.1,1.6,4.8,2.4,8.1,2.4s6.1-0.8,8.2-2.4c2.2-1.6,3.9-3.6,5.2-6.1s2.2-5.2,2.7-8.2
            c0.5-3,0.8-5.9,0.8-8.8V38.6z`,R:`M48.3,61H31.6v39H15.1V0h31.6c5.1,0,9.9,0.7,14.2,2s8,3.1,11.2,5.6s5.6,5.6,7.3,9.4c1.7,3.8,2.6,8.2,2.6,13.2
            c0,3.4-0.4,6.5-1.3,9.2s-2.1,5.3-3.7,7.5c-1.6,2.2-3.5,4.2-5.8,5.9c-2.2,1.7-4.7,3.1-7.4,4.3l21.2,42v0.8H67.4L48.3,61z M31.6,47.7
            h15.2c2.7,0,5.3-0.4,7.6-1.2s4.3-1.9,5.9-3.3c1.7-1.4,3-3.2,3.9-5.3c0.9-2.1,1.4-4.5,1.4-7.2c0-2.8-0.4-5.3-1.3-7.4
            c-0.9-2.1-2.1-4-3.7-5.4c-1.6-1.5-3.6-2.6-5.9-3.3c-2.3-0.8-4.9-1.2-7.8-1.2H31.6V47.7z`,S:`M68.8,73.6c0-2.3-0.5-4.4-1.4-6.1c-0.9-1.7-2.3-3.3-4.1-4.6c-1.8-1.3-3.9-2.5-6.3-3.5s-5.1-1.9-7.9-2.8
            c-3.8-1.1-7.6-2.5-11.3-4.1s-7-3.7-10-6.1s-5.3-5.2-7.1-8.4c-1.9-3.2-2.8-6.9-2.8-11s0.9-8,2.8-11.3c1.9-3.3,4.2-6.1,7.3-8.5
            s6.6-4.1,10.6-5.4S46.7,0,51.1,0c4.7,0,9.1,0.7,13.1,2.2s7.6,3.5,10.7,6.1c3.1,2.6,5.5,5.7,7.3,9.4c1.8,3.6,2.7,7.7,2.7,12.1H68.8
            c-0.2-2.5-0.7-4.7-1.6-6.7c-0.8-2-2-3.8-3.5-5.3c-1.5-1.5-3.3-2.6-5.5-3.4c-2.1-0.8-4.6-1.2-7.4-1.2c-2.4,0-4.6,0.3-6.7,0.9
            c-2.1,0.6-3.8,1.5-5.3,2.7s-2.7,2.7-3.5,4.3c-0.8,1.7-1.3,3.6-1.3,5.8c0,2.3,0.6,4.2,1.7,5.9c1.2,1.7,2.7,3.1,4.5,4.4
            s4,2.3,6.5,3.2s5,1.8,7.6,2.5c4.1,1.2,7.9,2.7,11.6,4.4c3.7,1.8,7,3.9,9.8,6.4c2.8,2.5,5,5.3,6.7,8.6c1.6,3.3,2.5,7,2.5,11.2
            c0,4.3-0.9,8.1-2.7,11.4S78,91,74.9,93.2s-6.6,3.9-10.7,5.1c-4.1,1.2-8.3,1.7-12.7,1.7c-3,0-6-0.3-8.9-0.9
            c-2.9-0.6-5.8-1.4-8.5-2.6s-5.2-2.6-7.5-4.3s-4.3-3.7-6.1-6s-3.1-4.8-4-7.6c-1-2.8-1.5-5.9-1.5-9.2h16.1c0.2,2.9,0.9,5.5,1.9,7.7
            c1.1,2.2,2.5,4,4.3,5.5c1.8,1.4,3.9,2.5,6.3,3.3s5,1.1,7.9,1.1c2.4,0,4.7-0.3,6.8-0.9s3.9-1.4,5.5-2.6c1.6-1.1,2.8-2.5,3.7-4.2
            S68.8,75.8,68.8,73.6z`,T:"M88.8,13.6H58.1V100H41.7V13.6H11.2V0h77.6V13.6z",U:`M82.6,0l0.1,66.1c0,5.1-0.9,9.7-2.4,13.9c-1.6,4.2-3.8,7.8-6.6,10.7c-2.8,3-6.3,5.3-10.3,6.9s-8.6,2.4-13.6,2.4
            c-4.9,0-9.3-0.8-13.3-2.4s-7.4-3.9-10.2-6.9c-2.9-3-5.1-6.5-6.7-10.7s-2.4-8.8-2.4-13.9L17.3,0h16l0.1,66.1c0,3,0.4,5.8,1.2,8.3
            s1.8,4.7,3.1,6.5c1.4,1.8,3,3.3,5,4.3s4.3,1.5,7,1.5c2.7,0,5.1-0.5,7.2-1.5c2.1-1,3.8-2.4,5.2-4.3s2.5-4,3.2-6.5s1.1-5.3,1.2-8.3
            L66.7,0H82.6z`,V:"M50,74.9L70.8,0h18L57.8,100H42L11.2,0h18L50,74.9z",W:"M66.8,65.6L74,0h15.4L76.6,100H60.8L49.9,33.5L39.1,100H23.4L10.6,0H26l7.1,65.2L43.4,0h12.9L66.8,65.6z",X:"M49.8,37.2L69,0h19.4L60,49.6L89.2,100H69.9L50.1,62.2L30.3,100H10.8L40,49.6L11.6,0h19.3L49.8,37.2z",Y:"M50,47.8L70.8,0h18.4L58.1,64.1L57.9,100h-16l-0.1-36.3L10.8,0h18.4L50,47.8z",Z:"M34.4,86.5h50.5V100H15.1L15,88.9L64,13.6H15.4V0h67.9l0.1,10.9L34.4,86.5z"}],[jr.HELVETICA_BOLD,{A:"M68.2,79.4H31.4L24.5,100H2.6L38.3,0h23.6l35.4,100H74.7L68.2,79.4z M62.4,62.2L49.9,22.9L37,62.2H62.4z",B:`M54.1,100H8.8V0h48.6c12.3,0.2,20.9,3.7,26.1,10.7C86.5,14.9,88,20,88,25.9c0,6.1-1.5,11-4.6,14.7c-1.7,2.1-4.3,4-7.6,5.7
          c5.1,1.9,9,4.8,11.6,8.8c2.6,4,3.9,8.9,3.9,14.7c0,5.9-1.5,11.2-4.5,15.9c-1.9,3.1-4.3,5.7-7.1,7.9c-3.2,2.4-7,4.1-11.4,5
          C63.9,99.5,59.2,100,54.1,100z M64,36.9c2.7-1.6,4.1-4.5,4.1-8.8c0-4.7-1.8-7.7-5.4-9.2c-3.1-1-7.1-1.6-11.9-1.6h-22v22h24.6
          C57.6,39.4,61.2,38.6,64,36.9z M53.6,56H28.7v26.7h24.6c4.4,0,7.8-0.6,10.2-1.8c4.4-2.2,6.6-6.3,6.6-12.5c0-5.2-2.1-8.8-6.4-10.7
          C61.3,56.6,57.9,56,53.6,56z`,C:`M79.1,90.2c-7.1,6.5-16.2,9.8-27.3,9.8c-13.7,0-24.5-4.4-32.4-13.2c-7.9-8.9-11.8-21-11.8-36.4c0-16.7,4.5-29.5,13.4-38.6
          C28.7,3.9,38.6,0,50.6,0c16.1,0,27.8,5.3,35.3,15.8c4.1,5.9,6.3,11.9,6.6,17.8h-20c-1.3-4.6-3-8-5-10.4c-3.6-4.1-9-6.2-16.1-6.2
          c-7.3,0-13,2.9-17.2,8.8C30,31.7,27.9,40,27.9,50.7c0,10.7,2.2,18.7,6.6,24.1c4.4,5.3,10.1,8,16.9,8c7,0,12.3-2.3,16-6.9
          c2-2.5,3.7-6.2,5.1-11.1h19.8C90.6,75.2,86.2,83.7,79.1,90.2z`,D:`M50.8,100H7.7V0h43.1C57,0.1,62.1,0.8,66.2,2.2c7,2.3,12.7,6.5,17,12.7c3.5,5,5.9,10.4,7.1,16.1c1.3,5.8,1.9,11.3,1.9,16.6
          c0,13.3-2.7,24.6-8,33.8C77.1,93.8,65.9,100,50.8,100z M66.3,25.5c-3.2-5.4-9.6-8.1-19.1-8.1H28v65.3h19.3
          c9.9,0,16.7-4.9,20.6-14.6c2.1-5.3,3.2-11.7,3.2-19.1C71.1,38.8,69.5,31,66.3,25.5z`,E:"M81.1,56.3H32.5V82h55.4v18H12.1V0h73.3v17.7H32.5v21.2h48.6V56.3z",F:"M85.5,17.6H35.3v23h44V58h-44v42H14.5V0h71V17.6z",G:`M68.7,95.2C63.5,98.4,57,100,49.4,100c-12.6,0-22.9-4.4-30.9-13.1C10,78.1,5.8,66.2,5.8,50.9c0-15.4,4.2-27.7,12.7-37
          C27,4.6,38.2,0,52.1,0c12.1,0,21.8,3.1,29.1,9.2c7.3,6.1,11.5,13.8,12.6,22.9H74.3c-1.5-6.5-5.2-11-11-13.6
          c-3.3-1.4-6.9-2.1-10.9-2.1c-7.7,0-13.9,2.9-18.9,8.7c-4.9,5.8-7.4,14.5-7.4,26.1c0,11.7,2.7,20,8,24.8c5.3,4.9,11.4,7.3,18.2,7.3
          c6.7,0,12.1-1.9,16.4-5.8c4.3-3.8,6.9-8.9,7.9-15.1h-22V46.5h39.6v51H81l-2-11.9C75.2,90.1,71.7,93.3,68.7,95.2z`,H:"M69.5,100V55.4H30.4V100H9.7V0h20.7v38.1h39.1V0h20.8v100H69.5z",I:"M39.6,0h20.8v100H39.6V0z",J:`M60.9,68.3V0h20.4v67.9c0,8.3-1.4,14.9-4.3,19.7C72.1,95.9,63.4,100,50.7,100c-12.7,0-21.2-3.3-25.5-10
          c-4.3-6.6-6.5-15.7-6.5-27.2v-2.3H38v2.3c0.2,7.6,1,12.9,2.5,15.9c1.5,3.1,4.6,4.6,9.5,4.6c4.8,0,8-1.7,9.5-5
          C60.4,76.4,60.9,73,60.9,68.3z`,K:"M94.1,100H67.3L36.4,56.3l-10,10.2V100H5.9V0h20.6v41.2L65,0h27l-41,41.2L94.1,100z",L:"M14.8,0h20.9v82h49.5v18H14.8V0z",M:`M21.1,100H1.7V0h30.4l18.2,78.6L68.3,0h30.1v100H78.9V32.4c0-1.9,0-4.7,0.1-8.2c0-3.5,0.1-6.2,0.1-8.1L60.1,100H39.8
          L21,16.1c0,1.9,0,4.6,0.1,8.1c0,3.5,0.1,6.2,0.1,8.2V100z`,N:"M90.6,100H69.7L28.9,29v71H9.4V0h21.9l39.8,69.8V0h19.5V100z",O:`M50,100c-13.5,0-23.8-3.7-31-11C9.5,80,4.7,67,4.7,50c0-17.3,4.8-30.3,14.4-39C26.2,3.7,36.5,0,50,0c13.5,0,23.8,3.7,31,11
          c9.5,8.7,14.3,21.7,14.3,39c0,17-4.8,30-14.3,39C73.9,96.3,63.5,100,50,100z M68.7,74.6c4.6-5.8,6.9-14,6.9-24.6
          c0-10.6-2.3-18.8-6.9-24.6c-4.6-5.8-10.8-8.7-18.6-8.7S36,19.6,31.3,25.4c-4.7,5.8-7,14-7,24.6s2.3,18.8,7,24.6
          c4.7,5.8,10.9,8.7,18.7,8.7S64.1,80.4,68.7,74.6z`,P:`M53.7,64H32.5v36H11.7V0h43.6c10,0,18,2.6,24,7.7c6,5.2,9,13.1,9,23.9c0,11.8-3,20.1-9,25C73.3,61.6,64.8,64,53.7,64z
          M63.5,43.2c2.7-2.4,4.1-6.2,4.1-11.4c0-5.2-1.4-8.9-4.1-11.1c-2.7-2.2-6.6-3.3-11.5-3.3H32.5v29.4H52
          C56.9,46.8,60.7,45.6,63.5,43.2z`,Q:`M64.2,93.9c-4.1,1.4-8.9,2-14.6,2c-11.8,0-21.6-3.5-29.3-10.6c-9.3-8.5-14-21-14-37.4c0-16.6,4.8-29.1,14.4-37.6
          C28.6,3.5,38.3,0,49.9,0c11.7,0,21.6,3.7,29.5,11c9.2,8.5,13.8,20.4,13.8,35.6c0,8.1-1,14.8-3,20.3c-1.6,5.2-4,9.5-7.1,13l10.5,9.8
          L83.8,100L72.8,89.7C69.5,91.7,66.6,93.1,64.2,93.9z M60.1,77.6L51,68.8l9.8-10.2l9.2,8.7c1.4-3,2.4-5.5,3-7.7
          c0.9-3.3,1.4-7.2,1.4-11.6c0-10.2-2.1-18-6.2-23.6c-4.2-5.6-10.2-8.3-18.2-8.3c-7.5,0-13.5,2.7-18,8c-4.5,5.3-6.7,13.3-6.7,23.9
          c0,12.4,3.2,21.3,9.6,26.7c4.1,3.5,9.1,5.2,14.9,5.2c2.2,0,4.3-0.3,6.3-0.8C57,78.8,58.4,78.3,60.1,77.6z`,R:`M50.3,60.8H28.7V100H8.3V0h49c7,0.1,12.4,1,16.2,2.6c3.8,1.6,7,3.9,9.6,7c2.2,2.5,3.9,5.3,5.2,8.4
          c1.3,3.1,1.9,6.6,1.9,10.5c0,4.7-1.2,9.4-3.6,14c-2.4,4.6-6.4,7.8-11.9,9.7c4.6,1.9,7.9,4.5,9.8,7.9c1.9,3.4,2.9,8.6,2.9,15.6v6.7
          c0,4.6,0.2,7.7,0.5,9.3c0.5,2.6,1.8,4.5,3.8,5.7v2.5h-23c-0.6-2.2-1.1-4-1.4-5.4c-0.5-2.8-0.8-5.7-0.9-8.6l-0.1-9.3
          c-0.1-6.4-1.3-10.6-3.5-12.8C60.6,61.8,56.4,60.8,50.3,60.8z M63,42.6c4.2-1.9,6.2-5.7,6.2-11.3c0-6.1-2-10.1-6-12.2
          c-2.3-1.2-5.7-1.8-10.2-1.8H28.7v26.9h23.7C57.1,44.2,60.6,43.7,63,42.6z`,S:`M50.1,83.9c4.7,0,8.5-0.5,11.4-1.5c5.5-2,8.3-5.6,8.3-11c0-3.1-1.4-5.6-4.1-7.3c-2.7-1.7-7.1-3.2-12.9-4.4l-10-2.3
          c-9.9-2.2-16.7-4.7-20.5-7.3c-6.4-4.4-9.6-11.2-9.6-20.5c0-8.5,3.1-15.5,9.3-21.2C28.1,2.8,37.2,0,49.1,0c10,0,18.5,2.6,25.6,7.9
          c7.1,5.3,10.7,13,11.1,23.1h-19c-0.3-5.7-2.8-9.8-7.5-12.2c-3.1-1.6-6.9-2.4-11.5-2.4c-5.1,0-9.2,1-12.2,3.1
          c-3,2.1-4.6,4.9-4.6,8.6c0,3.4,1.5,5.9,4.5,7.6c1.9,1.1,6,2.4,12.3,3.9l16.3,3.9c7.2,1.7,12.6,4,16.2,6.9
          c5.7,4.5,8.5,10.9,8.5,19.4c0,8.7-3.3,15.9-9.9,21.6c-6.6,5.7-16,8.6-28.1,8.6c-12.3,0-22.1-2.8-29.1-8.5
          c-7.1-5.6-10.6-13.4-10.6-23.2H30c0.6,4.3,1.8,7.6,3.5,9.7C36.8,81.9,42.3,83.9,50.1,83.9z`,T:"M90.5,0v17.7H60.6V100h-21V17.7H9.5V0H90.5z",U:`M68.5,59.9V0h20.7v59.9c0,10.4-1.6,18.4-4.8,24.2C78.4,94.7,66.9,100,50,100c-16.9,0-28.4-5.3-34.4-15.9
          c-3.2-5.8-4.8-13.8-4.8-24.2V0h20.7v59.9c0,6.7,0.8,11.6,2.4,14.7c2.5,5.5,7.8,8.2,16.1,8.2c8.2,0,13.6-2.7,16.1-8.2
          C67.7,71.5,68.5,66.6,68.5,59.9z`,V:"M6.2,0h22.3l21.7,75.9L72.1,0h21.7L59.7,100H40L6.2,0z",W:`M83.3,0H100L77.8,100H62.1l-9.5-58.5l-2.8-19.3l-2.8,19.3L37.6,100H22.3L0,0h17.5l10.4,57.3l2.2,15.9l2.3-15.6L41.3,0h17.4
          L68,57.3l2.4,15.9l2.4-15.3L83.3,0z`,X:"M94.4,100H69L50,65.9L29.9,100H5.6l32.2-50.9L7.2,0h25L50,32.5L68.3,0h24.2L61.9,48.2L94.4,100z",Y:"M94.5,0L61,62.4V100H40.1V62.4L5.5,0h24.6l20.8,43.6L70.8,0H94.5z",Z:"M88.9,100H11.1V82.4l51.6-64.7H12.4V0h76.4v16.8L36.5,82.4h52.4V100z"}]]);let Uo=Xr;function Bw(r){const{id:e,onAlignmentLoaded:t,onFileLoadStart:n,onAlignmenLoadError:i,removeDuplicateSeqs:s}=r,o=w.useRef(null),a=w.useCallback(u=>{var h;u.preventDefault(),(h=o.current)==null||h.click()},[o]),l=w.useCallback(u=>{t(u),o.current&&(o.current.value="")},[o,t]),c=w.useCallback(u=>{u.preventDefault(),o.current&&o.current.files&&(n&&n(),setTimeout(()=>{const h=o.current.files[0];Ci.loadAlignmentFromFile(h,s,l,i)}))},[l,o,i,n,s]);return H.jsxs("div",{className:"file-upload-input",children:[H.jsx("input",{id:e,type:"file",className:"av2-hidden-file-input",ref:o,onChange:c}),H.jsx("button",{type:"button",onClick:a,children:"Choose File"})]})}const Mw=r=>{const{labelText:e,fileURL:t,fileName:n,onAlignmentLoaded:i,onFileLoadStart:s,onAlignmenLoadError:o,removeDuplicateSeqs:a}=r;return H.jsx("button",{type:"button",className:"button-link",onClick:l=>{l.preventDefault(),s&&s(),Ci.loadAlignmentFromURL(t,a,i,o,n)},children:e},t)},Ow=r=>{const{alignmentLoaded:e,onAlignmenLoadError:t,removeDuplicateSeqs:n,onFileLoadStart:i}=r,[s,o]=w.useState(!1),[a,l]=w.useState(!1),c=w.useCallback(f=>{var g,m;if(((g=f.dataTransfer)==null?void 0:g.items.length)===1&&((m=f.dataTransfer)==null?void 0:m.types.indexOf("Files"))!==-1)return o(!0),f.stopPropagation(),f.preventDefault(),!1},[]),u=w.useCallback(f=>(f.preventDefault(),f.stopPropagation(),!1),[]),h=w.useCallback(f=>(o(!1),f.stopPropagation(),f.preventDefault(),!1),[]),d=w.useCallback(f=>{var m;f.preventDefault();const g=(m=f.dataTransfer)==null?void 0:m.files;return g&&g.length>0&&a&&(i&&i(),setTimeout(()=>{const p=g[0];Ci.loadAlignmentFromFile(p,n,e,t)})),o(!1),l(!1),!1},[e,a,t,i,n]);return w.useEffect(()=>(window.addEventListener("mouseup",h),window.addEventListener("dragenter",c),window.addEventListener("dragover",u),window.addEventListener("drop",d),()=>{window.removeEventListener("mouseup",h),window.removeEventListener("dragenter",c),window.removeEventListener("dragover",u),window.removeEventListener("drop",d)}),[c,h,u,d]),H.jsx("div",{id:"av2-fileloader-fullpage-id",className:"av2-fileloader-fullpage",style:{display:s?"grid":"none"},onDragLeave:f=>{f.relatedTarget||h(f)},children:H.jsx("div",{className:"av2-fileloader-dropbox",style:{opacity:a?1:.4},onDragEnter:f=>{l(!0),c(f)},onDragLeave:f=>{l(!1)},children:"Drop alignment file here to load"})})},Ai=Math.min,Un=Math.max,Wo=Math.round,eo=Math.floor,Cn=r=>({x:r,y:r}),Nw={left:"right",right:"left",bottom:"top",top:"bottom"},Dw={start:"end",end:"start"};function kc(r,e,t){return Un(r,Ai(e,t))}function ys(r,e){return typeof r=="function"?r(e):r}function jn(r){return r.split("-")[0]}function bs(r){return r.split("-")[1]}function mm(r){return r==="x"?"y":"x"}function vu(r){return r==="y"?"height":"width"}function ga(r){return["top","bottom"].includes(jn(r))?"y":"x"}function yu(r){return mm(ga(r))}function Lw(r,e,t){t===void 0&&(t=!1);const n=bs(r),i=yu(r),s=vu(i);let o=i==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=zo(o)),[o,zo(o)]}function Fw(r){const e=zo(r);return[Gc(r),e,Gc(e)]}function Gc(r){return r.replace(/start|end/g,e=>Dw[e])}function kw(r,e,t){const n=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(r){case"top":case"bottom":return t?e?i:n:e?n:i;case"left":case"right":return e?s:o;default:return[]}}function Gw(r,e,t,n){const i=bs(r);let s=kw(jn(r),t==="start",n);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(Gc)))),s}function zo(r){return r.replace(/left|right|bottom|top/g,e=>Nw[e])}function Hw(r){return{top:0,right:0,bottom:0,left:0,...r}}function vm(r){return typeof r!="number"?Hw(r):{top:r,right:r,bottom:r,left:r}}function Xo(r){return{...r,top:r.y,left:r.x,right:r.x+r.width,bottom:r.y+r.height}}function Kd(r,e,t){let{reference:n,floating:i}=r;const s=ga(e),o=yu(e),a=vu(o),l=jn(e),c=s==="y",u=n.x+n.width/2-i.width/2,h=n.y+n.height/2-i.height/2,d=n[a]/2-i[a]/2;let f;switch(l){case"top":f={x:u,y:n.y-i.height};break;case"bottom":f={x:u,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:h};break;case"left":f={x:n.x-i.width,y:h};break;default:f={x:n.x,y:n.y}}switch(bs(e)){case"start":f[o]-=d*(t&&c?-1:1);break;case"end":f[o]+=d*(t&&c?-1:1);break}return f}const Vw=async(r,e,t)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:r,floating:e,strategy:i}),{x:u,y:h}=Kd(c,n,l),d=n,f={},g=0;for(let m=0;m<a.length;m++){const{name:p,fn:v}=a[m],{x,y:b,data:_,reset:y}=await v({x:u,y:h,initialPlacement:n,placement:d,strategy:i,middlewareData:f,rects:c,platform:o,elements:{reference:r,floating:e}});u=x??u,h=b??h,f={...f,[p]:{...f[p],..._}},y&&g<=50&&(g++,typeof y=="object"&&(y.placement&&(d=y.placement),y.rects&&(c=y.rects===!0?await o.getElementRects({reference:r,floating:e,strategy:i}):y.rects),{x:u,y:h}=Kd(c,d,l)),m=-1)}return{x:u,y:h,placement:d,strategy:i,middlewareData:f}};async function ym(r,e){var t;e===void 0&&(e={});const{x:n,y:i,platform:s,rects:o,elements:a,strategy:l}=r,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:d=!1,padding:f=0}=ys(e,r),g=vm(f),p=a[d?h==="floating"?"reference":"floating":h],v=Xo(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(p)))==null||t?p:p.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),x=h==="floating"?{...o.floating,x:n,y:i}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),_=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},y=Xo(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:b,strategy:l}):x);return{top:(v.top-y.top+g.top)/_.y,bottom:(y.bottom-v.bottom+g.bottom)/_.y,left:(v.left-y.left+g.left)/_.x,right:(y.right-v.right+g.right)/_.x}}const Uw=r=>({name:"arrow",options:r,async fn(e){const{x:t,y:n,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=ys(r,e)||{};if(c==null)return{};const h=vm(u),d={x:t,y:n},f=yu(i),g=vu(f),m=await o.getDimensions(c),p=f==="y",v=p?"top":"left",x=p?"bottom":"right",b=p?"clientHeight":"clientWidth",_=s.reference[g]+s.reference[f]-d[f]-s.floating[g],y=d[f]-s.reference[f],I=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let A=I?I[b]:0;(!A||!await(o.isElement==null?void 0:o.isElement(I)))&&(A=a.floating[b]||s.floating[g]);const P=_/2-y/2,L=A/2-m[g]/2-1,V=Ai(h[v],L),U=Ai(h[x],L),N=V,M=A-m[g]-U,k=A/2-m[g]/2+P,O=kc(N,k,M),S=!l.arrow&&bs(i)!=null&&k!==O&&s.reference[g]/2-(k<N?V:U)-m[g]/2<0,E=S?k<N?k-N:k-M:0;return{[f]:d[f]+E,data:{[f]:O,centerOffset:k-O-E,...S&&{alignmentOffset:E}},reset:S}}}),Ww=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var t,n;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...p}=ys(r,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const v=jn(i),x=jn(a)===a,b=await(l.isRTL==null?void 0:l.isRTL(c.floating)),_=d||(x||!m?[zo(a)]:Fw(a));!d&&g!=="none"&&_.push(...Gw(a,m,g,b));const y=[a,..._],I=await ym(e,p),A=[];let P=((n=s.flip)==null?void 0:n.overflows)||[];if(u&&A.push(I[v]),h){const N=Lw(i,o,b);A.push(I[N[0]],I[N[1]])}if(P=[...P,{placement:i,overflows:A}],!A.every(N=>N<=0)){var L,V;const N=(((L=s.flip)==null?void 0:L.index)||0)+1,M=y[N];if(M)return{data:{index:N,overflows:P},reset:{placement:M}};let k=(V=P.filter(O=>O.overflows[0]<=0).sort((O,S)=>O.overflows[1]-S.overflows[1])[0])==null?void 0:V.placement;if(!k)switch(f){case"bestFit":{var U;const O=(U=P.map(S=>[S.placement,S.overflows.filter(E=>E>0).reduce((E,C)=>E+C,0)]).sort((S,E)=>S[1]-E[1])[0])==null?void 0:U[0];O&&(k=O);break}case"initialPlacement":k=a;break}if(i!==k)return{reset:{placement:k}}}return{}}}};async function zw(r,e){const{placement:t,platform:n,elements:i}=r,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=jn(t),a=bs(t),l=ga(t)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,h=ys(e,r);let{mainAxis:d,crossAxis:f,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&typeof g=="number"&&(f=a==="end"?g*-1:g),l?{x:f*u,y:d*c}:{x:d*c,y:f*u}}const Xw=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){var t,n;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await zw(e,r);return o===((t=a.offset)==null?void 0:t.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},jw=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(e){const{x:t,y:n,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:p=>{let{x:v,y:x}=p;return{x:v,y:x}}},...l}=ys(r,e),c={x:t,y:n},u=await ym(e,l),h=ga(jn(i)),d=mm(h);let f=c[d],g=c[h];if(s){const p=d==="y"?"top":"left",v=d==="y"?"bottom":"right",x=f+u[p],b=f-u[v];f=kc(x,f,b)}if(o){const p=h==="y"?"top":"left",v=h==="y"?"bottom":"right",x=g+u[p],b=g-u[v];g=kc(x,g,b)}const m=a.fn({...e,[d]:f,[h]:g});return{...m,data:{x:m.x-t,y:m.y-n}}}}};function _n(r){return bm(r)?(r.nodeName||"").toLowerCase():"#document"}function Qt(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function tn(r){var e;return(e=(bm(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function bm(r){return r instanceof Node||r instanceof Qt(r).Node}function en(r){return r instanceof Element||r instanceof Qt(r).Element}function Gr(r){return r instanceof HTMLElement||r instanceof Qt(r).HTMLElement}function ef(r){return typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof Qt(r).ShadowRoot}function xs(r){const{overflow:e,overflowX:t,overflowY:n,display:i}=pr(r);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!["inline","contents"].includes(i)}function $w(r){return["table","td","th"].includes(_n(r))}function bu(r){const e=xu(),t=pr(r);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(t.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(t.contain||"").includes(n))}function xm(r){let e=wi(r);for(;Gr(e)&&!ma(e);){if(bu(e))return e;e=wi(e)}return null}function xu(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ma(r){return["html","body","#document"].includes(_n(r))}function pr(r){return Qt(r).getComputedStyle(r)}function va(r){return en(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.pageXOffset,scrollTop:r.pageYOffset}}function wi(r){if(_n(r)==="html")return r;const e=r.assignedSlot||r.parentNode||ef(r)&&r.host||tn(r);return ef(e)?e.host:e}function Cm(r){const e=wi(r);return ma(e)?r.ownerDocument?r.ownerDocument.body:r.body:Gr(e)&&xs(e)?e:Cm(e)}function as(r,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=Cm(r),s=i===((n=r.ownerDocument)==null?void 0:n.body),o=Qt(i);return s?e.concat(o,o.visualViewport||[],xs(i)?i:[],o.frameElement&&t?as(o.frameElement):[]):e.concat(i,as(i,[],t))}function _m(r){const e=pr(r);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=Gr(r),s=i?r.offsetWidth:t,o=i?r.offsetHeight:n,a=Wo(t)!==s||Wo(n)!==o;return a&&(t=s,n=o),{width:t,height:n,$:a}}function Cu(r){return en(r)?r:r.contextElement}function bi(r){const e=Cu(r);if(!Gr(e))return Cn(1);const t=e.getBoundingClientRect(),{width:n,height:i,$:s}=_m(e);let o=(s?Wo(t.width):t.width)/n,a=(s?Wo(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Yw=Cn(0);function Sm(r){const e=Qt(r);return!xu()||!e.visualViewport?Yw:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Zw(r,e,t){return e===void 0&&(e=!1),!t||e&&t!==Qt(r)?!1:e}function $n(r,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=r.getBoundingClientRect(),s=Cu(r);let o=Cn(1);e&&(n?en(n)&&(o=bi(n)):o=bi(r));const a=Zw(s,t,n)?Sm(s):Cn(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,h=i.height/o.y;if(s){const d=Qt(s),f=n&&en(n)?Qt(n):n;let g=d.frameElement;for(;g&&n&&f!==d;){const m=bi(g),p=g.getBoundingClientRect(),v=pr(g),x=p.left+(g.clientLeft+parseFloat(v.paddingLeft))*m.x,b=p.top+(g.clientTop+parseFloat(v.paddingTop))*m.y;l*=m.x,c*=m.y,u*=m.x,h*=m.y,l+=x,c+=b,g=Qt(g).frameElement}}return Xo({width:u,height:h,x:l,y:c})}const qw=[":popover-open",":modal"];function Am(r){let e=!1,t=0,n=0;function i(s){try{e=e||r.matches(s)}catch{}}if(qw.forEach(s=>{i(s)}),e){const s=xm(r);if(s){const o=s.getBoundingClientRect();t=o.x,n=o.y}}return[e,t,n]}function Jw(r){let{elements:e,rect:t,offsetParent:n,strategy:i}=r;const s=tn(n),[o]=e?Am(e.floating):[!1];if(n===s||o)return t;let a={scrollLeft:0,scrollTop:0},l=Cn(1);const c=Cn(0),u=Gr(n);if((u||!u&&i!=="fixed")&&((_n(n)!=="body"||xs(s))&&(a=va(n)),Gr(n))){const h=$n(n);l=bi(n),c.x=h.x+n.clientLeft,c.y=h.y+n.clientTop}return{width:t.width*l.x,height:t.height*l.y,x:t.x*l.x-a.scrollLeft*l.x+c.x,y:t.y*l.y-a.scrollTop*l.y+c.y}}function Qw(r){return Array.from(r.getClientRects())}function wm(r){return $n(tn(r)).left+va(r).scrollLeft}function Kw(r){const e=tn(r),t=va(r),n=r.ownerDocument.body,i=Un(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=Un(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-t.scrollLeft+wm(r);const a=-t.scrollTop;return pr(n).direction==="rtl"&&(o+=Un(e.clientWidth,n.clientWidth)-i),{width:i,height:s,x:o,y:a}}function eE(r,e){const t=Qt(r),n=tn(r),i=t.visualViewport;let s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=xu();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function tE(r,e){const t=$n(r,!0,e==="fixed"),n=t.top+r.clientTop,i=t.left+r.clientLeft,s=Gr(r)?bi(r):Cn(1),o=r.clientWidth*s.x,a=r.clientHeight*s.y,l=i*s.x,c=n*s.y;return{width:o,height:a,x:l,y:c}}function tf(r,e,t){let n;if(e==="viewport")n=eE(r,t);else if(e==="document")n=Kw(tn(r));else if(en(e))n=tE(e,t);else{const i=Sm(r);n={...e,x:e.x-i.x,y:e.y-i.y}}return Xo(n)}function Em(r,e){const t=wi(r);return t===e||!en(t)||ma(t)?!1:pr(t).position==="fixed"||Em(t,e)}function rE(r,e){const t=e.get(r);if(t)return t;let n=as(r,[],!1).filter(a=>en(a)&&_n(a)!=="body"),i=null;const s=pr(r).position==="fixed";let o=s?wi(r):r;for(;en(o)&&!ma(o);){const a=pr(o),l=bu(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||xs(o)&&!l&&Em(r,o))?n=n.filter(u=>u!==o):i=a,o=wi(o)}return e.set(r,n),n}function nE(r){let{element:e,boundary:t,rootBoundary:n,strategy:i}=r;const o=[...t==="clippingAncestors"?rE(e,this._c):[].concat(t),n],a=o[0],l=o.reduce((c,u)=>{const h=tf(e,u,i);return c.top=Un(h.top,c.top),c.right=Ai(h.right,c.right),c.bottom=Ai(h.bottom,c.bottom),c.left=Un(h.left,c.left),c},tf(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function iE(r){const{width:e,height:t}=_m(r);return{width:e,height:t}}function sE(r,e,t,n){const i=Gr(e),s=tn(e),o=t==="fixed",a=$n(r,!0,o,e);let l={scrollLeft:0,scrollTop:0};const c=Cn(0);if(i||!i&&!o)if((_n(e)!=="body"||xs(s))&&(l=va(e)),i){const m=$n(e,!0,o,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else s&&(c.x=wm(s));let u=a.left+l.scrollLeft-c.x,h=a.top+l.scrollTop-c.y;const[d,f,g]=Am(n);return d&&(u+=f,h+=g,i&&(u+=e.clientLeft,h+=e.clientTop)),{x:u,y:h,width:a.width,height:a.height}}function rf(r,e){return!Gr(r)||pr(r).position==="fixed"?null:e?e(r):r.offsetParent}function Im(r,e){const t=Qt(r);if(!Gr(r))return t;let n=rf(r,e);for(;n&&$w(n)&&pr(n).position==="static";)n=rf(n,e);return n&&(_n(n)==="html"||_n(n)==="body"&&pr(n).position==="static"&&!bu(n))?t:n||xm(r)||t}const oE=async function(r){const e=this.getOffsetParent||Im,t=this.getDimensions;return{reference:sE(r.reference,await e(r.floating),r.strategy,r.floating),floating:{x:0,y:0,...await t(r.floating)}}};function aE(r){return pr(r).direction==="rtl"}const lE={convertOffsetParentRelativeRectToViewportRelativeRect:Jw,getDocumentElement:tn,getClippingRect:nE,getOffsetParent:Im,getElementRects:oE,getClientRects:Qw,getDimensions:iE,getScale:bi,isElement:en,isRTL:aE};function cE(r,e){let t=null,n;const i=tn(r);function s(){var a;clearTimeout(n),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:h,height:d}=r.getBoundingClientRect();if(a||e(),!h||!d)return;const f=eo(u),g=eo(i.clientWidth-(c+h)),m=eo(i.clientHeight-(u+d)),p=eo(c),x={rootMargin:-f+"px "+-g+"px "+-m+"px "+-p+"px",threshold:Un(0,Ai(1,l))||1};let b=!0;function _(y){const I=y[0].intersectionRatio;if(I!==l){if(!b)return o();I?o(!1,I):n=setTimeout(()=>{o(!1,1e-7)},100)}b=!1}try{t=new IntersectionObserver(_,{...x,root:i.ownerDocument})}catch{t=new IntersectionObserver(_,x)}t.observe(r)}return o(!0),s}function Tm(r,e,t,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=Cu(r),u=i||s?[...c?as(c):[],...as(e)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",t,{passive:!0}),s&&v.addEventListener("resize",t)});const h=c&&a?cE(c,t):null;let d=-1,f=null;o&&(f=new ResizeObserver(v=>{let[x]=v;x&&x.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=f)==null||b.observe(e)})),t()}),c&&!l&&f.observe(c),f.observe(e));let g,m=l?$n(r):null;l&&p();function p(){const v=$n(r);m&&(v.x!==m.x||v.y!==m.y||v.width!==m.width||v.height!==m.height)&&t(),m=v,g=requestAnimationFrame(p)}return t(),()=>{var v;u.forEach(x=>{i&&x.removeEventListener("scroll",t),s&&x.removeEventListener("resize",t)}),h==null||h(),(v=f)==null||v.disconnect(),f=null,l&&cancelAnimationFrame(g)}}const uE=jw,hE=Ww,dE=Uw,nf=(r,e,t)=>{const n=new Map,i={platform:lE,...t},s={...i.platform,_c:n};return Vw(r,e,{...i,platform:s})};var Rl={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var sf;function fE(){return sf||(sf=1,function(r){(function(){var e={}.hasOwnProperty;function t(){for(var n=[],i=0;i<arguments.length;i++){var s=arguments[i];if(s){var o=typeof s;if(o==="string"||o==="number")n.push(s);else if(Array.isArray(s)){if(s.length){var a=t.apply(null,s);a&&n.push(a)}}else if(o==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){n.push(s.toString());continue}for(var l in s)e.call(s,l)&&s[l]&&n.push(l)}}}return n.join(" ")}r.exports?(t.default=t,r.exports=t):window.classNames=t})()}(Rl)),Rl.exports}var pE=fE();const Hc=Qc(pE);/*
* React Tooltip
* {@link https://github.com/ReactTooltip/react-tooltip}
* @copyright ReactTooltip Team
* @license MIT
*/const gE="react-tooltip-core-styles",mE="react-tooltip-base-styles",of={core:!1,base:!1};function af({css:r,id:e=mE,type:t="base",ref:n}){var i,s;if(!r||typeof document>"u"||of[t]||t==="core"&&typeof process<"u"&&(!((i=process==null?void 0:process.env)===null||i===void 0)&&i.REACT_TOOLTIP_DISABLE_CORE_STYLES)||t!=="base"&&typeof process<"u"&&(!((s=process==null?void 0:process.env)===null||s===void 0)&&s.REACT_TOOLTIP_DISABLE_BASE_STYLES))return;t==="core"&&(e=gE),n||(n={});const{insertAt:o}=n;if(document.getElementById(e))return void console.warn(`[react-tooltip] Element with id '${e}' already exists. Call \`removeStyle()\` first`);const a=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.id=e,l.type="text/css",o==="top"&&a.firstChild?a.insertBefore(l,a.firstChild):a.appendChild(l),l.styleSheet?l.styleSheet.cssText=r:l.appendChild(document.createTextNode(r)),of[t]=!0}const lf=(r,e,t)=>{let n=null;return function(...i){const s=()=>{n=null};!n&&(r.apply(this,i),n=setTimeout(s,e))}},vE="DEFAULT_TOOLTIP_ID",yE={anchorRefs:new Set,activeAnchor:{current:null},attach:()=>{},detach:()=>{},setActiveAnchor:()=>{}},bE=w.createContext({getTooltipData:()=>yE});function Rm(r=vE){return w.useContext(bE).getTooltipData(r)}const xE=typeof window<"u"?w.useLayoutEffect:w.useEffect,CE=r=>{if(!(r instanceof HTMLElement||r instanceof SVGElement))return!1;const e=getComputedStyle(r);return["overflow","overflow-x","overflow-y"].some(t=>{const n=e.getPropertyValue(t);return n==="auto"||n==="scroll"})},cf=r=>{if(!r)return null;let e=r.parentElement;for(;e;){if(CE(e))return e;e=e.parentElement}return document.scrollingElement||document.documentElement},uf=async({elementReference:r=null,tooltipReference:e=null,tooltipArrowReference:t=null,place:n="top",offset:i=10,strategy:s="absolute",middlewares:o=[Xw(Number(i)),hE({fallbackAxisSideDirection:"start"}),uE({padding:5})],border:a})=>{if(!r)return{tooltipStyles:{},tooltipArrowStyles:{},place:n};if(e===null)return{tooltipStyles:{},tooltipArrowStyles:{},place:n};const l=o;return t?(l.push(dE({element:t,padding:5})),nf(r,e,{placement:n,strategy:s,middleware:l}).then(({x:c,y:u,placement:h,middlewareData:d})=>{var f,g;const m={left:`${c}px`,top:`${u}px`,border:a},{x:p,y:v}=(f=d.arrow)!==null&&f!==void 0?f:{x:0,y:0},x=(g={top:"bottom",right:"left",bottom:"top",left:"right"}[h.split("-")[0]])!==null&&g!==void 0?g:"bottom",b=a&&{borderBottom:a,borderRight:a};let _=0;if(a){const y=`${a}`.match(/(\d+)px/);_=y!=null&&y[1]?Number(y[1]):1}return{tooltipStyles:m,tooltipArrowStyles:{left:p!=null?`${p}px`:"",top:v!=null?`${v}px`:"",right:"",bottom:"",...b,[x]:`-${4+_}px`},place:h}})):nf(r,e,{placement:"bottom",strategy:s,middleware:l}).then(({x:c,y:u,placement:h})=>({tooltipStyles:{left:`${c}px`,top:`${u}px`},tooltipArrowStyles:{},place:h}))};var ni={tooltip:"core-styles-module_tooltip__3vRRp",fixed:"core-styles-module_fixed__pcSol",arrow:"core-styles-module_arrow__cvMwQ",noArrow:"core-styles-module_noArrow__xock6",clickable:"core-styles-module_clickable__ZuTTB",show:"core-styles-module_show__Nt9eE",closing:"core-styles-module_closing__sGnxF"},Pl={tooltip:"styles-module_tooltip__mnnfp",arrow:"styles-module_arrow__K0L3T",dark:"styles-module_dark__xNqje",light:"styles-module_light__Z6W-X",success:"styles-module_success__A2AKt",warning:"styles-module_warning__SCK0X",error:"styles-module_error__JvumD",info:"styles-module_info__BWdHW"};const _E=({forwardRef:r,id:e,className:t,classNameArrow:n,variant:i="dark",anchorId:s,anchorSelect:o,place:a="top",offset:l=10,events:c=["hover"],openOnClick:u=!1,positionStrategy:h="absolute",middlewares:d,wrapper:f,delayShow:g=0,delayHide:m=0,float:p=!1,hidden:v=!1,noArrow:x=!1,clickable:b=!1,closeOnEsc:_=!1,closeOnScroll:y=!1,closeOnResize:I=!1,openEvents:A,closeEvents:P,globalCloseEvents:L,imperativeModeOnly:V,style:U,position:N,afterShow:M,afterHide:k,content:O,contentWrapperRef:S,isOpen:E,setIsOpen:C,activeAnchor:B,setActiveAnchor:T,border:R,opacity:D,arrowColor:G,role:W="tooltip"})=>{var j;const Y=w.useRef(null),$=w.useRef(null),q=w.useRef(null),oe=w.useRef(null),te=w.useRef(null),[de,Q]=w.useState(a),[ie,K]=w.useState({}),[re,le]=w.useState({}),[Z,ne]=w.useState(!1),[Ae,Le]=w.useState(!1),[Oe,He]=w.useState(null),it=w.useRef(!1),Rt=w.useRef(null),{anchorRefs:rr,setActiveAnchor:Te}=Rm(e),At=w.useRef(!1),[Nt,Ct]=w.useState([]),Dt=w.useRef(!1),Gt=u||c.includes("click"),Pt=Gt||(A==null?void 0:A.click)||(A==null?void 0:A.dblclick)||(A==null?void 0:A.mousedown),z=A?{...A}:{mouseenter:!0,focus:!0,click:!1,dblclick:!1,mousedown:!1};!A&&Gt&&Object.assign(z,{mouseenter:!1,focus:!1,click:!0});const X=P?{...P}:{mouseleave:!0,blur:!0,click:!1,dblclick:!1,mouseup:!1};!P&&Gt&&Object.assign(X,{mouseleave:!1,blur:!1});const Re=L?{...L}:{escape:_||!1,scroll:y||!1,resize:I||!1,clickOutsideAnchor:Pt||!1};V&&(Object.assign(z,{mouseenter:!1,focus:!1,click:!1,dblclick:!1,mousedown:!1}),Object.assign(X,{mouseleave:!1,blur:!1,click:!1,dblclick:!1,mouseup:!1}),Object.assign(Re,{escape:!1,scroll:!1,resize:!1,clickOutsideAnchor:!1})),xE(()=>(Dt.current=!0,()=>{Dt.current=!1}),[]);const Fe=ae=>{Dt.current&&(ae&&Le(!0),setTimeout(()=>{Dt.current&&(C==null||C(ae),E===void 0&&ne(ae))},10))};w.useEffect(()=>{if(E===void 0)return()=>null;E&&Le(!0);const ae=setTimeout(()=>{ne(E)},10);return()=>{clearTimeout(ae)}},[E]),w.useEffect(()=>{if(Z!==it.current)if(te.current&&clearTimeout(te.current),it.current=Z,Z)M==null||M();else{const ae=(Pe=>{const _e=Pe.match(/^([\d.]+)(m?s?)$/);if(!_e)return 0;const[,et,tt]=_e;return tt!=="s"&&tt!=="ms"?0:Number(et)*(tt==="ms"?1:1e3)})(getComputedStyle(document.body).getPropertyValue("--rt-transition-show-delay"));te.current=setTimeout(()=>{Le(!1),He(null),k==null||k()},ae+25)}},[Z]);const Qe=(ae=g)=>{q.current&&clearTimeout(q.current),q.current=setTimeout(()=>{Fe(!0)},ae)},Ie=(ae=m)=>{oe.current&&clearTimeout(oe.current),oe.current=setTimeout(()=>{At.current||Fe(!1)},ae)},yt=ae=>{var Pe;if(!ae)return;const _e=(Pe=ae.currentTarget)!==null&&Pe!==void 0?Pe:ae.target;if(!(_e!=null&&_e.isConnected))return T(null),void Te({current:null});g?Qe():Fe(!0),T(_e),Te({current:_e}),oe.current&&clearTimeout(oe.current)},ut=()=>{b?Ie(m||100):m?Ie():Fe(!1),q.current&&clearTimeout(q.current)},st=({x:ae,y:Pe})=>{var _e;const et={getBoundingClientRect:()=>({x:ae,y:Pe,width:0,height:0,top:Pe,left:ae,right:ae,bottom:Pe})};uf({place:(_e=Oe==null?void 0:Oe.place)!==null&&_e!==void 0?_e:a,offset:l,elementReference:et,tooltipReference:Y.current,tooltipArrowReference:$.current,strategy:h,middlewares:d,border:R}).then(tt=>{Object.keys(tt.tooltipStyles).length&&K(tt.tooltipStyles),Object.keys(tt.tooltipArrowStyles).length&&le(tt.tooltipArrowStyles),Q(tt.place)})},$e=ae=>{if(!ae)return;const Pe=ae,_e={x:Pe.clientX,y:Pe.clientY};st(_e),Rt.current=_e},ft=ae=>{var Pe;if(!Z)return;const _e=ae.target;!((Pe=Y.current)===null||Pe===void 0)&&Pe.contains(_e)||[document.querySelector(`[id='${s}']`),...Nt].some(et=>et==null?void 0:et.contains(_e))||(Fe(!1),q.current&&clearTimeout(q.current))},me=lf(yt,50),Be=lf(ut,50),pt=w.useCallback(()=>{var ae,Pe;const _e=(ae=Oe==null?void 0:Oe.position)!==null&&ae!==void 0?ae:N;_e?st(_e):p?Rt.current&&st(Rt.current):B!=null&&B.isConnected&&uf({place:(Pe=Oe==null?void 0:Oe.place)!==null&&Pe!==void 0?Pe:a,offset:l,elementReference:B,tooltipReference:Y.current,tooltipArrowReference:$.current,strategy:h,middlewares:d,border:R}).then(et=>{Dt.current&&(Object.keys(et.tooltipStyles).length&&K(et.tooltipStyles),Object.keys(et.tooltipArrowStyles).length&&le(et.tooltipArrowStyles),Q(et.place))})},[Z,B,O,U,a,Oe==null?void 0:Oe.place,l,h,N,Oe==null?void 0:Oe.position,p]);w.useEffect(()=>{var ae,Pe;const _e=new Set(rr);Nt.forEach(Se=>{_e.add({current:Se})});const et=document.querySelector(`[id='${s}']`);et&&_e.add({current:et});const tt=()=>{Fe(!1)},Lt=cf(B),Ht=cf(Y.current);Re.scroll&&(window.addEventListener("scroll",tt),Lt==null||Lt.addEventListener("scroll",tt),Ht==null||Ht.addEventListener("scroll",tt));let F=null;Re.resize?window.addEventListener("resize",tt):B&&Y.current&&(F=Tm(B,Y.current,pt,{ancestorResize:!0,elementResize:!0,layoutShift:!0}));const J=Se=>{Se.key==="Escape"&&Fe(!1)};Re.escape&&window.addEventListener("keydown",J),Re.clickOutsideAnchor&&window.addEventListener("click",ft);const ee=[],ye=Se=>{Z&&(Se==null?void 0:Se.target)===B||yt(Se)},Ve=Se=>{Z&&(Se==null?void 0:Se.target)===B&&ut()},Ue=["mouseenter","mouseleave","focus","blur"],Ne=["click","dblclick","mousedown","mouseup"];Object.entries(z).forEach(([Se,Ye])=>{Ye&&(Ue.includes(Se)?ee.push({event:Se,listener:me}):Ne.includes(Se)&&ee.push({event:Se,listener:ye}))}),Object.entries(X).forEach(([Se,Ye])=>{Ye&&(Ue.includes(Se)?ee.push({event:Se,listener:Be}):Ne.includes(Se)&&ee.push({event:Se,listener:Ve}))}),p&&ee.push({event:"mousemove",listener:$e});const De=()=>{At.current=!0},gt=()=>{At.current=!1,ut()};return b&&!Pt&&((ae=Y.current)===null||ae===void 0||ae.addEventListener("mouseenter",De),(Pe=Y.current)===null||Pe===void 0||Pe.addEventListener("mouseleave",gt)),ee.forEach(({event:Se,listener:Ye})=>{_e.forEach(Bt=>{var sr;(sr=Bt.current)===null||sr===void 0||sr.addEventListener(Se,Ye)})}),()=>{var Se,Ye;Re.scroll&&(window.removeEventListener("scroll",tt),Lt==null||Lt.removeEventListener("scroll",tt),Ht==null||Ht.removeEventListener("scroll",tt)),Re.resize?window.removeEventListener("resize",tt):F==null||F(),Re.clickOutsideAnchor&&window.removeEventListener("click",ft),Re.escape&&window.removeEventListener("keydown",J),b&&!Pt&&((Se=Y.current)===null||Se===void 0||Se.removeEventListener("mouseenter",De),(Ye=Y.current)===null||Ye===void 0||Ye.removeEventListener("mouseleave",gt)),ee.forEach(({event:Bt,listener:sr})=>{_e.forEach(Ss=>{var Xt;(Xt=Ss.current)===null||Xt===void 0||Xt.removeEventListener(Bt,sr)})})}},[B,pt,Ae,rr,Nt,A,P,L,Gt]),w.useEffect(()=>{var ae,Pe;let _e=(Pe=(ae=Oe==null?void 0:Oe.anchorSelect)!==null&&ae!==void 0?ae:o)!==null&&Pe!==void 0?Pe:"";!_e&&e&&(_e=`[data-tooltip-id='${e}']`);const et=new MutationObserver(tt=>{const Lt=[],Ht=[];tt.forEach(F=>{if(F.type==="attributes"&&F.attributeName==="data-tooltip-id"&&F.target.getAttribute("data-tooltip-id")===e&&Lt.push(F.target),F.type==="childList"){if(B){const J=[...F.removedNodes].filter(ee=>ee.nodeType===1);if(_e)try{Ht.push(...J.filter(ee=>ee.matches(_e))),Ht.push(...J.flatMap(ee=>[...ee.querySelectorAll(_e)]))}catch{}J.some(ee=>{var ye;return!!(!((ye=ee==null?void 0:ee.contains)===null||ye===void 0)&&ye.call(ee,B))&&(Le(!1),Fe(!1),T(null),q.current&&clearTimeout(q.current),oe.current&&clearTimeout(oe.current),!0)})}if(_e)try{const J=[...F.addedNodes].filter(ee=>ee.nodeType===1);Lt.push(...J.filter(ee=>ee.matches(_e))),Lt.push(...J.flatMap(ee=>[...ee.querySelectorAll(_e)]))}catch{}}}),(Lt.length||Ht.length)&&Ct(F=>[...F.filter(J=>!Ht.includes(J)),...Lt])});return et.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-tooltip-id"]}),()=>{et.disconnect()}},[e,o,Oe==null?void 0:Oe.anchorSelect,B]),w.useEffect(()=>{pt()},[pt]),w.useEffect(()=>{if(!(S!=null&&S.current))return()=>null;const ae=new ResizeObserver(()=>{setTimeout(()=>pt())});return ae.observe(S.current),()=>{ae.disconnect()}},[O,S==null?void 0:S.current]),w.useEffect(()=>{var ae;const Pe=document.querySelector(`[id='${s}']`),_e=[...Nt,Pe];B&&_e.includes(B)||T((ae=Nt[0])!==null&&ae!==void 0?ae:Pe)},[s,Nt,B]),w.useEffect(()=>()=>{q.current&&clearTimeout(q.current),oe.current&&clearTimeout(oe.current)},[]),w.useEffect(()=>{var ae;let Pe=(ae=Oe==null?void 0:Oe.anchorSelect)!==null&&ae!==void 0?ae:o;if(!Pe&&e&&(Pe=`[data-tooltip-id='${e}']`),Pe)try{const _e=Array.from(document.querySelectorAll(Pe));Ct(_e)}catch{Ct([])}},[e,o,Oe==null?void 0:Oe.anchorSelect]);const nr=(j=Oe==null?void 0:Oe.content)!==null&&j!==void 0?j:O,ir=Z&&Object.keys(ie).length>0;return w.useImperativeHandle(r,()=>({open:ae=>{if(ae!=null&&ae.anchorSelect)try{document.querySelector(ae.anchorSelect)}catch{return void console.warn(`[react-tooltip] "${ae.anchorSelect}" is not a valid CSS selector`)}He(ae??null),ae!=null&&ae.delay?Qe(ae.delay):Fe(!0)},close:ae=>{ae!=null&&ae.delay?Ie(ae.delay):Fe(!1)},activeAnchor:B,place:de,isOpen:!!(Ae&&!v&&nr&&ir)})),Ae&&!v&&nr?w.createElement(f,{id:e,role:W,className:Hc("react-tooltip",ni.tooltip,Pl.tooltip,Pl[i],t,`react-tooltip__place-${de}`,ni[ir?"show":"closing"],ir?"react-tooltip__show":"react-tooltip__closing",h==="fixed"&&ni.fixed,b&&ni.clickable),onTransitionEnd:ae=>{te.current&&clearTimeout(te.current),Z||ae.propertyName!=="opacity"||(Le(!1),He(null),k==null||k())},style:{...U,...ie,opacity:D!==void 0&&ir?D:void 0},ref:Y},nr,w.createElement(f,{className:Hc("react-tooltip-arrow",ni.arrow,Pl.arrow,n,x&&ni.noArrow),style:{...re,background:G?`linear-gradient(to right bottom, transparent 50%, ${G} 50%)`:void 0},ref:$})):null},SE=({content:r})=>w.createElement("span",{dangerouslySetInnerHTML:{__html:r}}),hf=(r,e)=>!("CSS"in window&&"supports"in window.CSS)||window.CSS.supports(r,e),Pm=w.forwardRef(({id:r,anchorId:e,anchorSelect:t,content:n,html:i,render:s,className:o,classNameArrow:a,variant:l="dark",place:c="top",offset:u=10,wrapper:h="div",children:d=null,events:f=["hover"],openOnClick:g=!1,positionStrategy:m="absolute",middlewares:p,delayShow:v=0,delayHide:x=0,float:b=!1,hidden:_=!1,noArrow:y=!1,clickable:I=!1,closeOnEsc:A=!1,closeOnScroll:P=!1,closeOnResize:L=!1,openEvents:V,closeEvents:U,globalCloseEvents:N,imperativeModeOnly:M=!1,style:k,position:O,isOpen:S,disableStyleInjection:E=!1,border:C,opacity:B,arrowColor:T,setIsOpen:R,afterShow:D,afterHide:G,role:W="tooltip"},j)=>{const[Y,$]=w.useState(n),[q,oe]=w.useState(i),[te,de]=w.useState(c),[Q,ie]=w.useState(l),[K,re]=w.useState(u),[le,Z]=w.useState(v),[ne,Ae]=w.useState(x),[Le,Oe]=w.useState(b),[He,it]=w.useState(_),[Rt,rr]=w.useState(h),[Te,At]=w.useState(f),[Nt,Ct]=w.useState(m),[Dt,Gt]=w.useState(null),[Pt,z]=w.useState(null),X=w.useRef(E),{anchorRefs:Re,activeAnchor:Fe}=Rm(r),Qe=$e=>$e==null?void 0:$e.getAttributeNames().reduce((ft,me)=>{var Be;return me.startsWith("data-tooltip-")&&(ft[me.replace(/^data-tooltip-/,"")]=(Be=$e==null?void 0:$e.getAttribute(me))!==null&&Be!==void 0?Be:null),ft},{}),Ie=$e=>{const ft={place:me=>{var Be;de((Be=me)!==null&&Be!==void 0?Be:c)},content:me=>{$(me??n)},html:me=>{oe(me??i)},variant:me=>{var Be;ie((Be=me)!==null&&Be!==void 0?Be:l)},offset:me=>{re(me===null?u:Number(me))},wrapper:me=>{var Be;rr((Be=me)!==null&&Be!==void 0?Be:h)},events:me=>{const Be=me==null?void 0:me.split(" ");At(Be??f)},"position-strategy":me=>{var Be;Ct((Be=me)!==null&&Be!==void 0?Be:m)},"delay-show":me=>{Z(me===null?v:Number(me))},"delay-hide":me=>{Ae(me===null?x:Number(me))},float:me=>{Oe(me===null?b:me==="true")},hidden:me=>{it(me===null?_:me==="true")},"class-name":me=>{Gt(me)}};Object.values(ft).forEach(me=>me(null)),Object.entries($e).forEach(([me,Be])=>{var pt;(pt=ft[me])===null||pt===void 0||pt.call(ft,Be)})};w.useEffect(()=>{$(n)},[n]),w.useEffect(()=>{oe(i)},[i]),w.useEffect(()=>{de(c)},[c]),w.useEffect(()=>{ie(l)},[l]),w.useEffect(()=>{re(u)},[u]),w.useEffect(()=>{Z(v)},[v]),w.useEffect(()=>{Ae(x)},[x]),w.useEffect(()=>{Oe(b)},[b]),w.useEffect(()=>{it(_)},[_]),w.useEffect(()=>{Ct(m)},[m]),w.useEffect(()=>{X.current!==E&&console.warn("[react-tooltip] Do not change `disableStyleInjection` dynamically.")},[E]),w.useEffect(()=>{typeof window<"u"&&window.dispatchEvent(new CustomEvent("react-tooltip-inject-styles",{detail:{disableCore:E==="core",disableBase:E}}))},[]),w.useEffect(()=>{var $e;const ft=new Set(Re);let me=t;if(!me&&r&&(me=`[data-tooltip-id='${r}']`),me)try{document.querySelectorAll(me).forEach(ae=>{ft.add({current:ae})})}catch{console.warn(`[react-tooltip] "${me}" is not a valid CSS selector`)}const Be=document.querySelector(`[id='${e}']`);if(Be&&ft.add({current:Be}),!ft.size)return()=>null;const pt=($e=Pt??Be)!==null&&$e!==void 0?$e:Fe.current,nr=new MutationObserver(ae=>{ae.forEach(Pe=>{var _e;if(!pt||Pe.type!=="attributes"||!(!((_e=Pe.attributeName)===null||_e===void 0)&&_e.startsWith("data-tooltip-")))return;const et=Qe(pt);Ie(et)})}),ir={attributes:!0,childList:!1,subtree:!1};if(pt){const ae=Qe(pt);Ie(ae),nr.observe(pt,ir)}return()=>{nr.disconnect()}},[Re,Fe,Pt,e,t]),w.useEffect(()=>{k!=null&&k.border&&console.warn("[react-tooltip] Do not set `style.border`. Use `border` prop instead."),C&&!hf("border",`${C}`)&&console.warn(`[react-tooltip] "${C}" is not a valid \`border\`.`),k!=null&&k.opacity&&console.warn("[react-tooltip] Do not set `style.opacity`. Use `opacity` prop instead."),B&&!hf("opacity",`${B}`)&&console.warn(`[react-tooltip] "${B}" is not a valid \`opacity\`.`)},[]);let yt=d;const ut=w.useRef(null);if(s){const $e=s({content:Y??null,activeAnchor:Pt});yt=$e?w.createElement("div",{ref:ut,className:"react-tooltip-content-wrapper"},$e):null}else Y&&(yt=Y);q&&(yt=w.createElement(SE,{content:q}));const st={forwardRef:j,id:r,anchorId:e,anchorSelect:t,className:Hc(o,Dt),classNameArrow:a,content:yt,contentWrapperRef:ut,place:te,variant:Q,offset:K,wrapper:Rt,events:Te,openOnClick:g,positionStrategy:Nt,middlewares:p,delayShow:le,delayHide:ne,float:Le,hidden:He,noArrow:y,clickable:I,closeOnEsc:A,closeOnScroll:P,closeOnResize:L,openEvents:V,closeEvents:U,globalCloseEvents:N,imperativeModeOnly:M,style:k,position:O,isOpen:S,border:C,opacity:B,arrowColor:T,setIsOpen:R,afterShow:D,afterHide:G,activeAnchor:Pt,setActiveAnchor:$e=>z($e),role:W};return w.createElement(_E,{...st})});typeof window<"u"&&window.addEventListener("react-tooltip-inject-styles",r=>{r.detail.disableCore||af({css:":root{--rt-color-white:#fff;--rt-color-dark:#222;--rt-color-success:#8dc572;--rt-color-error:#be6464;--rt-color-warning:#f0ad4e;--rt-color-info:#337ab7;--rt-opacity:0.9;--rt-transition-show-delay:0.15s;--rt-transition-closing-delay:0.15s}.core-styles-module_tooltip__3vRRp{position:absolute;top:0;left:0;pointer-events:none;opacity:0;will-change:opacity}.core-styles-module_fixed__pcSol{position:fixed}.core-styles-module_arrow__cvMwQ{position:absolute;background:inherit}.core-styles-module_noArrow__xock6{display:none}.core-styles-module_clickable__ZuTTB{pointer-events:auto}.core-styles-module_show__Nt9eE{opacity:var(--rt-opacity);transition:opacity var(--rt-transition-show-delay)ease-out}.core-styles-module_closing__sGnxF{opacity:0;transition:opacity var(--rt-transition-closing-delay)ease-in}",type:"core"}),r.detail.disableBase||af({css:`
.styles-module_tooltip__mnnfp{padding:8px 16px;border-radius:3px;font-size:90%;width:max-content}.styles-module_arrow__K0L3T{width:8px;height:8px}[class*='react-tooltip__place-top']>.styles-module_arrow__K0L3T{transform:rotate(45deg)}[class*='react-tooltip__place-right']>.styles-module_arrow__K0L3T{transform:rotate(135deg)}[class*='react-tooltip__place-bottom']>.styles-module_arrow__K0L3T{transform:rotate(225deg)}[class*='react-tooltip__place-left']>.styles-module_arrow__K0L3T{transform:rotate(315deg)}.styles-module_dark__xNqje{background:var(--rt-color-dark);color:var(--rt-color-white)}.styles-module_light__Z6W-X{background-color:var(--rt-color-white);color:var(--rt-color-dark)}.styles-module_success__A2AKt{background-color:var(--rt-color-success);color:var(--rt-color-white)}.styles-module_warning__SCK0X{background-color:var(--rt-color-warning);color:var(--rt-color-white)}.styles-module_error__JvumD{background-color:var(--rt-color-error);color:var(--rt-color-white)}.styles-module_info__BWdHW{background-color:var(--rt-color-info);color:var(--rt-color-white)}`,type:"base"})});const jo=(()=>{const r={LETTERS:{key:"letter-stack",description:"Letter Stack"},BARS:{key:"stacked-bars",description:"Stacked Bar Plot"}};return{...r,...Jr(Object.values(r))}})();function Bm(r){const{svgId:e,alignment:t,glyphWidth:n,alignmentType:i,aaColorScheme:s=dr.list[0],ntColorScheme:o=fr.list[0],positionsToStyle:a,tooltipPlacement:l="left-start",tooltipOffset:c=8,logoType:u=jo.LETTERS,font:h=jr.DEFAULT,horizontalVirtualization:d,hoverTracker:f="end"}=r,g=i===Ot.AMINOACID?s:o,m=w.useRef(null),p=w.useRef(),[v,x]=w.useState(0),[b,_]=w.useState(0),y=w.useMemo(()=>{const C=t.getSequenceCount(),B=t.getAllUpperAlphaLettersInAlignmentSorted(),T=i===Ot.AMINOACID?pn:Nr,R=t.getPositionalLetterCounts(!1,B);return Array.from(R).map(([D,G])=>{const W=t.getQuery().sequence[D.valueOf()],j=t.getConsensus().sequence[D.valueOf()];return Object.entries(G).map(([Y,$])=>({count:$,frequency:$/C,letter:{letter:Y,classNames:Kf(Y,Y===j,Y===W)},residue:T.fromSingleLetterCode(Y)})).filter(Y=>Y.frequency!==0).sort((Y,$)=>Y.frequency>$.frequency?1:-1)})},[t,i]),I=w.useCallback((C,B)=>{let T=100;return C.map((R,D)=>{T=T-R.frequency*100;const G=.009;return u===jo.BARS?H.jsx("rect",{width:"100",height:"100",transform:`translate(0, ${T}) scale(${G},${R.frequency})`,className:R.letter.classNames},`idxrect_${D}`):Uo.glyphFromChar(R.letter.letter,h)({className:R.letter.classNames,transform:`translate(0, ${T}) scale(${G},${R.frequency})`,key:`idxglyph_${D}`})})},[u,h]),A=w.useMemo(()=>y?H.jsx(Pm,{ref:m,className:"sequence-logo-tooltip-container",border:"solid black 1px",positionStrategy:"fixed",variant:"light",imperativeModeOnly:!0,place:l,offset:v}):null,[v,y,l]),P=w.useCallback(()=>{clearTimeout(p.current)},[]),L=w.useCallback(()=>{p.current=setTimeout(()=>{var C;(C=m.current)==null||C.close()},500)},[]),V=w.useCallback(C=>{if(!C||!y||!y[parseInt(C)])return null;const B=parseInt(C)+1,T=y[parseInt(C)];return T.length===0?null:H.jsxs("div",{className:"logo-tooltip",onMouseEnter:P,onMouseLeave:L,onClick:R=>{R.stopPropagation(),R.preventDefault()},children:[H.jsxs("h1",{children:["Position: ",B]}),H.jsxs("div",{className:"row",children:[H.jsx("div",{className:"col legend-square"}),H.jsx("div",{className:"col header name",children:"Residue"}),H.jsx("div",{className:"col header frequency",children:"Frequency"}),H.jsx("div",{className:"col header count",children:"Count"})]}),T.slice().reverse().map((R,D)=>H.jsxs("div",{className:"row",children:[H.jsx("div",{className:`col legend-square ${R.letter.classNames}`}),H.jsx("div",{className:"col name",children:`${R.residue.fullName} [${R.letter.letter}]`}),H.jsxs("div",{className:"col frequency",children:[+(R.frequency*100).toFixed(2),"%"]}),H.jsx("div",{className:"col count",children:R.count})]},D))]})},[y,L,P]),U=w.useCallback(C=>{var G;clearTimeout(p.current);const B=C.target.getAttribute("data-tooltip-id"),T=C.target.getAttribute("data-tooltip-content"),R=C.target.getBoundingClientRect(),D=V(T);D&&(x(c+(["top","top-start","top-end","bottom","bottom-start","bottom-end"].includes(l)?R.height/2:R.width/2)),(G=m.current)==null||G.open({anchorSelect:B,content:D,position:{x:R.x+R.width/2,y:R.y+R.height/2}}))},[V,l,c]),N=w.useMemo(()=>{const C=t.getSequenceLength(),B=[];for(let T=0;T<C;T++){const R=y[T];R.length>0&&B.push(H.jsxs("g",{transform:`translate(${T},0)`,children:[I(R,y.length),H.jsx("rect",{className:"interaction-placeholder",width:"1",height:"100","data-tooltip-id":`logo${T}`,"data-tooltip-content":T,onMouseEnter:U,onMouseLeave:L})]},"p_"+T))}return H.jsx(H.Fragment,{children:B})},[t,y,I,U,L]),M=w.useMemo(()=>{var D,G;const C=t.getSequenceLength(),B=C*n,R=(G=(D=(i===Ot.AMINOACID?pn:Nr).UNKNOWN.colors.get(g))==null?void 0:D.get(Jt.NO_BACKGROUND))==null?void 0:G.letterColor.hexString;return H.jsxs("svg",{id:e,className:"av2-sequence-logo",preserveAspectRatio:"none",viewBox:`0 0 ${C} 100`,width:`${B}px`,height:`${b}px`,style:{width:B,height:b},xmlns:"http://www.w3.org/2000/svg",children:[R?H.jsx("style",{type:"text/css",children:`
            .av2-sequence-logo path{
              color: ${R};
              fill: ${R};
            }
            .av2-sequence-logo rect{
              color: ${R};
              fill: ${R};
            }
          `}):void 0,N]})},[t,n,b,N,i,g,e]),k=w.useMemo(()=>{const C=["sequence-logo-holder",i.className,g.className,a.className];return H.jsxs("div",{className:C.join(" "),style:{width:t.getSequenceLength()*n},children:[M,A]})},[t,n,a,M,A,i.className,g.className]),O=w.useCallback(C=>{_(C.height)},[]),S=w.useCallback(()=>k,[k]),E=w.useMemo(()=>({...d||{virtualizationId:`logo-${t.getUUID()}`,role:St.Controller,cellCount:t.getSequenceLength(),cellSizePx:n},virtualizationStrategy:Ut.ShiftOnlyFullyRendered,scrollbar:at.NeverOn,hoverTracker:f,containerBoundsUpdated:O}),[t,O,n,d,f]);return H.jsx(vs,{getContentForColumns:S,horizontalParams:E})}const _u=r=>{const{canvasGenerator:e,sequenceSet:t,isMinimap:n=!1,showLoadingIndicator:i=!1,sequences:s,consensusSequence:o,querySequence:a,allCharsInAlignment:l,sortByKey:c,alignmentType:u,positionsToStyle:h,highlightPositionalMatches:d,aaColorScheme:f=dr.list[0],ntColorScheme:g=fr.list[0],residueColoring:m,width:p,height:v,scaleX:x,scaleY:b,positionX:_,positionY:y}=r,I=m,[A,P]=w.useState(!0),[L,V]=w.useState(),U=D=>{V(D)},[N,M]=w.useState(),k=D=>{M(D)},O=w.useMemo(()=>[s.length,s.length>0?s[0].length:0,a,o,u.key,h.key,I.key,u===Ot.AMINOACID?f.commonName:g.commonName,c,d!=null&&d.searchString?[d.searchString,d.highlightColor.red,d.highlightColor.green,d.highlightColor.blue].join(""):""].join(""),[u,o,d==null?void 0:d.searchString,d==null?void 0:d.highlightColor.red,d==null?void 0:d.highlightColor.green,d==null?void 0:d.highlightColor.blue,h.key,a,I.key,c,s,f.commonName,g.commonName]),[S,E]=w.useState(e.updateObserver.get());w.useEffect(()=>e.updateObserver.subscribe(E),[e]);const C=S.datatype==="synced-webgl"&&n?S.getMinimapBlocksWebglApp():S.datatype==="webgl"||S.datatype==="synced-webgl"?S.getMSABlocksWebglApp():void 0,B=S.datatype==="canvas"?S.getCanvasImageData():void 0;w.useEffect(()=>{S.loaded&&L&&C&&(L.appendChild(C.view),C.resizeTo=L)},[C,S.loaded,L]);const T=w.useMemo(()=>gn.getPositionalLetterColors({allPossibleChars:l,sequences:s,querySequence:a,consensusSequence:o,alignmentType:u,positionsToStyle:h,residueColoring:I,aaColorScheme:f,ntColorScheme:g}),[l,u,o,f,g,h,a,I,s]);w.useEffect(()=>{const D={extraPosSeqCount:1,tileSize:S.datatype==="canvas"?1e6:1024,positionalLetterColors:T,sequences:s,highlightPositionalMatches:d};P(!0),C&&(C.stage.removeChildren(),C.render()),e.updateMSA(D,O)},[e,e.updateMSA,N,L,O,d,T,t,s,C,S.datatype]),w.useEffect(()=>{if(C&&S.loaded&&L)C.resizeTo=L,C.stage.scale.set(x,b),C.stage.position.set(_,y),C.render(),S.cachePropsKey===O&&P(!1);else if(B&&S.loaded&&L&&N){const D=B.tiles[0].image,G=L.getBoundingClientRect(),W=N.getContext("2d");W&&(W.imageSmoothingEnabled=!1,W.clearRect(0,0,G.width,G.height),W.drawImage(D,-_/x,-y/b,G.width/x,G.height/b,0,0,G.width,G.height)),S.cachePropsKey===O&&P(!1)}},[B,e,L,N,O,_,y,x,b,C,p,v,S]);const R=["av2-blocks","canvas-holder"];return m===Jt.NO_BACKGROUND&&R.push("hidden"),m===Jt.LIGHT&&R.push("light"),R.push(m.key),H.jsxs("div",{className:R.join(" "),ref:U,children:[!i||!A?void 0:H.jsx("div",{className:"loader-holder",children:H.jsx("div",{className:"loader"})}),B?H.jsx("canvas",{ref:k,width:L==null?void 0:L.getBoundingClientRect().width,height:L==null?void 0:L.getBoundingClientRect().height,style:{display:A?"none":"block",position:"absolute"}}):void 0]})};function Mm(r){const{canvasGenerator:e,highlightPositionalMatches:t,alignment:n,sortBy:i,alignmentType:s,aaColorScheme:o=dr.list[0],ntColorScheme:a=fr.list[0],positionsToStyle:l,syncWithVerticalVirtualization:c}=r,[u]=w.useState(Hr()),[h,d]=w.useState(void 0),f=!c,g=h?h.canvasWidthPx/n.getSequenceLength():void 0,m=w.useMemo(()=>({...c||{virtualizationId:`minimap-${n.getUUID()}`,role:St.Controller,cellCount:n.getSequenceCount(),cellSizePx:1},virtualizationStrategy:Ut.Manual}),[n,c]),p=Vo(m,u,h?h.canvasHeightPx*g:void 0),v=w.useCallback(C=>{(!h||h.canvasWidthPx!==C.width||h.canvasHeightPx!==C.height)&&d({canvasWidthPx:C.width,canvasHeightPx:C.height,getYPx:C.getLiveTop})},[h]),x=p==null?void 0:p.setWorldOffsetPx,b=p?(p==null?void 0:p.cellCount)<=p.numIdxsToRender:!1,_=w.useCallback(C=>{const{fixedWorldHeightPx:B,fixedContainerHeightPx:T,fixedWorldTopOffsetPx:R,targetWorldHeightPx:D,targetContainerHeightPx:G}=C;if(G>=D)return 0;const W=B-T,j=D-G;return R/W*j},[]),y=w.useMemo(()=>{if(!(h!=null&&h.canvasWidthPx)||!(p!=null&&p.numIdxsToRender)||g===void 0)return;const C=p.subsetRenderSizePx,B=p.worldRenderSizePx,T=p.worldOffsetPx,R=g*n.getSequenceCount(),D=_({fixedWorldHeightPx:B,fixedContainerHeightPx:C,fixedWorldTopOffsetPx:T,targetWorldHeightPx:R,targetContainerHeightPx:h.canvasHeightPx}),G=h.canvasHeightPx<R?h.canvasHeightPx:R,W=g*p.numIdxsToRender,j=_({fixedWorldHeightPx:B,fixedContainerHeightPx:C,fixedWorldTopOffsetPx:T,targetWorldHeightPx:G,targetContainerHeightPx:W}),Y=n.getSequenceCount()-Math.floor((D+h.canvasHeightPx)/g);return{mmWorldHeightPx:R,mmWorldOffsetPx:D,mmNumSeqsAbove:Math.floor(D/g),mmNumSeqsBelow:Y<0?0:Y,draggerOffsetPx:j,draggerHeightPx:W,draggerWorldHeightPx:G}},[n,h==null?void 0:h.canvasWidthPx,h==null?void 0:h.canvasHeightPx,p==null?void 0:p.numIdxsToRender,p==null?void 0:p.subsetRenderSizePx,p==null?void 0:p.worldOffsetPx,p==null?void 0:p.worldRenderSizePx,_,g]);w.useEffect(()=>{ue.RENDER_OPTIONS.hello=!1,Me.defaultOptions.scaleMode=cr.NEAREST},[]);const I=w.useCallback(C=>{if(C.stopPropagation(),C.preventDefault(),y!=null&&y.draggerHeightPx&&x&&g){const B=C.pageY-C.currentTarget.getBoundingClientRect().top;x((B+y.mmWorldOffsetPx-y.draggerHeightPx/2)/g*p.cellSizePx)}},[y==null?void 0:y.draggerHeightPx,y==null?void 0:y.mmWorldOffsetPx,g,x,p==null?void 0:p.cellSizePx]),A=w.useCallback(C=>{g&&x&&C.deltaY!==0&&(y==null?void 0:y.draggerWorldHeightPx)!==void 0&&x(p.worldOffsetPx+C.deltaY/y.draggerWorldHeightPx*p.worldRenderSizePx/10)},[g,x,y==null?void 0:y.draggerWorldHeightPx,p==null?void 0:p.worldOffsetPx,p==null?void 0:p.worldRenderSizePx]),P=w.useCallback(C=>{x&&(y!=null&&y.draggerHeightPx)&&(h!=null&&h.canvasHeightPx)&&x(_({fixedWorldHeightPx:y.draggerWorldHeightPx,fixedContainerHeightPx:y.draggerHeightPx,fixedWorldTopOffsetPx:C,targetWorldHeightPx:p.worldRenderSizePx,targetContainerHeightPx:p.containerSizePx}))},[_,h==null?void 0:h.canvasHeightPx,y==null?void 0:y.draggerHeightPx,y==null?void 0:y.draggerWorldHeightPx,x,p==null?void 0:p.containerSizePx,p==null?void 0:p.worldRenderSizePx]),L=w.useMemo(()=>[(y==null?void 0:y.mmNumSeqsAbove)===void 0?void 0:H.jsx("div",{className:"minimap-header",children:`${y.mmNumSeqsAbove.toLocaleString()} hidden`}),(y==null?void 0:y.mmNumSeqsBelow)===void 0?void 0:H.jsx("div",{className:"minimap-footer",children:`${y.mmNumSeqsBelow.toLocaleString()} hidden`})],[y==null?void 0:y.mmNumSeqsAbove,y==null?void 0:y.mmNumSeqsBelow]),V=w.useMemo(()=>n.getSequences(i).map(C=>C.sequence),[n,i]),U=w.useMemo(()=>(y==null?void 0:y.mmWorldOffsetPx)===void 0||!g?void 0:H.jsx("div",{className:"minimap-canvas-holder",children:H.jsx(_u,{canvasGenerator:e,showLoadingIndicator:!0,isMinimap:!0,sequenceSet:"alignment",sequences:V,sortByKey:i.key,querySequence:n.getQuery().sequence,consensusSequence:n.getConsensus().sequence,allCharsInAlignment:n.getAllRepresentedCharacters(),alignmentType:s,aaColorScheme:o,ntColorScheme:a,residueColoring:Jt.DARK,highlightPositionalMatches:t,positionsToStyle:l,width:g*n.getSequenceLength(),height:g*n.getSequenceCount(),scaleX:g,scaleY:g,positionX:0,positionY:-y.mmWorldOffsetPx})}),[n,s,e,o,a,l,t,y==null?void 0:y.mmWorldOffsetPx,g,V,i.key]),N=w.useMemo(()=>H.jsx("div",{className:"minimap-interaction",onClick:I,onWheel:A}),[I,A]),M=h==null?void 0:h.getYPx(),k=w.useMemo(()=>b||!(y!=null&&y.draggerHeightPx)||M===void 0?void 0:H.jsx(Om,{fillColor:"#000000",baselineOpacity:.4,mouseoverOpacity:.3,draggingOpacity:.2,onWheel:A,highlighterHeightPx:y.draggerHeightPx,highlighterYPx:y.draggerOffsetPx,highlighterMoved:P,mainMinimapContainerY:M}),[P,A,y==null?void 0:y.draggerHeightPx,y==null?void 0:y.draggerOffsetPx,b,M]),O=w.useMemo(()=>H.jsxs("div",{className:"minimap",children:[L[0],H.jsx("div",{className:"minimap-app-holder",children:H.jsxs(gs,{onSizeChanged:v,logId:"minimap",children:[U,N,k]})}),L[1]]}),[N,L,U,k,v]),S=p==null?void 0:p.updateCellSizePx,E=p==null?void 0:p.updateContainerSizePx;return w.useEffect(()=>{f&&E&&S&&(h!=null&&h.canvasHeightPx)&&(y!=null&&y.mmWorldHeightPx)&&g&&(S(g),E(h.canvasHeightPx/(g*n.getSequenceCount())*h.canvasHeightPx))},[n,f,h==null?void 0:h.canvasHeightPx,y==null?void 0:y.mmWorldHeightPx,g,S,E,x]),O}function Om(r){const{highlighterHeightPx:e,highlighterYPx:t,highlighterMoved:n,mainMinimapContainerY:i,fillColor:s,baselineOpacity:o,mouseoverOpacity:a,draggingOpacity:l,onWheel:c}=r,[u,h]=w.useState(!1),[d,f]=w.useState(!1),[g,m]=w.useState(0),p=w.useCallback(b=>{b.stopPropagation(),b.preventDefault(),u&&n(b.pageY-i-e*g)},[u,g,e,n,i]),v=w.useCallback(b=>{b.stopPropagation(),b.preventDefault();let _=b.currentTarget.getBoundingClientRect(),y=b.clientY-_.top;h(!0),m(y/_.height)},[]),x=w.useCallback(b=>{b.stopPropagation(),b.preventDefault(),h(!1)},[]);return H.jsxs(H.Fragment,{children:[H.jsx("div",{className:"minimap-dragger",style:{top:t,height:e,opacity:u?l:d?a:o,backgroundColor:s},onWheel:b=>{c(b)},onMouseEnter:()=>{f(!0)},onMouseLeave:()=>{f(!1)},onMouseDown:v}),u?H.jsx("div",{className:"minimap-full-page-drag-detector",onMouseMove:p,onMouseUp:x,onMouseOut:x,onMouseLeave:x}):void 0]})}const $o=(()=>{const r={key:"entropy",description:"Entropy",cssClass:"barplot-shannon-entropy",color:"#000000",plotOptions:{fixYMax:t=>{const n=t.getAllUpperAlphaLettersInAlignmentSorted(),i=1/n.length;return-1*n.reduce(s=>s+i*Math.log2(i),0)}},getBars:t=>{const n=[],i=t.getPositionalLetterCounts(!0,t.getAllUpperAlphaLettersInAlignmentSorted()),s=t.getSequenceLength();for(let o=0;o<s;o++){const a=i.get(o);!a||Object.keys(a).length===0?n.push({height:void 0}):n.push({height:-1*Object.values(a).reduce((l,c)=>l+c*Math.log2(c),0)})}return n}},e={ShannonEntropy:r,Conservation:{key:"conservation",description:"Conservation",cssClass:"barplot-conservation",color:"#414141",plotOptions:{fixYMax:t=>r.plotOptions.fixYMax(t)},getBars:t=>{const n=r.plotOptions.fixYMax(t);return r.getBars(t).map(s=>({...s,height:s.height===void 0?void 0:n-s.height}))}},KullbacLeiblerDivergence:{key:"kullback-leibler-divergence",description:"KL Divergence",cssClass:"barplot-kullback-leibler-divergence",color:"darkred",getBars:t=>{const n=t.getAllUpperAlphaLettersInAlignmentSorted(),i=t.getPositionalLetterCounts(!0,n),s=t.getGlobalAlphaLetterCounts(!0,n),o=[],a=t.getSequenceLength();for(let l=0;l<a;l++){const c=i.get(l);!c||Object.keys(c).length===0?o.push({height:void 0}):o.push({height:n.reduce((u,h)=>(h in c&&(u+=c[h]*Math.log(c[h]/s[h])),u),0)})}return o}},Gaps:{key:"gaps",description:"Gaps",cssClass:"barplot-gaps",color:"#b7b7b7",plotOptions:{fixYMax:t=>t.getSequenceCount()},getBars:t=>{const n=[],i=t.getSequenceLength();for(let s=0;s<i;s++){const o=t.getGapCountAtColumn(s);n.push({height:o,tooltipValueText:`${(o/t.getSequenceCount()*100).toFixed(1)}% (${o})`})}return n}}};return{...e,...Jr(Object.values(e))}})();function Nm(r){const{svgId:e,alignment:t,searchDetails:n,positionWidth:i,dataSeriesSet:s,tooltipPlacement:o="top",tooltipOffset:a=8,horizontalVirtualization:l,hoverTracker:c="end"}=r,u=100,h=1,d=w.useRef(null),f=w.useRef(),[g]=w.useState(Hr()),[m,p]=w.useState(0),[v,x]=w.useState(0),b=w.useCallback(k=>{const O=k.reduce((C,B)=>(B.height!==void 0&&C.push(B.height),C),[]),S=Math.min(...O),E=Math.max(...O);return k.map(C=>{const B=S,T=C.dataSeriesSet.plotOptions&&C.dataSeriesSet.plotOptions.fixYMax?C.dataSeriesSet.plotOptions.fixYMax(t):E,R=C.height===void 0?NaN:(C.height-B)/(T-B)*u;return{...C,normalizedHeight:isNaN(R)?void 0:R}})},[t]),_=w.useMemo(()=>{let k=[];s.forEach(C=>{k=k.concat(C.getBars(t,n).map((B,T)=>({...B,position:T,dataSeriesSet:C,normalizedHeight:-1})))});const O=Object.values(k.reduce((C,B)=>(C[B.dataSeriesSet.key]=C[B.dataSeriesSet.key]?[...C[B.dataSeriesSet.key],B]:[B],C),{})).map(C=>b(C)).flat(),S=Ul(O,C=>C.position),E=Ul(O,C=>C.dataSeriesSet);return{svgId:e,normaliedBars:O,barsGroupedByPosition:S,barsGroupedByDataseries:E}},[t,s,b,n,e]),y=w.useCallback(()=>{clearTimeout(f.current)},[]),I=w.useCallback(()=>{f.current=setTimeout(()=>{var k;(k=d.current)==null||k.close()},500)},[]),A=w.useCallback(k=>{if(!k||!_.barsGroupedByPosition.get(parseInt(k)))return null;const O=parseInt(k)+1,S=_.barsGroupedByPosition.get(parseInt(k));return(S?S.reduce((C,B)=>C+(B.height!==void 0?1:0),0):0)<1?void 0:H.jsxs("div",{className:"bar-position-textblock",onMouseEnter:y,onMouseLeave:I,onClick:C=>{C.stopPropagation(),C.preventDefault()},children:[H.jsxs("h1",{children:["Position: ",O]}),S.map(C=>H.jsxs("div",{className:`dataseries-line ${C.dataSeriesSet.cssClass}`,children:[H.jsx("span",{className:"legend-square",style:{backgroundColor:C.dataSeriesSet.color?C.dataSeriesSet.color:void 0}}),H.jsxs("span",{className:"legend-text",children:[C.dataSeriesSet.description,":"," ",C.tooltipValueText?C.tooltipValueText:C.height!==void 0?+C.height.toFixed(1):"undefined"]})]},C.dataSeriesSet.key))]})},[_,I,y]),P=w.useCallback(k=>{var B;clearTimeout(f.current);const O=k.target.getAttribute("data-tooltip-id"),S=k.target.getAttribute("data-tooltip-content"),E=k.target.getBoundingClientRect(),C=A(S);C&&(p(a+(["top","top-start","top-end","bottom","bottom-start","bottom-end"].includes(o)?E.height/2:E.width/2)),(B=d.current)==null||B.open({anchorSelect:O,content:C,position:{x:E.x+E.width/2,y:E.y+E.height/2}}))},[A,a,o]),L=w.useMemo(()=>H.jsx(Pm,{ref:d,className:"barplot-tooltip-holder",border:"solid black 1px",positionStrategy:"fixed",variant:"light",imperativeModeOnly:!0,place:o,offset:m}),[m,o]),V=w.useMemo(()=>{const k=t.getSequenceLength(),O=i*k;return H.jsx("svg",{id:e,preserveAspectRatio:"none",width:`${O}px`,height:`${v}px`,viewBox:`0 0 ${k*h} ${u}`,style:{width:O,height:v},xmlns:"http://www.w3.org/2000/svg",children:Array.from(_.barsGroupedByPosition.entries()).map(([S,E])=>{const C=E.reduce((G,W)=>(W.normalizedHeight!==void 0&&G.push(W.normalizedHeight),G),[]),B=C.length<1?0:Math.max(...C),T=_.barsGroupedByDataseries.size,R=(T===1?.9:1/T)*h,D=(T===1?S+.05:S)*h;return C.length<1?null:H.jsxs("g",{transform:`translate(${D},0)`,className:"position-container pos"+S,children:[E.reduce((G,W,j)=>(W.normalizedHeight!==void 0&&G.push(H.jsx("rect",{className:W.dataSeriesSet.cssClass,style:{fill:W.dataSeriesSet.color?W.dataSeriesSet.color:void 0,color:W.dataSeriesSet.color?W.dataSeriesSet.color:void 0},transform:`translate(${j*1/E.length*h},${u-W.normalizedHeight})`,width:R,height:W.normalizedHeight},`${W.position}_${W.dataSeriesSet.key}`)),G),new Array),H.jsx("rect",{className:"interaction-placeholder",transform:`translate(0,${u-B})`,width:h,height:B,"data-tooltip-id":`bp${S}${g}`,"data-tooltip-content":S,onMouseEnter:P,onMouseLeave:I})]},S)})})},[t,_,I,v,g,P,i,e]),U=w.useCallback(k=>{x(k.height)},[]),N=w.useCallback(()=>V,[V]),M=w.useMemo(()=>{const k=s.map(O=>O.key).join("-");return{...l||{virtualizationId:`bp-${k}-${t.getUUID()}`,role:St.Controller,cellCount:t.getSequenceLength(),cellSizePx:i},virtualizationStrategy:Ut.ShiftOnlyFullyRendered,scrollbar:at.NeverOn,hoverTracker:c,containerBoundsUpdated:U}},[t,U,s,l,c,i]);return t?H.jsxs("div",{className:"barplot",children:[H.jsx(vs,{getContentForColumns:N,horizontalParams:M}),L]}):void 0}function di(r){const{resizeSeparatorGridAreaNames:e,resizeDirection:t,draggerMoved:n,keys:i,zIndex:s,resizerDoubleClicked:o}=r,[a,l]=w.useState(!1),[c,u]=w.useState(),[h,d]=w.useState(),f=[`${t}-resizer`],g=w.useCallback(x=>{x.preventDefault(),l(!0)},[]),m=w.useCallback(x=>{x.stopPropagation(),x.preventDefault(),l(!1),u(void 0)},[]),p=w.useCallback(x=>{x.stopPropagation(),x.preventDefault(),a&&n(t==="horizontal"?x.clientX:x.clientY,c)},[c,a,t,n]),v=w.useRef();return{draggerFullScreenElement:H.jsx("div",{className:`full-screen-resize-dragger ${t}`,style:{display:a?"block":"none"},onMouseMove:p,onMouseUp:m,onMouseOut:m,onMouseLeave:m},e.join("")),resizeSeparators:e.reduce((x,b,_)=>{const y=a&&i[_]===c?" resizing":"",I=i[_]===h?" hovered":"";return x[i[_]]=H.jsx("div",{className:f.join(" ")+y+I,style:{gridArea:b,zIndex:s},onMouseDown:A=>{clearTimeout(v.current),v.current=setTimeout(()=>{u(i[_]),g(A)},150)},onMouseUp:()=>{clearTimeout(v.current)},onMouseOver:()=>{d(i[_])},onMouseOut:()=>{d(void 0)},onDoubleClick:o?()=>{clearTimeout(v.current),o(i[_])}:void 0},i[_]),x},{})}}const AE={barplots:[],showMetadata:!0,gapBetweenColumnsAndRowsPx:4,gapViewportTopPx:0,gapViewportBottomPx:6,gapViewportLeftPx:6,gapViewportRightPx:6,resizeBarSizePx:4,metadataSizing:{type:"adjustable-width",startingWidth:150,minWidth:100,maxWidth:400},minimapSizing:{type:"adjustable-width",startingWidth:100,minWidth:100,maxWidth:300},barplotSizing:{type:"adjustable-height",startingHeight:60,minHeight:25,maxHeight:200},logoSizing:{type:"adjustable-height",startingHeight:100,minHeight:50,maxHeight:300}};function Dm(r){const{barplots:e,logoPlot:t,alignmentDetails:n,consensus:i,query:s,positionalAxis:o,minimapPlot:a,showConsensus:l,showQuery:c,showPositionalAxis:u,showLogoPlot:h,showMinimap:d,showMetadata:f,metadataSizing:g,minimapSizing:m,barplotSizing:p,logoSizing:v,resizeBarSizePx:x,gapBetweenColumnsAndRowsPx:b,gapViewportTopPx:_,gapViewportBottomPx:y,gapViewportLeftPx:I,gapViewportRightPx:A,titleFontSize:P}={...AE,...r},L=f?g.type==="fixed-width"?g.width:g.startingWidth:100,V=d?m.type==="fixed-width"?m.width:m.startingWidth:100,U=p.type==="fixed-height"?p.height:p.startingHeight,N=v.type==="fixed-height"?v.height:v.startingHeight,[M,k]=w.useState(),O=w.useRef(null),[S,E]=w.useState(L),[C,B]=w.useState(V),[T,R]=w.useState(N),[D,G]=w.useState(e.reduce((Z,ne)=>(Z[ne.contentKey]=U,Z),{}));w.useEffect(()=>{e.forEach(Z=>{D[Z.contentKey]||(D[Z.contentKey]=U)})},[e,D,U]);const W=w.useCallback(Z=>{k(Z)},[]),j=w.useCallback(Z=>{const{key:ne,metadataAndContent:Ae,metadataGridArea:Le,contentGridArea:Oe,forceHide:He=!1,metadataClassname:it="metadata-title",contentClassname:Rt="content"}=Z;return Ae?H.jsxs(w.Fragment,{children:[H.jsx("div",{className:it,style:{gridArea:Le,fontSize:P,display:!f||He?"none":void 0},children:typeof Ae.metadata=="string"?`${Ae.metadata}:`:Ae.metadata}),H.jsx("div",{className:Rt,style:{gridArea:Oe,display:He?"none":void 0},children:Ae.content})]},ne):void 0},[f,P]),Y=w.useCallback((Z,ne)=>{if(p.type==="fixed-height"||!O.current)return;const Ae=O.current.getElementsByClassName(`${ne}`);if(Ae.length!==1){console.error(`Internal error: unable to find class "${ne}" during resize.`);return}const Le=Ae[0].getBoundingClientRect(),Oe=Z-x/2-b-Le.y,He=Oe>p.maxHeight?p.maxHeight:Oe<p.minHeight?p.minHeight:Oe;G({...D,[ne]:He})},[D,p,b,x]),$=w.useMemo(()=>({gridAreas:e.map(Z=>`barplot-${Z.contentKey}-resizer`),keys:e.map(Z=>Z.contentKey)}),[e]),q=di({resizeSeparatorGridAreaNames:$.gridAreas,resizeDirection:"vertical",draggerMoved:Y,keys:$.keys}),oe=w.useCallback(Z=>{if(v.type==="fixed-height"||!O.current)return;const ne=O.current.getElementsByClassName("logoplot");if(ne.length!==1){console.error('Internal error: unable to find class "logoplot" during resize.');return}const Ae=ne[0].getBoundingClientRect(),Le=Z-x/2-b-Ae.y;R(Le>v.maxHeight?v.maxHeight:Le<v.minHeight?v.minHeight:Le)},[v,b,x]),te=di({resizeSeparatorGridAreaNames:["logo-resizer"],keys:["logo-resizer"],resizeDirection:"vertical",draggerMoved:oe}),de=w.useCallback(Z=>{if(g.type==="fixed-width"||!M)return;const ne=Z-x/2-b-M.getLiveLeft()-I;E(ne>g.maxWidth?g.maxWidth:ne<g.minWidth?g.minWidth:ne)},[M,g,x,b,I]),Q=di({resizeSeparatorGridAreaNames:["metadata-resizer"],keys:["metadata-resizer"],resizeDirection:"horizontal",draggerMoved:de,zIndex:1799}),ie=w.useCallback(Z=>{if(m.type==="fixed-width"||!M)return;const ne=M.getLiveRight()-Z-x/2-b-A;B(ne>m.maxWidth?m.maxWidth:ne<m.minWidth?m.minWidth:ne)},[M,m,x,b,A]),K=di({resizeSeparatorGridAreaNames:["minimap-resizer"],keys:["minimap-resizer"],resizeDirection:"horizontal",draggerMoved:ie}),re=w.useMemo(()=>{const Z=(ne,Ae,Le)=>{const Oe=f?g.type==="adjustable-width"?`${ne} metadata-resizer`:ne:"",He=d?m.type==="adjustable-width"?"minimap-resizer minimap":"minimap":"";return`"${Oe} ${Ae} ${He}"`+(Le?`
"${Oe.replaceAll(ne,ne+"-resizer")} ${Ae}-resizer ${He}"`:"")};return[...e.map(ne=>Z(`barplot-${ne.contentKey}-metadata`,`barplot-${ne.contentKey}`,p.type==="adjustable-height")),...h?[Z("logo-metadata","logo",v.type==="adjustable-height")]:[],...l?[Z("consensus-metadata","consensus")]:[],...c?[Z("query-metadata","query")]:[],...u?[Z("position-axis-metadata","position-axis")]:[],Z("ids-and-annotations","main-viewport")].join(`
`)},[v.type,p.type,g.type,m.type,f,d,e,l,h,u,c]),le=w.useMemo(()=>{const Z=f?g.type==="adjustable-width"?`${S}px ${x}px`:`${S}px`:"",ne=d?m.type==="adjustable-width"?`${x}px ${C}px`:`${C}px`:"";return`${Z} auto ${ne}`},[x,g.type,m.type,f,d,S,C]);return H.jsxs(H.Fragment,{children:[f?Q.draggerFullScreenElement:void 0,d?K.draggerFullScreenElement:void 0,h?te.draggerFullScreenElement:void 0,q.draggerFullScreenElement,H.jsx(gs,{onSizeChanged:W,logId:"alignment-viewer-layout",children:H.jsxs("div",{className:"alignment-viewer-2",ref:O,style:{top:`${_}px`,bottom:`${y}px`,left:`${I}px`,right:`${A}px`,gap:`${b}px`,gridTemplateColumns:le,gridTemplateRows:`
            ${e.map(Z=>{const ne=[`${D[Z.contentKey]}px`];return p.type==="adjustable-height"&&ne.push(`${x}px`),ne.join(`
`)}).join(`
`)}
            ${h&&t?`${T}px`:""} 
            ${h&&t&&v.type==="adjustable-height"?`${x}px`:""}
            ${l&&i?`${i.heightPx}px`:""} 
            ${c&&s?`${s.heightPx}px`:""} 
            ${u&&o?`${o.heightPx}px`:""}
            auto
          `,gridTemplateAreas:re},children:[e.map(Z=>{const ne=`barplot-${Z.contentKey}-metadata`,Ae=`barplot-${Z.contentKey}`;return H.jsxs(w.Fragment,{children:[j({key:`bp-${Z.contentKey}`,metadataAndContent:Z,metadataGridArea:ne,contentGridArea:Ae,contentClassname:`content ${Z.contentKey}`}),p.type!=="adjustable-height"?H.jsx(H.Fragment,{}):q.resizeSeparators[Z.contentKey]]},Z.contentKey)}),H.jsxs(H.Fragment,{children:[j({key:"logo",metadataAndContent:t,metadataGridArea:"logo-metadata",contentGridArea:"logo",forceHide:!h,contentClassname:"content logoplot"}),v.type!=="adjustable-height"||!h?H.jsx(H.Fragment,{}):te.resizeSeparators["logo-resizer"]]}),j({key:"c",metadataAndContent:i,metadataGridArea:"consensus-metadata",contentGridArea:"consensus",forceHide:!l}),j({key:"q",metadataAndContent:s,metadataGridArea:"query-metadata",contentGridArea:"query",forceHide:!c}),j({key:"ruler",metadataAndContent:o,metadataGridArea:"position-axis-metadata",contentGridArea:"position-axis",forceHide:!u}),j({key:"main",metadataAndContent:n,metadataGridArea:"ids-and-annotations",contentGridArea:"main-viewport",metadataClassname:"content"}),H.jsx("div",{className:"minimap-content",style:{gridArea:"minimap",display:d?void 0:"none"},children:a}),!d||m.type!=="adjustable-width"?void 0:K.resizeSeparators["minimap-resizer"],!f||g.type!=="adjustable-width"?void 0:Q.resizeSeparators["metadata-resizer"]]})})]})}function df(){self.onmessage=r=>{const t=(n=>{const{extraPosSeqCount:i,tileSize:s,positionalLetterColors:o,sequences:a,highlightPositionalMatches:l}=n,c=(a.length>0?a[0].length:0)+i,u=a.length+i,h=(g,m,p,v)=>{let x=0;const b=l?.2*255:255,[_,y]=l?[l.posidxsMatchedPerSequence,l.highlightColor]:[{},{red:255,green:0,blue:0}];for(let I=0;I<p;I++){const A=a[I+v.seqY],P=_[A]?_[A]:[];for(let L=0;L<m;L++){const V=L+v.letterX;if(A&&A[V]){const U=A[V],N=o[V][U].backgroundColor.rgb;P.indexOf(V)!==-1?(g[x]=y.red,g[x+1]=y.green,g[x+2]=y.blue,g[x+3]=255):(g[x]=N.red,g[x+1]=N.green,g[x+2]=N.blue,g[x+3]=b),x+=4}else x+=4}}},d=(g,m,p,v,x,b)=>{const _=new OffscreenCanvas(p,v);_.height=v,_.width=p;const y={seqY:m*b,letterX:g*x},I=_.getContext("2d"),A=I==null?void 0:I.getImageData(0,0,_.width,_.height);return A&&I&&(h(A.data,p,v,y),I.putImageData(A,0,0)),{tileX:g,tileY:m,pixelX:y.letterX,pixelY:y.seqY,width:_.width,height:_.height,image:_.transferToImageBitmap()}};return(()=>{const g=s,m=s,p={targetTileWidth:g,targetTileHeight:m,lastTileWidth:c%g!==0?c%g:g,lastTileHeight:u%m!==0?u%m:m,numXTiles:c%g!==0?Math.floor(c/g)+1:Math.floor(c/g),numYTiles:u%m!==0?Math.floor(u/m)+1:Math.floor(u/m),tiles:[]};for(let v=0;v<p.numYTiles;v++)for(let x=0;x<p.numXTiles;x++){const b=d(x,v,x===p.numXTiles-1?p.lastTileWidth:g,v===p.numYTiles-1?p.lastTileHeight:m,g,m);p.tiles.push(b)}return p})()})({extraPosSeqCount:r.data.extraPosSeqCount,tileSize:r.data.tileSize,positionalLetterColors:r.data.positionalLetterColors,sequences:r.data.sequences,highlightPositionalMatches:r.data.highlightPositionalMatches});postMessage(t)}}class ff extends Worker{constructor(e){const t=e.toString(),n=new Blob([`(${t})()`]);super(URL.createObjectURL(n))}}const Bl=()=>{const r=new tg({antialias:!0,resolution:window.devicePixelRatio,autoDensity:!0,backgroundAlpha:0,view:document.createElement("canvas")});return r.ticker.autoStart=!1,r.ticker.stop(),r},pf=()=>({primaryViewportApp:Yi("webgl"),minimapApp:Yi("webgl"),consensusApp:Yi("canvas"),queryApp:Yi("canvas")});let Ml,Ol;function Su(r){return r==="primary"?(Ml||(Ml=pf()),Ml):(Ol||(Ol=pf()),Ol)}function Yi(r){const e={};let t,n,i,s=new ff(df);const o=r==="synced-webgl"?new bo({datatype:"synced-webgl",loaded:!1,getMSABlocksWebglApp:()=>(e.webglApp1||(e.webglApp1=Bl(),t&&a(t,!0)),e.webglApp1),getMinimapBlocksWebglApp:()=>(e.webglApp2||(e.webglApp2=Bl(),t&&a(t,!0)),e.webglApp2)}):r==="webgl"?new bo({datatype:"webgl",loaded:!1,getMSABlocksWebglApp:()=>(e.webglApp1||(e.webglApp1=Bl()),e.webglApp1)}):r==="canvas"?new bo({datatype:"canvas",loaded:!1,getCanvasImageData:()=>e.canvasApp}):void 0;if(!o)throw Error(`Invalid datatype "${r}" provided to createMSABlockGenerator`);const a=(u,h)=>{if(t=u,h||(n=i,i=void 0),r==="webgl"||r==="synced-webgl"){let d=function(f){if(f){f.stage.removeChildren(),f.stage.position.set(0,0),f.stage.scale.set(1,1);for(var g=0;g<u.tiles.length;g++){const m=u.tiles[g],p=Qn.from(m.image,{scaleMode:cr.NEAREST});p.interactiveChildren=!1,p.x=m.pixelX,p.y=m.pixelY,p.scale={x:1,y:1},p.roundPixels=!1,p.cacheAsBitmap=!0,f.stage.addChild(p)}}};d(e.webglApp1),d(e.webglApp2)}else e.canvasApp=u;o.set({...o.get(),loaded:!0,cachePropsKey:n})},l=u=>{a(u.data,!1)},c=(u,h)=>{if(h===n){a(t,!0);return}h!==i&&(i&&(s.terminate(),s=new ff(df),s.onmessage=l),i=h,s.postMessage(u))};return s.onmessage=l,{updateMSA:c,updateObserver:o}}function Lm(r){const{searchVisible:e=!0,closePressed:t,mainAlignmentQuerySequence:n,sortedSequences:i,sortedSequenceAnnotations:s,alignmentType:o,aaColorScheme:a=dr.list[0],ntColorScheme:l=fr.list[0],positionsToStyle:c,residueColoring:u}=r,h=o===Ot.AMINOACID?a:l,d=3,[f,g]=w.useState("all"),[m,p]=w.useState(),v=w.useRef(void 0),[x,b]=w.useState(6),_=w.useRef(null),y=w.useMemo(()=>({red:255,green:0,blue:0}),[]);w.useEffect(()=>{var U;e&&((U=_.current)==null||U.focus())},[e]);const I=w.useMemo(()=>i.map(U=>U.toLowerCase()),[i]),A=w.useCallback(U=>{const N=U!=null&&U.target.value?U==null?void 0:U.target.value:v.current&&v.current.length>=d?v.current:"";v.current=N;const M=N.length,k=N.toLowerCase(),O=[],S={searchString:N,posidxsMatchedPerSequence:{},highlightColor:y};if(N.length>=d)for(var E=0;E<I.length;E++){const W=I[E];for(var C=0,B,T={};(B=W.indexOf(k,C))>-1;){for(var R=B;R<B+M;R++)T[R]=R;C=B+1}const j=Object.values(T);j.length>0&&(O.push({annotations:s[E],sequence:i[E]}),S.posidxsMatchedPerSequence[i[E]]=j)}function D(W,j){return S.posidxsMatchedPerSequence[j.sequence].length-S.posidxsMatchedPerSequence[W.sequence].length}const G=new gn({name:"search results alignment",sequencesAsInput:O.sort(D),removeDuplicateSequences:!1,supressParseTime:!0,overrideQuery:O.length>0?n:void 0});p({alignment:G,matchDetails:S})},[y,I,n,s,i]);w.useEffect(()=>{A()},[o,h,A,i,s,c,u]);const P=w.useMemo(()=>[{svgId:"search-matches",dataSeriesSet:[wE(`rgb(${y.red},${y.green},${y.blue})`)],tooltipPlacement:void 0},{svgId:"search-conservation",dataSeriesSet:[$o.Conservation],tooltipPlacement:void 0}],[y]),L=w.useMemo(()=>({type:"adjustable-width",startingWidth:100,minWidth:75,maxWidth:300}),[]),V=m!=null&&m.alignment.getSequenceCount()?m==null?void 0:m.alignment.getSequenceCount():0;return H.jsxs(H.Fragment,{children:[H.jsx("div",{className:"background-behind-search-box",onClick:U=>{U.currentTarget===U.target&&t()}}),H.jsx("div",{className:"search-box-grid",children:H.jsxs("form",{className:"search-box-contents",children:[H.jsxs("div",{className:"search-bar",children:[H.jsx("label",{htmlFor:"search-input",children:H.jsx("strong",{children:"Search:"})}),H.jsx("input",{type:"text",id:"search-input",ref:_,onChange:A,autoFocus:!0}),m?H.jsx("span",{className:"search-results-count",children:v.current&&v.current.length>2?`${V.toLocaleString()} matches (of 
                  ${i.length.toLocaleString()})`:`enter ${d}+ characters search`}):void 0]}),H.jsxs("div",{className:"search-options-bar",children:[H.jsx("label",{children:H.jsx("strong",{children:"Sizing:"})}),H.jsxs("div",{className:"stepper",children:[H.jsx("button",{className:"minus",disabled:x<5,onClick:U=>{b(x-1),U.preventDefault()},children:"－"}),H.jsx("span",{children:x}),H.jsx("button",{className:"plus",disabled:x>16,onClick:U=>{b(x+1),U.preventDefault()},children:"＋"})]}),H.jsx("label",{children:H.jsx("strong",{children:"Positions to style:"})}),H.jsxs("select",{name:"backgroundStyle",value:f,onChange:U=>{g(U.target.value)},children:[H.jsx("option",{value:"none",children:"none"}),H.jsx("option",{value:"as-primary-viewport",children:"same as primary viewport"}),H.jsx("option",{value:"all",children:"all"})]})]}),H.jsx("div",{className:"search-bar-results-separator"}),H.jsx("div",{className:"search-results",children:H.jsx("div",{style:{display:!m||V<1?"none":void 0},children:m?H.jsx(Hm,{alignment:m.alignment,canvasGenerators:Su("search"),alignmentType:o,aaColorScheme:a,ntColorScheme:l,positionsToStyle:f==="as-primary-viewport"?c:f==="all"?dt.ALL:dt.SEARCH_RESULTS_ONLY,highlightPositionalMatches:m.matchDetails,residueColoring:u,barplots:P,disableSearch:!0,zoomLevel:x,showQuery:!0,showConsensus:!0,showAnnotations:!0,showMinimap:!0,metadataSizing:L}):void 0})}),H.jsx("button",{className:"button-link close",onClick:U=>{U.preventDefault(),t()},children:H.jsx("img",{alt:"Close Search Box",width:"16",height:"16",src:"/close.svg"})})]})})]})}const wE=r=>({id:"search-results",name:"Search matches",description:"Search matches",cssClass:"barplot-search-results",color:r,getBars:(e,t)=>{if(!t)return console.error("Unable to render barplot - no search details passed to the barplot 'SearchResultsCount'. "),[];const n=[],s=[].concat(...Object.values(t.posidxsMatchedPerSequence)).reduce((l,c)=>(l[c]=l[c]?l[c]+1:1,l),{}),o=e.getSequenceCount(),a=e.getSequenceLength();for(let l=0;l<a;l++){const c=s[l]?s[l]:0,u=c/o*100,h=u>=1?0:u<=.1?2:1;n.push({height:c,tooltipValueText:`n=${c} (${u.toFixed(h)}%)`})}return n}});function Fm(r){const{disableSearch:e,searchDialogRequested:t}=r,[n,i]=w.useState(!1),s=w.useCallback(a=>{a&&((a.ctrlKey||n)&&a.key==="f"&&(a.preventDefault(),t(),i(!1)),a.key==="Meta"&&(a.preventDefault(),i(!0)))},[n,t]),o=w.useCallback(a=>{a&&a.key==="Meta"&&(a.preventDefault(),i(!1))},[]);w.useEffect(()=>(window.removeEventListener("keydown",s),window.removeEventListener("keyup",o),e||(window.addEventListener("keydown",s),window.addEventListener("keyup",o)),()=>{window.removeEventListener("keydown",s),window.removeEventListener("keyup",o)}),[e,s,o])}function km(r){const{allCharactersInAlignment:e,sequencesInViewport:t,slicedSequences:n,consensusSequence:i,querySequence:s,alignmentType:o,aaColorScheme:a,ntColorScheme:l,positionsToStyle:c,residueColoring:u,fontSize:h,lineHeight:d,verticalOffset:f,horizontalOffset:g,horizontalWorldOffset:m}=r,p=w.useMemo(()=>{const x=gn.getPositionalLetterColors({allPossibleChars:e,sequences:n,querySequence:s,consensusSequence:i,alignmentType:o,positionsToStyle:c,residueColoring:u,aaColorScheme:a,ntColorScheme:l}),b={};for(let _=0,y=n.length;_<y;_++){const I=n[_];for(let A=0,P=I.length;A<P;A++){const L=I[A],V=x[A][L];b[V.letterColor.hexString]||(b[V.letterColor.hexString]={}),b[V.letterColor.hexString][_]||(b[V.letterColor.hexString][_]=[]),b[V.letterColor.hexString][_].push(A)}}return b},[e,n,o,a,l,c,u,i,s]),v=w.useMemo(()=>Object.entries(p).map(([x,b])=>{const _=n.map((y,I)=>y.split("").map((A,P)=>I in b&&b[I].indexOf(P)>=0?A:" ").join(""));return H.jsx("div",{className:"letters-with-specific-color",style:{color:x},children:_.map((y,I)=>H.jsxs(w.Fragment,{children:[y,H.jsx("br",{})]},I+y))},`${x}_${_.join("")}`)}),[p,n]);return H.jsxs(H.Fragment,{children:[H.jsx("div",{className:"av2-letters sequence-text-holder",style:{top:f,left:g,fontFamily:os},children:H.jsx("div",{className:"letters-viewport",style:{fontSize:h,lineHeight:d+"px"},children:v})}),H.jsx("div",{className:"hidden-residues-for-copy-paste",style:{top:f,left:m?-1*m:void 0,fontSize:h,fontFamily:os,lineHeight:d+"px"},children:t.map((x,b)=>H.jsxs(w.Fragment,{children:[x," ",H.jsx("br",{})]},b+x))})]})}function Vc(r){const{canvasGenerator:e,sequenceSet:t,alignment:n,alignmentType:i,aaColorScheme:s=dr.list[0],ntColorScheme:o=fr.list[0],highlightPositionalMatches:a,positionsToStyle:l,residueColoring:c,sortBy:u,residueHeight:h,residueWidth:d,fontSize:f,verticalScrollbar:g=at.OnHoverWhenOverflowed,horizontalScrollbar:m=at.OnHoverWhenOverflowed,verticalHoverTracker:p="both",horizontalHoverTracker:v="end",matrixRendered:x}=r,b=w.useState(Hr()),_=w.useMemo(()=>r.horizVirtualization==="None"?void 0:r.horizVirtualization==="Automatic"?{virtualizationId:`x_auto_generated_alignmentdetails_virtualization_${n.getUUID()}_${b}`,role:St.Controller,cellCount:n.getSequenceLength(),cellSizePx:d}:r.horizVirtualization,[n,b,r.horizVirtualization,d]),y=w.useMemo(()=>r.vertVirtualization==="None"?void 0:r.vertVirtualization==="Automatic"?{virtualizationId:`y_auto_generated_alignmentdetails_virtualization_${n.getUUID()}_${b}`,role:St.Controller,cellCount:n.getSequenceCount(),cellSizePx:h}:r.vertVirtualization,[n,b,r.vertVirtualization,h]),I=w.useCallback((U,N,M,k,O)=>{const S=[];for(let E=N;E<=M;E++){const C=U[E],B=[];for(let T=k;T<=O;T++)B.push(C[T]);S.push(B.join(""))}return S},[]),A=w.useMemo(()=>t==="alignment"?n.getSequences(u).map(U=>U.sequence):t==="consensus"?[n.getConsensus().sequence]:[n.getQuery().sequence],[n,t,u]),P=w.useCallback(({firstColIdxToRender:U,lastColIdxToRender:N,renderWidthPx:M,renderShiftLeftPx:k,worldWidthPx:O,worldShiftLeftPx:S,firstRowIdxToRender:E,lastRowIdxToRender:C,renderHeightPx:B,renderShiftTopPx:T,worldHeightPx:R,worldShiftTopPx:D})=>{U=U||0,N=N||0,E=E||0,C=C||0,T=T||0,x&&setTimeout(()=>{x({seqIdxStart:E,seqIdxEnd:C,posIdxStart:U,posIdxEnd:N})});const G=I(A,E,C,U,N),W=I([n.getQuery().sequence],0,0,U,N)[0],j=I([n.getConsensus().sequence],0,0,U,N)[0],Y=ea(E,C).map($=>A[$],[]);return H.jsxs("div",{className:"av2-blocksandletters",children:[H.jsx(_u,{canvasGenerator:e,sequenceSet:t,allCharsInAlignment:n.getAllRepresentedCharacters(),sequences:A,querySequence:n.getQuery().sequence,consensusSequence:n.getConsensus().sequence,sortByKey:u.key,alignmentType:i,aaColorScheme:s,ntColorScheme:o,residueColoring:c,positionsToStyle:l,highlightPositionalMatches:a,width:M,height:B,scaleX:d,scaleY:h,positionX:S?-S:0,positionY:D?-D:0}),H.jsx(km,{allCharactersInAlignment:n.getAllRepresentedCharacters(),sequencesInViewport:Y,slicedSequences:G,consensusSequence:j,querySequence:W,alignmentType:i,aaColorScheme:s,ntColorScheme:o,positionsToStyle:l,residueColoring:c,fontSize:f,lineHeight:h,verticalOffset:T,horizontalOffset:k,horizontalWorldOffset:S})]})},[e,a,t,n,i,s,o,A,f,x,l,c,h,d,u,I]),L=w.useMemo(()=>_?{..._,virtualizationStrategy:Ut.Manual,scrollbar:m,hoverTracker:v}:void 0,[_,m,v]),V=w.useMemo(()=>y?{...y,virtualizationStrategy:Ut.Manual,scrollbar:g,hoverTracker:p}:void 0,[y,g,p]);return _&&y?H.jsx(pu,{horizontalParams:L,verticalParams:V,getMatrixContent:P}):_&&!y?H.jsx(vs,{horizontalParams:L,getContentForColumns:P}):!_&&y?H.jsx(am,{verticalParams:V,getContentForRows:P}):H.jsx("div",{children:"initializing..."})}function Uc(r){const{alignmentUUID:e,className:t,columns:n,columnKeys:i,columnWidths:s,columnWidthUpdateRequested:o,fullActualWidth:a,leftRightMarginInTableCells:l,rowHeight:c,resizeBarSizePx:u,showHeader:h,vertVirtualization:d,vertScrollbar:f=at.OnHoverWhenOverflowed,horizScrollbar:g=at.OnHoverWhenOverflowed}=r,m=c>20?c:20,p=w.useRef(null),v=w.useMemo(Hr,[]),x=w.useMemo(()=>{const L={virtualizationStrategy:Ut.Virtualize,scrollbar:g,hoverTracker:void 0,startScrolledIndicatorStyleAttr:{top:`-${m}px`},endScrolledIndicatorStyleAttr:{top:`-${m}}px`}};return{virtualizationId:`x_auto_generated_spreadsheet_virtualization_${e}_${v}`,role:St.Controller,cellCount:1,cellSizePx:a,...L}},[e,v,a,g,m]),b=w.useMemo(()=>{const L={virtualizationStrategy:Ut.Manual,scrollbar:f,hoverTracker:"both",overflowVisible:!0};return{...d,...L}},[d,f]),_=w.useMemo(()=>i.map(L=>L.replaceAll(/\W/g,"")),[i]),y=w.useCallback((L,V)=>{var O;const U=_.indexOf(V),N=(O=p.current)==null?void 0:O.getElementsByClassName("column-header");if(!N||N.length<U){console.error(`Unable to resize - resizableElement does not exist for "${V}"`);return}const M=N[U].getBoundingClientRect(),k=L-u/2-M.x;o(i[U],k)},[u,i,_,o]),I=w.useCallback(L=>{o(i[_.indexOf(L)])},[o,i,_]),A=w.useMemo(()=>_.map((L,V)=>`${L}-resizer`),[_]),P=di({resizeSeparatorGridAreaNames:A,keys:_,resizeDirection:"horizontal",draggerMoved:y,resizerDoubleClicked:I});return H.jsxs(H.Fragment,{children:[P.draggerFullScreenElement,H.jsx(pu,{getMatrixContent:L=>{const V=ea(L.firstRowIdxToRender,L.lastRowIdxToRender),U=i.map((O,S)=>{const E=_[S];return H.jsxs(w.Fragment,{children:[H.jsx("div",{className:"column-header",style:{gridArea:E,padding:`0 ${l}px`},children:n[O].initialColumnName?n[O].initialColumnName:" "}),P.resizeSeparators[E]]},S)}),N=i.map((O,S)=>{const E=n[O].rawData,C=_[S];let B="table-column";return n[O].key==="rownum"&&(B+=" rownum"),H.jsxs(w.Fragment,{children:[H.jsx("div",{className:B,style:{gridArea:C,gridAutoRows:`${c}px`},children:V.map(T=>H.jsx("div",{style:{padding:`0 ${l}px`},children:H.jsx("span",{children:E[T]})},T))}),P.resizeSeparators[C]]},S)}),M=s.map(O=>`${O}px ${u}px`).join(" "),k='"'+_.map(O=>`${O} ${O}-resizer`).join(" ")+'"';return H.jsxs(H.Fragment,{children:[H.jsxs("div",{className:`${t} header`,ref:p,style:{top:`-${m}px`,height:`${m}px`,lineHeight:`${m}px`,gridTemplateColumns:M,gridTemplateAreas:k},children:["  ",U," "]}),H.jsx("div",{className:"content-holder",children:H.jsxs("div",{className:`${t} content`,style:{top:`${L.renderShiftTopPx}px`,gridTemplateColumns:M,gridTemplateAreas:k},children:[" ",N," "]})})]})},horizontalParams:x,verticalParams:b})]})}const to={defaultColumnWidth:{type:"adjustable-width",startingWidth:75,minWidth:30,maxWidth:400},maxPinnedTableWidth:700,maxUnpinnedTableWidth:700,horizScrollbars:at.OnHoverWhenOverflowed};function Gm(r){const{rowHeight:e,fontSize:t,columnWidthParams:n=to.defaultColumnWidth,maxPinnedTableWidth:i=to.maxPinnedTableWidth,maxUnpinnedTableWidth:s=to.maxUnpinnedTableWidth,horizScrollbars:o=to.horizScrollbars}=r,a=Math.ceil(e/3),l=1,c=1,{maxWidth:u,minWidth:h,startingWidth:d}=n,[f,g]=w.useState(),m=w.useMemo(Hr,[]),[p,v]=w.useState(!1),[x,b]=w.useState(""),[_,y]=w.useState({}),[I,A]=w.useState({}),[P,L]=w.useState({}),[V,U]=w.useState([]),[N,M]=w.useState([]),k=w.useCallback(()=>{v(!0)},[]),O=w.useCallback(()=>{v(!1)},[]),S=w.useCallback(ie=>{g(ie)},[]),E=w.useCallback((ie,K=!1)=>{const le=I[ie.key]?I[ie.key]:ie.initialColumnName,Z=Fc({fontSize:t,fontWeight:"bold",stringsToMeasure:[le],maxWidthAllowed:u})+a*2+5;if(Z>=u)return u;let ne=ie.rawData;if(K){let Le="",Oe=0;for(const He of ie.rawData.slice(0,100)){const it=`${He}`;it.length>Oe&&(Le=it,Oe=it.length)}ne=[Le]}const Ae=Fc({fontSize:t,stringsToMeasure:ne,maxWidthAllowed:u})+a*2+5;return Z>Ae?Z>u?u:Z:Ae>u?u:Ae},[a,I,u,t]);r.columns!==_&&(r.alignmentUUID!==x?(b(r.alignmentUUID),A(Object.keys(r.columns).reduce((ie,K)=>(ie[K]=r.columns[K].initialColumnName,ie),{})),L(Object.keys(r.columns).reduce((ie,K)=>(ie[K]=E(r.columns[K],!0),ie),{})),U(Object.keys(r.columns).reduce((ie,K)=>(r.columns[K].initiallyPinned&&ie.push(K),ie),[])),M(Object.keys(r.columns).reduce((ie,K)=>(r.columns[K].initiallyPinned||ie.push(K),ie),[]))):(A(Object.keys(r.columns).reduce((ie,K)=>(ie[K]=I[K]?I[K]:r.columns[K].initialColumnName,ie),{})),L(Object.keys(r.columns).reduce((ie,K)=>{let re=P[K];return re||(re=E(r.columns[K],!0)),ie[K]=re,ie},{})),U(Object.keys(r.columns).reduce((ie,K)=>((V.includes(K)||!(K in _)&&r.columns[K].initiallyPinned)&&ie.push(K),ie),[])),M(Object.keys(r.columns).reduce((ie,K)=>((N.includes(K)||!(K in _)&&!r.columns[K].initiallyPinned)&&ie.push(K),ie),[]))),y(r.columns));const[C,B,T]=w.useMemo(()=>{var Z,ne;const ie=at.OnHoverWhenOverflowed,K=(Z=r.verticalVirtualization)==null?void 0:Z.virtualization,re=(ne=r.verticalVirtualization)!=null&&ne.scrollbar?r.verticalVirtualization.scrollbar:ie;if(K!==void 0)return K.role===St.Responder?[re,K,K]:[re,{virtualizationId:K.virtualizationId,role:St.Responder},K];const le=`y_auto_generated_metadata_virtualization_${x}_${m}`;return[re,{virtualizationId:le,role:St.Responder},{virtualizationId:le,role:St.Controller,cellCount:Object.keys(_).length<1?0:_[Object.keys(_)[0]].rawData.length,cellSizePx:e}]},[x,m,r.verticalVirtualization,_,e]),R=w.useCallback((ie,K)=>ie.reduce((re,le)=>{const Z=K[le];return re.push(Z),re},[]),[]),[D,G]=w.useMemo(()=>[R(V,P),R(N,P)],[R,V,N,P]),W=w.useCallback((ie,K)=>{const re=ie?i:s,le=K.reduce((Z,ne)=>Z+ne+l,0)+(ie?c*2:0);return[le,le<re?le:re]},[i,s]),[j,Y]=w.useMemo(()=>W(!0,D),[W,D]),[$,q]=w.useMemo(()=>W(!1,G),[W,G]),oe=w.useCallback((ie,K)=>{if(K){const re=K>h?K:h;L({...P,[ie]:re})}else L({...P,[ie]:E(_[ie])})},[_,P,h,E]),te=j>0?`minmax(100px, ${j}px)`:"",de=$>0?`minmax(100px, ${$}px)`:" 0px",Q=`"${j>0?"pinned-table ":""}unpinned-table"`;return H.jsx(H.Fragment,{children:H.jsx(gs,{onSizeChanged:S,logId:"alignment-viewer-layout",children:H.jsxs("div",{className:"av2-spreadsheet",onMouseEnter:k,onMouseLeave:O,style:{overflowX:"clip",fontSize:t,gridTemplateAreas:Q,gridTemplateColumns:`${te} ${de}`},children:[j<=0?void 0:H.jsx("div",{className:"pinned-table-holder",children:H.jsx(Uc,{alignmentUUID:x,columns:_,columnKeys:V,columnWidths:D,fullActualWidth:j,rowHeight:e,className:"pinned-table",leftRightMarginInTableCells:a,resizeBarSizePx:l,columnWidthUpdateRequested:oe,vertVirtualization:B,vertScrollbar:C,horizScrollbar:o,showHeader:p})}),H.jsx("div",{className:"unpinned-table-holder",children:H.jsx(Uc,{alignmentUUID:x,columns:_,columnKeys:N,columnWidths:G,fullActualWidth:$,rowHeight:e,className:"unpinned-table",leftRightMarginInTableCells:a,resizeBarSizePx:l,columnWidthUpdateRequested:oe,vertVirtualization:T,vertScrollbar:C,horizScrollbar:o,showHeader:p})})]})})})}const ro={positionsToStyle:dt.ALL,residueColoring:Jt.LIGHT,disableSearch:!1,disableSearchKeyboardShortcut:!1,canvasGenerators:Su("primary"),zoomLevel:13,sortBy:ar.INPUT,aaColorScheme:dr.list[0],ntColorScheme:fr.list[0],showAnnotations:!0,showConsensus:!0,showLogo:!0,showMinimap:!1,showQuery:!0,showRuler:!0,metadataSizing:{type:"adjustable-width",startingWidth:150,minWidth:50,maxWidth:600},minimapSizing:{type:"adjustable-width",startingWidth:100,minWidth:75,maxWidth:600},barplotSizing:{type:"adjustable-height",startingHeight:60,minHeight:25,maxHeight:200},logoSizing:{type:"adjustable-height",startingHeight:100,minHeight:50,maxHeight:300},logoOptions:{logoType:jo.LETTERS},barplots:[{svgId:`shannon-entropy-plus-gaps-${Hr()}`,dataSeriesSet:[$o.ShannonEntropy,$o.Gaps],tooltipPlacement:void 0}]};function Hm(r){const{canvasGenerators:e,highlightPositionalMatches:t,alignment:n,aaColorScheme:i,ntColorScheme:s,barplots:o,logoOptions:a,disableSearch:l,disableSearchKeyboardShortcut:c,triggerShowSearch:u,mainViewportVisibleChanged:h,metadataSizing:d,minimapSizing:f,logoSizing:g,barplotSizing:m,positionsToStyle:p,residueColoring:v,showAnnotations:x,showConsensus:b,showLogo:_,showMinimap:y,showQuery:I,showRuler:A,zoomLevel:P}={...ro,...r},{alignmentType:L=n.getPredictedType()}=r;let{sortBy:V}={...ro,...r};(L===Ot.AMINOACID&&!ar.ALL_AMINO_ACID_SORTERS.includes(V)||L===Ot.NUCLEOTIDE&&!ar.ALL_NUCLEOTIDE_SORTERS.includes(V))&&(console.error(`Misconfiguration - invalid sortBy (${V.description}) passed to AlignmentViewer for
       alignmentType "${L.description}". Setting to input sort order.`),V=ar.INPUT);const U=P,N=P+3,M=Lc(U,!0),k=Lc(U,!1),O=M.width,S=M.height>k.height?M.height:k.height,E=S,[C,B]=w.useState(!1),T=w.useCallback(()=>{B(!0)},[]);w.useEffect(()=>{u&&(u.current=T)},[T,u]),Fm({disableSearch:c,searchDialogRequested:T});const R=n.getUUID(),[D,G]=w.useMemo(()=>{const Te={virtualizationId:`x_viewport_virtualization_${R}`,role:St.Responder};return[Te,{...Te,role:St.Controller,cellCount:n.getSequenceLength(),cellSizePx:O}]},[n,R,O]),[W,j]=w.useMemo(()=>{const Te={virtualizationId:`y_viewport_virtualization_${R}`,role:St.Responder};return[Te,{...Te,role:St.Controller,cellCount:n.getSequenceCount(),cellSizePx:S}]},[n,R,S]),[Y,$]=w.useState(!1),[q,oe]=w.useState(!1),te=w.useCallback(()=>{$(!0)},[]),de=w.useCallback(()=>{$(!1)},[]),Q=w.useCallback(()=>{oe(!0)},[]),ie=w.useCallback(()=>{oe(!1)},[]),K=w.useMemo(()=>n.getSequences(V||ro.sortBy).map(Te=>Te.sequence),[n,V]),re=w.useMemo(()=>n.getSequences(V||ro.sortBy).map(Te=>Te.annotations),[n,V]),le=w.useCallback(Te=>H.jsx("div",{className:Te.className,onMouseEnter:()=>{Te.horizContent&&te(),Te.vertContent&&Q()},onMouseLeave:()=>{Te.horizContent&&de(),Te.vertContent&&ie()},children:Te.content}),[te,Q,de,ie]),Z=w.useMemo(()=>le({horizContent:!0,content:H.jsx(Bm,{svgId:a.svgId,alignment:n,alignmentType:L,aaColorScheme:i,ntColorScheme:s,positionsToStyle:p,glyphWidth:O,logoType:a.logoType,tooltipPlacement:a.tooltipPlacement,horizontalVirtualization:D})}),[n,a,p,O,D,L,i,s,le]),ne=w.useCallback(Te=>le({horizContent:!0,content:H.jsx(Nm,{svgId:Te.svgId,alignment:n,searchDetails:t,tooltipPlacement:Te.tooltipPlacement,dataSeriesSet:Te.dataSeriesSet,positionWidth:O,horizontalVirtualization:D})}),[n,le,t,O,D]),Ae=w.useMemo(()=>le({horizContent:!0,className:"position-box",content:H.jsx(cm,{alignmentUUID:n.getUUID(),horizVirtualization:D,positions:[...Array(n.getSequenceLength()).keys()],fontSize:U,residueWidth:O})}),[le,n,U,O,D]),Le=w.useCallback(Te=>le({horizContent:!0,content:H.jsx(Vc,{canvasGenerator:Te==="consensus"?e.consensusApp:e.queryApp,sequenceSet:Te,alignment:n,sortBy:V,horizVirtualization:D,vertVirtualization:"None",highlightPositionalMatches:t,alignmentType:L,aaColorScheme:i,ntColorScheme:s,positionsToStyle:p,residueColoring:v,fontSize:U,residueHeight:S,residueWidth:O,horizontalScrollbar:at.NeverOn})}),[n,le,e.consensusApp,e.queryApp,V,U,t,p,v,S,O,L,i,s,D]),Oe=w.useMemo(()=>b?{metadata:"Consensus",content:Le("consensus"),heightPx:E}:void 0,[Le,b,E]),He=w.useMemo(()=>I?{metadata:"Query",content:Le("query"),heightPx:E}:void 0,[Le,I,E]),it=w.useMemo(()=>y?H.jsx(Mm,{canvasGenerator:e.minimapApp,alignment:n,alignmentType:L,aaColorScheme:i,ntColorScheme:s,positionsToStyle:p,highlightPositionalMatches:t,sortBy:V,syncWithVerticalVirtualization:W}):void 0,[n,e.minimapApp,t,L,i,s,p,y,V,W]),Rt=w.useCallback(()=>{B(!1)},[]),rr=w.useMemo(()=>{const Te={rownum:{key:"rownum",initialColumnName:"",initiallyPinned:!0,rawData:Array(n.getSequenceCount()).fill(0).map((Ct,Dt)=>Dt+1)}},At=n.getAnnotationFields(),Nt=n.getSequences(V);for(const Ct of Object.keys(At))Te[Ct]={key:Ct,initialColumnName:At[Ct].name,initiallyPinned:Ct===lr.ID,rawData:Array(n.getSequenceCount()).fill(0).map((Dt,Gt)=>Nt[Gt].annotations[Ct]??"")};return Te},[n,V]);return H.jsxs(_w,{store:im,children:[!n||l?void 0:H.jsx("div",{style:{display:C?void 0:"none"},children:H.jsx(Lm,{searchVisible:C,closePressed:Rt,mainAlignmentQuerySequence:n.getQuery(),sortedSequences:K,sortedSequenceAnnotations:re,alignmentType:L,aaColorScheme:i,ntColorScheme:s,residueColoring:v,positionsToStyle:p})}),H.jsx(Dm,{showMetadata:x,showPositionalAxis:A,showLogoPlot:_,showQuery:I,showConsensus:b,showMinimap:y,metadataSizing:d,minimapSizing:f,logoSizing:g,barplotSizing:m,titleFontSize:N,alignmentDetails:{metadata:le({vertContent:!0,content:H.jsx(Gm,{alignmentUUID:R,rowHeight:S,fontSize:U,verticalVirtualization:{virtualization:W,scrollbar:at.NeverOn},columns:rr})}),content:le({horizContent:!0,vertContent:!0,content:H.jsx(Vc,{canvasGenerator:e.primaryViewportApp,sequenceSet:"alignment",alignment:n,sortBy:V,vertVirtualization:j,horizVirtualization:G,highlightPositionalMatches:t,alignmentType:L,aaColorScheme:i,ntColorScheme:s,positionsToStyle:p,residueColoring:v,fontSize:U,residueHeight:S,residueWidth:O,verticalScrollbar:q?at.AlwaysOnWhenOverflowed:at.OnHoverWhenOverflowed,horizontalScrollbar:Y?at.AlwaysOnWhenOverflowed:at.OnHoverWhenOverflowed,matrixRendered:Te=>{h&&h(Te)}})})},consensus:Oe,query:He,positionalAxis:{metadata:"Position",content:Ae,heightPx:E},barplots:!o||o.length<1?[]:o.map(Te=>({metadata:Te.dataSeriesSet.map(At=>At.description).join(" / "),content:ne(Te),contentKey:Te.svgId})),logoPlot:{metadata:"Logo",content:Z},minimapPlot:it})]})}function Yn(r){"@babel/helpers - typeof";return Yn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yn(r)}function EE(r,e){if(Yn(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Yn(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Vm(r){var e=EE(r,"string");return Yn(e)==="symbol"?e:String(e)}function Zi(r,e,t){return e=Vm(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function gf(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Ce(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gf(Object(t),!0).forEach(function(n){Zi(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):gf(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function IE(r){if(Array.isArray(r))return r}function TE(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function Wc(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Um(r,e){if(r){if(typeof r=="string")return Wc(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Wc(r,e)}}function RE(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qr(r,e){return IE(r)||TE(r,e)||Um(r,e)||RE()}function PE(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function rn(r,e){if(r==null)return{};var t=PE(r,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}var BE=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function ME(r){var e=r.defaultInputValue,t=e===void 0?"":e,n=r.defaultMenuIsOpen,i=n===void 0?!1:n,s=r.defaultValue,o=s===void 0?null:s,a=r.inputValue,l=r.menuIsOpen,c=r.onChange,u=r.onInputChange,h=r.onMenuClose,d=r.onMenuOpen,f=r.value,g=rn(r,BE),m=w.useState(a!==void 0?a:t),p=qr(m,2),v=p[0],x=p[1],b=w.useState(l!==void 0?l:i),_=qr(b,2),y=_[0],I=_[1],A=w.useState(f!==void 0?f:o),P=qr(A,2),L=P[0],V=P[1],U=w.useCallback(function(C,B){typeof c=="function"&&c(C,B),V(C)},[c]),N=w.useCallback(function(C,B){var T;typeof u=="function"&&(T=u(C,B)),x(T!==void 0?T:C)},[u]),M=w.useCallback(function(){typeof d=="function"&&d(),I(!0)},[d]),k=w.useCallback(function(){typeof h=="function"&&h(),I(!1)},[h]),O=a!==void 0?a:v,S=l!==void 0?l:y,E=f!==void 0?f:L;return Ce(Ce({},g),{},{inputValue:O,menuIsOpen:S,onChange:U,onInputChange:N,onMenuClose:k,onMenuOpen:M,value:E})}function Ee(){return Ee=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Ee.apply(this,arguments)}function OE(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function mf(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,Vm(n.key),n)}}function NE(r,e,t){return e&&mf(r.prototype,e),t&&mf(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function zc(r,e){return zc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},zc(r,e)}function DE(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&zc(r,e)}function Yo(r){return Yo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Yo(r)}function LE(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function FE(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function kE(r,e){if(e&&(Yn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FE(r)}function GE(r){var e=LE();return function(){var n=Yo(r),i;if(e){var s=Yo(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return kE(this,i)}}function HE(r){if(Array.isArray(r))return Wc(r)}function VE(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function UE(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Au(r){return HE(r)||VE(r)||Um(r)||UE()}function WE(r){if(r.sheet)return r.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===r)return document.styleSheets[e]}function zE(r){var e=document.createElement("style");return e.setAttribute("data-emotion",r.key),r.nonce!==void 0&&e.setAttribute("nonce",r.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var XE=function(){function r(t){var n=this;this._insertTag=function(i){var s;n.tags.length===0?n.insertionPoint?s=n.insertionPoint.nextSibling:n.prepend?s=n.container.firstChild:s=n.before:s=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,s),n.tags.push(i)},this.isSpeedy=t.speedy===void 0?process.env.NODE_ENV==="production":t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=r.prototype;return e.hydrate=function(n){n.forEach(this._insertTag)},e.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(zE(this));var i=this.tags[this.tags.length-1];if(process.env.NODE_ENV!=="production"){var s=n.charCodeAt(0)===64&&n.charCodeAt(1)===105;s&&this._alreadyInsertedOrderInsensitiveRule&&console.error(`You're attempting to insert the following rule:
`+n+"\n\n`@import` rules must be before all other types of rules in a stylesheet but other rules have already been inserted. Please ensure that `@import` rules are before all other rules."),this._alreadyInsertedOrderInsensitiveRule=this._alreadyInsertedOrderInsensitiveRule||!s}if(this.isSpeedy){var o=WE(i);try{o.insertRule(n,o.cssRules.length)}catch(a){process.env.NODE_ENV!=="production"&&!/:(-moz-placeholder|-moz-focus-inner|-moz-focusring|-ms-input-placeholder|-moz-read-write|-moz-read-only|-ms-clear|-ms-expand|-ms-reveal){/.test(n)&&console.error('There was a problem inserting the following rule: "'+n+'"',a)}}else i.appendChild(document.createTextNode(n));this.ctr++},e.flush=function(){this.tags.forEach(function(n){return n.parentNode&&n.parentNode.removeChild(n)}),this.tags=[],this.ctr=0,process.env.NODE_ENV!=="production"&&(this._alreadyInsertedOrderInsensitiveRule=!1)},r}(),Mt="-ms-",Zo="-moz-",Xe="-webkit-",wu="comm",Eu="rule",Iu="decl",jE="@import",Wm="@keyframes",$E="@layer",YE=Math.abs,ya=String.fromCharCode,ZE=Object.assign;function qE(r,e){return It(r,0)^45?(((e<<2^It(r,0))<<2^It(r,1))<<2^It(r,2))<<2^It(r,3):0}function zm(r){return r.trim()}function JE(r,e){return(r=e.exec(r))?r[0]:r}function je(r,e,t){return r.replace(e,t)}function Xc(r,e){return r.indexOf(e)}function It(r,e){return r.charCodeAt(e)|0}function ls(r,e,t){return r.slice(e,t)}function Mr(r){return r.length}function Tu(r){return r.length}function no(r,e){return e.push(r),r}function QE(r,e){return r.map(e).join("")}var ba=1,Ei=1,Xm=0,zt=0,vt=0,Ti="";function xa(r,e,t,n,i,s,o){return{value:r,root:e,parent:t,type:n,props:i,children:s,line:ba,column:Ei,length:o,return:""}}function Fi(r,e){return ZE(xa("",null,null,"",null,null,0),r,{length:-r.length},e)}function KE(){return vt}function eI(){return vt=zt>0?It(Ti,--zt):0,Ei--,vt===10&&(Ei=1,ba--),vt}function Kt(){return vt=zt<Xm?It(Ti,zt++):0,Ei++,vt===10&&(Ei=1,ba++),vt}function Fr(){return It(Ti,zt)}function xo(){return zt}function Cs(r,e){return ls(Ti,r,e)}function cs(r){switch(r){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function jm(r){return ba=Ei=1,Xm=Mr(Ti=r),zt=0,[]}function $m(r){return Ti="",r}function Co(r){return zm(Cs(zt-1,jc(r===91?r+2:r===40?r+1:r)))}function tI(r){for(;(vt=Fr())&&vt<33;)Kt();return cs(r)>2||cs(vt)>3?"":" "}function rI(r,e){for(;--e&&Kt()&&!(vt<48||vt>102||vt>57&&vt<65||vt>70&&vt<97););return Cs(r,xo()+(e<6&&Fr()==32&&Kt()==32))}function jc(r){for(;Kt();)switch(vt){case r:return zt;case 34:case 39:r!==34&&r!==39&&jc(vt);break;case 40:r===41&&jc(r);break;case 92:Kt();break}return zt}function nI(r,e){for(;Kt()&&r+vt!==57;)if(r+vt===84&&Fr()===47)break;return"/*"+Cs(e,zt-1)+"*"+ya(r===47?r:Kt())}function iI(r){for(;!cs(Fr());)Kt();return Cs(r,zt)}function sI(r){return $m(_o("",null,null,null,[""],r=jm(r),0,[0],r))}function _o(r,e,t,n,i,s,o,a,l){for(var c=0,u=0,h=o,d=0,f=0,g=0,m=1,p=1,v=1,x=0,b="",_=i,y=s,I=n,A=b;p;)switch(g=x,x=Kt()){case 40:if(g!=108&&It(A,h-1)==58){Xc(A+=je(Co(x),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:A+=Co(x);break;case 9:case 10:case 13:case 32:A+=tI(g);break;case 92:A+=rI(xo()-1,7);continue;case 47:switch(Fr()){case 42:case 47:no(oI(nI(Kt(),xo()),e,t),l);break;default:A+="/"}break;case 123*m:a[c++]=Mr(A)*v;case 125*m:case 59:case 0:switch(x){case 0:case 125:p=0;case 59+u:v==-1&&(A=je(A,/\f/g,"")),f>0&&Mr(A)-h&&no(f>32?yf(A+";",n,t,h-1):yf(je(A," ","")+";",n,t,h-2),l);break;case 59:A+=";";default:if(no(I=vf(A,e,t,c,u,i,a,b,_=[],y=[],h),s),x===123)if(u===0)_o(A,e,I,I,_,s,h,a,y);else switch(d===99&&It(A,3)===110?100:d){case 100:case 108:case 109:case 115:_o(r,I,I,n&&no(vf(r,I,I,0,0,i,a,b,i,_=[],h),y),i,y,h,a,n?_:y);break;default:_o(A,I,I,I,[""],y,0,a,y)}}c=u=f=0,m=v=1,b=A="",h=o;break;case 58:h=1+Mr(A),f=g;default:if(m<1){if(x==123)--m;else if(x==125&&m++==0&&eI()==125)continue}switch(A+=ya(x),x*m){case 38:v=u>0?1:(A+="\f",-1);break;case 44:a[c++]=(Mr(A)-1)*v,v=1;break;case 64:Fr()===45&&(A+=Co(Kt())),d=Fr(),u=h=Mr(b=A+=iI(xo())),x++;break;case 45:g===45&&Mr(A)==2&&(m=0)}}return s}function vf(r,e,t,n,i,s,o,a,l,c,u){for(var h=i-1,d=i===0?s:[""],f=Tu(d),g=0,m=0,p=0;g<n;++g)for(var v=0,x=ls(r,h+1,h=YE(m=o[g])),b=r;v<f;++v)(b=zm(m>0?d[v]+" "+x:je(x,/&\f/g,d[v])))&&(l[p++]=b);return xa(r,e,t,i===0?Eu:a,l,c,u)}function oI(r,e,t){return xa(r,e,t,wu,ya(KE()),ls(r,2,-2),0)}function yf(r,e,t,n){return xa(r,e,t,Iu,ls(r,0,n),ls(r,n+1,-1),n)}function xi(r,e){for(var t="",n=Tu(r),i=0;i<n;i++)t+=e(r[i],i,r,e)||"";return t}function aI(r,e,t,n){switch(r.type){case $E:if(r.children.length)break;case jE:case Iu:return r.return=r.return||r.value;case wu:return"";case Wm:return r.return=r.value+"{"+xi(r.children,n)+"}";case Eu:r.value=r.props.join(",")}return Mr(t=xi(r.children,n))?r.return=r.value+"{"+t+"}":""}function lI(r){var e=Tu(r);return function(t,n,i,s){for(var o="",a=0;a<e;a++)o+=r[a](t,n,i,s)||"";return o}}function cI(r){return function(e){e.root||(e=e.return)&&r(e)}}function uI(r){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=r(t)),e[t]}}var hI=function(e,t,n){for(var i=0,s=0;i=s,s=Fr(),i===38&&s===12&&(t[n]=1),!cs(s);)Kt();return Cs(e,zt)},dI=function(e,t){var n=-1,i=44;do switch(cs(i)){case 0:i===38&&Fr()===12&&(t[n]=1),e[n]+=hI(zt-1,t,n);break;case 2:e[n]+=Co(i);break;case 4:if(i===44){e[++n]=Fr()===58?"&\f":"",t[n]=e[n].length;break}default:e[n]+=ya(i)}while(i=Kt());return e},fI=function(e,t){return $m(dI(jm(e),t))},bf=new WeakMap,pI=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,n=e.parent,i=e.column===n.column&&e.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!bf.get(n))&&!i){bf.set(e,!0);for(var s=[],o=fI(t,s),a=n.props,l=0,c=0;l<o.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[u]):a[u]+" "+o[l]}}},gI=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}},mI="emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason",vI=function(e){return e.type==="comm"&&e.children.indexOf(mI)>-1},yI=function(e){return function(t,n,i){if(!(t.type!=="rule"||e.compat)){var s=t.value.match(/(:first|:nth|:nth-last)-child/g);if(s){for(var o=!!t.parent,a=o?t.parent.children:i,l=a.length-1;l>=0;l--){var c=a[l];if(c.line<t.line)break;if(c.column<t.column){if(vI(c))return;break}}s.forEach(function(u){console.error('The pseudo class "'+u+'" is potentially unsafe when doing server-side rendering. Try changing it to "'+u.split("-child")[0]+'-of-type".')})}}}},Ym=function(e){return e.type.charCodeAt(1)===105&&e.type.charCodeAt(0)===64},bI=function(e,t){for(var n=e-1;n>=0;n--)if(!Ym(t[n]))return!0;return!1},xf=function(e){e.type="",e.value="",e.return="",e.children="",e.props=""},xI=function(e,t,n){Ym(e)&&(e.parent?(console.error("`@import` rules can't be nested inside other rules. Please move it to the top level and put it before regular rules. Keep in mind that they can only be used within global styles."),xf(e)):bI(t,n)&&(console.error("`@import` rules can't be after other rules. Please put your `@import` rules before your other rules."),xf(e)))};function Zm(r,e){switch(qE(r,e)){case 5103:return Xe+"print-"+r+r;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Xe+r+r;case 5349:case 4246:case 4810:case 6968:case 2756:return Xe+r+Zo+r+Mt+r+r;case 6828:case 4268:return Xe+r+Mt+r+r;case 6165:return Xe+r+Mt+"flex-"+r+r;case 5187:return Xe+r+je(r,/(\w+).+(:[^]+)/,Xe+"box-$1$2"+Mt+"flex-$1$2")+r;case 5443:return Xe+r+Mt+"flex-item-"+je(r,/flex-|-self/,"")+r;case 4675:return Xe+r+Mt+"flex-line-pack"+je(r,/align-content|flex-|-self/,"")+r;case 5548:return Xe+r+Mt+je(r,"shrink","negative")+r;case 5292:return Xe+r+Mt+je(r,"basis","preferred-size")+r;case 6060:return Xe+"box-"+je(r,"-grow","")+Xe+r+Mt+je(r,"grow","positive")+r;case 4554:return Xe+je(r,/([^-])(transform)/g,"$1"+Xe+"$2")+r;case 6187:return je(je(je(r,/(zoom-|grab)/,Xe+"$1"),/(image-set)/,Xe+"$1"),r,"")+r;case 5495:case 3959:return je(r,/(image-set\([^]*)/,Xe+"$1$`$1");case 4968:return je(je(r,/(.+:)(flex-)?(.*)/,Xe+"box-pack:$3"+Mt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Xe+r+r;case 4095:case 3583:case 4068:case 2532:return je(r,/(.+)-inline(.+)/,Xe+"$1$2")+r;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Mr(r)-1-e>6)switch(It(r,e+1)){case 109:if(It(r,e+4)!==45)break;case 102:return je(r,/(.+:)(.+)-([^]+)/,"$1"+Xe+"$2-$3$1"+Zo+(It(r,e+3)==108?"$3":"$2-$3"))+r;case 115:return~Xc(r,"stretch")?Zm(je(r,"stretch","fill-available"),e)+r:r}break;case 4949:if(It(r,e+1)!==115)break;case 6444:switch(It(r,Mr(r)-3-(~Xc(r,"!important")&&10))){case 107:return je(r,":",":"+Xe)+r;case 101:return je(r,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Xe+(It(r,14)===45?"inline-":"")+"box$3$1"+Xe+"$2$3$1"+Mt+"$2box$3")+r}break;case 5936:switch(It(r,e+11)){case 114:return Xe+r+Mt+je(r,/[svh]\w+-[tblr]{2}/,"tb")+r;case 108:return Xe+r+Mt+je(r,/[svh]\w+-[tblr]{2}/,"tb-rl")+r;case 45:return Xe+r+Mt+je(r,/[svh]\w+-[tblr]{2}/,"lr")+r}return Xe+r+Mt+r+r}return r}var CI=function(e,t,n,i){if(e.length>-1&&!e.return)switch(e.type){case Iu:e.return=Zm(e.value,e.length);break;case Wm:return xi([Fi(e,{value:je(e.value,"@","@"+Xe)})],i);case Eu:if(e.length)return QE(e.props,function(s){switch(JE(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return xi([Fi(e,{props:[je(s,/:(read-\w+)/,":"+Zo+"$1")]})],i);case"::placeholder":return xi([Fi(e,{props:[je(s,/:(plac\w+)/,":"+Xe+"input-$1")]}),Fi(e,{props:[je(s,/:(plac\w+)/,":"+Zo+"$1")]}),Fi(e,{props:[je(s,/:(plac\w+)/,Mt+"input-$1")]})],i)}return""})}},_I=[CI],SI=function(e){var t=e.key;if(process.env.NODE_ENV!=="production"&&!t)throw new Error(`You have to configure \`key\` for your cache. Please make sure it's unique (and not equal to 'css') as it's used for linking styles to your cache.
If multiple caches share the same key they might "fight" for each other's style elements.`);if(t==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(m){var p=m.getAttribute("data-emotion");p.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var i=e.stylisPlugins||_I;if(process.env.NODE_ENV!=="production"&&/[^a-z-]/.test(t))throw new Error('Emotion key must only contain lower case alphabetical characters and - but "'+t+'" was passed');var s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(m){for(var p=m.getAttribute("data-emotion").split(" "),v=1;v<p.length;v++)s[p[v]]=!0;a.push(m)});var l,c=[pI,gI];process.env.NODE_ENV!=="production"&&c.push(yI({get compat(){return g.compat}}),xI);{var u,h=[aI,process.env.NODE_ENV!=="production"?function(m){m.root||(m.return?u.insert(m.return):m.value&&m.type!==wu&&u.insert(m.value+"{}"))}:cI(function(m){u.insert(m)})],d=lI(c.concat(i,h)),f=function(p){return xi(sI(p),d)};l=function(p,v,x,b){u=x,process.env.NODE_ENV!=="production"&&v.map!==void 0&&(u={insert:function(y){x.insert(y+v.map)}}),f(p?p+"{"+v.styles+"}":v.styles),b&&(g.inserted[v.name]=!0)}}var g={key:t,sheet:new XE({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return g.sheet.hydrate(a),g},io={exports:{}},Ze={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cf;function AI(){if(Cf)return Ze;Cf=1;var r=typeof Symbol=="function"&&Symbol.for,e=r?Symbol.for("react.element"):60103,t=r?Symbol.for("react.portal"):60106,n=r?Symbol.for("react.fragment"):60107,i=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,o=r?Symbol.for("react.provider"):60109,a=r?Symbol.for("react.context"):60110,l=r?Symbol.for("react.async_mode"):60111,c=r?Symbol.for("react.concurrent_mode"):60111,u=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,d=r?Symbol.for("react.suspense_list"):60120,f=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,m=r?Symbol.for("react.block"):60121,p=r?Symbol.for("react.fundamental"):60117,v=r?Symbol.for("react.responder"):60118,x=r?Symbol.for("react.scope"):60119;function b(y){if(typeof y=="object"&&y!==null){var I=y.$$typeof;switch(I){case e:switch(y=y.type,y){case l:case c:case n:case s:case i:case h:return y;default:switch(y=y&&y.$$typeof,y){case a:case u:case g:case f:case o:return y;default:return I}}case t:return I}}}function _(y){return b(y)===c}return Ze.AsyncMode=l,Ze.ConcurrentMode=c,Ze.ContextConsumer=a,Ze.ContextProvider=o,Ze.Element=e,Ze.ForwardRef=u,Ze.Fragment=n,Ze.Lazy=g,Ze.Memo=f,Ze.Portal=t,Ze.Profiler=s,Ze.StrictMode=i,Ze.Suspense=h,Ze.isAsyncMode=function(y){return _(y)||b(y)===l},Ze.isConcurrentMode=_,Ze.isContextConsumer=function(y){return b(y)===a},Ze.isContextProvider=function(y){return b(y)===o},Ze.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===e},Ze.isForwardRef=function(y){return b(y)===u},Ze.isFragment=function(y){return b(y)===n},Ze.isLazy=function(y){return b(y)===g},Ze.isMemo=function(y){return b(y)===f},Ze.isPortal=function(y){return b(y)===t},Ze.isProfiler=function(y){return b(y)===s},Ze.isStrictMode=function(y){return b(y)===i},Ze.isSuspense=function(y){return b(y)===h},Ze.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===n||y===c||y===s||y===i||y===h||y===d||typeof y=="object"&&y!==null&&(y.$$typeof===g||y.$$typeof===f||y.$$typeof===o||y.$$typeof===a||y.$$typeof===u||y.$$typeof===p||y.$$typeof===v||y.$$typeof===x||y.$$typeof===m)},Ze.typeOf=b,Ze}var qe={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _f;function wI(){return _f||(_f=1,process.env.NODE_ENV!=="production"&&function(){var r=typeof Symbol=="function"&&Symbol.for,e=r?Symbol.for("react.element"):60103,t=r?Symbol.for("react.portal"):60106,n=r?Symbol.for("react.fragment"):60107,i=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,o=r?Symbol.for("react.provider"):60109,a=r?Symbol.for("react.context"):60110,l=r?Symbol.for("react.async_mode"):60111,c=r?Symbol.for("react.concurrent_mode"):60111,u=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,d=r?Symbol.for("react.suspense_list"):60120,f=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,m=r?Symbol.for("react.block"):60121,p=r?Symbol.for("react.fundamental"):60117,v=r?Symbol.for("react.responder"):60118,x=r?Symbol.for("react.scope"):60119;function b(Q){return typeof Q=="string"||typeof Q=="function"||Q===n||Q===c||Q===s||Q===i||Q===h||Q===d||typeof Q=="object"&&Q!==null&&(Q.$$typeof===g||Q.$$typeof===f||Q.$$typeof===o||Q.$$typeof===a||Q.$$typeof===u||Q.$$typeof===p||Q.$$typeof===v||Q.$$typeof===x||Q.$$typeof===m)}function _(Q){if(typeof Q=="object"&&Q!==null){var ie=Q.$$typeof;switch(ie){case e:var K=Q.type;switch(K){case l:case c:case n:case s:case i:case h:return K;default:var re=K&&K.$$typeof;switch(re){case a:case u:case g:case f:case o:return re;default:return ie}}case t:return ie}}}var y=l,I=c,A=a,P=o,L=e,V=u,U=n,N=g,M=f,k=t,O=s,S=i,E=h,C=!1;function B(Q){return C||(C=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),T(Q)||_(Q)===l}function T(Q){return _(Q)===c}function R(Q){return _(Q)===a}function D(Q){return _(Q)===o}function G(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===e}function W(Q){return _(Q)===u}function j(Q){return _(Q)===n}function Y(Q){return _(Q)===g}function $(Q){return _(Q)===f}function q(Q){return _(Q)===t}function oe(Q){return _(Q)===s}function te(Q){return _(Q)===i}function de(Q){return _(Q)===h}qe.AsyncMode=y,qe.ConcurrentMode=I,qe.ContextConsumer=A,qe.ContextProvider=P,qe.Element=L,qe.ForwardRef=V,qe.Fragment=U,qe.Lazy=N,qe.Memo=M,qe.Portal=k,qe.Profiler=O,qe.StrictMode=S,qe.Suspense=E,qe.isAsyncMode=B,qe.isConcurrentMode=T,qe.isContextConsumer=R,qe.isContextProvider=D,qe.isElement=G,qe.isForwardRef=W,qe.isFragment=j,qe.isLazy=Y,qe.isMemo=$,qe.isPortal=q,qe.isProfiler=oe,qe.isStrictMode=te,qe.isSuspense=de,qe.isValidElementType=b,qe.typeOf=_}()),qe}var Sf;function EI(){return Sf||(Sf=1,process.env.NODE_ENV==="production"?io.exports=AI():io.exports=wI()),io.exports}var Nl,Af;function II(){if(Af)return Nl;Af=1;var r=EI(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[r.ForwardRef]=n,s[r.Memo]=i;function o(g){return r.isMemo(g)?i:s[g.$$typeof]||e}var a=Object.defineProperty,l=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,d=Object.prototype;function f(g,m,p){if(typeof m!="string"){if(d){var v=h(m);v&&v!==d&&f(g,v,p)}var x=l(m);c&&(x=x.concat(c(m)));for(var b=o(g),_=o(m),y=0;y<x.length;++y){var I=x[y];if(!t[I]&&!(p&&p[I])&&!(_&&_[I])&&!(b&&b[I])){var A=u(m,I);try{a(g,I,A)}catch{}}}}return g}return Nl=f,Nl}II();var TI=!0;function qm(r,e,t){var n="";return t.split(" ").forEach(function(i){r[i]!==void 0?e.push(r[i]+";"):n+=i+" "}),n}var Ru=function(e,t,n){var i=e.key+"-"+t.name;(n===!1||TI===!1)&&e.registered[i]===void 0&&(e.registered[i]=t.styles)},Pu=function(e,t,n){Ru(e,t,n);var i=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var s=t;do e.insert(t===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function RI(r){for(var e=0,t,n=0,i=r.length;i>=4;++n,i-=4)t=r.charCodeAt(n)&255|(r.charCodeAt(++n)&255)<<8|(r.charCodeAt(++n)&255)<<16|(r.charCodeAt(++n)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(r.charCodeAt(n+2)&255)<<16;case 2:e^=(r.charCodeAt(n+1)&255)<<8;case 1:e^=r.charCodeAt(n)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var PI={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},wf=`You have illegal escape sequence in your template literal, most likely inside content's property value.
Because you write your CSS inside a JavaScript string you actually have to do double escaping, so for example "content: '\\00d7';" should become "content: '\\\\00d7';".
You can read more about this here:
https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#ES2018_revision_of_illegal_escape_sequences`,BI="You have passed in falsy value as style object's key (can happen when in example you pass unexported component as computed key).",MI=/[A-Z]|^ms/g,Jm=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Bu=function(e){return e.charCodeAt(1)===45},Ef=function(e){return e!=null&&typeof e!="boolean"},Dl=uI(function(r){return Bu(r)?r:r.replace(MI,"-$&").toLowerCase()}),qo=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(Jm,function(n,i,s){return br={name:i,styles:s,next:br},i})}return PI[e]!==1&&!Bu(e)&&typeof t=="number"&&t!==0?t+"px":t};if(process.env.NODE_ENV!=="production"){var OI=/(var|attr|counters?|url|element|(((repeating-)?(linear|radial))|conic)-gradient)\(|(no-)?(open|close)-quote/,NI=["normal","none","initial","inherit","unset"],DI=qo,LI=/^-ms-/,FI=/-(.)/g,If={};qo=function(e,t){if(e==="content"&&(typeof t!="string"||NI.indexOf(t)===-1&&!OI.test(t)&&(t.charAt(0)!==t.charAt(t.length-1)||t.charAt(0)!=='"'&&t.charAt(0)!=="'")))throw new Error("You seem to be using a value for 'content' without quotes, try replacing it with `content: '\""+t+"\"'`");var n=DI(e,t);return n!==""&&!Bu(e)&&e.indexOf("-")!==-1&&If[e]===void 0&&(If[e]=!0,console.error("Using kebab-case for css properties in objects is not supported. Did you mean "+e.replace(LI,"ms-").replace(FI,function(i,s){return s.toUpperCase()})+"?")),n}}var Qm="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function us(r,e,t){if(t==null)return"";if(t.__emotion_styles!==void 0){if(process.env.NODE_ENV!=="production"&&t.toString()==="NO_COMPONENT_SELECTOR")throw new Error(Qm);return t}switch(typeof t){case"boolean":return"";case"object":{if(t.anim===1)return br={name:t.name,styles:t.styles,next:br},t.name;if(t.styles!==void 0){var n=t.next;if(n!==void 0)for(;n!==void 0;)br={name:n.name,styles:n.styles,next:br},n=n.next;var i=t.styles+";";return process.env.NODE_ENV!=="production"&&t.map!==void 0&&(i+=t.map),i}return kI(r,e,t)}case"function":{if(r!==void 0){var s=br,o=t(r);return br=s,us(r,e,o)}else process.env.NODE_ENV!=="production"&&console.error("Functions that are interpolated in css calls will be stringified.\nIf you want to have a css call based on props, create a function that returns a css call like this\nlet dynamicStyle = (props) => css`color: ${props.color}`\nIt can be called directly with props or interpolated in a styled call like this\nlet SomeComponent = styled('div')`${dynamicStyle}`");break}case"string":if(process.env.NODE_ENV!=="production"){var a=[],l=t.replace(Jm,function(u,h,d){var f="animation"+a.length;return a.push("const "+f+" = keyframes`"+d.replace(/^@keyframes animation-\w+/,"")+"`"),"${"+f+"}"});a.length&&console.error("`keyframes` output got interpolated into plain string, please wrap it with `css`.\n\nInstead of doing this:\n\n"+[].concat(a,["`"+l+"`"]).join(`
`)+`

You should wrap it with \`css\` like this:

`+("css`"+l+"`"))}break}if(e==null)return t;var c=e[t];return c!==void 0?c:t}function kI(r,e,t){var n="";if(Array.isArray(t))for(var i=0;i<t.length;i++)n+=us(r,e,t[i])+";";else for(var s in t){var o=t[s];if(typeof o!="object")e!=null&&e[o]!==void 0?n+=s+"{"+e[o]+"}":Ef(o)&&(n+=Dl(s)+":"+qo(s,o)+";");else{if(s==="NO_COMPONENT_SELECTOR"&&process.env.NODE_ENV!=="production")throw new Error(Qm);if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var a=0;a<o.length;a++)Ef(o[a])&&(n+=Dl(s)+":"+qo(s,o[a])+";");else{var l=us(r,e,o);switch(s){case"animation":case"animationName":{n+=Dl(s)+":"+l+";";break}default:process.env.NODE_ENV!=="production"&&s==="undefined"&&console.error(BI),n+=s+"{"+l+"}"}}}}return n}var Tf=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Km;process.env.NODE_ENV!=="production"&&(Km=/\/\*#\ssourceMappingURL=data:application\/json;\S+\s+\*\//g);var br,hs=function(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,s="";br=void 0;var o=e[0];o==null||o.raw===void 0?(i=!1,s+=us(n,t,o)):(process.env.NODE_ENV!=="production"&&o[0]===void 0&&console.error(wf),s+=o[0]);for(var a=1;a<e.length;a++)s+=us(n,t,e[a]),i&&(process.env.NODE_ENV!=="production"&&o[a]===void 0&&console.error(wf),s+=o[a]);var l;process.env.NODE_ENV!=="production"&&(s=s.replace(Km,function(d){return l=d,""})),Tf.lastIndex=0;for(var c="",u;(u=Tf.exec(s))!==null;)c+="-"+u[1];var h=RI(s)+c;return process.env.NODE_ENV!=="production"?{name:h,styles:s,map:l,next:br,toString:function(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}}:{name:h,styles:s,next:br}},GI=function(e){return e()},e0=be.useInsertionEffect?be.useInsertionEffect:!1,t0=e0||GI,Rf=e0||be.useLayoutEffect,Mu={}.hasOwnProperty,Ou=be.createContext(typeof HTMLElement<"u"?SI({key:"css"}):null);process.env.NODE_ENV!=="production"&&(Ou.displayName="EmotionCacheContext");Ou.Provider;var Nu=function(e){return w.forwardRef(function(t,n){var i=w.useContext(Ou);return e(t,i,n)})},Ca=be.createContext({});process.env.NODE_ENV!=="production"&&(Ca.displayName="EmotionThemeContext");var Pf=function(e){var t=e.split(".");return t[t.length-1]},HI=function(e){var t=/^\s+at\s+([A-Za-z0-9$.]+)\s/.exec(e);if(t||(t=/^([A-Za-z0-9$.]+)@/.exec(e),t))return Pf(t[1])},VI=new Set(["renderWithHooks","processChild","finishClassComponent","renderToString"]),UI=function(e){return e.replace(/\$/g,"-")},WI=function(e){if(e)for(var t=e.split(`
`),n=0;n<t.length;n++){var i=HI(t[n]);if(i){if(VI.has(i))break;if(/^[A-Z]/.test(i))return UI(i)}}},$c="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Yc="__EMOTION_LABEL_PLEASE_DO_NOT_USE__",zI=function(e,t){if(process.env.NODE_ENV!=="production"&&typeof t.css=="string"&&t.css.indexOf(":")!==-1)throw new Error("Strings are not allowed as css prop values, please wrap it in a css template literal from '@emotion/react' like this: css`"+t.css+"`");var n={};for(var i in t)Mu.call(t,i)&&(n[i]=t[i]);if(n[$c]=e,process.env.NODE_ENV!=="production"&&t.css&&(typeof t.css!="object"||typeof t.css.name!="string"||t.css.name.indexOf("-")===-1)){var s=WI(new Error().stack);s&&(n[Yc]=s)}return n},XI=function(e){var t=e.cache,n=e.serialized,i=e.isStringTag;return Ru(t,n,i),t0(function(){return Pu(t,n,i)}),null},r0=Nu(function(r,e,t){var n=r.css;typeof n=="string"&&e.registered[n]!==void 0&&(n=e.registered[n]);var i=r[$c],s=[n],o="";typeof r.className=="string"?o=qm(e.registered,s,r.className):r.className!=null&&(o=r.className+" ");var a=hs(s,void 0,be.useContext(Ca));if(process.env.NODE_ENV!=="production"&&a.name.indexOf("-")===-1){var l=r[Yc];l&&(a=hs([a,"label:"+l+";"]))}o+=e.key+"-"+a.name;var c={};for(var u in r)Mu.call(r,u)&&u!=="css"&&u!==$c&&(process.env.NODE_ENV==="production"||u!==Yc)&&(c[u]=r[u]);return c.ref=t,c.className=o,be.createElement(be.Fragment,null,be.createElement(XI,{cache:e,serialized:a,isStringTag:typeof i=="string"}),be.createElement(i,c))});process.env.NODE_ENV!=="production"&&(r0.displayName="EmotionCssPropInternal");var jI=r0,$I={version:"11.11.3"},xe=function(e,t){var n=arguments;if(t==null||!Mu.call(t,"css"))return be.createElement.apply(void 0,n);var i=n.length,s=new Array(i);s[0]=jI,s[1]=zI(e,t);for(var o=2;o<i;o++)s[o]=n[o];return be.createElement.apply(null,s)},Bf=!1,YI=Nu(function(r,e){process.env.NODE_ENV!=="production"&&!Bf&&(r.className||r.css)&&(console.error("It looks like you're using the css prop on Global, did you mean to use the styles prop instead?"),Bf=!0);var t=r.styles,n=hs([t],void 0,be.useContext(Ca)),i=be.useRef();return Rf(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+s+" "+n.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",s),o.hydrate([l])),i.current=[o,a],function(){o.flush()}},[e]),Rf(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(n.next!==void 0&&Pu(e,n.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",n,o,!1)},[e,n.name]),null});process.env.NODE_ENV!=="production"&&(YI.displayName="EmotionGlobal");function Du(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return hs(e)}var ZI=function(){var e=Du.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},qI=function r(e){for(var t=e.length,n=0,i="";n<t;n++){var s=e[n];if(s!=null){var o=void 0;switch(typeof s){case"boolean":break;case"object":{if(Array.isArray(s))o=r(s);else{process.env.NODE_ENV!=="production"&&s.styles!==void 0&&s.name!==void 0&&console.error("You have passed styles created with `css` from `@emotion/react` package to the `cx`.\n`cx` is meant to compose class names (strings) so you should convert those styles to a class name by passing them to the `css` received from <ClassNames/> component."),o="";for(var a in s)s[a]&&a&&(o&&(o+=" "),o+=a)}break}default:o=s}o&&(i&&(i+=" "),i+=o)}}return i};function JI(r,e,t){var n=[],i=qm(r,n,t);return n.length<2?t:i+e(n)}var QI=function(e){var t=e.cache,n=e.serializedArr;return t0(function(){for(var i=0;i<n.length;i++)Pu(t,n[i],!1)}),null},KI=Nu(function(r,e){var t=!1,n=[],i=function(){if(t&&process.env.NODE_ENV!=="production")throw new Error("css can only be used during render");for(var c=arguments.length,u=new Array(c),h=0;h<c;h++)u[h]=arguments[h];var d=hs(u,e.registered);return n.push(d),Ru(e,d,!1),e.key+"-"+d.name},s=function(){if(t&&process.env.NODE_ENV!=="production")throw new Error("cx can only be used during render");for(var c=arguments.length,u=new Array(c),h=0;h<c;h++)u[h]=arguments[h];return JI(e.registered,i,qI(u))},o={css:i,cx:s,theme:be.useContext(Ca)},a=r.children(o);return t=!0,be.createElement(be.Fragment,null,be.createElement(QI,{cache:e,serializedArr:n}),a)});process.env.NODE_ENV!=="production"&&(KI.displayName="EmotionClassNames");if(process.env.NODE_ENV!=="production"){var Mf=!0,eT=typeof jest<"u"||typeof vi<"u";if(Mf&&!eT){var Of=typeof globalThis<"u"?globalThis:Mf?window:global,Nf="__EMOTION_REACT_"+$I.version.split(".")[0]+"__";Of[Nf]&&console.warn("You are loading @emotion/react when it is already loaded. Running multiple instances may cause problems. This can happen if multiple versions are used, or if multiple builds of the same version are used."),Of[Nf]=!0}}function tT(r,e){return e||(e=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(e)}}))}var Zc=w.useLayoutEffect,rT=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Jo=function(){};function nT(r,e){return e?e[0]==="-"?r+e:r+"__"+e:r}function iT(r,e){for(var t=arguments.length,n=new Array(t>2?t-2:0),i=2;i<t;i++)n[i-2]=arguments[i];var s=[].concat(n);if(e&&r)for(var o in e)e.hasOwnProperty(o)&&e[o]&&s.push("".concat(nT(r,o)));return s.filter(function(a){return a}).map(function(a){return String(a).trim()}).join(" ")}var Df=function(e){return fT(e)?e.filter(Boolean):Yn(e)==="object"&&e!==null?[e]:[]},n0=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var t=rn(e,rT);return Ce({},t)},ct=function(e,t,n){var i=e.cx,s=e.getStyles,o=e.getClassNames,a=e.className;return{css:s(t,e),className:i(n??{},o(t,e),a)}};function _a(r){return[document.documentElement,document.body,window].indexOf(r)>-1}function sT(r){return _a(r)?window.innerHeight:r.clientHeight}function i0(r){return _a(r)?window.pageYOffset:r.scrollTop}function Qo(r,e){if(_a(r)){window.scrollTo(0,e);return}r.scrollTop=e}function oT(r){var e=getComputedStyle(r),t=e.position==="absolute",n=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var i=r;i=i.parentElement;)if(e=getComputedStyle(i),!(t&&e.position==="static")&&n.test(e.overflow+e.overflowY+e.overflowX))return i;return document.documentElement}function aT(r,e,t,n){return t*((r=r/n-1)*r*r+1)+e}function so(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Jo,i=i0(r),s=e-i,o=10,a=0;function l(){a+=o;var c=aT(a,i,s,t);Qo(r,c),a<t?window.requestAnimationFrame(l):n(r)}l()}function Lf(r,e){var t=r.getBoundingClientRect(),n=e.getBoundingClientRect(),i=e.offsetHeight/3;n.bottom+i>t.bottom?Qo(r,Math.min(e.offsetTop+e.clientHeight-r.offsetHeight+i,r.scrollHeight)):n.top-i<t.top&&Qo(r,Math.max(e.offsetTop-i,0))}function lT(r){var e=r.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function Ff(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function cT(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var s0=!1,uT={get passive(){return s0=!0}},oo=typeof window<"u"?window:{};oo.addEventListener&&oo.removeEventListener&&(oo.addEventListener("p",Jo,uT),oo.removeEventListener("p",Jo,!1));var hT=s0;function dT(r){return r!=null}function fT(r){return Array.isArray(r)}function ao(r,e,t){return r?e:t}var pT=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var s=Object.entries(e).filter(function(o){var a=qr(o,1),l=a[0];return!n.includes(l)});return s.reduce(function(o,a){var l=qr(a,2),c=l[0],u=l[1];return o[c]=u,o},{})},gT=["children","innerProps"],mT=["children","innerProps"];function vT(r){var e=r.maxHeight,t=r.menuEl,n=r.minHeight,i=r.placement,s=r.shouldScroll,o=r.isFixedPosition,a=r.controlHeight,l=oT(t),c={placement:"bottom",maxHeight:e};if(!t||!t.offsetParent)return c;var u=l.getBoundingClientRect(),h=u.height,d=t.getBoundingClientRect(),f=d.bottom,g=d.height,m=d.top,p=t.offsetParent.getBoundingClientRect(),v=p.top,x=o?window.innerHeight:sT(l),b=i0(l),_=parseInt(getComputedStyle(t).marginBottom,10),y=parseInt(getComputedStyle(t).marginTop,10),I=v-y,A=x-m,P=I+b,L=h-b-m,V=f-x+b+_,U=b+m-y,N=160;switch(i){case"auto":case"bottom":if(A>=g)return{placement:"bottom",maxHeight:e};if(L>=g&&!o)return s&&so(l,V,N),{placement:"bottom",maxHeight:e};if(!o&&L>=n||o&&A>=n){s&&so(l,V,N);var M=o?A-_:L-_;return{placement:"bottom",maxHeight:M}}if(i==="auto"||o){var k=e,O=o?I:P;return O>=n&&(k=Math.min(O-_-a,e)),{placement:"top",maxHeight:k}}if(i==="bottom")return s&&Qo(l,V),{placement:"bottom",maxHeight:e};break;case"top":if(I>=g)return{placement:"top",maxHeight:e};if(P>=g&&!o)return s&&so(l,U,N),{placement:"top",maxHeight:e};if(!o&&P>=n||o&&I>=n){var S=e;return(!o&&P>=n||o&&I>=n)&&(S=o?I-y:P-y),s&&so(l,U,N),{placement:"top",maxHeight:S}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return c}function yT(r){var e={bottom:"top",top:"bottom"};return r?e[r]:"bottom"}var o0=function(e){return e==="auto"?"bottom":e},bT=function(e,t){var n,i=e.placement,s=e.theme,o=s.borderRadius,a=s.spacing,l=s.colors;return Ce((n={label:"menu"},Zi(n,yT(i),"100%"),Zi(n,"position","absolute"),Zi(n,"width","100%"),Zi(n,"zIndex",1),n),t?{}:{backgroundColor:l.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:a.menuGutter,marginTop:a.menuGutter})},a0=w.createContext(null),xT=function(e){var t=e.children,n=e.minMenuHeight,i=e.maxMenuHeight,s=e.menuPlacement,o=e.menuPosition,a=e.menuShouldScrollIntoView,l=e.theme,c=w.useContext(a0)||{},u=c.setPortalPlacement,h=w.useRef(null),d=w.useState(i),f=qr(d,2),g=f[0],m=f[1],p=w.useState(null),v=qr(p,2),x=v[0],b=v[1],_=l.spacing.controlHeight;return Zc(function(){var y=h.current;if(y){var I=o==="fixed",A=a&&!I,P=vT({maxHeight:i,menuEl:y,minHeight:n,placement:s,shouldScroll:A,isFixedPosition:I,controlHeight:_});m(P.maxHeight),b(P.placement),u==null||u(P.placement)}},[i,s,o,a,n,u,_]),t({ref:h,placerProps:Ce(Ce({},e),{},{placement:x||o0(s),maxHeight:g})})},CT=function(e){var t=e.children,n=e.innerRef,i=e.innerProps;return xe("div",Ee({},ct(e,"menu",{menu:!0}),{ref:n},i),t)},_T=CT,ST=function(e,t){var n=e.maxHeight,i=e.theme.spacing.baseUnit;return Ce({maxHeight:n,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:i,paddingTop:i})},AT=function(e){var t=e.children,n=e.innerProps,i=e.innerRef,s=e.isMulti;return xe("div",Ee({},ct(e,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:i},n),t)},l0=function(e,t){var n=e.theme,i=n.spacing.baseUnit,s=n.colors;return Ce({textAlign:"center"},t?{}:{color:s.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},wT=l0,ET=l0,IT=function(e){var t=e.children,n=t===void 0?"No options":t,i=e.innerProps,s=rn(e,gT);return xe("div",Ee({},ct(Ce(Ce({},s),{},{children:n,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),n)},TT=function(e){var t=e.children,n=t===void 0?"Loading...":t,i=e.innerProps,s=rn(e,mT);return xe("div",Ee({},ct(Ce(Ce({},s),{},{children:n,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),n)},RT=function(e){var t=e.rect,n=e.offset,i=e.position;return{left:t.left,position:i,top:n,width:t.width,zIndex:1}},PT=function(e){var t=e.appendTo,n=e.children,i=e.controlElement,s=e.innerProps,o=e.menuPlacement,a=e.menuPosition,l=w.useRef(null),c=w.useRef(null),u=w.useState(o0(o)),h=qr(u,2),d=h[0],f=h[1],g=w.useMemo(function(){return{setPortalPlacement:f}},[]),m=w.useState(null),p=qr(m,2),v=p[0],x=p[1],b=w.useCallback(function(){if(i){var A=lT(i),P=a==="fixed"?0:window.pageYOffset,L=A[d]+P;(L!==(v==null?void 0:v.offset)||A.left!==(v==null?void 0:v.rect.left)||A.width!==(v==null?void 0:v.rect.width))&&x({offset:L,rect:A})}},[i,a,d,v==null?void 0:v.offset,v==null?void 0:v.rect.left,v==null?void 0:v.rect.width]);Zc(function(){b()},[b]);var _=w.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),i&&l.current&&(c.current=Tm(i,l.current,b,{elementResize:"ResizeObserver"in window}))},[i,b]);Zc(function(){_()},[_]);var y=w.useCallback(function(A){l.current=A,_()},[_]);if(!t&&a!=="fixed"||!v)return null;var I=xe("div",Ee({ref:y},ct(Ce(Ce({},e),{},{offset:v.offset,position:a,rect:v.rect}),"menuPortal",{"menu-portal":!0}),s),n);return xe(a0.Provider,{value:g},t?Jc.createPortal(I,t):I)},BT=function(e){var t=e.isDisabled,n=e.isRtl;return{label:"container",direction:n?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},MT=function(e){var t=e.children,n=e.innerProps,i=e.isDisabled,s=e.isRtl;return xe("div",Ee({},ct(e,"container",{"--is-disabled":i,"--is-rtl":s}),n),t)},OT=function(e,t){var n=e.theme.spacing,i=e.isMulti,s=e.hasValue,o=e.selectProps.controlShouldRenderValue;return Ce({alignItems:"center",display:i&&s&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(n.baseUnit/2,"px ").concat(n.baseUnit*2,"px")})},NT=function(e){var t=e.children,n=e.innerProps,i=e.isMulti,s=e.hasValue;return xe("div",Ee({},ct(e,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":s}),n),t)},DT=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},LT=function(e){var t=e.children,n=e.innerProps;return xe("div",Ee({},ct(e,"indicatorsContainer",{indicators:!0}),n),t)},kf,FT=["size"],kT=["innerProps","isRtl","size"];function GT(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var HT=process.env.NODE_ENV==="production"?{name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"}:{name:"tj5bde-Svg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0;label:Svg;",map:"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGljYXRvcnMudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXlCSSIsImZpbGUiOiJpbmRpY2F0b3JzLnRzeCIsInNvdXJjZXNDb250ZW50IjpbIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsganN4LCBrZXlmcmFtZXMgfSBmcm9tICdAZW1vdGlvbi9yZWFjdCc7XG5cbmltcG9ydCB7XG4gIENvbW1vblByb3BzQW5kQ2xhc3NOYW1lLFxuICBDU1NPYmplY3RXaXRoTGFiZWwsXG4gIEdyb3VwQmFzZSxcbn0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgZ2V0U3R5bGVQcm9wcyB9IGZyb20gJy4uL3V0aWxzJztcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBEcm9wZG93biAmIENsZWFyIEljb25zXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY29uc3QgU3ZnID0gKHtcbiAgc2l6ZSxcbiAgLi4ucHJvcHNcbn06IEpTWC5JbnRyaW5zaWNFbGVtZW50c1snc3ZnJ10gJiB7IHNpemU6IG51bWJlciB9KSA9PiAoXG4gIDxzdmdcbiAgICBoZWlnaHQ9e3NpemV9XG4gICAgd2lkdGg9e3NpemV9XG4gICAgdmlld0JveD1cIjAgMCAyMCAyMFwiXG4gICAgYXJpYS1oaWRkZW49XCJ0cnVlXCJcbiAgICBmb2N1c2FibGU9XCJmYWxzZVwiXG4gICAgY3NzPXt7XG4gICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICAgIGZpbGw6ICdjdXJyZW50Q29sb3InLFxuICAgICAgbGluZUhlaWdodDogMSxcbiAgICAgIHN0cm9rZTogJ2N1cnJlbnRDb2xvcicsXG4gICAgICBzdHJva2VXaWR0aDogMCxcbiAgICB9fVxuICAgIHsuLi5wcm9wc31cbiAgLz5cbik7XG5cbmV4cG9ydCB0eXBlIENyb3NzSWNvblByb3BzID0gSlNYLkludHJpbnNpY0VsZW1lbnRzWydzdmcnXSAmIHsgc2l6ZT86IG51bWJlciB9O1xuZXhwb3J0IGNvbnN0IENyb3NzSWNvbiA9IChwcm9wczogQ3Jvc3NJY29uUHJvcHMpID0+IChcbiAgPFN2ZyBzaXplPXsyMH0gey4uLnByb3BzfT5cbiAgICA8cGF0aCBkPVwiTTE0LjM0OCAxNC44NDljLTAuNDY5IDAuNDY5LTEuMjI5IDAuNDY5LTEuNjk3IDBsLTIuNjUxLTMuMDMwLTIuNjUxIDMuMDI5Yy0wLjQ2OSAwLjQ2OS0xLjIyOSAwLjQ2OS0xLjY5NyAwLTAuNDY5LTAuNDY5LTAuNDY5LTEuMjI5IDAtMS42OTdsMi43NTgtMy4xNS0yLjc1OS0zLjE1MmMtMC40NjktMC40NjktMC40NjktMS4yMjggMC0xLjY5N3MxLjIyOC0wLjQ2OSAxLjY5NyAwbDIuNjUyIDMuMDMxIDIuNjUxLTMuMDMxYzAuNDY5LTAuNDY5IDEuMjI4LTAuNDY5IDEuNjk3IDBzMC40NjkgMS4yMjkgMCAxLjY5N2wtMi43NTggMy4xNTIgMi43NTggMy4xNWMwLjQ2OSAwLjQ2OSAwLjQ2OSAxLjIyOSAwIDEuNjk4elwiIC8+XG4gIDwvU3ZnPlxuKTtcbmV4cG9ydCB0eXBlIERvd25DaGV2cm9uUHJvcHMgPSBKU1guSW50cmluc2ljRWxlbWVudHNbJ3N2ZyddICYgeyBzaXplPzogbnVtYmVyIH07XG5leHBvcnQgY29uc3QgRG93bkNoZXZyb24gPSAocHJvcHM6IERvd25DaGV2cm9uUHJvcHMpID0+IChcbiAgPFN2ZyBzaXplPXsyMH0gey4uLnByb3BzfT5cbiAgICA8cGF0aCBkPVwiTTQuNTE2IDcuNTQ4YzAuNDM2LTAuNDQ2IDEuMDQzLTAuNDgxIDEuNTc2IDBsMy45MDggMy43NDcgMy45MDgtMy43NDdjMC41MzMtMC40ODEgMS4xNDEtMC40NDYgMS41NzQgMCAwLjQzNiAwLjQ0NSAwLjQwOCAxLjE5NyAwIDEuNjE1LTAuNDA2IDAuNDE4LTQuNjk1IDQuNTAyLTQuNjk1IDQuNTAyLTAuMjE3IDAuMjIzLTAuNTAyIDAuMzM1LTAuNzg3IDAuMzM1cy0wLjU3LTAuMTEyLTAuNzg5LTAuMzM1YzAgMC00LjI4Ny00LjA4NC00LjY5NS00LjUwMnMtMC40MzYtMS4xNyAwLTEuNjE1elwiIC8+XG4gIDwvU3ZnPlxuKTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBEcm9wZG93biAmIENsZWFyIEJ1dHRvbnNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgaW50ZXJmYWNlIERyb3Bkb3duSW5kaWNhdG9yUHJvcHM8XG4gIE9wdGlvbiA9IHVua25vd24sXG4gIElzTXVsdGkgZXh0ZW5kcyBib29sZWFuID0gYm9vbGVhbixcbiAgR3JvdXAgZXh0ZW5kcyBHcm91cEJhc2U8T3B0aW9uPiA9IEdyb3VwQmFzZTxPcHRpb24+XG4+IGV4dGVuZHMgQ29tbW9uUHJvcHNBbmRDbGFzc05hbWU8T3B0aW9uLCBJc011bHRpLCBHcm91cD4ge1xuICAvKiogVGhlIGNoaWxkcmVuIHRvIGJlIHJlbmRlcmVkIGluc2lkZSB0aGUgaW5kaWNhdG9yLiAqL1xuICBjaGlsZHJlbj86IFJlYWN0Tm9kZTtcbiAgLyoqIFByb3BzIHRoYXQgd2lsbCBiZSBwYXNzZWQgb24gdG8gdGhlIGNoaWxkcmVuLiAqL1xuICBpbm5lclByb3BzOiBKU1guSW50cmluc2ljRWxlbWVudHNbJ2RpdiddO1xuICAvKiogVGhlIGZvY3VzZWQgc3RhdGUgb2YgdGhlIHNlbGVjdC4gKi9cbiAgaXNGb2N1c2VkOiBib29sZWFuO1xuICBpc0Rpc2FibGVkOiBib29sZWFuO1xufVxuXG5jb25zdCBiYXNlQ1NTID0gPFxuICBPcHRpb24sXG4gIElzTXVsdGkgZXh0ZW5kcyBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+XG4+KFxuICB7XG4gICAgaXNGb2N1c2VkLFxuICAgIHRoZW1lOiB7XG4gICAgICBzcGFjaW5nOiB7IGJhc2VVbml0IH0sXG4gICAgICBjb2xvcnMsXG4gICAgfSxcbiAgfTpcbiAgICB8IERyb3Bkb3duSW5kaWNhdG9yUHJvcHM8T3B0aW9uLCBJc011bHRpLCBHcm91cD5cbiAgICB8IENsZWFySW5kaWNhdG9yUHJvcHM8T3B0aW9uLCBJc011bHRpLCBHcm91cD4sXG4gIHVuc3R5bGVkOiBib29sZWFuXG4pOiBDU1NPYmplY3RXaXRoTGFiZWwgPT4gKHtcbiAgbGFiZWw6ICdpbmRpY2F0b3JDb250YWluZXInLFxuICBkaXNwbGF5OiAnZmxleCcsXG4gIHRyYW5zaXRpb246ICdjb2xvciAxNTBtcycsXG4gIC4uLih1bnN0eWxlZFxuICAgID8ge31cbiAgICA6IHtcbiAgICAgICAgY29sb3I6IGlzRm9jdXNlZCA/IGNvbG9ycy5uZXV0cmFsNjAgOiBjb2xvcnMubmV1dHJhbDIwLFxuICAgICAgICBwYWRkaW5nOiBiYXNlVW5pdCAqIDIsXG4gICAgICAgICc6aG92ZXInOiB7XG4gICAgICAgICAgY29sb3I6IGlzRm9jdXNlZCA/IGNvbG9ycy5uZXV0cmFsODAgOiBjb2xvcnMubmV1dHJhbDQwLFxuICAgICAgICB9LFxuICAgICAgfSksXG59KTtcblxuZXhwb3J0IGNvbnN0IGRyb3Bkb3duSW5kaWNhdG9yQ1NTID0gYmFzZUNTUztcbmV4cG9ydCBjb25zdCBEcm9wZG93bkluZGljYXRvciA9IDxcbiAgT3B0aW9uLFxuICBJc011bHRpIGV4dGVuZHMgYm9vbGVhbixcbiAgR3JvdXAgZXh0ZW5kcyBHcm91cEJhc2U8T3B0aW9uPlxuPihcbiAgcHJvcHM6IERyb3Bkb3duSW5kaWNhdG9yUHJvcHM8T3B0aW9uLCBJc011bHRpLCBHcm91cD5cbikgPT4ge1xuICBjb25zdCB7IGNoaWxkcmVuLCBpbm5lclByb3BzIH0gPSBwcm9wcztcbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICB7Li4uZ2V0U3R5bGVQcm9wcyhwcm9wcywgJ2Ryb3Bkb3duSW5kaWNhdG9yJywge1xuICAgICAgICBpbmRpY2F0b3I6IHRydWUsXG4gICAgICAgICdkcm9wZG93bi1pbmRpY2F0b3InOiB0cnVlLFxuICAgICAgfSl9XG4gICAgICB7Li4uaW5uZXJQcm9wc31cbiAgICA+XG4gICAgICB7Y2hpbGRyZW4gfHwgPERvd25DaGV2cm9uIC8+fVxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBDbGVhckluZGljYXRvclByb3BzPFxuICBPcHRpb24gPSB1bmtub3duLFxuICBJc011bHRpIGV4dGVuZHMgYm9vbGVhbiA9IGJvb2xlYW4sXG4gIEdyb3VwIGV4dGVuZHMgR3JvdXBCYXNlPE9wdGlvbj4gPSBHcm91cEJhc2U8T3B0aW9uPlxuPiBleHRlbmRzIENvbW1vblByb3BzQW5kQ2xhc3NOYW1lPE9wdGlvbiwgSXNNdWx0aSwgR3JvdXA+IHtcbiAgLyoqIFRoZSBjaGlsZHJlbiB0byBiZSByZW5kZXJlZCBpbnNpZGUgdGhlIGluZGljYXRvci4gKi9cbiAgY2hpbGRyZW4/OiBSZWFjdE5vZGU7XG4gIC8qKiBQcm9wcyB0aGF0IHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRoZSBjaGlsZHJlbi4gKi9cbiAgaW5uZXJQcm9wczogSlNYLkludHJpbnNpY0VsZW1lbnRzWydkaXYnXTtcbiAgLyoqIFRoZSBmb2N1c2VkIHN0YXRlIG9mIHRoZSBzZWxlY3QuICovXG4gIGlzRm9jdXNlZDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IGNsZWFySW5kaWNhdG9yQ1NTID0gYmFzZUNTUztcbmV4cG9ydCBjb25zdCBDbGVhckluZGljYXRvciA9IDxcbiAgT3B0aW9uLFxuICBJc011bHRpIGV4dGVuZHMgYm9vbGVhbixcbiAgR3JvdXAgZXh0ZW5kcyBHcm91cEJhc2U8T3B0aW9uPlxuPihcbiAgcHJvcHM6IENsZWFySW5kaWNhdG9yUHJvcHM8T3B0aW9uLCBJc011bHRpLCBHcm91cD5cbikgPT4ge1xuICBjb25zdCB7IGNoaWxkcmVuLCBpbm5lclByb3BzIH0gPSBwcm9wcztcbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICB7Li4uZ2V0U3R5bGVQcm9wcyhwcm9wcywgJ2NsZWFySW5kaWNhdG9yJywge1xuICAgICAgICBpbmRpY2F0b3I6IHRydWUsXG4gICAgICAgICdjbGVhci1pbmRpY2F0b3InOiB0cnVlLFxuICAgICAgfSl9XG4gICAgICB7Li4uaW5uZXJQcm9wc31cbiAgICA+XG4gICAgICB7Y2hpbGRyZW4gfHwgPENyb3NzSWNvbiAvPn1cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gU2VwYXJhdG9yXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBJbmRpY2F0b3JTZXBhcmF0b3JQcm9wczxcbiAgT3B0aW9uID0gdW5rbm93bixcbiAgSXNNdWx0aSBleHRlbmRzIGJvb2xlYW4gPSBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+ID0gR3JvdXBCYXNlPE9wdGlvbj5cbj4gZXh0ZW5kcyBDb21tb25Qcm9wc0FuZENsYXNzTmFtZTxPcHRpb24sIElzTXVsdGksIEdyb3VwPiB7XG4gIGlzRGlzYWJsZWQ6IGJvb2xlYW47XG4gIGlzRm9jdXNlZDogYm9vbGVhbjtcbiAgaW5uZXJQcm9wcz86IEpTWC5JbnRyaW5zaWNFbGVtZW50c1snc3BhbiddO1xufVxuXG5leHBvcnQgY29uc3QgaW5kaWNhdG9yU2VwYXJhdG9yQ1NTID0gPFxuICBPcHRpb24sXG4gIElzTXVsdGkgZXh0ZW5kcyBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+XG4+KFxuICB7XG4gICAgaXNEaXNhYmxlZCxcbiAgICB0aGVtZToge1xuICAgICAgc3BhY2luZzogeyBiYXNlVW5pdCB9LFxuICAgICAgY29sb3JzLFxuICAgIH0sXG4gIH06IEluZGljYXRvclNlcGFyYXRvclByb3BzPE9wdGlvbiwgSXNNdWx0aSwgR3JvdXA+LFxuICB1bnN0eWxlZDogYm9vbGVhblxuKTogQ1NTT2JqZWN0V2l0aExhYmVsID0+ICh7XG4gIGxhYmVsOiAnaW5kaWNhdG9yU2VwYXJhdG9yJyxcbiAgYWxpZ25TZWxmOiAnc3RyZXRjaCcsXG4gIHdpZHRoOiAxLFxuICAuLi4odW5zdHlsZWRcbiAgICA/IHt9XG4gICAgOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogaXNEaXNhYmxlZCA/IGNvbG9ycy5uZXV0cmFsMTAgOiBjb2xvcnMubmV1dHJhbDIwLFxuICAgICAgICBtYXJnaW5Cb3R0b206IGJhc2VVbml0ICogMixcbiAgICAgICAgbWFyZ2luVG9wOiBiYXNlVW5pdCAqIDIsXG4gICAgICB9KSxcbn0pO1xuXG5leHBvcnQgY29uc3QgSW5kaWNhdG9yU2VwYXJhdG9yID0gPFxuICBPcHRpb24sXG4gIElzTXVsdGkgZXh0ZW5kcyBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+XG4+KFxuICBwcm9wczogSW5kaWNhdG9yU2VwYXJhdG9yUHJvcHM8T3B0aW9uLCBJc011bHRpLCBHcm91cD5cbikgPT4ge1xuICBjb25zdCB7IGlubmVyUHJvcHMgfSA9IHByb3BzO1xuICByZXR1cm4gKFxuICAgIDxzcGFuXG4gICAgICB7Li4uaW5uZXJQcm9wc31cbiAgICAgIHsuLi5nZXRTdHlsZVByb3BzKHByb3BzLCAnaW5kaWNhdG9yU2VwYXJhdG9yJywge1xuICAgICAgICAnaW5kaWNhdG9yLXNlcGFyYXRvcic6IHRydWUsXG4gICAgICB9KX1cbiAgICAvPlxuICApO1xufTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBMb2FkaW5nXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY29uc3QgbG9hZGluZ0RvdEFuaW1hdGlvbnMgPSBrZXlmcmFtZXNgXG4gIDAlLCA4MCUsIDEwMCUgeyBvcGFjaXR5OiAwOyB9XG4gIDQwJSB7IG9wYWNpdHk6IDE7IH1cbmA7XG5cbmV4cG9ydCBjb25zdCBsb2FkaW5nSW5kaWNhdG9yQ1NTID0gPFxuICBPcHRpb24sXG4gIElzTXVsdGkgZXh0ZW5kcyBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+XG4+KFxuICB7XG4gICAgaXNGb2N1c2VkLFxuICAgIHNpemUsXG4gICAgdGhlbWU6IHtcbiAgICAgIGNvbG9ycyxcbiAgICAgIHNwYWNpbmc6IHsgYmFzZVVuaXQgfSxcbiAgICB9LFxuICB9OiBMb2FkaW5nSW5kaWNhdG9yUHJvcHM8T3B0aW9uLCBJc011bHRpLCBHcm91cD4sXG4gIHVuc3R5bGVkOiBib29sZWFuXG4pOiBDU1NPYmplY3RXaXRoTGFiZWwgPT4gKHtcbiAgbGFiZWw6ICdsb2FkaW5nSW5kaWNhdG9yJyxcbiAgZGlzcGxheTogJ2ZsZXgnLFxuICB0cmFuc2l0aW9uOiAnY29sb3IgMTUwbXMnLFxuICBhbGlnblNlbGY6ICdjZW50ZXInLFxuICBmb250U2l6ZTogc2l6ZSxcbiAgbGluZUhlaWdodDogMSxcbiAgbWFyZ2luUmlnaHQ6IHNpemUsXG4gIHRleHRBbGlnbjogJ2NlbnRlcicsXG4gIHZlcnRpY2FsQWxpZ246ICdtaWRkbGUnLFxuICAuLi4odW5zdHlsZWRcbiAgICA/IHt9XG4gICAgOiB7XG4gICAgICAgIGNvbG9yOiBpc0ZvY3VzZWQgPyBjb2xvcnMubmV1dHJhbDYwIDogY29sb3JzLm5ldXRyYWwyMCxcbiAgICAgICAgcGFkZGluZzogYmFzZVVuaXQgKiAyLFxuICAgICAgfSksXG59KTtcblxuaW50ZXJmYWNlIExvYWRpbmdEb3RQcm9wcyB7XG4gIGRlbGF5OiBudW1iZXI7XG4gIG9mZnNldDogYm9vbGVhbjtcbn1cbmNvbnN0IExvYWRpbmdEb3QgPSAoeyBkZWxheSwgb2Zmc2V0IH06IExvYWRpbmdEb3RQcm9wcykgPT4gKFxuICA8c3BhblxuICAgIGNzcz17e1xuICAgICAgYW5pbWF0aW9uOiBgJHtsb2FkaW5nRG90QW5pbWF0aW9uc30gMXMgZWFzZS1pbi1vdXQgJHtkZWxheX1tcyBpbmZpbml0ZTtgLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiAnY3VycmVudENvbG9yJyxcbiAgICAgIGJvcmRlclJhZGl1czogJzFlbScsXG4gICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICAgIG1hcmdpbkxlZnQ6IG9mZnNldCA/ICcxZW0nIDogdW5kZWZpbmVkLFxuICAgICAgaGVpZ2h0OiAnMWVtJyxcbiAgICAgIHZlcnRpY2FsQWxpZ246ICd0b3AnLFxuICAgICAgd2lkdGg6ICcxZW0nLFxuICAgIH19XG4gIC8+XG4pO1xuXG5leHBvcnQgaW50ZXJmYWNlIExvYWRpbmdJbmRpY2F0b3JQcm9wczxcbiAgT3B0aW9uID0gdW5rbm93bixcbiAgSXNNdWx0aSBleHRlbmRzIGJvb2xlYW4gPSBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+ID0gR3JvdXBCYXNlPE9wdGlvbj5cbj4gZXh0ZW5kcyBDb21tb25Qcm9wc0FuZENsYXNzTmFtZTxPcHRpb24sIElzTXVsdGksIEdyb3VwPiB7XG4gIC8qKiBQcm9wcyB0aGF0IHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRoZSBjaGlsZHJlbi4gKi9cbiAgaW5uZXJQcm9wczogSlNYLkludHJpbnNpY0VsZW1lbnRzWydkaXYnXTtcbiAgLyoqIFRoZSBmb2N1c2VkIHN0YXRlIG9mIHRoZSBzZWxlY3QuICovXG4gIGlzRm9jdXNlZDogYm9vbGVhbjtcbiAgaXNEaXNhYmxlZDogYm9vbGVhbjtcbiAgLyoqIFNldCBzaXplIG9mIHRoZSBjb250YWluZXIuICovXG4gIHNpemU6IG51bWJlcjtcbn1cbmV4cG9ydCBjb25zdCBMb2FkaW5nSW5kaWNhdG9yID0gPFxuICBPcHRpb24sXG4gIElzTXVsdGkgZXh0ZW5kcyBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+XG4+KHtcbiAgaW5uZXJQcm9wcyxcbiAgaXNSdGwsXG4gIHNpemUgPSA0LFxuICAuLi5yZXN0UHJvcHNcbn06IExvYWRpbmdJbmRpY2F0b3JQcm9wczxPcHRpb24sIElzTXVsdGksIEdyb3VwPikgPT4ge1xuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIHsuLi5nZXRTdHlsZVByb3BzKFxuICAgICAgICB7IC4uLnJlc3RQcm9wcywgaW5uZXJQcm9wcywgaXNSdGwsIHNpemUgfSxcbiAgICAgICAgJ2xvYWRpbmdJbmRpY2F0b3InLFxuICAgICAgICB7XG4gICAgICAgICAgaW5kaWNhdG9yOiB0cnVlLFxuICAgICAgICAgICdsb2FkaW5nLWluZGljYXRvcic6IHRydWUsXG4gICAgICAgIH1cbiAgICAgICl9XG4gICAgICB7Li4uaW5uZXJQcm9wc31cbiAgICA+XG4gICAgICA8TG9hZGluZ0RvdCBkZWxheT17MH0gb2Zmc2V0PXtpc1J0bH0gLz5cbiAgICAgIDxMb2FkaW5nRG90IGRlbGF5PXsxNjB9IG9mZnNldCAvPlxuICAgICAgPExvYWRpbmdEb3QgZGVsYXk9ezMyMH0gb2Zmc2V0PXshaXNSdGx9IC8+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuIl19 */",toString:GT},c0=function(e){var t=e.size,n=rn(e,FT);return xe("svg",Ee({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:HT},n))},Lu=function(e){return xe(c0,Ee({size:20},e),xe("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},u0=function(e){return xe(c0,Ee({size:20},e),xe("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},h0=function(e,t){var n=e.isFocused,i=e.theme,s=i.spacing.baseUnit,o=i.colors;return Ce({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:n?o.neutral60:o.neutral20,padding:s*2,":hover":{color:n?o.neutral80:o.neutral40}})},VT=h0,UT=function(e){var t=e.children,n=e.innerProps;return xe("div",Ee({},ct(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),n),t||xe(u0,null))},WT=h0,zT=function(e){var t=e.children,n=e.innerProps;return xe("div",Ee({},ct(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),n),t||xe(Lu,null))},XT=function(e,t){var n=e.isDisabled,i=e.theme,s=i.spacing.baseUnit,o=i.colors;return Ce({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:n?o.neutral10:o.neutral20,marginBottom:s*2,marginTop:s*2})},jT=function(e){var t=e.innerProps;return xe("span",Ee({},t,ct(e,"indicatorSeparator",{"indicator-separator":!0})))},$T=ZI(kf||(kf=tT([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),YT=function(e,t){var n=e.isFocused,i=e.size,s=e.theme,o=s.colors,a=s.spacing.baseUnit;return Ce({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},t?{}:{color:n?o.neutral60:o.neutral20,padding:a*2})},Ll=function(e){var t=e.delay,n=e.offset;return xe("span",{css:Du({animation:"".concat($T," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},process.env.NODE_ENV==="production"?"":";label:LoadingDot;",process.env.NODE_ENV==="production"?"":"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGljYXRvcnMudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQW1RSSIsImZpbGUiOiJpbmRpY2F0b3JzLnRzeCIsInNvdXJjZXNDb250ZW50IjpbIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsganN4LCBrZXlmcmFtZXMgfSBmcm9tICdAZW1vdGlvbi9yZWFjdCc7XG5cbmltcG9ydCB7XG4gIENvbW1vblByb3BzQW5kQ2xhc3NOYW1lLFxuICBDU1NPYmplY3RXaXRoTGFiZWwsXG4gIEdyb3VwQmFzZSxcbn0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgZ2V0U3R5bGVQcm9wcyB9IGZyb20gJy4uL3V0aWxzJztcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBEcm9wZG93biAmIENsZWFyIEljb25zXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY29uc3QgU3ZnID0gKHtcbiAgc2l6ZSxcbiAgLi4ucHJvcHNcbn06IEpTWC5JbnRyaW5zaWNFbGVtZW50c1snc3ZnJ10gJiB7IHNpemU6IG51bWJlciB9KSA9PiAoXG4gIDxzdmdcbiAgICBoZWlnaHQ9e3NpemV9XG4gICAgd2lkdGg9e3NpemV9XG4gICAgdmlld0JveD1cIjAgMCAyMCAyMFwiXG4gICAgYXJpYS1oaWRkZW49XCJ0cnVlXCJcbiAgICBmb2N1c2FibGU9XCJmYWxzZVwiXG4gICAgY3NzPXt7XG4gICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICAgIGZpbGw6ICdjdXJyZW50Q29sb3InLFxuICAgICAgbGluZUhlaWdodDogMSxcbiAgICAgIHN0cm9rZTogJ2N1cnJlbnRDb2xvcicsXG4gICAgICBzdHJva2VXaWR0aDogMCxcbiAgICB9fVxuICAgIHsuLi5wcm9wc31cbiAgLz5cbik7XG5cbmV4cG9ydCB0eXBlIENyb3NzSWNvblByb3BzID0gSlNYLkludHJpbnNpY0VsZW1lbnRzWydzdmcnXSAmIHsgc2l6ZT86IG51bWJlciB9O1xuZXhwb3J0IGNvbnN0IENyb3NzSWNvbiA9IChwcm9wczogQ3Jvc3NJY29uUHJvcHMpID0+IChcbiAgPFN2ZyBzaXplPXsyMH0gey4uLnByb3BzfT5cbiAgICA8cGF0aCBkPVwiTTE0LjM0OCAxNC44NDljLTAuNDY5IDAuNDY5LTEuMjI5IDAuNDY5LTEuNjk3IDBsLTIuNjUxLTMuMDMwLTIuNjUxIDMuMDI5Yy0wLjQ2OSAwLjQ2OS0xLjIyOSAwLjQ2OS0xLjY5NyAwLTAuNDY5LTAuNDY5LTAuNDY5LTEuMjI5IDAtMS42OTdsMi43NTgtMy4xNS0yLjc1OS0zLjE1MmMtMC40NjktMC40NjktMC40NjktMS4yMjggMC0xLjY5N3MxLjIyOC0wLjQ2OSAxLjY5NyAwbDIuNjUyIDMuMDMxIDIuNjUxLTMuMDMxYzAuNDY5LTAuNDY5IDEuMjI4LTAuNDY5IDEuNjk3IDBzMC40NjkgMS4yMjkgMCAxLjY5N2wtMi43NTggMy4xNTIgMi43NTggMy4xNWMwLjQ2OSAwLjQ2OSAwLjQ2OSAxLjIyOSAwIDEuNjk4elwiIC8+XG4gIDwvU3ZnPlxuKTtcbmV4cG9ydCB0eXBlIERvd25DaGV2cm9uUHJvcHMgPSBKU1guSW50cmluc2ljRWxlbWVudHNbJ3N2ZyddICYgeyBzaXplPzogbnVtYmVyIH07XG5leHBvcnQgY29uc3QgRG93bkNoZXZyb24gPSAocHJvcHM6IERvd25DaGV2cm9uUHJvcHMpID0+IChcbiAgPFN2ZyBzaXplPXsyMH0gey4uLnByb3BzfT5cbiAgICA8cGF0aCBkPVwiTTQuNTE2IDcuNTQ4YzAuNDM2LTAuNDQ2IDEuMDQzLTAuNDgxIDEuNTc2IDBsMy45MDggMy43NDcgMy45MDgtMy43NDdjMC41MzMtMC40ODEgMS4xNDEtMC40NDYgMS41NzQgMCAwLjQzNiAwLjQ0NSAwLjQwOCAxLjE5NyAwIDEuNjE1LTAuNDA2IDAuNDE4LTQuNjk1IDQuNTAyLTQuNjk1IDQuNTAyLTAuMjE3IDAuMjIzLTAuNTAyIDAuMzM1LTAuNzg3IDAuMzM1cy0wLjU3LTAuMTEyLTAuNzg5LTAuMzM1YzAgMC00LjI4Ny00LjA4NC00LjY5NS00LjUwMnMtMC40MzYtMS4xNyAwLTEuNjE1elwiIC8+XG4gIDwvU3ZnPlxuKTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBEcm9wZG93biAmIENsZWFyIEJ1dHRvbnNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgaW50ZXJmYWNlIERyb3Bkb3duSW5kaWNhdG9yUHJvcHM8XG4gIE9wdGlvbiA9IHVua25vd24sXG4gIElzTXVsdGkgZXh0ZW5kcyBib29sZWFuID0gYm9vbGVhbixcbiAgR3JvdXAgZXh0ZW5kcyBHcm91cEJhc2U8T3B0aW9uPiA9IEdyb3VwQmFzZTxPcHRpb24+XG4+IGV4dGVuZHMgQ29tbW9uUHJvcHNBbmRDbGFzc05hbWU8T3B0aW9uLCBJc011bHRpLCBHcm91cD4ge1xuICAvKiogVGhlIGNoaWxkcmVuIHRvIGJlIHJlbmRlcmVkIGluc2lkZSB0aGUgaW5kaWNhdG9yLiAqL1xuICBjaGlsZHJlbj86IFJlYWN0Tm9kZTtcbiAgLyoqIFByb3BzIHRoYXQgd2lsbCBiZSBwYXNzZWQgb24gdG8gdGhlIGNoaWxkcmVuLiAqL1xuICBpbm5lclByb3BzOiBKU1guSW50cmluc2ljRWxlbWVudHNbJ2RpdiddO1xuICAvKiogVGhlIGZvY3VzZWQgc3RhdGUgb2YgdGhlIHNlbGVjdC4gKi9cbiAgaXNGb2N1c2VkOiBib29sZWFuO1xuICBpc0Rpc2FibGVkOiBib29sZWFuO1xufVxuXG5jb25zdCBiYXNlQ1NTID0gPFxuICBPcHRpb24sXG4gIElzTXVsdGkgZXh0ZW5kcyBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+XG4+KFxuICB7XG4gICAgaXNGb2N1c2VkLFxuICAgIHRoZW1lOiB7XG4gICAgICBzcGFjaW5nOiB7IGJhc2VVbml0IH0sXG4gICAgICBjb2xvcnMsXG4gICAgfSxcbiAgfTpcbiAgICB8IERyb3Bkb3duSW5kaWNhdG9yUHJvcHM8T3B0aW9uLCBJc011bHRpLCBHcm91cD5cbiAgICB8IENsZWFySW5kaWNhdG9yUHJvcHM8T3B0aW9uLCBJc011bHRpLCBHcm91cD4sXG4gIHVuc3R5bGVkOiBib29sZWFuXG4pOiBDU1NPYmplY3RXaXRoTGFiZWwgPT4gKHtcbiAgbGFiZWw6ICdpbmRpY2F0b3JDb250YWluZXInLFxuICBkaXNwbGF5OiAnZmxleCcsXG4gIHRyYW5zaXRpb246ICdjb2xvciAxNTBtcycsXG4gIC4uLih1bnN0eWxlZFxuICAgID8ge31cbiAgICA6IHtcbiAgICAgICAgY29sb3I6IGlzRm9jdXNlZCA/IGNvbG9ycy5uZXV0cmFsNjAgOiBjb2xvcnMubmV1dHJhbDIwLFxuICAgICAgICBwYWRkaW5nOiBiYXNlVW5pdCAqIDIsXG4gICAgICAgICc6aG92ZXInOiB7XG4gICAgICAgICAgY29sb3I6IGlzRm9jdXNlZCA/IGNvbG9ycy5uZXV0cmFsODAgOiBjb2xvcnMubmV1dHJhbDQwLFxuICAgICAgICB9LFxuICAgICAgfSksXG59KTtcblxuZXhwb3J0IGNvbnN0IGRyb3Bkb3duSW5kaWNhdG9yQ1NTID0gYmFzZUNTUztcbmV4cG9ydCBjb25zdCBEcm9wZG93bkluZGljYXRvciA9IDxcbiAgT3B0aW9uLFxuICBJc011bHRpIGV4dGVuZHMgYm9vbGVhbixcbiAgR3JvdXAgZXh0ZW5kcyBHcm91cEJhc2U8T3B0aW9uPlxuPihcbiAgcHJvcHM6IERyb3Bkb3duSW5kaWNhdG9yUHJvcHM8T3B0aW9uLCBJc011bHRpLCBHcm91cD5cbikgPT4ge1xuICBjb25zdCB7IGNoaWxkcmVuLCBpbm5lclByb3BzIH0gPSBwcm9wcztcbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICB7Li4uZ2V0U3R5bGVQcm9wcyhwcm9wcywgJ2Ryb3Bkb3duSW5kaWNhdG9yJywge1xuICAgICAgICBpbmRpY2F0b3I6IHRydWUsXG4gICAgICAgICdkcm9wZG93bi1pbmRpY2F0b3InOiB0cnVlLFxuICAgICAgfSl9XG4gICAgICB7Li4uaW5uZXJQcm9wc31cbiAgICA+XG4gICAgICB7Y2hpbGRyZW4gfHwgPERvd25DaGV2cm9uIC8+fVxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBDbGVhckluZGljYXRvclByb3BzPFxuICBPcHRpb24gPSB1bmtub3duLFxuICBJc011bHRpIGV4dGVuZHMgYm9vbGVhbiA9IGJvb2xlYW4sXG4gIEdyb3VwIGV4dGVuZHMgR3JvdXBCYXNlPE9wdGlvbj4gPSBHcm91cEJhc2U8T3B0aW9uPlxuPiBleHRlbmRzIENvbW1vblByb3BzQW5kQ2xhc3NOYW1lPE9wdGlvbiwgSXNNdWx0aSwgR3JvdXA+IHtcbiAgLyoqIFRoZSBjaGlsZHJlbiB0byBiZSByZW5kZXJlZCBpbnNpZGUgdGhlIGluZGljYXRvci4gKi9cbiAgY2hpbGRyZW4/OiBSZWFjdE5vZGU7XG4gIC8qKiBQcm9wcyB0aGF0IHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRoZSBjaGlsZHJlbi4gKi9cbiAgaW5uZXJQcm9wczogSlNYLkludHJpbnNpY0VsZW1lbnRzWydkaXYnXTtcbiAgLyoqIFRoZSBmb2N1c2VkIHN0YXRlIG9mIHRoZSBzZWxlY3QuICovXG4gIGlzRm9jdXNlZDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IGNsZWFySW5kaWNhdG9yQ1NTID0gYmFzZUNTUztcbmV4cG9ydCBjb25zdCBDbGVhckluZGljYXRvciA9IDxcbiAgT3B0aW9uLFxuICBJc011bHRpIGV4dGVuZHMgYm9vbGVhbixcbiAgR3JvdXAgZXh0ZW5kcyBHcm91cEJhc2U8T3B0aW9uPlxuPihcbiAgcHJvcHM6IENsZWFySW5kaWNhdG9yUHJvcHM8T3B0aW9uLCBJc011bHRpLCBHcm91cD5cbikgPT4ge1xuICBjb25zdCB7IGNoaWxkcmVuLCBpbm5lclByb3BzIH0gPSBwcm9wcztcbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICB7Li4uZ2V0U3R5bGVQcm9wcyhwcm9wcywgJ2NsZWFySW5kaWNhdG9yJywge1xuICAgICAgICBpbmRpY2F0b3I6IHRydWUsXG4gICAgICAgICdjbGVhci1pbmRpY2F0b3InOiB0cnVlLFxuICAgICAgfSl9XG4gICAgICB7Li4uaW5uZXJQcm9wc31cbiAgICA+XG4gICAgICB7Y2hpbGRyZW4gfHwgPENyb3NzSWNvbiAvPn1cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gU2VwYXJhdG9yXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBJbmRpY2F0b3JTZXBhcmF0b3JQcm9wczxcbiAgT3B0aW9uID0gdW5rbm93bixcbiAgSXNNdWx0aSBleHRlbmRzIGJvb2xlYW4gPSBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+ID0gR3JvdXBCYXNlPE9wdGlvbj5cbj4gZXh0ZW5kcyBDb21tb25Qcm9wc0FuZENsYXNzTmFtZTxPcHRpb24sIElzTXVsdGksIEdyb3VwPiB7XG4gIGlzRGlzYWJsZWQ6IGJvb2xlYW47XG4gIGlzRm9jdXNlZDogYm9vbGVhbjtcbiAgaW5uZXJQcm9wcz86IEpTWC5JbnRyaW5zaWNFbGVtZW50c1snc3BhbiddO1xufVxuXG5leHBvcnQgY29uc3QgaW5kaWNhdG9yU2VwYXJhdG9yQ1NTID0gPFxuICBPcHRpb24sXG4gIElzTXVsdGkgZXh0ZW5kcyBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+XG4+KFxuICB7XG4gICAgaXNEaXNhYmxlZCxcbiAgICB0aGVtZToge1xuICAgICAgc3BhY2luZzogeyBiYXNlVW5pdCB9LFxuICAgICAgY29sb3JzLFxuICAgIH0sXG4gIH06IEluZGljYXRvclNlcGFyYXRvclByb3BzPE9wdGlvbiwgSXNNdWx0aSwgR3JvdXA+LFxuICB1bnN0eWxlZDogYm9vbGVhblxuKTogQ1NTT2JqZWN0V2l0aExhYmVsID0+ICh7XG4gIGxhYmVsOiAnaW5kaWNhdG9yU2VwYXJhdG9yJyxcbiAgYWxpZ25TZWxmOiAnc3RyZXRjaCcsXG4gIHdpZHRoOiAxLFxuICAuLi4odW5zdHlsZWRcbiAgICA/IHt9XG4gICAgOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogaXNEaXNhYmxlZCA/IGNvbG9ycy5uZXV0cmFsMTAgOiBjb2xvcnMubmV1dHJhbDIwLFxuICAgICAgICBtYXJnaW5Cb3R0b206IGJhc2VVbml0ICogMixcbiAgICAgICAgbWFyZ2luVG9wOiBiYXNlVW5pdCAqIDIsXG4gICAgICB9KSxcbn0pO1xuXG5leHBvcnQgY29uc3QgSW5kaWNhdG9yU2VwYXJhdG9yID0gPFxuICBPcHRpb24sXG4gIElzTXVsdGkgZXh0ZW5kcyBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+XG4+KFxuICBwcm9wczogSW5kaWNhdG9yU2VwYXJhdG9yUHJvcHM8T3B0aW9uLCBJc011bHRpLCBHcm91cD5cbikgPT4ge1xuICBjb25zdCB7IGlubmVyUHJvcHMgfSA9IHByb3BzO1xuICByZXR1cm4gKFxuICAgIDxzcGFuXG4gICAgICB7Li4uaW5uZXJQcm9wc31cbiAgICAgIHsuLi5nZXRTdHlsZVByb3BzKHByb3BzLCAnaW5kaWNhdG9yU2VwYXJhdG9yJywge1xuICAgICAgICAnaW5kaWNhdG9yLXNlcGFyYXRvcic6IHRydWUsXG4gICAgICB9KX1cbiAgICAvPlxuICApO1xufTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBMb2FkaW5nXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY29uc3QgbG9hZGluZ0RvdEFuaW1hdGlvbnMgPSBrZXlmcmFtZXNgXG4gIDAlLCA4MCUsIDEwMCUgeyBvcGFjaXR5OiAwOyB9XG4gIDQwJSB7IG9wYWNpdHk6IDE7IH1cbmA7XG5cbmV4cG9ydCBjb25zdCBsb2FkaW5nSW5kaWNhdG9yQ1NTID0gPFxuICBPcHRpb24sXG4gIElzTXVsdGkgZXh0ZW5kcyBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+XG4+KFxuICB7XG4gICAgaXNGb2N1c2VkLFxuICAgIHNpemUsXG4gICAgdGhlbWU6IHtcbiAgICAgIGNvbG9ycyxcbiAgICAgIHNwYWNpbmc6IHsgYmFzZVVuaXQgfSxcbiAgICB9LFxuICB9OiBMb2FkaW5nSW5kaWNhdG9yUHJvcHM8T3B0aW9uLCBJc011bHRpLCBHcm91cD4sXG4gIHVuc3R5bGVkOiBib29sZWFuXG4pOiBDU1NPYmplY3RXaXRoTGFiZWwgPT4gKHtcbiAgbGFiZWw6ICdsb2FkaW5nSW5kaWNhdG9yJyxcbiAgZGlzcGxheTogJ2ZsZXgnLFxuICB0cmFuc2l0aW9uOiAnY29sb3IgMTUwbXMnLFxuICBhbGlnblNlbGY6ICdjZW50ZXInLFxuICBmb250U2l6ZTogc2l6ZSxcbiAgbGluZUhlaWdodDogMSxcbiAgbWFyZ2luUmlnaHQ6IHNpemUsXG4gIHRleHRBbGlnbjogJ2NlbnRlcicsXG4gIHZlcnRpY2FsQWxpZ246ICdtaWRkbGUnLFxuICAuLi4odW5zdHlsZWRcbiAgICA/IHt9XG4gICAgOiB7XG4gICAgICAgIGNvbG9yOiBpc0ZvY3VzZWQgPyBjb2xvcnMubmV1dHJhbDYwIDogY29sb3JzLm5ldXRyYWwyMCxcbiAgICAgICAgcGFkZGluZzogYmFzZVVuaXQgKiAyLFxuICAgICAgfSksXG59KTtcblxuaW50ZXJmYWNlIExvYWRpbmdEb3RQcm9wcyB7XG4gIGRlbGF5OiBudW1iZXI7XG4gIG9mZnNldDogYm9vbGVhbjtcbn1cbmNvbnN0IExvYWRpbmdEb3QgPSAoeyBkZWxheSwgb2Zmc2V0IH06IExvYWRpbmdEb3RQcm9wcykgPT4gKFxuICA8c3BhblxuICAgIGNzcz17e1xuICAgICAgYW5pbWF0aW9uOiBgJHtsb2FkaW5nRG90QW5pbWF0aW9uc30gMXMgZWFzZS1pbi1vdXQgJHtkZWxheX1tcyBpbmZpbml0ZTtgLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiAnY3VycmVudENvbG9yJyxcbiAgICAgIGJvcmRlclJhZGl1czogJzFlbScsXG4gICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICAgIG1hcmdpbkxlZnQ6IG9mZnNldCA/ICcxZW0nIDogdW5kZWZpbmVkLFxuICAgICAgaGVpZ2h0OiAnMWVtJyxcbiAgICAgIHZlcnRpY2FsQWxpZ246ICd0b3AnLFxuICAgICAgd2lkdGg6ICcxZW0nLFxuICAgIH19XG4gIC8+XG4pO1xuXG5leHBvcnQgaW50ZXJmYWNlIExvYWRpbmdJbmRpY2F0b3JQcm9wczxcbiAgT3B0aW9uID0gdW5rbm93bixcbiAgSXNNdWx0aSBleHRlbmRzIGJvb2xlYW4gPSBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+ID0gR3JvdXBCYXNlPE9wdGlvbj5cbj4gZXh0ZW5kcyBDb21tb25Qcm9wc0FuZENsYXNzTmFtZTxPcHRpb24sIElzTXVsdGksIEdyb3VwPiB7XG4gIC8qKiBQcm9wcyB0aGF0IHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRoZSBjaGlsZHJlbi4gKi9cbiAgaW5uZXJQcm9wczogSlNYLkludHJpbnNpY0VsZW1lbnRzWydkaXYnXTtcbiAgLyoqIFRoZSBmb2N1c2VkIHN0YXRlIG9mIHRoZSBzZWxlY3QuICovXG4gIGlzRm9jdXNlZDogYm9vbGVhbjtcbiAgaXNEaXNhYmxlZDogYm9vbGVhbjtcbiAgLyoqIFNldCBzaXplIG9mIHRoZSBjb250YWluZXIuICovXG4gIHNpemU6IG51bWJlcjtcbn1cbmV4cG9ydCBjb25zdCBMb2FkaW5nSW5kaWNhdG9yID0gPFxuICBPcHRpb24sXG4gIElzTXVsdGkgZXh0ZW5kcyBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+XG4+KHtcbiAgaW5uZXJQcm9wcyxcbiAgaXNSdGwsXG4gIHNpemUgPSA0LFxuICAuLi5yZXN0UHJvcHNcbn06IExvYWRpbmdJbmRpY2F0b3JQcm9wczxPcHRpb24sIElzTXVsdGksIEdyb3VwPikgPT4ge1xuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIHsuLi5nZXRTdHlsZVByb3BzKFxuICAgICAgICB7IC4uLnJlc3RQcm9wcywgaW5uZXJQcm9wcywgaXNSdGwsIHNpemUgfSxcbiAgICAgICAgJ2xvYWRpbmdJbmRpY2F0b3InLFxuICAgICAgICB7XG4gICAgICAgICAgaW5kaWNhdG9yOiB0cnVlLFxuICAgICAgICAgICdsb2FkaW5nLWluZGljYXRvcic6IHRydWUsXG4gICAgICAgIH1cbiAgICAgICl9XG4gICAgICB7Li4uaW5uZXJQcm9wc31cbiAgICA+XG4gICAgICA8TG9hZGluZ0RvdCBkZWxheT17MH0gb2Zmc2V0PXtpc1J0bH0gLz5cbiAgICAgIDxMb2FkaW5nRG90IGRlbGF5PXsxNjB9IG9mZnNldCAvPlxuICAgICAgPExvYWRpbmdEb3QgZGVsYXk9ezMyMH0gb2Zmc2V0PXshaXNSdGx9IC8+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuIl19 */")})},ZT=function(e){var t=e.innerProps,n=e.isRtl,i=e.size,s=i===void 0?4:i,o=rn(e,kT);return xe("div",Ee({},ct(Ce(Ce({},o),{},{innerProps:t,isRtl:n,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),xe(Ll,{delay:0,offset:n}),xe(Ll,{delay:160,offset:!0}),xe(Ll,{delay:320,offset:!n}))},qT=function(e,t){var n=e.isDisabled,i=e.isFocused,s=e.theme,o=s.colors,a=s.borderRadius,l=s.spacing;return Ce({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:l.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:n?o.neutral5:o.neutral0,borderColor:n?o.neutral10:i?o.primary:o.neutral20,borderRadius:a,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:i?o.primary:o.neutral30}})},JT=function(e){var t=e.children,n=e.isDisabled,i=e.isFocused,s=e.innerRef,o=e.innerProps,a=e.menuIsOpen;return xe("div",Ee({ref:s},ct(e,"control",{control:!0,"control--is-disabled":n,"control--is-focused":i,"control--menu-is-open":a}),o,{"aria-disabled":n||void 0}),t)},QT=JT,KT=["data"],e2=function(e,t){var n=e.theme.spacing;return t?{}:{paddingBottom:n.baseUnit*2,paddingTop:n.baseUnit*2}},t2=function(e){var t=e.children,n=e.cx,i=e.getStyles,s=e.getClassNames,o=e.Heading,a=e.headingProps,l=e.innerProps,c=e.label,u=e.theme,h=e.selectProps;return xe("div",Ee({},ct(e,"group",{group:!0}),l),xe(o,Ee({},a,{selectProps:h,theme:u,getStyles:i,getClassNames:s,cx:n}),c),xe("div",null,t))},r2=function(e,t){var n=e.theme,i=n.colors,s=n.spacing;return Ce({label:"group",cursor:"default",display:"block"},t?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:s.baseUnit*3,paddingRight:s.baseUnit*3,textTransform:"uppercase"})},n2=function(e){var t=n0(e);t.data;var n=rn(t,KT);return xe("div",Ee({},ct(e,"groupHeading",{"group-heading":!0}),n))},i2=t2,s2=["innerRef","isDisabled","isHidden","inputClassName"],o2=function(e,t){var n=e.isDisabled,i=e.value,s=e.theme,o=s.spacing,a=s.colors;return Ce(Ce({visibility:n?"hidden":"visible",transform:i?"translateZ(0)":""},a2),t?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:a.neutral80})},d0={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},a2={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Ce({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},d0)},l2=function(e){return Ce({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},d0)},c2=function(e){var t=e.cx,n=e.value,i=n0(e),s=i.innerRef,o=i.isDisabled,a=i.isHidden,l=i.inputClassName,c=rn(i,s2);return xe("div",Ee({},ct(e,"input",{"input-container":!0}),{"data-value":n||""}),xe("input",Ee({className:t({input:!0},l),ref:s,style:l2(a),disabled:o},c)))},u2=c2,h2=function(e,t){var n=e.theme,i=n.spacing,s=n.borderRadius,o=n.colors;return Ce({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:o.neutral10,borderRadius:s/2,margin:i.baseUnit/2})},d2=function(e,t){var n=e.theme,i=n.borderRadius,s=n.colors,o=e.cropWithEllipsis;return Ce({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:i/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},f2=function(e,t){var n=e.theme,i=n.spacing,s=n.borderRadius,o=n.colors,a=e.isFocused;return Ce({alignItems:"center",display:"flex"},t?{}:{borderRadius:s/2,backgroundColor:a?o.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},f0=function(e){var t=e.children,n=e.innerProps;return xe("div",n,t)},p2=f0,g2=f0;function m2(r){var e=r.children,t=r.innerProps;return xe("div",Ee({role:"button"},t),e||xe(Lu,{size:14}))}var v2=function(e){var t=e.children,n=e.components,i=e.data,s=e.innerProps,o=e.isDisabled,a=e.removeProps,l=e.selectProps,c=n.Container,u=n.Label,h=n.Remove;return xe(c,{data:i,innerProps:Ce(Ce({},ct(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),s),selectProps:l},xe(u,{data:i,innerProps:Ce({},ct(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},t),xe(h,{data:i,innerProps:Ce(Ce({},ct(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},a),selectProps:l}))},y2=v2,b2=function(e,t){var n=e.isDisabled,i=e.isFocused,s=e.isSelected,o=e.theme,a=o.spacing,l=o.colors;return Ce({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:s?l.primary:i?l.primary25:"transparent",color:n?l.neutral20:s?l.neutral0:"inherit",padding:"".concat(a.baseUnit*2,"px ").concat(a.baseUnit*3,"px"),":active":{backgroundColor:n?void 0:s?l.primary:l.primary50}})},x2=function(e){var t=e.children,n=e.isDisabled,i=e.isFocused,s=e.isSelected,o=e.innerRef,a=e.innerProps;return xe("div",Ee({},ct(e,"option",{option:!0,"option--is-disabled":n,"option--is-focused":i,"option--is-selected":s}),{ref:o,"aria-disabled":n},a),t)},C2=x2,_2=function(e,t){var n=e.theme,i=n.spacing,s=n.colors;return Ce({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:s.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},S2=function(e){var t=e.children,n=e.innerProps;return xe("div",Ee({},ct(e,"placeholder",{placeholder:!0}),n),t)},A2=S2,w2=function(e,t){var n=e.isDisabled,i=e.theme,s=i.spacing,o=i.colors;return Ce({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:n?o.neutral40:o.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},E2=function(e){var t=e.children,n=e.isDisabled,i=e.innerProps;return xe("div",Ee({},ct(e,"singleValue",{"single-value":!0,"single-value--is-disabled":n}),i),t)},I2=E2,T2={ClearIndicator:zT,Control:QT,DropdownIndicator:UT,DownChevron:u0,CrossIcon:Lu,Group:i2,GroupHeading:n2,IndicatorsContainer:LT,IndicatorSeparator:jT,Input:u2,LoadingIndicator:ZT,Menu:_T,MenuList:AT,MenuPortal:PT,LoadingMessage:TT,NoOptionsMessage:IT,MultiValue:y2,MultiValueContainer:p2,MultiValueLabel:g2,MultiValueRemove:m2,Option:C2,Placeholder:A2,SelectContainer:MT,SingleValue:I2,ValueContainer:NT},R2=function(e){return Ce(Ce({},T2),e.components)},Gf=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function P2(r,e){return!!(r===e||Gf(r)&&Gf(e))}function B2(r,e){if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++)if(!P2(r[t],e[t]))return!1;return!0}function M2(r,e){e===void 0&&(e=B2);var t=null;function n(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(t&&t.lastThis===this&&e(i,t.lastArgs))return t.lastResult;var o=r.apply(this,i);return t={lastResult:o,lastArgs:i,lastThis:this},o}return n.clear=function(){t=null},n}function O2(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var N2=process.env.NODE_ENV==="production"?{name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"}:{name:"1f43avz-a11yText-A11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap;label:A11yText;",map:"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkExMXlUZXh0LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFNSSIsImZpbGUiOiJBMTF5VGV4dC50c3giLCJzb3VyY2VzQ29udGVudCI6WyIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IGpzeCB9IGZyb20gJ0BlbW90aW9uL3JlYWN0JztcblxuLy8gQXNzaXN0aXZlIHRleHQgdG8gZGVzY3JpYmUgdmlzdWFsIGVsZW1lbnRzLiBIaWRkZW4gZm9yIHNpZ2h0ZWQgdXNlcnMuXG5jb25zdCBBMTF5VGV4dCA9IChwcm9wczogSlNYLkludHJpbnNpY0VsZW1lbnRzWydzcGFuJ10pID0+IChcbiAgPHNwYW5cbiAgICBjc3M9e3tcbiAgICAgIGxhYmVsOiAnYTExeVRleHQnLFxuICAgICAgekluZGV4OiA5OTk5LFxuICAgICAgYm9yZGVyOiAwLFxuICAgICAgY2xpcDogJ3JlY3QoMXB4LCAxcHgsIDFweCwgMXB4KScsXG4gICAgICBoZWlnaHQ6IDEsXG4gICAgICB3aWR0aDogMSxcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgICAgcGFkZGluZzogMCxcbiAgICAgIHdoaXRlU3BhY2U6ICdub3dyYXAnLFxuICAgIH19XG4gICAgey4uLnByb3BzfVxuICAvPlxuKTtcblxuZXhwb3J0IGRlZmF1bHQgQTExeVRleHQ7XG4iXX0= */",toString:O2},D2=function(e){return xe("span",Ee({css:N2},e))},Hf=D2,L2={guidance:function(e){var t=e.isSearchable,n=e.isMulti,i=e.tabSelectsValue,s=e.context,o=e.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,n=e.label,i=n===void 0?"":n,s=e.labels,o=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return o?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(e){var t=e.context,n=e.focused,i=e.options,s=e.label,o=s===void 0?"":s,a=e.selectValue,l=e.isDisabled,c=e.isSelected,u=e.isAppleDevice,h=function(m,p){return m&&m.length?"".concat(m.indexOf(p)+1," of ").concat(m.length):""};if(t==="value"&&a)return"value ".concat(o," focused, ").concat(h(a,n),".");if(t==="menu"&&u){var d=l?" disabled":"",f="".concat(c?" selected":"").concat(d);return"".concat(o).concat(f,", ").concat(h(i,n),".")}return""},onFilter:function(e){var t=e.inputValue,n=e.resultsMessage;return"".concat(n).concat(t?" for search term "+t:"",".")}},F2=function(e){var t=e.ariaSelection,n=e.focusedOption,i=e.focusedValue,s=e.focusableOptions,o=e.isFocused,a=e.selectValue,l=e.selectProps,c=e.id,u=e.isAppleDevice,h=l.ariaLiveMessages,d=l.getOptionLabel,f=l.inputValue,g=l.isMulti,m=l.isOptionDisabled,p=l.isSearchable,v=l.menuIsOpen,x=l.options,b=l.screenReaderStatus,_=l.tabSelectsValue,y=l.isLoading,I=l["aria-label"],A=l["aria-live"],P=w.useMemo(function(){return Ce(Ce({},L2),h||{})},[h]),L=w.useMemo(function(){var O="";if(t&&P.onChange){var S=t.option,E=t.options,C=t.removedValue,B=t.removedValues,T=t.value,R=function(q){return Array.isArray(q)?null:q},D=C||S||R(T),G=D?d(D):"",W=E||B||void 0,j=W?W.map(d):[],Y=Ce({isDisabled:D&&m(D,a),label:G,labels:j},t);O=P.onChange(Y)}return O},[t,P,m,a,d]),V=w.useMemo(function(){var O="",S=n||i,E=!!(n&&a&&a.includes(n));if(S&&P.onFocus){var C={focused:S,label:d(S),isDisabled:m(S,a),isSelected:E,options:s,context:S===n?"menu":"value",selectValue:a,isAppleDevice:u};O=P.onFocus(C)}return O},[n,i,d,m,P,s,a,u]),U=w.useMemo(function(){var O="";if(v&&x.length&&!y&&P.onFilter){var S=b({count:s.length});O=P.onFilter({inputValue:f,resultsMessage:S})}return O},[s,f,v,P,x,b,y]),N=(t==null?void 0:t.action)==="initial-input-focus",M=w.useMemo(function(){var O="";if(P.guidance){var S=i?"value":v?"menu":"input";O=P.guidance({"aria-label":I,context:S,isDisabled:n&&m(n,a),isMulti:g,isSearchable:p,tabSelectsValue:_,isInitialFocus:N})}return O},[I,n,i,g,m,p,v,P,a,_,N]),k=xe(w.Fragment,null,xe("span",{id:"aria-selection"},L),xe("span",{id:"aria-focused"},V),xe("span",{id:"aria-results"},U),xe("span",{id:"aria-guidance"},M));return xe(w.Fragment,null,xe(Hf,{id:c},N&&k),xe(Hf,{"aria-live":A,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!N&&k))},k2=F2,qc=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],G2=new RegExp("["+qc.map(function(r){return r.letters}).join("")+"]","g"),p0={};for(var Fl=0;Fl<qc.length;Fl++)for(var kl=qc[Fl],Gl=0;Gl<kl.letters.length;Gl++)p0[kl.letters[Gl]]=kl.base;var g0=function(e){return e.replace(G2,function(t){return p0[t]})},H2=M2(g0),Vf=function(e){return e.replace(/^\s+|\s+$/g,"")},V2=function(e){return"".concat(e.label," ").concat(e.value)},U2=function(e){return function(t,n){if(t.data.__isNew__)return!0;var i=Ce({ignoreCase:!0,ignoreAccents:!0,stringify:V2,trim:!0,matchFrom:"any"},e),s=i.ignoreCase,o=i.ignoreAccents,a=i.stringify,l=i.trim,c=i.matchFrom,u=l?Vf(n):n,h=l?Vf(a(t)):a(t);return s&&(u=u.toLowerCase(),h=h.toLowerCase()),o&&(u=H2(u),h=g0(h)),c==="start"?h.substr(0,u.length)===u:h.indexOf(u)>-1}},W2=["innerRef"];function z2(r){var e=r.innerRef,t=rn(r,W2),n=pT(t,"onExited","in","enter","exit","appear");return xe("input",Ee({ref:e},n,{css:Du({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},process.env.NODE_ENV==="production"?"":";label:DummyInput;",process.env.NODE_ENV==="production"?"":"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkR1bW15SW5wdXQudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXlCTSIsImZpbGUiOiJEdW1teUlucHV0LnRzeCIsInNvdXJjZXNDb250ZW50IjpbIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsganN4IH0gZnJvbSAnQGVtb3Rpb24vcmVhY3QnO1xuaW1wb3J0IHsgcmVtb3ZlUHJvcHMgfSBmcm9tICcuLi91dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIER1bW15SW5wdXQoe1xuICBpbm5lclJlZixcbiAgLi4ucHJvcHNcbn06IEpTWC5JbnRyaW5zaWNFbGVtZW50c1snaW5wdXQnXSAmIHtcbiAgcmVhZG9ubHkgaW5uZXJSZWY6IFJlZjxIVE1MSW5wdXRFbGVtZW50Pjtcbn0pIHtcbiAgLy8gUmVtb3ZlIGFuaW1hdGlvbiBwcm9wcyBub3QgbWVhbnQgZm9yIEhUTUwgZWxlbWVudHNcbiAgY29uc3QgZmlsdGVyZWRQcm9wcyA9IHJlbW92ZVByb3BzKFxuICAgIHByb3BzLFxuICAgICdvbkV4aXRlZCcsXG4gICAgJ2luJyxcbiAgICAnZW50ZXInLFxuICAgICdleGl0JyxcbiAgICAnYXBwZWFyJ1xuICApO1xuXG4gIHJldHVybiAoXG4gICAgPGlucHV0XG4gICAgICByZWY9e2lubmVyUmVmfVxuICAgICAgey4uLmZpbHRlcmVkUHJvcHN9XG4gICAgICBjc3M9e3tcbiAgICAgICAgbGFiZWw6ICdkdW1teUlucHV0JyxcbiAgICAgICAgLy8gZ2V0IHJpZCBvZiBhbnkgZGVmYXVsdCBzdHlsZXNcbiAgICAgICAgYmFja2dyb3VuZDogMCxcbiAgICAgICAgYm9yZGVyOiAwLFxuICAgICAgICAvLyBpbXBvcnRhbnQhIHRoaXMgaGlkZXMgdGhlIGZsYXNoaW5nIGN1cnNvclxuICAgICAgICBjYXJldENvbG9yOiAndHJhbnNwYXJlbnQnLFxuICAgICAgICBmb250U2l6ZTogJ2luaGVyaXQnLFxuICAgICAgICBncmlkQXJlYTogJzEgLyAxIC8gMiAvIDMnLFxuICAgICAgICBvdXRsaW5lOiAwLFxuICAgICAgICBwYWRkaW5nOiAwLFxuICAgICAgICAvLyBpbXBvcnRhbnQhIHdpdGhvdXQgYHdpZHRoYCBicm93c2VycyB3b24ndCBhbGxvdyBmb2N1c1xuICAgICAgICB3aWR0aDogMSxcblxuICAgICAgICAvLyByZW1vdmUgY3Vyc29yIG9uIGRlc2t0b3BcbiAgICAgICAgY29sb3I6ICd0cmFuc3BhcmVudCcsXG5cbiAgICAgICAgLy8gcmVtb3ZlIGN1cnNvciBvbiBtb2JpbGUgd2hpbHN0IG1haW50YWluaW5nIFwic2Nyb2xsIGludG8gdmlld1wiIGJlaGF2aW91clxuICAgICAgICBsZWZ0OiAtMTAwLFxuICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgICAgdHJhbnNmb3JtOiAnc2NhbGUoLjAxKScsXG4gICAgICB9fVxuICAgIC8+XG4gICk7XG59XG4iXX0= */")}))}var X2=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function j2(r){var e=r.isEnabled,t=r.onBottomArrive,n=r.onBottomLeave,i=r.onTopArrive,s=r.onTopLeave,o=w.useRef(!1),a=w.useRef(!1),l=w.useRef(0),c=w.useRef(null),u=w.useCallback(function(p,v){if(c.current!==null){var x=c.current,b=x.scrollTop,_=x.scrollHeight,y=x.clientHeight,I=c.current,A=v>0,P=_-y-b,L=!1;P>v&&o.current&&(n&&n(p),o.current=!1),A&&a.current&&(s&&s(p),a.current=!1),A&&v>P?(t&&!o.current&&t(p),I.scrollTop=_,L=!0,o.current=!0):!A&&-v>b&&(i&&!a.current&&i(p),I.scrollTop=0,L=!0,a.current=!0),L&&X2(p)}},[t,n,i,s]),h=w.useCallback(function(p){u(p,p.deltaY)},[u]),d=w.useCallback(function(p){l.current=p.changedTouches[0].clientY},[]),f=w.useCallback(function(p){var v=l.current-p.changedTouches[0].clientY;u(p,v)},[u]),g=w.useCallback(function(p){if(p){var v=hT?{passive:!1}:!1;p.addEventListener("wheel",h,v),p.addEventListener("touchstart",d,v),p.addEventListener("touchmove",f,v)}},[f,d,h]),m=w.useCallback(function(p){p&&(p.removeEventListener("wheel",h,!1),p.removeEventListener("touchstart",d,!1),p.removeEventListener("touchmove",f,!1))},[f,d,h]);return w.useEffect(function(){if(e){var p=c.current;return g(p),function(){m(p)}}},[e,g,m]),function(p){c.current=p}}var Uf=["boxSizing","height","overflow","paddingRight","position"],Wf={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function zf(r){r.preventDefault()}function Xf(r){r.stopPropagation()}function jf(){var r=this.scrollTop,e=this.scrollHeight,t=r+this.offsetHeight;r===0?this.scrollTop=1:t===e&&(this.scrollTop=r-1)}function $f(){return"ontouchstart"in window||navigator.maxTouchPoints}var Yf=!!(typeof window<"u"&&window.document&&window.document.createElement),ki=0,ii={capture:!1,passive:!1};function $2(r){var e=r.isEnabled,t=r.accountForScrollbars,n=t===void 0?!0:t,i=w.useRef({}),s=w.useRef(null),o=w.useCallback(function(l){if(Yf){var c=document.body,u=c&&c.style;if(n&&Uf.forEach(function(g){var m=u&&u[g];i.current[g]=m}),n&&ki<1){var h=parseInt(i.current.paddingRight,10)||0,d=document.body?document.body.clientWidth:0,f=window.innerWidth-d+h||0;Object.keys(Wf).forEach(function(g){var m=Wf[g];u&&(u[g]=m)}),u&&(u.paddingRight="".concat(f,"px"))}c&&$f()&&(c.addEventListener("touchmove",zf,ii),l&&(l.addEventListener("touchstart",jf,ii),l.addEventListener("touchmove",Xf,ii))),ki+=1}},[n]),a=w.useCallback(function(l){if(Yf){var c=document.body,u=c&&c.style;ki=Math.max(ki-1,0),n&&ki<1&&Uf.forEach(function(h){var d=i.current[h];u&&(u[h]=d)}),c&&$f()&&(c.removeEventListener("touchmove",zf,ii),l&&(l.removeEventListener("touchstart",jf,ii),l.removeEventListener("touchmove",Xf,ii)))}},[n]);return w.useEffect(function(){if(e){var l=s.current;return o(l),function(){a(l)}}},[e,o,a]),function(l){s.current=l}}function Y2(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var Z2=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},q2=process.env.NODE_ENV==="production"?{name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"}:{name:"bp8cua-ScrollManager",styles:"position:fixed;left:0;bottom:0;right:0;top:0;label:ScrollManager;",map:"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlNjcm9sbE1hbmFnZXIudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQW9EVSIsImZpbGUiOiJTY3JvbGxNYW5hZ2VyLnRzeCIsInNvdXJjZXNDb250ZW50IjpbIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsganN4IH0gZnJvbSAnQGVtb3Rpb24vcmVhY3QnO1xuaW1wb3J0IHsgRnJhZ21lbnQsIFJlYWN0RWxlbWVudCwgUmVmQ2FsbGJhY2ssIE1vdXNlRXZlbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdXNlU2Nyb2xsQ2FwdHVyZSBmcm9tICcuL3VzZVNjcm9sbENhcHR1cmUnO1xuaW1wb3J0IHVzZVNjcm9sbExvY2sgZnJvbSAnLi91c2VTY3JvbGxMb2NrJztcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgcmVhZG9ubHkgY2hpbGRyZW46IChyZWY6IFJlZkNhbGxiYWNrPEhUTUxFbGVtZW50PikgPT4gUmVhY3RFbGVtZW50O1xuICByZWFkb25seSBsb2NrRW5hYmxlZDogYm9vbGVhbjtcbiAgcmVhZG9ubHkgY2FwdHVyZUVuYWJsZWQ6IGJvb2xlYW47XG4gIHJlYWRvbmx5IG9uQm90dG9tQXJyaXZlPzogKGV2ZW50OiBXaGVlbEV2ZW50IHwgVG91Y2hFdmVudCkgPT4gdm9pZDtcbiAgcmVhZG9ubHkgb25Cb3R0b21MZWF2ZT86IChldmVudDogV2hlZWxFdmVudCB8IFRvdWNoRXZlbnQpID0+IHZvaWQ7XG4gIHJlYWRvbmx5IG9uVG9wQXJyaXZlPzogKGV2ZW50OiBXaGVlbEV2ZW50IHwgVG91Y2hFdmVudCkgPT4gdm9pZDtcbiAgcmVhZG9ubHkgb25Ub3BMZWF2ZT86IChldmVudDogV2hlZWxFdmVudCB8IFRvdWNoRXZlbnQpID0+IHZvaWQ7XG59XG5cbmNvbnN0IGJsdXJTZWxlY3RJbnB1dCA9IChldmVudDogTW91c2VFdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHtcbiAgY29uc3QgZWxlbWVudCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MRGl2RWxlbWVudDtcbiAgcmV0dXJuIChcbiAgICBlbGVtZW50Lm93bmVyRG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJlxuICAgIChlbGVtZW50Lm93bmVyRG9jdW1lbnQuYWN0aXZlRWxlbWVudCBhcyBIVE1MRWxlbWVudCkuYmx1cigpXG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBTY3JvbGxNYW5hZ2VyKHtcbiAgY2hpbGRyZW4sXG4gIGxvY2tFbmFibGVkLFxuICBjYXB0dXJlRW5hYmxlZCA9IHRydWUsXG4gIG9uQm90dG9tQXJyaXZlLFxuICBvbkJvdHRvbUxlYXZlLFxuICBvblRvcEFycml2ZSxcbiAgb25Ub3BMZWF2ZSxcbn06IFByb3BzKSB7XG4gIGNvbnN0IHNldFNjcm9sbENhcHR1cmVUYXJnZXQgPSB1c2VTY3JvbGxDYXB0dXJlKHtcbiAgICBpc0VuYWJsZWQ6IGNhcHR1cmVFbmFibGVkLFxuICAgIG9uQm90dG9tQXJyaXZlLFxuICAgIG9uQm90dG9tTGVhdmUsXG4gICAgb25Ub3BBcnJpdmUsXG4gICAgb25Ub3BMZWF2ZSxcbiAgfSk7XG4gIGNvbnN0IHNldFNjcm9sbExvY2tUYXJnZXQgPSB1c2VTY3JvbGxMb2NrKHsgaXNFbmFibGVkOiBsb2NrRW5hYmxlZCB9KTtcblxuICBjb25zdCB0YXJnZXRSZWY6IFJlZkNhbGxiYWNrPEhUTUxFbGVtZW50PiA9IChlbGVtZW50KSA9PiB7XG4gICAgc2V0U2Nyb2xsQ2FwdHVyZVRhcmdldChlbGVtZW50KTtcbiAgICBzZXRTY3JvbGxMb2NrVGFyZ2V0KGVsZW1lbnQpO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPEZyYWdtZW50PlxuICAgICAge2xvY2tFbmFibGVkICYmIChcbiAgICAgICAgPGRpdlxuICAgICAgICAgIG9uQ2xpY2s9e2JsdXJTZWxlY3RJbnB1dH1cbiAgICAgICAgICBjc3M9e3sgcG9zaXRpb246ICdmaXhlZCcsIGxlZnQ6IDAsIGJvdHRvbTogMCwgcmlnaHQ6IDAsIHRvcDogMCB9fVxuICAgICAgICAvPlxuICAgICAgKX1cbiAgICAgIHtjaGlsZHJlbih0YXJnZXRSZWYpfVxuICAgIDwvRnJhZ21lbnQ+XG4gICk7XG59XG4iXX0= */",toString:Y2};function J2(r){var e=r.children,t=r.lockEnabled,n=r.captureEnabled,i=n===void 0?!0:n,s=r.onBottomArrive,o=r.onBottomLeave,a=r.onTopArrive,l=r.onTopLeave,c=j2({isEnabled:i,onBottomArrive:s,onBottomLeave:o,onTopArrive:a,onTopLeave:l}),u=$2({isEnabled:t}),h=function(f){c(f),u(f)};return xe(w.Fragment,null,t&&xe("div",{onClick:Z2,css:q2}),e(h))}function Q2(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var K2=process.env.NODE_ENV==="production"?{name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"}:{name:"5kkxb2-requiredInput-RequiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%;label:RequiredInput;",map:"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlJlcXVpcmVkSW5wdXQudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWNJIiwiZmlsZSI6IlJlcXVpcmVkSW5wdXQudHN4Iiwic291cmNlc0NvbnRlbnQiOlsiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBGb2N1c0V2ZW50SGFuZGxlciwgRnVuY3Rpb25Db21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBqc3ggfSBmcm9tICdAZW1vdGlvbi9yZWFjdCc7XG5cbmNvbnN0IFJlcXVpcmVkSW5wdXQ6IEZ1bmN0aW9uQ29tcG9uZW50PHtcbiAgcmVhZG9ubHkgbmFtZT86IHN0cmluZztcbiAgcmVhZG9ubHkgb25Gb2N1czogRm9jdXNFdmVudEhhbmRsZXI8SFRNTElucHV0RWxlbWVudD47XG59PiA9ICh7IG5hbWUsIG9uRm9jdXMgfSkgPT4gKFxuICA8aW5wdXRcbiAgICByZXF1aXJlZFxuICAgIG5hbWU9e25hbWV9XG4gICAgdGFiSW5kZXg9ey0xfVxuICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXG4gICAgb25Gb2N1cz17b25Gb2N1c31cbiAgICBjc3M9e3tcbiAgICAgIGxhYmVsOiAncmVxdWlyZWRJbnB1dCcsXG4gICAgICBvcGFjaXR5OiAwLFxuICAgICAgcG9pbnRlckV2ZW50czogJ25vbmUnLFxuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICBib3R0b206IDAsXG4gICAgICBsZWZ0OiAwLFxuICAgICAgcmlnaHQ6IDAsXG4gICAgICB3aWR0aDogJzEwMCUnLFxuICAgIH19XG4gICAgLy8gUHJldmVudCBgU3dpdGNoaW5nIGZyb20gdW5jb250cm9sbGVkIHRvIGNvbnRyb2xsZWRgIGVycm9yXG4gICAgdmFsdWU9XCJcIlxuICAgIG9uQ2hhbmdlPXsoKSA9PiB7fX1cbiAgLz5cbik7XG5cbmV4cG9ydCBkZWZhdWx0IFJlcXVpcmVkSW5wdXQ7XG4iXX0= */",toString:Q2},eR=function(e){var t=e.name,n=e.onFocus;return xe("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:n,css:K2,value:"",onChange:function(){}})},tR=eR;function Fu(r){var e;return typeof window<"u"&&window.navigator!=null?r.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function rR(){return Fu(/^iPhone/i)}function m0(){return Fu(/^Mac/i)}function nR(){return Fu(/^iPad/i)||m0()&&navigator.maxTouchPoints>1}function iR(){return rR()||nR()}function sR(){return m0()||iR()}var oR=function(e){return e.label},aR=function(e){return e.label},lR=function(e){return e.value},cR=function(e){return!!e.isDisabled},uR={clearIndicator:WT,container:BT,control:qT,dropdownIndicator:VT,group:e2,groupHeading:r2,indicatorsContainer:DT,indicatorSeparator:XT,input:o2,loadingIndicator:YT,loadingMessage:ET,menu:bT,menuList:ST,menuPortal:RT,multiValue:h2,multiValueLabel:d2,multiValueRemove:f2,noOptionsMessage:wT,option:b2,placeholder:_2,singleValue:w2,valueContainer:OT},hR={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},dR=4,v0=4,fR=38,pR=v0*2,gR={baseUnit:v0,controlHeight:fR,menuGutter:pR},Hl={borderRadius:dR,colors:hR,spacing:gR},mR={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:Ff(),captureMenuScroll:!Ff(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:U2(),formatGroupLabel:oR,getOptionLabel:aR,getOptionValue:lR,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:cR,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!cT(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function Zf(r,e,t,n){var i=x0(r,e,t),s=C0(r,e,t),o=b0(r,e),a=Ko(r,e);return{type:"option",data:e,isDisabled:i,isSelected:s,label:o,value:a,index:n}}function So(r,e){return r.options.map(function(t,n){if("options"in t){var i=t.options.map(function(o,a){return Zf(r,o,e,a)}).filter(function(o){return Jf(r,o)});return i.length>0?{type:"group",data:t,options:i,index:n}:void 0}var s=Zf(r,t,e,n);return Jf(r,s)?s:void 0}).filter(dT)}function y0(r){return r.reduce(function(e,t){return t.type==="group"?e.push.apply(e,Au(t.options.map(function(n){return n.data}))):e.push(t.data),e},[])}function qf(r,e){return r.reduce(function(t,n){return n.type==="group"?t.push.apply(t,Au(n.options.map(function(i){return{data:i.data,id:"".concat(e,"-").concat(n.index,"-").concat(i.index)}}))):t.push({data:n.data,id:"".concat(e,"-").concat(n.index)}),t},[])}function vR(r,e){return y0(So(r,e))}function Jf(r,e){var t=r.inputValue,n=t===void 0?"":t,i=e.data,s=e.isSelected,o=e.label,a=e.value;return(!S0(r)||!s)&&_0(r,{label:o,value:a,data:i},n)}function yR(r,e){var t=r.focusedValue,n=r.selectValue,i=n.indexOf(t);if(i>-1){var s=e.indexOf(t);if(s>-1)return t;if(i<e.length)return e[i]}return null}function bR(r,e){var t=r.focusedOption;return t&&e.indexOf(t)>-1?t:e[0]}var Vl=function(e,t){var n,i=(n=e.find(function(s){return s.data===t}))===null||n===void 0?void 0:n.id;return i||null},b0=function(e,t){return e.getOptionLabel(t)},Ko=function(e,t){return e.getOptionValue(t)};function x0(r,e,t){return typeof r.isOptionDisabled=="function"?r.isOptionDisabled(e,t):!1}function C0(r,e,t){if(t.indexOf(e)>-1)return!0;if(typeof r.isOptionSelected=="function")return r.isOptionSelected(e,t);var n=Ko(r,e);return t.some(function(i){return Ko(r,i)===n})}function _0(r,e,t){return r.filterOption?r.filterOption(e,t):!0}var S0=function(e){var t=e.hideSelectedOptions,n=e.isMulti;return t===void 0?n:t},xR=1,A0=function(r){DE(t,r);var e=GE(t);function t(n){var i;if(OE(this,t),i=e.call(this,n),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.isAppleDevice=sR(),i.controlRef=null,i.getControlRef=function(l){i.controlRef=l},i.focusedOptionRef=null,i.getFocusedOptionRef=function(l){i.focusedOptionRef=l},i.menuListRef=null,i.getMenuListRef=function(l){i.menuListRef=l},i.inputRef=null,i.getInputRef=function(l){i.inputRef=l},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(l,c){var u=i.props,h=u.onChange,d=u.name;c.name=d,i.ariaOnChange(l,c),h(l,c)},i.setValue=function(l,c,u){var h=i.props,d=h.closeMenuOnSelect,f=h.isMulti,g=h.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:g}),d&&(i.setState({inputIsHiddenAfterUpdate:!f}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(l,{action:c,option:u})},i.selectOption=function(l){var c=i.props,u=c.blurInputOnSelect,h=c.isMulti,d=c.name,f=i.state.selectValue,g=h&&i.isOptionSelected(l,f),m=i.isOptionDisabled(l,f);if(g){var p=i.getOptionValue(l);i.setValue(f.filter(function(v){return i.getOptionValue(v)!==p}),"deselect-option",l)}else if(!m)h?i.setValue([].concat(Au(f),[l]),"select-option",l):i.setValue(l,"select-option");else{i.ariaOnChange(l,{action:"select-option",option:l,name:d});return}u&&i.blurInput()},i.removeValue=function(l){var c=i.props.isMulti,u=i.state.selectValue,h=i.getOptionValue(l),d=u.filter(function(g){return i.getOptionValue(g)!==h}),f=ao(c,d,d[0]||null);i.onChange(f,{action:"remove-value",removedValue:l}),i.focusInput()},i.clearValue=function(){var l=i.state.selectValue;i.onChange(ao(i.props.isMulti,[],null),{action:"clear",removedValues:l})},i.popValue=function(){var l=i.props.isMulti,c=i.state.selectValue,u=c[c.length-1],h=c.slice(0,c.length-1),d=ao(l,h,h[0]||null);i.onChange(d,{action:"pop-value",removedValue:u})},i.getFocusedOptionId=function(l){return Vl(i.state.focusableOptionsWithIds,l)},i.getFocusableOptionsWithIds=function(){return qf(So(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return iT.apply(void 0,[i.props.classNamePrefix].concat(c))},i.getOptionLabel=function(l){return b0(i.props,l)},i.getOptionValue=function(l){return Ko(i.props,l)},i.getStyles=function(l,c){var u=i.props.unstyled,h=uR[l](c,u);h.boxSizing="border-box";var d=i.props.styles[l];return d?d(h,c):h},i.getClassNames=function(l,c){var u,h;return(u=(h=i.props.classNames)[l])===null||u===void 0?void 0:u.call(h,c)},i.getElementId=function(l){return"".concat(i.state.instancePrefix,"-").concat(l)},i.getComponents=function(){return R2(i.props)},i.buildCategorizedOptions=function(){return So(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return y0(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(l,c){i.setState({ariaSelection:Ce({value:l},c)})},i.onMenuMouseDown=function(l){l.button===0&&(l.stopPropagation(),l.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(l){i.blockOptionHover=!1},i.onControlMouseDown=function(l){if(!l.defaultPrevented){var c=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&i.onMenuClose():c&&i.openMenu("first"):(c&&(i.openAfterFocus=!0),i.focusInput()),l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&l.preventDefault()}},i.onDropdownIndicatorMouseDown=function(l){if(!(l&&l.type==="mousedown"&&l.button!==0)&&!i.props.isDisabled){var c=i.props,u=c.isMulti,h=c.menuIsOpen;i.focusInput(),h?(i.setState({inputIsHiddenAfterUpdate:!u}),i.onMenuClose()):i.openMenu("first"),l.preventDefault()}},i.onClearIndicatorMouseDown=function(l){l&&l.type==="mousedown"&&l.button!==0||(i.clearValue(),l.preventDefault(),i.openAfterFocus=!1,l.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(l){typeof i.props.closeMenuOnScroll=="boolean"?l.target instanceof HTMLElement&&_a(l.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(l)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(l){var c=l.touches,u=c&&c.item(0);u&&(i.initialTouchX=u.clientX,i.initialTouchY=u.clientY,i.userIsDragging=!1)},i.onTouchMove=function(l){var c=l.touches,u=c&&c.item(0);if(u){var h=Math.abs(u.clientX-i.initialTouchX),d=Math.abs(u.clientY-i.initialTouchY),f=5;i.userIsDragging=h>f||d>f}},i.onTouchEnd=function(l){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(l.target)&&i.menuListRef&&!i.menuListRef.contains(l.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(l){i.userIsDragging||i.onControlMouseDown(l)},i.onClearIndicatorTouchEnd=function(l){i.userIsDragging||i.onClearIndicatorMouseDown(l)},i.onDropdownIndicatorTouchEnd=function(l){i.userIsDragging||i.onDropdownIndicatorMouseDown(l)},i.handleInputChange=function(l){var c=i.props.inputValue,u=l.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(u,{action:"input-change",prevInputValue:c}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(l){i.props.onFocus&&i.props.onFocus(l),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(l){var c=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(l),i.onInputChange("",{action:"input-blur",prevInputValue:c}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(l){if(!(i.blockOptionHover||i.state.focusedOption===l)){var c=i.getFocusableOptions(),u=c.indexOf(l);i.setState({focusedOption:l,focusedOptionId:u>-1?i.getFocusedOptionId(l):null})}},i.shouldHideSelectedOptions=function(){return S0(i.props)},i.onValueInputFocus=function(l){l.preventDefault(),l.stopPropagation(),i.focus()},i.onKeyDown=function(l){var c=i.props,u=c.isMulti,h=c.backspaceRemovesValue,d=c.escapeClearsValue,f=c.inputValue,g=c.isClearable,m=c.isDisabled,p=c.menuIsOpen,v=c.onKeyDown,x=c.tabSelectsValue,b=c.openMenuOnFocus,_=i.state,y=_.focusedOption,I=_.focusedValue,A=_.selectValue;if(!m&&!(typeof v=="function"&&(v(l),l.defaultPrevented))){switch(i.blockOptionHover=!0,l.key){case"ArrowLeft":if(!u||f)return;i.focusValue("previous");break;case"ArrowRight":if(!u||f)return;i.focusValue("next");break;case"Delete":case"Backspace":if(f)return;if(I)i.removeValue(I);else{if(!h)return;u?i.popValue():g&&i.clearValue()}break;case"Tab":if(i.isComposing||l.shiftKey||!p||!x||!y||b&&i.isOptionSelected(y,A))return;i.selectOption(y);break;case"Enter":if(l.keyCode===229)break;if(p){if(!y||i.isComposing)return;i.selectOption(y);break}return;case"Escape":p?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:f}),i.onMenuClose()):g&&d&&i.clearValue();break;case" ":if(f)return;if(!p){i.openMenu("first");break}if(!y)return;i.selectOption(y);break;case"ArrowUp":p?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":p?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!p)return;i.focusOption("pageup");break;case"PageDown":if(!p)return;i.focusOption("pagedown");break;case"Home":if(!p)return;i.focusOption("first");break;case"End":if(!p)return;i.focusOption("last");break;default:return}l.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++xR),i.state.selectValue=Df(n.value),n.menuIsOpen&&i.state.selectValue.length){var s=i.getFocusableOptionsWithIds(),o=i.buildFocusableOptions(),a=o.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=s,i.state.focusedOption=o[a],i.state.focusedOptionId=Vl(s,o[a])}return i}return NE(t,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&Lf(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isDisabled,a=s.menuIsOpen,l=this.state.isFocused;(l&&!o&&i.isDisabled||l&&a&&!i.menuIsOpen)&&this.focusInput(),l&&o&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!l&&!o&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(Lf(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,s){this.props.onInputChange(i,s)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var s=this,o=this.state,a=o.selectValue,l=o.isFocused,c=this.buildFocusableOptions(),u=i==="first"?0:c.length-1;if(!this.props.isMulti){var h=c.indexOf(a[0]);h>-1&&(u=h)}this.scrollToFocusedOptionOnUpdate=!(l&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:c[u],focusedOptionId:this.getFocusedOptionId(c[u])},function(){return s.onMenuOpen()})}},{key:"focusValue",value:function(i){var s=this.state,o=s.selectValue,a=s.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var l=o.indexOf(a);a||(l=-1);var c=o.length-1,u=-1;if(o.length){switch(i){case"previous":l===0?u=0:l===-1?u=c:u=l-1;break;case"next":l>-1&&l<c&&(u=l+1);break}this.setState({inputIsHidden:u!==-1,focusedValue:o[u]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",s=this.props.pageSize,o=this.state.focusedOption,a=this.getFocusableOptions();if(a.length){var l=0,c=a.indexOf(o);o||(c=-1),i==="up"?l=c>0?c-1:a.length-1:i==="down"?l=(c+1)%a.length:i==="pageup"?(l=c-s,l<0&&(l=0)):i==="pagedown"?(l=c+s,l>a.length-1&&(l=a.length-1)):i==="last"&&(l=a.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:a[l],focusedValue:null,focusedOptionId:this.getFocusedOptionId(a[l])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Hl):Ce(Ce({},Hl),this.props.theme):Hl}},{key:"getCommonProps",value:function(){var i=this.clearValue,s=this.cx,o=this.getStyles,a=this.getClassNames,l=this.getValue,c=this.selectOption,u=this.setValue,h=this.props,d=h.isMulti,f=h.isRtl,g=h.options,m=this.hasValue();return{clearValue:i,cx:s,getStyles:o,getClassNames:a,getValue:l,hasValue:m,isMulti:d,isRtl:f,options:g,selectOption:c,selectProps:h,setValue:u,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,s=i.isClearable,o=i.isMulti;return s===void 0?o:s}},{key:"isOptionDisabled",value:function(i,s){return x0(this.props,i,s)}},{key:"isOptionSelected",value:function(i,s){return C0(this.props,i,s)}},{key:"filterOption",value:function(i,s){return _0(this.props,i,s)}},{key:"formatOptionLabel",value:function(i,s){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,a=this.state.selectValue;return this.props.formatOptionLabel(i,{context:s,inputValue:o,selectValue:a})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,s=i.isDisabled,o=i.isSearchable,a=i.inputId,l=i.inputValue,c=i.tabIndex,u=i.form,h=i.menuIsOpen,d=i.required,f=this.getComponents(),g=f.Input,m=this.state,p=m.inputIsHidden,v=m.ariaSelection,x=this.commonProps,b=a||this.getElementId("input"),_=Ce(Ce(Ce({"aria-autocomplete":"list","aria-expanded":h,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":d,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},h&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?(v==null?void 0:v.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?be.createElement(g,Ee({},x,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:b,innerRef:this.getInputRef,isDisabled:s,isHidden:p,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:c,form:u,type:"text",value:l},_)):be.createElement(z2,Ee({id:b,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Jo,onFocus:this.onInputFocus,disabled:s,tabIndex:c,inputMode:"none",form:u,value:""},_))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,s=this.getComponents(),o=s.MultiValue,a=s.MultiValueContainer,l=s.MultiValueLabel,c=s.MultiValueRemove,u=s.SingleValue,h=s.Placeholder,d=this.commonProps,f=this.props,g=f.controlShouldRenderValue,m=f.isDisabled,p=f.isMulti,v=f.inputValue,x=f.placeholder,b=this.state,_=b.selectValue,y=b.focusedValue,I=b.isFocused;if(!this.hasValue()||!g)return v?null:be.createElement(h,Ee({},d,{key:"placeholder",isDisabled:m,isFocused:I,innerProps:{id:this.getElementId("placeholder")}}),x);if(p)return _.map(function(P,L){var V=P===y,U="".concat(i.getOptionLabel(P),"-").concat(i.getOptionValue(P));return be.createElement(o,Ee({},d,{components:{Container:a,Label:l,Remove:c},isFocused:V,isDisabled:m,key:U,index:L,removeProps:{onClick:function(){return i.removeValue(P)},onTouchEnd:function(){return i.removeValue(P)},onMouseDown:function(M){M.preventDefault()}},data:P}),i.formatOptionLabel(P,"value"))});if(v)return null;var A=_[0];return be.createElement(u,Ee({},d,{data:A,isDisabled:m}),this.formatOptionLabel(A,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),s=i.ClearIndicator,o=this.commonProps,a=this.props,l=a.isDisabled,c=a.isLoading,u=this.state.isFocused;if(!this.isClearable()||!s||l||!this.hasValue()||c)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return be.createElement(s,Ee({},o,{innerProps:h,isFocused:u}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),s=i.LoadingIndicator,o=this.commonProps,a=this.props,l=a.isDisabled,c=a.isLoading,u=this.state.isFocused;if(!s||!c)return null;var h={"aria-hidden":"true"};return be.createElement(s,Ee({},o,{innerProps:h,isDisabled:l,isFocused:u}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator,o=i.IndicatorSeparator;if(!s||!o)return null;var a=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused;return be.createElement(o,Ee({},a,{isDisabled:l,isFocused:c}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator;if(!s)return null;var o=this.commonProps,a=this.props.isDisabled,l=this.state.isFocused,c={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return be.createElement(s,Ee({},o,{innerProps:c,isDisabled:a,isFocused:l}))}},{key:"renderMenu",value:function(){var i=this,s=this.getComponents(),o=s.Group,a=s.GroupHeading,l=s.Menu,c=s.MenuList,u=s.MenuPortal,h=s.LoadingMessage,d=s.NoOptionsMessage,f=s.Option,g=this.commonProps,m=this.state.focusedOption,p=this.props,v=p.captureMenuScroll,x=p.inputValue,b=p.isLoading,_=p.loadingMessage,y=p.minMenuHeight,I=p.maxMenuHeight,A=p.menuIsOpen,P=p.menuPlacement,L=p.menuPosition,V=p.menuPortalTarget,U=p.menuShouldBlockScroll,N=p.menuShouldScrollIntoView,M=p.noOptionsMessage,k=p.onMenuScrollToTop,O=p.onMenuScrollToBottom;if(!A)return null;var S=function(G,W){var j=G.type,Y=G.data,$=G.isDisabled,q=G.isSelected,oe=G.label,te=G.value,de=m===Y,Q=$?void 0:function(){return i.onOptionHover(Y)},ie=$?void 0:function(){return i.selectOption(Y)},K="".concat(i.getElementId("option"),"-").concat(W),re={id:K,onClick:ie,onMouseMove:Q,onMouseOver:Q,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:q};return be.createElement(f,Ee({},g,{innerProps:re,data:Y,isDisabled:$,isSelected:q,key:K,label:oe,type:j,value:te,isFocused:de,innerRef:de?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(G.data,"menu"))},E;if(this.hasOptions())E=this.getCategorizedOptions().map(function(D){if(D.type==="group"){var G=D.data,W=D.options,j=D.index,Y="".concat(i.getElementId("group"),"-").concat(j),$="".concat(Y,"-heading");return be.createElement(o,Ee({},g,{key:Y,data:G,options:W,Heading:a,headingProps:{id:$,data:D.data},label:i.formatGroupLabel(D.data)}),D.options.map(function(q){return S(q,"".concat(j,"-").concat(q.index))}))}else if(D.type==="option")return S(D,"".concat(D.index))});else if(b){var C=_({inputValue:x});if(C===null)return null;E=be.createElement(h,g,C)}else{var B=M({inputValue:x});if(B===null)return null;E=be.createElement(d,g,B)}var T={minMenuHeight:y,maxMenuHeight:I,menuPlacement:P,menuPosition:L,menuShouldScrollIntoView:N},R=be.createElement(xT,Ee({},g,T),function(D){var G=D.ref,W=D.placerProps,j=W.placement,Y=W.maxHeight;return be.createElement(l,Ee({},g,T,{innerRef:G,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:b,placement:j}),be.createElement(J2,{captureEnabled:v,onTopArrive:k,onBottomArrive:O,lockEnabled:U},function($){return be.createElement(c,Ee({},g,{innerRef:function(oe){i.getMenuListRef(oe),$(oe)},innerProps:{role:"listbox","aria-multiselectable":g.isMulti,id:i.getElementId("listbox")},isLoading:b,maxHeight:Y,focusedOption:m}),E)}))});return V||L==="fixed"?be.createElement(u,Ee({},g,{appendTo:V,controlElement:this.controlRef,menuPlacement:P,menuPosition:L}),R):R}},{key:"renderFormField",value:function(){var i=this,s=this.props,o=s.delimiter,a=s.isDisabled,l=s.isMulti,c=s.name,u=s.required,h=this.state.selectValue;if(u&&!this.hasValue()&&!a)return be.createElement(tR,{name:c,onFocus:this.onValueInputFocus});if(!(!c||a))if(l)if(o){var d=h.map(function(m){return i.getOptionValue(m)}).join(o);return be.createElement("input",{name:c,type:"hidden",value:d})}else{var f=h.length>0?h.map(function(m,p){return be.createElement("input",{key:"i-".concat(p),name:c,type:"hidden",value:i.getOptionValue(m)})}):be.createElement("input",{name:c,type:"hidden",value:""});return be.createElement("div",null,f)}else{var g=h[0]?this.getOptionValue(h[0]):"";return be.createElement("input",{name:c,type:"hidden",value:g})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,s=this.state,o=s.ariaSelection,a=s.focusedOption,l=s.focusedValue,c=s.isFocused,u=s.selectValue,h=this.getFocusableOptions();return be.createElement(k2,Ee({},i,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:a,focusedValue:l,isFocused:c,selectValue:u,focusableOptions:h,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),s=i.Control,o=i.IndicatorsContainer,a=i.SelectContainer,l=i.ValueContainer,c=this.props,u=c.className,h=c.id,d=c.isDisabled,f=c.menuIsOpen,g=this.state.isFocused,m=this.commonProps=this.getCommonProps();return be.createElement(a,Ee({},m,{className:u,innerProps:{id:h,onKeyDown:this.onKeyDown},isDisabled:d,isFocused:g}),this.renderLiveRegion(),be.createElement(s,Ee({},m,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:d,isFocused:g,menuIsOpen:f}),be.createElement(l,Ee({},m,{isDisabled:d}),this.renderPlaceholderOrValue(),this.renderInput()),be.createElement(o,Ee({},m,{isDisabled:d}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,s){var o=s.prevProps,a=s.clearFocusValueOnUpdate,l=s.inputIsHiddenAfterUpdate,c=s.ariaSelection,u=s.isFocused,h=s.prevWasFocused,d=s.instancePrefix,f=i.options,g=i.value,m=i.menuIsOpen,p=i.inputValue,v=i.isMulti,x=Df(g),b={};if(o&&(g!==o.value||f!==o.options||m!==o.menuIsOpen||p!==o.inputValue)){var _=m?vR(i,x):[],y=m?qf(So(i,x),"".concat(d,"-option")):[],I=a?yR(s,x):null,A=bR(s,_),P=Vl(y,A);b={selectValue:x,focusedOption:A,focusedOptionId:P,focusableOptionsWithIds:y,focusedValue:I,clearFocusValueOnUpdate:!1}}var L=l!=null&&i!==o?{inputIsHidden:l,inputIsHiddenAfterUpdate:void 0}:{},V=c,U=u&&h;return u&&!U&&(V={value:ao(v,x,x[0]||null),options:x,action:"initial-input-focus"},U=!h),(c==null?void 0:c.action)==="initial-input-focus"&&(V=null),Ce(Ce(Ce({},b),L),{},{prevProps:i,ariaSelection:V,prevWasFocused:U})}}]),t}(w.Component);A0.defaultProps=mR;var CR=w.forwardRef(function(r,e){var t=ME(r);return be.createElement(A0,Ee({ref:e},t))}),w0=CR;const E0=(()=>{let r=!1;const e="AV2_UI_SETTINGS_CACHE",t="alignment-url";let n;const i=a=>{if(n!==void 0){const c=new URLSearchParams(window.location.search),u=new URLSearchParams;for(var l=0;l<n.length;l++){const h=n[l],d=a.get(h);d!==null?(c.set(h,d),u.set(h,d)):c.delete(h)}window.history.replaceState(null,"",`?${c.toString()}`),a.delete(t),localStorage.setItem(e,u.toString())}},s=a=>{const l=new URLSearchParams(window.location.search),c=new URLSearchParams(localStorage.getItem(e)?localStorage.getItem(e):void 0);for(const[u,h]of l)c.set(u,h);return!r&&!a&&(r=!0,i(c)),c},o=s(!0);return{setValidSavePropKeys:a=>{n=a,i(s())},getAlignmentUrlParam:()=>o.get(t),getCurrentValue:a=>s().get(a),getCurrentDeserializedValue:(a,l)=>{const c=s().get(a);return c===null?void 0:l(c)},updateValue:(a,l)=>{const c=s();l===void 0?c.delete(a):c.set(a,l),i(c)}}})();function _s(r){const{propKey:e,currentValue:t,defaultValue:n,useUrlAndLocalstorage:i,serialize:s}=r,o=s(t),a=w.useRef();if(i&&o!==a.current){const l=s(n);E0.updateValue(e,o!==l?o:void 0)}a.current=o}function _R(r){_s({propKey:r.propKey,currentValue:r.currentValue,defaultValue:r.defaultValue,serialize:r.serialize,useUrlAndLocalstorage:r.useUrlAndLocalstorage});const e=w.useMemo(()=>r.allPossibleValues.map(t=>({value:t.key,label:t.description})),[r.allPossibleValues]);return H.jsx(w0,{id:r.propKey,options:e,onChange:t=>{r.onChange(r.deserialize(t.value))},value:r.currentValue?e.find(t=>t.value===r.currentValue.key):void 0,isSearchable:!1})}function SR(r){_s({propKey:r.propKey,currentValue:r.currentValues,defaultValue:r.defaultValues,serialize:r.serialize,useUrlAndLocalstorage:r.useUrlAndLocalstorage});const e=w.useMemo(()=>r.allPossibleValues.map(n=>({value:n.key,label:n.description})),[r.allPossibleValues]),t=w.useCallback(n=>n.map(i=>r.allPossibleValues.find(s=>s.key===i.value)),[r.allPossibleValues]);return H.jsx(w0,{id:r.propKey,options:e,onChange:n=>{const i=t(n);r.onChange(i)},isMulti:!0,value:r.currentValues?e.reduce((n,i)=>(r.currentValues.find(s=>s.key===i.value)&&n.push(i),n),[]):void 0,isSearchable:!1})}function AR(r){const e=w.useMemo(()=>i=>i?"true":"false",[]),t=r.onChange,n=w.useCallback(i=>{t(i.target.checked)},[t]);return _s({propKey:r.propKey,currentValue:r.currentValue,defaultValue:r.defaultValue,serialize:e,useUrlAndLocalstorage:r.useUrlAndLocalstorage}),H.jsx("input",{id:r.propKey,name:r.propKey,type:"checkbox",checked:r.currentValue,onChange:n})}function wR(r){const{currentValue:e,minValue:t,maxValue:n,onChange:i}=r,s=w.useCallback(l=>l.toString(),[]);_s({propKey:r.propKey,currentValue:e,defaultValue:r.defaultValue,serialize:s,useUrlAndLocalstorage:r.useUrlAndLocalstorage});const o=w.useCallback(()=>{e+1<=n&&i(e+1)},[e,n,i]),a=w.useCallback(()=>{e-1>=t&&i(e-1)},[e,t,i]);return H.jsx("div",{className:"stepper-holder",children:H.jsxs("div",{className:"stepper",children:[H.jsx("button",{type:"button",disabled:e<=t,onClick:a,children:"－"}),H.jsx("span",{id:r.propKey,children:e}),H.jsx("button",{type:"button",disabled:e>=n,onClick:o,children:"＋"})]})})}exports.Alignment=gn;exports.AlignmentExampleFile=Mw;exports.AlignmentFileDrop=Ow;exports.AlignmentFileLoader=Bw;exports.AlignmentLoadError=Wl;exports.AlignmentLoader=Ci;exports.AlignmentSpreadsheet=Gm;exports.AlignmentSpreadsheetTable=Uc;exports.AlignmentTypes=Ot;exports.AlignmentViewer=Hm;exports.AlignmentViewerLayout=Dm;exports.AminoAcid=pn;exports.AminoAcidColorSchemes=dr;exports.BLOSUM62=lo;exports.DEFAULT_FONT_FAMILY=lm;exports.FastaAlignment=ta;exports.GlyphFactory=Uo;exports.IListOfPropObjects=Jr;exports.InputBooleanSetting=AR;exports.InputMultiSelectSetting=SR;exports.InputNumberSetting=wR;exports.InputSelectSetting=_R;exports.LogoFonts=jr;exports.LogoType=jo;exports.MONO_FONT_FAMILY=os;exports.MSABlocks=_u;exports.MSABlocksAndLetters=Vc;exports.MSALetters=km;exports.MiniMap=Mm;exports.MinimapDragger=Om;exports.Nucleotide=Nr;exports.NucleotideColorSchemes=fr;exports.Observable=bo;exports.PositionalAxis=cm;exports.PositionalBarplot=Nm;exports.PositionsToStyle=dt;exports.PreconfiguredPositionalBarplots=$o;exports.ReactResizeSensor=gs;exports.ResidueColoring=Jt;exports.ScrollbarOptions=at;exports.SequenceLogo=Bm;exports.SequenceSearch=Lm;exports.SequenceSorter=ar;exports.StockholmAlignment=ra;exports.VirtualScrollbar=Dc;exports.VirtualizationRole=St;exports.VirtualizationStrategy=Ut;exports.VirtualizedHorizontalViewer=vs;exports.VirtualizedMatrixViewer=pu;exports.VirtualizedVerticalViewer=am;exports.createMSABlockGenerator=Yi;exports.darkHueClass=rb;exports.downloadBarplotSVG=Ew;exports.downloadFullViewportSVG=Tw;exports.downloadLogoSVG=Iw;exports.generateUUIDv4=Hr;exports.getAlignmentFontDetails=Lc;exports.getCachedCanvasGenerators=Su;exports.getLetterClassNames=Kf;exports.getMaxStringCanvasWidth=Fc;exports.getParseError=Ln;exports.getPositionalAxisRuler=mu;exports.getURLParameters=R0;exports.globalSettingsUrlLocalStorageManager=E0;exports.lightHueClass=nb;exports.mapGroupBy=Ul;exports.reduxStore=im;exports.resiClassPrefix=qi;exports.residueParentClass=ib;exports.startEndIdxToArray=ea;exports.stringToColor=Yt;exports.useAppDispatch=sm;exports.useAppSelector=om;exports.useGlobalSettingsMiddleware=_s;exports.useListenForSearchKeypresses=Fm;exports.useReduxVirtualization=Vo;exports.useResizeGrid=di;exports.useStateCallback=T0;
//# sourceMappingURL=alignment-viewer-2.cjs.js.map
